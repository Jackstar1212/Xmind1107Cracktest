(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[8681],{70026:(t,e,r)=>{"use strict";var o=r(95318);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var a=o(r(71191)),n=r(48932),s=o(r(7322)),i=r(99492),c=o(r(24678)),u=r(90336);const p=a.default.parse(window.location.search.slice(1)),l={mindmap:{exportContentScope:0,exportBackground:!0},outliner:{exportContentScope:0,exportBackground:!0},pitch:{exportContentScope:0,exportBackground:!0}};var d={mixins:[s.default],data(){return{exportContentScope:0,exportToType:0,exportScale:1,exportBackground:!0,iconWarning:this.$toResourceURL("static/images/dialog-export-to-image/warning.svg"),iconLock:this.$toResourceURL("static/images/dialog-export-to-image/lock.svg"),exportAvailableScales:["100%","200%","300%"],currentExportCategory:"mindmap"}},computed:{exportContentScopeTypes(){return[this.$T("Current Sheet"),this.$T("Whole Workbook")]},validSubState:{get(){return this.$store.getters["activation/status"]===n.ACTIVATION_STATUS.VALID},set(){throw new Error("Not allow set subState.")}},exportCategories(){return{mindmap:this.$T("Mind Map"),outliner:this.$T("Outliner"),pitch:this.$T("Pitch")}},isDarkAppearance(){return"dark"===this.$store.getters["preferences/appearance"]},previewImg(){return this.$toResourceURL(`static/assets/images/dialog-export-to-pdf/${this.currentExportCategory}_${this.isDarkAppearance?"dark":"default"}.svg`)},bigMindMap(){return Math.max(p.bound[0],p.bound[1])*this.exportScale>3e4},touchBarItems(){return[{type:"space",size:"flexible"},{type:"button",label:this.$T("Cancel"),click:"close"},{type:"button",label:this.$T("Export"),backgroundColor:"primary",click:"doExport"},{type:"space",size:"flexible"}].filter(Boolean)}},watch:{async exportScale(t){t>1&&!await this.handlerForLimitedFeature()&&(this.exportScale=1)},exportContentScope(t){this.exportToType=t},currentExportCategory(t){"outliner"===t&&this.$store.commit(`${u.SHARED}/updateLoadOutlineMode`,!0),this.exportContentScope=l[t].exportContentScope,this.exportBackground=l[t].exportBackground}},methods:{doExport(){const t={contentScope:this.exportContentScope,exportTo:this.exportToType,transparent:!this.exportBackground,exportCategory:this.currentExportCategory};this.$safeRun((()=>{c.default.fetch((0,i.WINDOW_SUBMIT_RESULT)(window.id),t).then((()=>window.close()))}))},cancel(){window.close()},handlerForLimitedFeature:async()=>c.default.fetch(i.FEATURE_TRIAL_REQUEST,"action.export2ScalePdf"),switchCategory(t){this.currentExportCategory=t},onChangeBackground(){this.exportBackground=!this.exportBackground,l[this.currentExportCategory].exportBackground=this.exportBackground},onScopeChanged(t){this.exportContentScope=t,l[this.currentExportCategory].exportContentScope=t}},components:{WatermarkTemplate:{render(t){const e=this.$T("activating XMind"),r=this.$T("Watermark will be displayed before $1.",e),o=t("span",{class:"uk-button-link",on:{click:()=>c.default.fetch(i.WINDOW_OPEN,{name:"dialog-activate"})}},e),a=r.split(e).map((e=>t("span",e)));return t("div",{class:"uk-text-muted"},[a[0],o,a[1]])}}},mounted(){this.$store.state[u.SHARED].editorMode===n.EDITOR_MODE_OUTLINER&&(this.currentExportCategory="outliner")}};e.Z=d},7322:(t,e,r)=>{"use strict";var o=r(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(r(59713)),n=r(48932),s=r(99492),i=r(36414),c=o(r(24678));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){(0,a.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l={computed:{},watch:{touchBarItems(t){this.updateTouchBarItems(t)}},methods:{updateTouchBarItems(t){const e=t=>{const e=t.click;let r=this._touchBarRoutes[e];return r||(r={method:e,endpoint:(0,s.WINDOW_CALLBACK)(window.id,(0,i.hyphenate)(e))},this._touchBarRoutes[e]=r),r.unroute||(r.unroute=c.default.route(r.endpoint,this[e])),Object.assign({},t,{click:r.endpoint})};t=(t||this.touchBarItems||[]).map((t=>("button"!==t.type||"string"!=typeof t.click||n.WINDOW_ACTIONS.includes(t.click)||t.click.startsWith("command:")?"buttons"===t.type&&(t=p(p({},t),{},{buttons:t.buttons.map((t=>"string"!=typeof t.click||n.WINDOW_ACTIONS.includes(t.click)||t.click.startsWith("command:")?t:e(t)))})):t=e(t),t))),this.$store.commit("window/updateTouchBarItems",{items:t})}},beforeCreate(){this._touchBarRoutes={}},mounted(){this.updateTouchBarItems()},beforeDestroy(){Object.values(this._touchBarRoutes).forEach((({unroute:t})=>t&&t())),this._touchBarRoutes={}}};e.default=l},75853:(t,e,r)=>{"use strict";var o=r(95318),a=o(r(59713)),n=o(r(71191)),s=o(r(2872)),i=o(r(6315)),c=o(r(35746)),u=r(90336),p=o(r(90647));function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){(0,a.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const h=n.default.parse(location.search.slice(1));(0,s.default)(p.default,{name:"dialog-export-to-pdf",storeModules:{[u.SHARED]:d(d({},c.default),{},{remoteNamespace:(0,u.EDITOR_SHARED_WITH_ID)(h.editorId)}),themeEditor:i.default}})},56148:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});var o=r(94015),a=r.n(o),n=r(23645),s=r.n(n)()(a());s.push([t.id,"\ntable tr[data-v-221b9ac4] {\n  height: 30px;\n}\n.uk-text-muted[data-v-221b9ac4] {\n  font-size: 12px;\n  line-height: 1.3;\n}\n.preview[data-v-221b9ac4] {\n  border-radius: 6px;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n}\n.preview.is-dark[data-v-221b9ac4] {\n  box-shadow: 0px 4px 6px 0px rgba(0, 0, 0, 0.2);\n}\n.uk-window-button-bar[data-v-221b9ac4] {\n  min-height: 50px;\n  padding-top: 0;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/dialog-export-to-pdf/app.vue"],names:[],mappings:";AACA;EACE,YAAY;AACd;AACA;EACE,eAAe;EACf,gBAAgB;AAClB;AACA;EACE,kBAAkB;EAClB,+CAA+C;AACjD;AACA;EACE,8CAA8C;AAChD;AACA;EACE,gBAAgB;EAChB,cAAc;AAChB",sourcesContent:["\ntable tr[data-v-221b9ac4] {\n  height: 30px;\n}\n.uk-text-muted[data-v-221b9ac4] {\n  font-size: 12px;\n  line-height: 1.3;\n}\n.preview[data-v-221b9ac4] {\n  border-radius: 6px;\n  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.15);\n}\n.preview.is-dark[data-v-221b9ac4] {\n  box-shadow: 0px 4px 6px 0px rgba(0, 0, 0, 0.2);\n}\n.uk-window-button-bar[data-v-221b9ac4] {\n  min-height: 50px;\n  padding-top: 0;\n}\n"],sourceRoot:""}]);const i=s},90647:(t,e,r)=>{"use strict";r.r(e),r.d(e,{__esModule:()=>o.X,default:()=>n});var o=r(70026);var a=function(t){r(36650)};const n=(0,r(62236).Z)(o.Z,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"uk-window uk-window-dialog uk-window-dialog-default",attrs:{id:"app"}},[r("div",{staticClass:"uk-window-title-bar uk-window-title-bar-floating"},[r("window-control-button-group")],1),t._v(" "),r("div",{staticClass:"uk-window-body uk-flex"},[r("div",{staticClass:"uk-flex uk-flex-middle uk-flex-center",staticStyle:{width:"190px","padding-top":"49px"}},[r("img",{staticClass:"preview",class:{isDark:t.isDarkAppearance},attrs:{draggable:"false","uk-img":"","data-src":t.previewImg,alt:""}})]),t._v(" "),r("div",{staticClass:"uk-panel uk-margin-top uk-padding-large uk-padding-remove-left uk-flex uk-flex-column uk-height-expand"},[r("h1",{staticClass:"uk-text-bold"},[t._v("\n        "+t._s(t.$T("Export to PDF"))+"\n      ")]),t._v(" "),r("div",{staticClass:"uk-flex uk-margin-bottom"},[r("ul",{staticClass:"uk-tab uk-tab-capsule uk-flex uk-flex-nowrap uk-padding-remove uk-margin-remove uk-flex-middle uk-flex-no-shrink"},t._l(Object.keys(t.exportCategories),(function(e){return r("li",{key:e,class:{"uk-active":e===t.currentExportCategory},on:{click:function(r){return t.switchCategory(e)}}},[r("a",{attrs:{draggable:"false",href:"#"}},[t._v(t._s(t.exportCategories[e]))])])})),0)]),t._v(" "),r("table",[r("tr",{staticClass:"uk-margin-top uk-margin-small"},[r("td",{staticStyle:{"text-align":"right"}},[r("label",{staticClass:"uk-form-label uk-text-nowrap"},[t._v(t._s(t.$T("Export:")))])]),t._v(" "),r("td",{staticStyle:{width:"100%"}},[r("div",{staticClass:"uk-form-controls uk-margin-small-left"},[r("button",{staticClass:"uk-button uk-button-popover-toggle uk-select-icon uk-text-left uk-width-small",staticStyle:{width:"176px"},attrs:{name:"content"}},[t._v("\n                "+t._s(t.exportContentScopeTypes[t.exportContentScope])+"\n              ")]),t._v(" "),r("div",{attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] button"}},[r("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},t._l(t.exportContentScopeTypes,(function(e,o){return r("li",{key:o},[r("button",{class:{"uk-checked":t.exportContentScope===o},on:{click:function(e){return t.onScopeChanged(o)}}},[t._v("\n                      "+t._s(e)+"\n                    ")])])})),0)])])])]),t._v(" "),"outliner"!==t.currentExportCategory?r("tr",{staticClass:"uk-margin-small"},[r("td",{staticStyle:{"text-align":"right"}},[r("label",{staticClass:"uk-form-label uk-text-nowrap"},[t._v(t._s(t.$T("Options:")))])]),t._v(" "),r("td",{staticStyle:{width:"100%"}},[r("div",{staticClass:"uk-form-controls uk-margin-small-left"},[r("div",[r("label",[r("input",{staticClass:"uk-checkbox uk-margin-xsmall-right",attrs:{type:"checkbox",name:"transparent"},domProps:{checked:t.exportBackground},on:{input:t.onChangeBackground}}),t._v("\n                  "+t._s(t.$T("Background Color"))+"\n                ")])])])])]):t._e()]),t._v(" "),t.validSubState?t._e():r("div",[r("WatermarkTemplate")],1),t._v(" "),"pitch"!==t.currentExportCategory?[r("hr",{staticClass:"uk-margin-xsmall-bottom"}),t._v(" "),r("div",{staticClass:"uk-flex-column uk-text-muted"},[t._v("\n          "+t._s(t.$T("To change PDF layout settings, choose File > Print > Save as PDF."))+"\n        ")])]:t._e()],2)]),t._v(" "),r("div",{staticClass:"uk-window-button-bar"},[r("div",{staticClass:"uk-button-group"},[r("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"submit",autofocus:""},on:{click:t.doExport}},[t._v("\n        "+t._s(t.$T("Export"))+"\n      ")]),t._v(" "),r("button",{staticClass:"uk-button uk-button-default",attrs:{type:"button"},on:{click:t.cancel}},[t._v("\n        "+t._s(t.$T("Cancel"))+"\n      ")])])])])}),[],!1,a,"data-v-221b9ac4",null).exports},36650:(t,e,r)=>{var o=r(56148);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);(0,r(45346).Z)("235b8930",o,!0,{})},76417:t=>{"use strict";t.exports=require("crypto")},58933:t=>{"use strict";t.exports=require("electron")},28614:t=>{"use strict";t.exports=require("events")},35747:t=>{"use strict";t.exports=require("fs")},12087:t=>{"use strict";t.exports=require("os")},85622:t=>{"use strict";t.exports=require("path")},87525:t=>{"use strict";t.exports=require("posthtml")},71191:t=>{"use strict";t.exports=require("querystring")},31669:t=>{"use strict";t.exports=require("util")}},t=>{"use strict";t.O(0,[8592,5586,4736,2872],(()=>{return e=75853,t(t.s=e);var e}));var e=t.O();module.exports=e}]);