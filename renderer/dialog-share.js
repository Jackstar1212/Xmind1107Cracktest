(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[1011],{31500:(e,t,a)=>{"use strict";var o=a(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=o(a(71191)),i=o(a(24678)),r=a(48932),l=a(99492),n=o(a(7322));const u=s.default.parse(location.search.substr(1));var c={mixins:[n.default],data:()=>({errorText:"",mapNameModel:u.mapName,descriptionModel:"",backgroundColor:u.backgroundColor,uploadIndexModel:0,uploading:!1,shareType:u.type,shareToGallery:!1}),computed:{uploadTypes(){return[{key:"CURRENT_SHEET",value:this.$T("Current Sheet")},{key:"WHOLE_WORKBOOK",value:this.$T("Whole Workbook")}]},touchBarItems(){return[{type:"space",size:"flexible"},{type:"button",label:this.$T("Cancel"),click:"close"},{type:"button",label:this.$T("Upload"),backgroundColor:"primary",click:"upload"},{type:"space",size:"flexible"}].filter(Boolean)},heading(){return{blog:this.$T("Share to Blog"),facebook:this.$T("Share to Facebook"),twitter:this.$T("Share to Twitter"),pinterest:this.$T("Share to Pinterest"),linkedin:this.$T("Share to LinkedIn"),biggerplate:this.$T("Share Map on Biggerplate"),"xmind share":this.$T("XMind Share")}[u.type]},tip(){return{biggerplate:this.$T("This map will be uploaded to XMind.net to post on Biggerplate."),blog:this.$T("This map will be uploaded to XMind.net to post on your blog."),facebook:this.$T("This map will be uploaded to XMind.net to post on Facebook."),twitter:this.$T("This map will be uploaded to XMind.net to post on Twitter."),pinterest:this.$T("This map will be uploaded to XMind.net to post on Pinterest."),linkedin:this.$T("This map will be uploaded to XMind.net to post on Linkedin."),"xmind share":this.$T("This map will be uploaded to XMind.net.")}[u.type]}},methods:{close(){window.close()},async upload(){this.errorText="",this.uploading=!0;const e={title:this.mapNameModel,description:this.descriptionModel,lang:"all",preview:this.preview,isPrivate:!this.shareToGallery,uploadSheetTypes:this.uploadTypes[this.uploadIndexModel].key},t=await i.default.fetch((0,l.EDITOR_SHARE_TO_LIBRARY)(u.editorId),e);this.uploading=!1,t&&t.code?t.code===r.E_UNAUTHORIZED?(await i.default.fetch(l.STORE_COMMIT,{mutations:[{type:"account/clearAccount"}]}),await i.default.fetch(l.WINDOW_OPEN,{name:"dialog-signin"})):this.errorText=this.$T("File upload failed, please check your network and try again later."):setTimeout((()=>{window.close()}),0)},openXMindGallery(){i.default.fetch(l.XOS.GO_LIBRARY_MORE_MAPS)}},components:{privacyOptionTemplate:{props:["linkClickHanlder"],render(e){const t=this.$T("XMind Gallery"),a=this.$T("I agree this mind map can be displayed on $1 and downloaded by other users.",t),o=e("span",{class:"uk-link",style:{whiteSpace:"nowrap"},on:{click:e=>{e.preventDefault(),e.stopPropagation(),this.linkClickHanlder()}}},t),s=a.split(t).map((t=>e("span",t)));return e("span",[s[0],o,s[1]])}}}};t.Z=c},7322:(e,t,a)=>{"use strict";var o=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(59713)),i=a(48932),r=a(99492),l=a(36414),n=o(a(24678));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={computed:{},watch:{touchBarItems(e){this.updateTouchBarItems(e)}},methods:{updateTouchBarItems(e){const t=e=>{const t=e.click;let a=this._touchBarRoutes[t];return a||(a={method:t,endpoint:(0,r.WINDOW_CALLBACK)(window.id,(0,l.hyphenate)(t))},this._touchBarRoutes[t]=a),a.unroute||(a.unroute=n.default.route(a.endpoint,this[t])),Object.assign({},e,{click:a.endpoint})};e=(e||this.touchBarItems||[]).map((e=>("button"!==e.type||"string"!=typeof e.click||i.WINDOW_ACTIONS.includes(e.click)||e.click.startsWith("command:")?"buttons"===e.type&&(e=c(c({},e),{},{buttons:e.buttons.map((e=>"string"!=typeof e.click||i.WINDOW_ACTIONS.includes(e.click)||e.click.startsWith("command:")?e:t(e)))})):e=t(e),e))),this.$store.commit("window/updateTouchBarItems",{items:e})}},beforeCreate(){this._touchBarRoutes={}},mounted(){this.updateTouchBarItems()},beforeDestroy(){Object.values(this._touchBarRoutes).forEach((({unroute:e})=>e&&e())),this._touchBarRoutes={}}};t.default=d},87611:(e,t,a)=>{"use strict";var o=a(95318),s=o(a(2872)),i=o(a(39679));(0,s.default)(i.default,{name:"dialog-share"})},70728:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var o=a(94015),s=a.n(o),i=a(23645),r=a.n(i)()(s());r.push([e.id,"\n.uk-form-label[data-v-196c9391] {\n  min-width: 50px;\n  text-align: right;\n  margin-right: 8px;\n  height: 25px;\n  display: block;\n  line-height: 24px;\n  white-space: nowrap;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/dialog-share/app.vue"],names:[],mappings:";AACA;EACE,eAAe;EACf,iBAAiB;EACjB,iBAAiB;EACjB,YAAY;EACZ,cAAc;EACd,iBAAiB;EACjB,mBAAmB;AACrB",sourcesContent:["\n.uk-form-label[data-v-196c9391] {\n  min-width: 50px;\n  text-align: right;\n  margin-right: 8px;\n  height: 25px;\n  display: block;\n  line-height: 24px;\n  white-space: nowrap;\n}\n"],sourceRoot:""}]);const l=r},39679:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__esModule:()=>o.X,default:()=>i});var o=a(31500);var s=function(e){a(48856)};const i=(0,a(62236).Z)(o.Z,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uk-window uk-window-dialog"},[a("div",{staticClass:"uk-window-title-bar uk-window-title-bar-floating"},[a("window-control-button-group")],1),e._v(" "),a("div",{staticClass:"uk-window-body uk-padding-large"},[a("h1",{staticClass:"uk-margin-small-bottom"},[e._v(e._s(e.heading))]),e._v(" "),a("div",{staticClass:"uk-margin-medium-bottom"},[e._v(e._s(e.tip))]),e._v(" "),a("figure",{staticClass:"uk-flex uk-flex-between uk-margin-remove-bottom"},[a("figcaption",{staticClass:"uk-flex-auto uk-flex-column uk-flex-between uk-flex"},[a("div",{staticClass:"uk-flex uk-flex-left"},[a("div",{staticClass:"uk-form-controls"},[a("label",{staticClass:"uk-form-label uk-flex-none"},[e._v(e._s(e.$T("Upload"))+":")]),e._v(" "),a("label",{staticClass:"uk-form-label uk-flex-none uk-margin-xsmall-top"},[e._v(e._s(e.$T("Option"))+":")])]),e._v(" "),a("div",{staticClass:"uk-form-controls"},[a("button",{staticClass:"uk-button uk-button-popover-toggle uk-select-icon uk-text-left uk-margin-small-bottom",style:{width:"176px"}},[e._v("\n              "+e._s((e.uploadTypes[e.uploadIndexModel]||{}).value)+"\n            ")]),e._v(" "),a("div",{attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] button"}},[a("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},e._l(e.uploadTypes,(function(t,o){return a("li",{key:o},[a("button",{class:{"uk-checked":e.uploadTypes===o},on:{click:function(t){e.uploadIndexModel=o}}},[e._v("\n                    "+e._s(t.value)+"\n                  ")])])})),0)]),e._v(" "),a("div",{staticClass:"uk-flex"},[a("span",{staticClass:"uk-margin-small-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.shareToGallery,expression:"shareToGallery"}],staticClass:"uk-checkbox",attrs:{type:"checkbox",name:"shareToGallery"},domProps:{checked:Array.isArray(e.shareToGallery)?e._i(e.shareToGallery,null)>-1:e.shareToGallery},on:{change:function(t){var a=e.shareToGallery,o=t.target,s=!!o.checked;if(Array.isArray(a)){var i=e._i(a,null);o.checked?i<0&&(e.shareToGallery=a.concat([null])):i>-1&&(e.shareToGallery=a.slice(0,i).concat(a.slice(i+1)))}else e.shareToGallery=s}}})]),e._v(" "),a("span",{on:{click:function(t){e.shareToGallery=!e.shareToGallery}}},[a("privacyOptionTemplate",{attrs:{"link-click-hanlder":e.openXMindGallery}})],1)])])])])])]),e._v(" "),a("div",{staticClass:"uk-window-button-bar"},[a("div",{staticClass:"uk-button-group"},[a("button",{staticClass:"uk-button uk-button-primary",attrs:{disabled:e.uploading},on:{click:e.upload}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"uk-text-middle",attrs:{"uk-spinner":"ratio: 0.6"}}),e._v(" "),a("span",{staticClass:"uk-text-middle"},[e._v("\n          "+e._s("xmind share"===e.shareType?e.$T("Upload & Create Link"):e.$T("Upload"))+"\n        ")])]),e._v(" "),a("button",{staticClass:"uk-button uk-button-default",on:{click:e.close}},[e._v("\n        "+e._s(e.$T("Cancel"))+"\n      ")])]),e._v(" "),a("div",{staticClass:"uk-text-danger"},[e._v("\n      "+e._s(e.errorText)+"\n    ")])])])}),[],!1,s,"data-v-196c9391",null).exports},48856:(e,t,a)=>{var o=a(70728);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,a(45346).Z)("c16d6846",o,!0,{})},76417:e=>{"use strict";e.exports=require("crypto")},58933:e=>{"use strict";e.exports=require("electron")},28614:e=>{"use strict";e.exports=require("events")},35747:e=>{"use strict";e.exports=require("fs")},12087:e=>{"use strict";e.exports=require("os")},85622:e=>{"use strict";e.exports=require("path")},87525:e=>{"use strict";e.exports=require("posthtml")},71191:e=>{"use strict";e.exports=require("querystring")},31669:e=>{"use strict";e.exports=require("util")}},e=>{"use strict";e.O(0,[8592,5586,4736,2872],(()=>{return t=87611,e(e.s=t);var t}));var t=e.O();module.exports=t}]);