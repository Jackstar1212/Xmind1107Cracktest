(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[1189],{56125:e=>{"use strict";e.exports=JSON.parse('{"EVERNOTE":{"API_CONSUMER_KEY":"maaail","API_CONSUMER_SECRET":"e0d6fee866785ee7","SANDBOX":true,"CHINA":false},"BIGGERPLATE":{"CLIENT_ID":"K9FIvBKyOCYhS1Q1i6ov2YuC5FZ7iXOVzTdBS7GD","CLIENT_SECRET":"Uoe5YUPf14wkes5Gy5HIwTygMxPGe7hrztVMuIGU"}}')},85886:(e,t)=>{"use strict";Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var o={name:"ColorWall",props:{gridOptions:{type:Array,default:()=>[]},value:{type:String,default:""}},data(){return{internalValue:this.normalizeValue(this.value)}},computed:{computedGridOptions(){const e=new Set;return this.gridOptions.map((e=>"string"==typeof e?{value:this.normalizeValue(e)}:Object.assign({},e,{value:this.normalizeValue(e.value)}))).filter((({value:t})=>!e.has(t)&&(e.add(t),!0)))}},watch:{value(e){this.internalValue=this.normalizeValue(e)}},methods:{normalizeValue:e=>e&&/#[0-9a-f]{6}/i.test(e)?e.toUpperCase():e,handleClickInsideColorPicker({target:e}){(e=this.getButton(e))&&e.hasAttribute("value")&&(this.internalValue=this.normalizeValue(e.getAttribute("value")),this.$emit("input",this.internalValue))},getButton(e){for(;e&&e.classList;){if(e.classList.contains("uk-color-picker-button"))return e;e=e.parentNode}return null}}};t.Z=o},23664:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(24186));let r=1;var a={name:"ColorWell",components:{colorWall:i.default},props:{name:{type:String,default:""},value:{type:String,default:""},inputId:{type:String,default:""},popoverPos:{type:String,default:"left-center"},noneValue:{type:String,default:""},intermediateValue:{type:String,default:"intermediate"},iconUrl:{type:String,default:null},gridOptions:{type:Array,default:()=>[]},autofocusOnClose:{type:Boolean,default:!1},title:{type:String,default:""},colorValueTooltips:{type:String,default:""},colorOpacityTooltips:{type:String,default:""},colorSelectorTooltips:{type:String,default:""}},data(){const e=r.toString();return r++,{internalValue:this.normalizeValue(this.value),internalInputId:`uk_color_well_input_${e}`,initValue:""}},computed:{computedInputId(){return this.inputId||this.internalInputId},computedInputValue(){return this.noneValue&&this.value===this.noneValue?"":this.noneValue&&this.internalValue===this.noneValue||this.internalValue===this.intermediateValue?"#000000":this.internalValue||"#000000"},computedInputColor(){return this.iconUrl||this.noneValue&&this.internalValue===this.noneValue||this.internalValue===this.intermediateValue?"":this.internalValue},computedColorTypeValue(){return this.computedInputValue.slice(0,7)},computedOpacity(){return!this.computedInputValue||this.computedInputValue.length<=7?"FF":this.computedInputValue.slice(7,9)},computedOpacityNumber(){return parseInt(parseInt(this.computedOpacity,16)/255*100)}},watch:{value(e){this.internalValue=this.normalizeValue(e)}},methods:{handleColorInput(e){this.internalValue=e+this.computedOpacity,this.$emit("input",this.internalValue)},normalizeValue:e=>e&&/#[0-9a-f]{6}/i.test(e)?e.toUpperCase():e,handleHexInput(e){let t=e.target.value;if(this.value!==this.noneValue||""!==t){if(t=t.replace(/^#/,""),t.length>6)t="FFFFFF";else for(t=t.replace(/[^0-9a-f]/gi,"0"),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);6!==t.length;)t+="0";this.internalValue="#"+t+this.computedOpacity,this.$emit("input",this.internalValue)}},colorCompletion(e){if(e.length<=1||e.length>7)return e;let t=e;for(;t.length<7;)t+=e.slice(-1);return t},handleOpacityInput(e){let t=parseInt(e.target.value);t||0===t||(t=100),t<0&&(t=0),t>100&&(t=100);let o=Math.ceil(t/100*255).toString(16);1===o.length&&(o=`0${o}`),this.internalValue=this.colorCompletion(this.computedColorTypeValue)+o,this.$emit("input",this.internalValue)},handleInputClick({target:e}){e.value=this.computedInputValue}},mounted(){this.$withUIKit((e=>{e.util.on(this.$refs.popover,"show",(()=>{this.initValue=this.internalValue,this.$emit("popover-show")})),e.util.on(this.$refs.popover,"hidden",(()=>{this.initValue.length<this.internalValue.length&&(this.initValue=this.initValue+"FF"),this.internalValue=this.internalValue.toUpperCase(),this.initValue=this.initValue.toUpperCase(),this.internalValue!==this.initValue&&this.$emit("recent-color-change",this.internalValue),this.$emit("popover-hide")}))}))}};t.Z=a},53646:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=o(20629),a=o(90336),s=o(83450),l=n(o(41971)),c=n(o(22918));function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var p={components:{workbench:l.default,mapshot:c.default},data:function(){return{isWin:"win32"===process.platform,internalTouchBarItems:[]}},computed:u(u({touchBarItems(){return this.internalTouchBarItems}},(0,r.mapState)(a.SHARED,["mapShot"])),(0,r.mapState)({currentSpellCheckValue:e=>e.preferences.spellCheck})),mounted:function(){(0,s.trackEvent)({eventAction:"openMindMapEditor"}),setTimeout((()=>{this.$store.registerCommands([{id:"closeAllPopover",provider:`editor/${window.editorId}`,enabledFn:()=>this.$store.getters[`${a.SHARED}/aggregatedContexts`]["focus.popover"]||this.$store.getters[`${a.SHARED}/aggregatedContexts`]["focus.input"],handler:()=>{this.closePopover()}}])}),0)},methods:{closePopover(){this.$refs.workbench.$el.querySelectorAll("[uk-popover]").forEach((e=>{this.$withUIKit((t=>{t.pop(e).close()}))})),this.$refs.workbench.$el.querySelectorAll("[uk-contextual-popover]").forEach((e=>{this.$withUIKit((t=>{t.pop(e).close()}))})),this.$refs.workbench.$el.querySelectorAll("[data-dropdown]").forEach((e=>{this.$withUIKit((t=>{t.pop(e).close()}))})),this.$store.commit("focus/updateLastFocusedElementTag",null)}}};t.Z=p},69735:(e,t)=>{"use strict";Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var o={name:"Popover",directives:{focus:{inserted:function(e){e.focus()}}},props:{width:{type:String,required:!0,validator:function(e){return e.endsWith("px")}},height:{type:String,validator:function(e){return!e||e.endsWith("px")}},hostLeft:{required:!0},hostRight:{required:!0},hostTop:{require:!0},hostBottom:{required:!0}},computed:{targetBounds:function(){return{top:this.hostTop+"px",left:this.hostLeft+"px",width:this.hostRight-this.hostLeft+"px",height:this.hostBottom-this.hostTop+"px"}}},mounted:function(){this.$nextTick((()=>{this.$withUIKit((e=>{e.util.on(this.$refs.popoverBox,"hidden",(()=>{this.$emit("popover:close")}))}))})),this.$store.unregisterCommands([{id:"escape",provider:`editor/${window.editorId}/popover`}]),this.$store.registerCommands([{id:"escape",provider:`editor/${window.editorId}/popover`,enabledFn:()=>!0,handler:()=>{this.close()}}])},beforeDestroy:function(){this.$store.unregisterCommands([{id:"escape",provider:`editor/${window.editorId}/popover`}])},methods:{close:function(){this.$withUIKit((e=>{const t=e.pop(this.$refs.popoverBox);t&&t.close()})),this.$emit("popover:close")},show:function(){this.$withUIKit((e=>{e.pop(this.$refs.popoverBox).show()}))},hide:function(){this.$withUIKit((e=>{e.pop(this.$refs.popoverBox).hide()}))}}};t.Z=o},53848:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=o(20629);function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var s={props:{description:{type:Object,default:()=>({index:"2",title:(void 0).$T("default title"),text:(void 0).$T("default text"),center:!1})}},data:function(){return{showText:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},(0,r.mapState)("workbench",["isTopbarTextVisible"])),watch:{isTopbarTextVisible(){this.showText=this.isTopbarTextVisible}},mounted(){this.showText=this.isTopbarTextVisible}};t.Z=s},50400:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=n(o(85622)),a=o(20629),s=o(58933),l=n(o(2286)),c=n(o(61027)),d=n(o(71171)),u=o(36414),p=o(95287),h=o(83450),f=n(o(30486)),m=n(o(90093)),g=o(90336),v=o(48932);function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function A(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const E=n(o(11222)).default.for("outliner"),{ADD_SUB_TOPIC:T,DELETE_ITEM:y,CHANGE_TITLE:C,INSERT_AUDIO_NOTES:S}=c.default.constant.ACTION_NAMES,k="recording",w="recordCompleted",x="playing",I="paused",_="ended",B=0,{VIEW_TYPE:O}=c.default.constant;var M={name:"Audiobar",components:{tooltips:f.default},props:{visible:{type:Boolean,default:!0}},data:function(){return{audioBarVisible:!1,audioFileUrl:"",audioStatus:"",playerTimeString:"00 : 00 : 00",recordTimeString:"00 : 00 : 00",description:{index:"5",text:"Click to Start",center:!0},audioBarTips:!1}},created(){this.savingAudioDataStatus=!1,this.audio=null,this.selection=[],this.autoplay=!1,this.audioDuration=0},computed:A(A({},(0,a.mapState)("editor",["sbEditor","audioBarMode","selectionObs","audioAutoplay","document"])),{},{isZenMode(){return this.$store.state[g.SHARED].zenMode},isOutlineMode(){return this.$store.state[g.SHARED].editorMode===v.EDITOR_MODE_OUTLINER},hasSelection(){if(this.isOutlineMode)return!0;{const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return!1;if(this.selectionObs&&""===this.audioStatus&&this.audioBarVisible){return e.getSelections().filter((e=>e.type===O.BRANCH)).length>0}}},recordDisabled(){if(""===this.audioStatus&&this.audioBarVisible)return"audio_record"===this.audioBarMode&&!this.hasSelection&&""===this.audioStatus}}),watch:{audioBarMode(e,t){if(e!==t||"open_new_audio_play"===e)switch(this.savingAudioDataStatus=!1,e){case"audio_record":this.audio&&(this.resetAudioSrc(),this.clearRecordTimer(),this.recordTimeString="00 : 00 : 00",this.audioStatus=""),this.initMediaDevices();break;case"audio_play":this.audioBarVisible=!0,this._prepareAudio();break;case"open_new_audio_play":this.audio&&(this.clearRecordTimer(),this.recordTimeString="00 : 00 : 00",this.audioStatus="",this.autoplay=!1),this.audioBarVisible=!0,this._prepareAudio();break;default:this.audioBarVisible=!1}},audioBarVisible(){this.$parent&&this.$parent.updateEditorSize&&this.$parent.updateEditorSize()}},mounted:function(){},methods:{_prepareAudio(){const e=this.getAudioFilePath();e?(this.autoplay=!!this.audioAutoplay,this.autoplay&&(this.audioStatus=x),this.audioFileUrl=`file://${e}`,this.audio?(this.audio.src=this.audioFileUrl,this.audio.autoplay=this.autoplay):this.audio=this.createAudio(this.audioFileUrl,this.autoplay)):this.closeAudioBarAndReset(),this.getDuration(`file://${e}`,(()=>{setTimeout((()=>{this.playerTimeRemaining(!0)}),10)}))},getClassByAduioStatus(e){switch(e){case k:return"audio-stop";case w:return"audio-play";case x:return"audio-pause";case I:case _:return"audio-play";default:return this.recordDisabled?"audio-disabled":"audio-default"}},createAudio(e,t){const o=new Audio(e);return o.autoplay=t,o.preload=!0,o.addEventListener("play",(()=>{this.onAudioStateChange("play")})),o.addEventListener("pause",(()=>{this.onAudioStateChange("pause")})),o.addEventListener("ended",(()=>{this.onAudioStateChange("ended")})),o.addEventListener("error",(e=>{console.log("Error "+o.error.code+"; details: "+o.error.message)})),o},initMediaDevices(){this.audioBarVisible=!0,this.audioBarTips=!s.remote.app.vud.getModule("audioBar").get("tips"),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((e=>{let t=new m.default(e);this.audioRecorder=t})).catch((()=>{this.closeAudioBarAndReset(),(0,p.showMessageBox)({type:"error",title:"XMind",message:this.$T("Audio Note is Disabled"),detail:this.$T("Audio note is disabled because no recorder device is detected.")})}))},resetAudioSrc(){const e=this.audio.pause();e&&e.catch((()=>this.closeAudioBarAndReset())),this.audio.removeAttribute("src"),this.audio.load()},getAudioFilePath(){const e=this.$store.state.editor.audioFilePath;if(e&&l.default.existsSync(e))return e;let t;if(this.isOutlineMode){const e=E.state.currentEditingTopicId||E.tidySelection()[0];if(!e||!E.ownerSheet)return;const o=E.ownerSheet.findComponentById(e).getAudioNotes();o&&o.resourcePath&&o.resourcePath.length>0&&(t=o.resourcePath[0])}else{const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return;const o=e.getSelections()[0];if(!o||!o.model)return;const n=o.model.getAudioNotes&&o.model.getAudioNotes();if(n&&n.resourceRefs)if(Array.isArray(n.resourceRefs)){if(!n.resourceRefs.length)return;t=n.resourceRefs[0]}else t=n.resourceRefs}if(t){const e=r.default.join(this.$store.state.wd.tempStorage,t.replace("xap:",""));if(l.default.existsSync(e))return e}},clickRecord(){this.recordDisabled||this.savingAudioDataStatus||(this.audioStatus!==k?this.startRecord():this.doneRecord())},clickPlay(){const e=this.audio;if(e)if(e.paused){const t=e.play();t&&t.catch((()=>this.closeAudioBarAndReset()))}else{const t=e.pause();t&&t.catch((()=>this.closeAudioBarAndReset()))}},getDuration(e,t){const o=new Audio(e);o.addEventListener("durationchange",(e=>{o.duration!=1/0&&(this.audioDuration=o.duration,o.remove(),t())}),!1),o.load(),o.currentTime=86400,o.volume=0;const n=o.play();n&&n.then((()=>{o.pause()})).catch((()=>{console.log("")}))},onAudioStateChange(e){switch(e){case"play":this.audioStatus=x,this.playerTimeRemaining(),this.resumePlayerTimer();break;case"pause":this.audioStatus=I,this.clearPlayerTimer(),this.playerTimeRemaining();break;case"ended":this.audioStatus=_,this.clearPlayerTimer(),this.playerTimeRemaining(!0)}},playerTimeRemaining(e){const t=this.audio;if(t){const o=this.audioDuration,n=t.currentTime;this.playerTimeString=this.toTimeString(1e3*(e?o:o-n))}},clearPlayerTimer(){this.recordTimer&&(clearInterval(this.recordTimer),this.recordTimer=null)},resumePlayerTimer(){this.clearRecordTimer();const e=this.audio;e&&(this.recordTimer=setInterval((()=>{this.playerTimeString=this.toTimeString(1e3*(this.audioDuration-e.currentTime))}),1e3))},async startRecord(){if(this.audioRecorder){if(this.audioBarTips&&(s.remote.app.vud.getModule("audioBar").set("tips",!0),this.audioBarTips=!1),this.isOutlineMode){const e=E.state.currentEditingTopicId||E.tidySelection()[0];if(!e)return;const t=(0,d.default)(),o=(new Date).toLocaleString();this.$store.handleCommand("outliner.insertEmptySubTopic",{topicId:e,newTopicId:t,title:o,refresh:!0}),this.recordTime=o,await this.$nextTick(),this.selection={id:t}}else{const e=this.$store.state.editor.sbEditorWrapper.value;e&&e.execAction(T).then((()=>{this.selection=e.getSelections()[0],this._prepareRecord(e)}))}this.audioRecorder.start(),this.audioStatus=k,this.$store.commit("editor/AUDIO_RECORDING",{audioRecording:!0}),this.resumeRecordTimer(),(0,h.trackEvent)({eventCategory:"WorkBench",eventAction:"recordAudio"})}},_prepareRecord(e){this.topicTitle=(new Date).toLocaleString(),e.execAction(C,{newTitle:this.topicTitle});const t=e.getSelections()[0];t&&(this.topicId=t.model.id,this.topicIds=[],this._collectBranchIdChain(t))},_collectBranchIdChain(e){const t=e.parent();t&&t.type==O.BRANCH&&(this.topicIds.push(t.model.id),this._collectBranchIdChain(t))},doneRecord(e=!1){if(this.savingAudioDataStatus=!0,this.clearRecordTimer(),setTimeout((()=>{this.recordTimeString="00 : 00 : 00"}),0),this.closeAfterDone=e,this.$store.commit("editor/AUDIO_RECORDING",{audioRecording:!1}),this.audioRecorder)if(this.audioRecorder.stop(),this.audioRecorder.isEmpty){if(this.isOutlineMode)this.$store.handleCommand("outliner.delete",{topicId:this.selection.id});else{const e=this.$store.state.editor.sbEditorWrapper.value;e&&e.execAction(y,{targets:[this.selection]})}this.closeAudioBarAndReset(),(0,p.showMessageBox)({type:"error",title:"Recording Failed",message:this.$T("Recording Failed"),detail:this.$T("This could be because that XMind does not have permission to access microphone or microphone does not work properly.")})}else this.saveAudio(this.audioRecorder.data)},close(){this.$store.commit("editor/AUDIO_RECORDING",{audioRecording:!1}),this.audioRecorder&&this.audioRecorder.state===B&&"audio_record"===this.audioBarMode?this.closeAudioBarAndReset():"audio_record"===this.audioBarMode?this.doneRecord(!0):"audio_play"!==this.audioBarMode&&"open_new_audio_play"!==this.audioBarMode||(this.resetAudioSrc(),this.closeAudioBarAndReset())},saveAudio(e){const t=new FileReader;t.onload=e=>{const t=e.target.result,o=this.$store.state.editor.sbEditorWrapper.value,n=this.$store.state.wd;if(t&&o){let e=new Uint8Array(t),i=`resources/${(0,u.HASH)(e)}.mp3`,a=`xap:${i}`;n.manifestWrapper.value["file-entries"][i]={};const s={provider:"org.xmind.ui.audionotes",content:[],resourceRefs:[a]};l.default.writeFile(r.default.join(n.tempStorage,i),e).then((()=>{if(this.closeAfterDone||setTimeout((()=>{this.$store.commit("editor/AUDIO_BAR_MODE",{audioBarMode:"audio_play",audioFilePath:r.default.join(this.$store.state.wd.tempStorage,i),audioAutoplay:!1})}),10),this.audioStatus=w,this.isOutlineMode)this.$store.handleCommand("outliner.changeAudioNotes",{topicId:this.selection.id,audioNotesData:s,refresh:!0});else{const e=this._findBranchViewById(this.topicId);if(e)o.execAction(S,{audioNotesData:s,targets:[e]});else{const e=this._findParentViewByIdChain();e&&o.execAction(T,{targets:[e]}).then((()=>{o.execAction(C,{newTitle:this.topicTitle||(new Date).toLocaleString()}),o.execAction(S,{audioNotesData:s})}))}}}))}},t.readAsArrayBuffer(e),this.closeAfterDone&&this.closeAudioBarAndReset()},_findParentViewByIdChain(){if(!this.topicIds||!this.topicIds.length)return this._centralBranchView();const e=this.topicIds.shift();return this._findBranchViewById(e)||this._findParentViewByIdChain()},_findBranchViewById(e){if(!e)return;const t=this.$store.state.editor.sbEditorWrapper.value;return t&&t.getComponentViewById(e)},_centralBranchView(){const e=this.$store.state.editor.sbEditorWrapper.value;return e&&e.getSheetView()&&e.getSheetView().centralBranchView},clearRecordTimer(){this.recordTimer&&(clearInterval(this.recordTimer),this.recordTimer=null)},resumeRecordTimer(){this.clearRecordTimer();let e=new Date;this.startTime=e.getTime(),this.recordTimer=setInterval((()=>{this.recordTimeString=this.toTimeString(Date.now()-this.startTime)}),1e3)},closeAudioBarAndReset(){this.clearRecordTimer(),this.recordTimeString="00 : 00 : 00",this.audioStatus="",this.$store.commit("editor/AUDIO_BAR_MODE",{audioBarMode:null,audioFilePath:null,audioAutoplay:!1})},toTimeString(e){if(Number.isNaN(e)||!Number.isFinite(e)||e<0)return"00 : 00 : 00";let t=Math.floor(e/1e3),o=Math.floor(t/60);t%=60;let n=Math.floor(o/60);return o%=60,n=this.formatNumberWithTwoDigit(n),o=this.formatNumberWithTwoDigit(o),t=this.formatNumberWithTwoDigit(t),`${n} : ${o} : ${t}`},formatNumberWithTwoDigit:e=>("0"+e).slice(-2)}};t.Z=M},49278:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=o(58933),a=o(20629),s=o(36414),l=o(48932),c=o(90336),d=n(o(42365)),u=n(o(99636)),p=n(o(11771)),h=o(28441);function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const g="application/x-sheetbar-id";var v={name:"Sheetbar",data:function(){return{sheets:null,sheetsForDragging:null,draggingId:null,isSheetGroupOverflow:!1,swapLeftDisable:!0,swapRightDisable:!1,draggingWidth:0,isDragArea:!1,editingSheetTitleId:null}},props:{isZenMode:{default:!1,type:Boolean},isInMapShotMode:{default:!1,type:Boolean}},computed:m(m({},(0,a.mapState)("editor",["activeSheetId"])),{},{currentSheets:function(){return this.sheets=this._getSheets(),this.isDragArea&&this.sheetsForDragging||this.sheets}}),watch:{activeSheetId:function(e){if(this.sheets=this._getSheets(),!this.sheets)return;const t=this.sheets.findIndex((t=>t.id===e));this.$nextTick((function(){const e=this.$refs.sheetBarTab,o=this.$refs.sheetBarTabItem[t];if(!e||!o)return;const n=e.scrollLeft,i=n+e.offsetWidth,r=o.offsetLeft,a=o.offsetLeft+o.offsetWidth;r<n?e.scrollLeft=r+1:a>i&&(e.scrollLeft=a-e.offsetWidth+1)}))}},mounted:function(){window.addEventListener("resize",this._sheetGroupOverflow)},updated:function(){this.$nextTick((function(){this._sheetGroupOverflow()}))},beforeDestroy:function(){window.removeEventListener("resize",this._sheetGroupOverflow)},methods:{_sheetBarContextMenu(){if(this.sheets&&1==this.sheets.length){const{Menu:e,MenuItem:t}=r.remote,o=new e;o.append(new t({label:this.$T("Duplicate Sheet"),click:()=>this._duplicateSheet(0,this.sheets[0].title)})),o.append(new t({type:"separator"})),o.append(new t({label:this.$T("New Sheet"),click:()=>this._addSheet()})),o.popup({window:r.remote.getCurrentWindow()})}event.preventDefault(),event.stopPropagation()},_getSheets(){const e=this.$store.state.editor,t=e.sbEditorWrapper.value;if(e&&e.isVisible&&t)return t.model.get("sheets")},_addSheet(){this.$store.handleCommand("editor.addSheet")},_saveSheetAs(e){this.$store.handleCommand("saveSheetAs",e)},_showTitleEditor(e,t=""){this.editingSheetTitleId=e;const o=this.currentSheets.findIndex((t=>t.id===e));if(-1===o)return void(this.editingSheetTitleId=null);const n=this.$refs.sheetBarTabItem[o].clientWidth;this.$emit("work-in-process",!0),this.$nextTick((function(){this.$refs.sheetTitleEditor[0].value=t,this.$refs.sheetTitleEditor[0].style.width=n+"px",this.$refs.sheetTitleEditor[0].focus(),this.$refs.sheetTitleEditor[0].setSelectionRange(0,t.length)}))},_saveAndHideTitleEditor(e){const t=this.currentSheets.find((t=>t.id===e))||{},o=t.id;if(o){const e=this.$refs.sheetTitleEditor[0].value,n=t.title;e&&e!==n&&this.$store.execSnowbrushAction({commandId:"editor.changeSheetTitle",args:{sheetId:o,newTitle:e}})}this.editingSheetTitleId=null,this.$emit("work-in-process",!1)},_sheetGroupOverflow(){if(!this.$el)return!1;const e=this.$refs.sheetBarTab;return!!e&&(this.isSheetGroupOverflow=e.scrollWidth>e.offsetWidth,this.isSheetGroupOverflow)},_sheetContainerScrolled(){this.$nextTick((()=>{const e=this.$refs.sheetBarTab;e&&(this.swapLeftDisable=0===e.scrollLeft,this.swapRightDisable=e.scrollLeft+e.offsetWidth>=e.scrollWidth)}))},_swapLeft(){if(!this.$el)return;const e=this.$refs.sheetBarTab,t=this.$refs.sheetBarTabItem;if(!e||!t)return;const o=e.scrollLeft;let n=0;for(let i of t){if(n+i.offsetWidth+1>o)return void(e.scrollLeft=n-1);n+=i.offsetWidth+1}},_swapRight(){if(!this.$el)return;const e=this.$refs.sheetBarTab,t=this.$refs.sheetBarTabItem;if(!e||!t)return;const o=e.scrollLeft+e.offsetWidth;let n=0;for(let i of t)if(n+=i.offsetWidth+1,n>o)return void(e.scrollLeft=n-e.offsetWidth+1)},_deleteSheet(e){this.$store.handleCommand("editor.removeSheet",{sheetId:e})},_copySheet(e,t){const o=this.$store.state.editor.sbEditorWrapper.value;if(o){const n=o.model;if(!n)return;const i=n.getSheetByIndex(e);if(!i)return;const r=JSON.parse(JSON.stringify(i.toJSON()));p.default.setData("sheet",null),d.default.storeResources(r,"sheet",this.$store.state.wd.tempStorage).then((()=>{p.default.setData("sheet",JSON.stringify({sheet:r,title:t}))}))}},_isSheetPasteVisible(){const e=p.default.getData("sheet");return!(!e||!JSON.parse(e).sheet)},async _pasteSheet(e){const t=p.default.getData("sheet"),o=t&&JSON.parse(t);if(o&&o.sheet){this.$store.commit(`${c.SHARED}/updateSheetRendering`,{sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,s.sleep)(100);const t=o.sheet,n=u.default.cloneSheet(t);d.default.pasteResources(n,"sheet",this.$store.state.wd.tempStorage,this.$store.state.wd.manifestWrapper.value).then((()=>{this.$store.handleCommand("editor.addSheet",{sheetId:n.id,sheetData:n,options:{title:o.title||t.title,at:e+1}})}))}},async _duplicateSheet(e,t){const o=this.$store.state.editor.sbEditorWrapper.value;if(o){const n=o.model;if(!n)return;const i=n.getSheetByIndex(e);if(!i)return;this.$store.commit(`${c.SHARED}/updateSheetRendering`,{sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,s.sleep)(100);const r=i.toJSON(),a=u.default.cloneSheet(r);this.$store.handleCommand("editor.addSheet",{sheetId:a.id,sheetData:a,options:{title:t+" "+this.$T("Copy"),at:e+1}})}},_openSheetItemContextMenu(e,t){const o=this,n=this.sheets.findIndex((t=>t.id===e)),{Menu:i,MenuItem:a}=r.remote,s=new i;s.append(new a({label:this.$T("Rename"),click(){o._showTitleEditor(e,t)}})),s.append(new a({type:"separator"})),s.append(new a({label:this.$T("Copy"),click(){o._copySheet(n,t)}})),s.append(new a({label:this.$T("Paste"),visible:o._isSheetPasteVisible(),click(){o._pasteSheet(n)}})),s.append(new a({label:this.$T("Duplicate"),click(){o._duplicateSheet(n,t)}})),s.append(new a({label:this.$T("Delete"),enabled:this.sheets&&this.sheets.length>1,click(){o._deleteSheet(e)}})),s.append(new a({type:"separator"})),s.append(new a({label:this.$T("New Sheet"),click:()=>this._addSheet()})),s.append(new a({type:"separator"})),s.append(new a({label:this.$T("Save Sheet As")+"...",click:()=>this._saveSheetAs({sheetIndex:n})})),s.popup({window:r.remote.getCurrentWindow()}),event.preventDefault(),event.stopPropagation()},_toggleSelector(){this.zoomItemsVisible=!this.zoomItemsVisible},_toggleZoomInput(){if(this.zoomInputVisible=!this.zoomInputVisible,this.zoomInputVisible){let e=this.$el.getElementsByClassName("zoom-input")[0];e&&setTimeout((()=>{e.focus()}),0)}},_closeSelector(){this.zoomItemsVisible=!1},onDragStart(e,t){const{target:o}=e;this.$refs.sheetBarTabItem.includes(o)?(e.dataTransfer.effectAllowed="all",e.dataTransfer.setData(g,t),this.draggingWidth=o&&o.offsetWidth,this.draggingId=t):e.preventDefault()},onDragEnd(){this.draggingId=null},onDragOver(e){this.draggingId&&(e.preventDefault(),this.isDragArea=!0,e.dataTransfer.dropEffect="move")},onDragEnter(e){const t=e.dataTransfer.types.includes(g);if(!this.draggingId||!t)return;e.preventDefault();const o=this.$refs.sheetBarTabItem.slice().sort(((e,t)=>e.dataset.index-t.dataset.index));for(var n=0;n<o.length;n++){let t=-1/0;if(o[n-1]){const e=o[n-1].getBoundingClientRect();t=(e.right+e.left)/2}let i=1/0;if(o[n]){const e=o[n].getBoundingClientRect();i=(e.right+e.left)/2}if(e.clientX>t&&e.clientX<i)break}let i;const r=this.sheets.filter((e=>e.id!==this.draggingId||(i=e,!1)));r.splice(n,0,{id:this.draggingId,title:i&&i.title}),this.sheetsForDragging=r},onDragLeave(e){if(!this.draggingId)return;const t=document.elementFromPoint(e.clientX,e.clientY);this.$el.contains(t)||(this.isDragArea=!1)},onDrop(e){if(e.preventDefault(),this.isDragArea=!1,!this.sheets||!this.sheets.length)return;const t=e.dataTransfer.getData(g);if(this.draggingId!==t)return;const o=this.$store.state.editor.sbEditorWrapper.value;if(o){const e=o.model;if(!e)return;if(this.draggingId){const t=this.sheetsForDragging.findIndex((e=>e.id===this.draggingId));this.sheetsForDragging[t+1]?e.updateSheetOrderToBefore(this.draggingId,this.sheetsForDragging[t+1].id):this.sheetsForDragging[t-1]&&e.updateSheetOrderToAfter(this.draggingId,this.sheetsForDragging[t-1].id)}}this.sheets=this._getSheets()},async onSheetTabClicked(e){if(null!==this.editingSheetTitleId)return;const t=this._getSheets().findIndex((t=>t.id===e)),o=this.$store.state.editor.sbEditorWrapper.value;o&&-1!==t&&(this.$store.state.editor.sbEditorCreated&&((this.$store.state[c.SHARED].editorMode===l.EDITOR_MODE_OUTLINER||this.$store.state[c.SHARED].editorMode===l.EDITOR_MODE_SNOWBRUSH&&!this.$store.getters["editor/isSheetEditorAvailable"](e))&&this.$store.commit(`${c.SHARED}/updateSheetRendering`,{sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,s.sleep)(100)),o.switchTo(t))},wrappedTooltipWithKeybinding:h.wrappedTooltipWithKeybinding}};t.Z=v},48971:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=o(20629),a=o(48932),s=o(90336),l=n(o(91642)),c=n(o(17570)),d=n(o(77284)),u=o(28441);function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var f={components:{sheetbar:c.default,topiccountcard:l.default,zoomControlGroup:d.default},computed:h(h({},(0,r.mapState)("editor",["minimapEnable"])),{},{isOutlineMode(){return this.$store.state[s.SHARED].editorMode===a.EDITOR_MODE_OUTLINER},isZenMode(){return this.$store.state[s.SHARED].zenMode},isOverviewDisabled(){return this.$store.state[s.SHARED].sheetRendering},isOvervieShow(){return!this.isOutlineMode&&!this.isZenMode&&!this.isInMapShotMode},isInMapShotMode(){return this.$store.getters[`${s.SHARED}/aggregatedContexts`]["editor.inMapShotMode"]}}),methods:{onOverviewButtonClicked(){this.$store.handleCommand("editor.toggleMiniMap")},wrappedTooltipWithKeybinding:u.wrappedTooltipWithKeybinding}};t.Z=f},13980:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=o(20629),a=o(58933),s=o(48932),l=o(90336),c=n(o(20072)),d=o(28441);function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const{Menu:h,MenuItem:f}=a.remote;var m={computed:p(p({},(0,r.mapGetters)("editor",["zoomScaleForActiveSheet","outlinerZoomScaleForActiveSheet","isActiveSheetFitMap"])),{},{isOutlineMode(){return this.$store.state[l.SHARED].editorMode===s.EDITOR_MODE_OUTLINER},isZoomGroupDisabled(){return this.$store.state[l.SHARED].sheetRendering},zoomValue:{get(){return this.isOutlineMode?this.outlinerZoomScaleForActiveSheet:this.zoomScaleForActiveSheet},set(e){"fit-map"===e?this.$store.handleCommand("editor.fitMap"):this.isOutlineMode?this.$store.commit("editor/updateOutlinerSheetStatus",{id:this.$store.state.editor.activeSheetId,zoomScale:e}):this.$store.commit("editor/updateSheetStatus",{id:this.$store.state.editor.activeSheetId,zoomScale:e})}},zoomScales(){return this.isOutlineMode?c.default.filter((e=>e>=80&&e<=300)):c.default},zoomOptions(){let e=[...this.zoomScales,this.zoomValue];return e=Array.from(new Set(e)),e=e.sort(((e,t)=>t-e)),e.map((e=>({text:(0,d.percentageStringFromPercentageNumber)(e),value:e})))},zoomValueDisplay(){return(0,d.percentageStringFromPercentageNumber)(this.zoomValue)}}),methods:{updateZoomScales({value:e,isFitMap:t}={}){this.isOutlineMode?this.$store.commit("editor/updateOutlinerSheetStatus",{id:this.$store.state.editor.activeSheetId,zoomScale:e}):this.$store.commit("editor/updateSheetStatus",{id:this.$store.state.editor.activeSheetId,zoomScale:e}),t&&this.$store.handleCommand("editor.fitMap")},onZoomScaleButtonClicked(){const e=new h,t=this.zoomValue;for(let o of this.zoomOptions)e.append(new f({label:o.text,type:"checkbox",checked:t===o.value,click:async()=>{this.updateZoomScales({value:o.value,isFitMap:!1})}}));this.isOutlineMode||(e.append(new f({type:"separator"})),e.append(new f({label:this.$T("Fit Map"),type:"checkbox",click:()=>{this.updateZoomScales({isFitMap:!0})}}))),e.popup({window:a.remote.getCurrentWindow()})},wrappedTooltipWithKeybinding:d.wrappedTooltipWithKeybinding}};t.Z=m},50268:(e,t)=>{"use strict";Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var o={name:"Branchonlybar",methods:{exitBranchOnlyMode(){this.$store.handleCommand("editor.exitBranchOnly")}}};t.Z=o},61487:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=o(90571),r=o(48932),a=o(90336),s=n(o(56957)),l=n(o(2340)),c=n(o(8098)),d=n(o(24407)),u=n(o(33970)),p={name:"Editor",components:{statusbar:()=>Promise.resolve().then(o.bind(o,20823)),zenmodebar:()=>Promise.resolve().then(o.bind(o,33345)),beginnerMode:()=>Promise.resolve().then(o.bind(o,53708)),tutorialDialog:()=>Promise.resolve().then(o.bind(o,43227)),audiobar:()=>Promise.resolve().then(o.bind(o,53436)),branchonlybar:()=>Promise.resolve().then(o.bind(o,92730)),notes:()=>Promise.resolve().then(o.bind(o,66735)),hyperlinkeditor:()=>Promise.resolve().then(o.bind(o,70582)),equationEditor:()=>Promise.resolve().then(o.bind(o,15431)),labeleditor:()=>Promise.resolve().then(o.bind(o,78097)),informationcard:()=>Promise.resolve().then(o.bind(o,25139)),markerpopup:()=>Promise.resolve().then(o.bind(o,44927)),spinner:s.default},setup(e,t){const o=t.root.$store;(0,d.default)(t),(0,u.default)(t),(0,l.default)(t),(0,c.default)(t);const n=(0,i.computed)((()=>o.state[a.SHARED].zenMode)),s=(0,i.computed)((()=>o.state.editor.labelTip)),p=(0,i.computed)((()=>o.state.workbench.isZenDarkTheme)),h=(0,i.computed)((()=>o.state.workbench.currentVisiblePopover)),f=(0,i.computed)((()=>o.state[a.SHARED].sheetRendering)),m=(0,i.computed)((()=>o.getters["preferences/appearance"])),g=(0,i.ref)(!1);(0,i.watch)((()=>o.state.workbench.currentVisiblePopover),(e=>{"notes"===e&&(g.value=!0)}));const v=()=>{const e=o.state.editor.sbEditorWrapper.value;if(!e)return;if(o.state[a.SHARED].rightBarPanel!==r.RIGHT_BAR_PANEL_FORMAT)return;if(o.state[a.SHARED].sheetRendering)return void o.commit(`${a.SHARED}/updateRightBarPanel`,{tab:r.FORMAT_PANEL_TAB_STYLE});const t=e.getSelections();Array.isArray(t)&&t.length>0?o.commit(`${a.SHARED}/updateRightBarPanel`,{tab:r.FORMAT_PANEL_TAB_STYLE}):o.commit(`${a.SHARED}/updateRightBarPanel`,{tab:r.FORMAT_PANEL_TAB_MAP})};return(0,i.watch)((()=>o.state[a.SHARED].editorMode),(e=>{e===r.EDITOR_MODE_SNOWBRUSH&&o.commit("editor/AUDIO_BAR_MODE",{audioBarMode:""}),e===r.EDITOR_MODE_SNOWBRUSH?(o.commit(`${a.SHARED}/updateRightBarPanel`,{visible:!1,panel:r.RIGHT_BAR_PANEL_FORMAT,tab:r.FORMAT_PANEL_TAB_STYLE}),v()):e===r.EDITOR_MODE_OUTLINER&&o.commit(`${a.SHARED}/updateRightBarPanel`,{visible:!1,panel:r.RIGHT_BAR_PANEL_IMAGE,tab:r.IMAGE_PANEL_TAB_MARKER})})),(0,i.watch)((()=>o.state.wd.saveEvent),(e=>{"postsave"===e&&o.commit("rateUs/addRateMasValue",1)})),(0,i.watch)((()=>[o.state.editor.selectionObs,o.state.editor.sheetSwitchedTrigger]),(()=>v())),(0,i.watch)((()=>o.state[a.SHARED].isRightbarVisible),(()=>{o.state[a.SHARED].isRightbarVisible||v()})),{appearance:m,notesEverVisible:g,isZenMode:n,labelTip:s,isZenDarkTheme:p,currentVisiblePopover:h,sheetRendering:f,isSheetBarVisible:(0,i.computed)((()=>o.state.editor.isSheetBarVisible)),isBranchOnlyMode:(0,i.computed)((()=>o.state.editor.isBranchOnlyMode)),isInMapShotMode:(0,i.computed)((()=>o.getters[`${a.SHARED}/aggregatedContexts`]["editor.inMapShotMode"]))}}};t.Z=p},36553:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(61027)),r=n(o(53597));const{MOVE_VIEWPORT:a}=i.default.constant.ACTION_NAMES;var s={name:"Hyperlinkeditor",components:{popover:r.default},directives:{focus:{componentUpdated(e){e.focus()}}},data:function(){return{topicLeft:0,topicRight:0,topicTop:0,topicBottom:0,hyperlink:"",mode:"edit"}},watch:{hyperlink:function(e){this.saveEnable=e?"":"disable"}},mounted(){const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return void this._close();const t=document.querySelector(".sb-editor-container");if(!t)return void this._close();const o=e.getSelections(),n=o&&o[0],i=n&&"branch"===n.type?n:null;if(!i)return void this._close();const r=i.el&&i.el.getBoundingClientRect();this.topicLeft=r.left,this.topicRight=r.right,this.topicTop=r.top,this.topicBottom=r.bottom;const s=r.width,l=t.offsetLeft,c=t.clientWidth,d=154,u=()=>{if("hyperlinkeditor"!==this.$store.state.workbench.currentVisiblePopover)return;const e=i&&i.el&&i.el.getBoundingClientRect();e?(this.topicLeft=e.left,this.topicRight=e.right,this.topicTop=e.top,this.topicBottom=e.bottom,this.hyperlink=i.model&&i.model.get("href"),this.hyperlink&&(this.mode="view"),setTimeout((()=>{const e=this.$refs.popover;e&&e.show()}),0)):this._close()},p={animate:!1,finishToRun:u};this.topicLeft<d-s/2?e.execAction(a,{deltaX:d-s/2-this.topicLeft,option:p}):this.topicRight+d-s/2>l+c?e.execAction(a,{deltaX:l+c-this.topicRight-d+s/2,option:p}):u()},beforeDestroy(){this._close()},methods:{onPopoverClose(){this.$store.commit("workbench/POPOVER_VISIBLE",{name:""});const e="http://";let t=(this.hyperlink||"").trim();this.hyperlink&&!this.hyperlink.match(/([a-zA-Z0-9]+:\/\/|xmind:#|mailto:)/)&&this.hyperlink.match(/[\d\w]+\b@[a-zA-ZA-z0-9]+\.[a-z]+/g)?t="mailto:"+t:this.hyperlink&&!this.hyperlink.match(/([a-zA-Z0-9]+:\/\/|xmind:#|mailto:)/)&&(t=e+t),e===t&&(t=""),setTimeout((()=>{this.$store.execSnowbrushAction({commandId:"editor.changeHyperlink",args:{link:t}})}),0);const o=this.$store.state.editor.sbEditorWrapper.value,n=o&&o.getSelections()[0];n&&"branch"===n.type&&(this.$store.commit("editor/updateAllowInsertHyperLink",!0),this.$store.commit("editor/updateAllowInsertAttachment",!1),this.$store.commit("editor/updateAllowInsertAudioNotes",!1))},_close(){this.$refs.popover.close()},_changeToEdit(){this.mode="edit"},_removeAndClose(){this._close(),setTimeout((()=>{this.$store.execSnowbrushAction({commandId:"editor.changeHyperlink",args:{link:null}})}),0)},_autoFill(){const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return;let t=e.getSelections()[0];if(t&&t.model&&(this.hyperlink||(this.hyperlink=t.model.getHref()),!this.hyperlink)){let e=event.target;setTimeout((()=>{this.hyperlink="http://",setTimeout((()=>{e.selectionStart=0,e.selectionEnd=10}),0)}),0)}},_onEnter(){this.$refs.popover.close()}}};t.Z=s},21861:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=o(20629),a=n(o(85622)),s=o(58933),l=o(35747),c=n(o(2286)),d=o(1893),u=o(99492),p=n(o(61027)),h=n(o(24678)),f=o(24092),m=o(53305),g=n(o(41698)),v=o(95287),b=o(36414),A=n(o(53597));function E(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}const{Menu:T}=s.remote,{SELECT_TOPIC_BY_ID:y,REMOVE_TASK_INFO:C,CHANGE_COMMENTS_INFO:S,CHANGE_HYPER_LINK:k,MOVE_VIEWPORT:w}=p.default.constant.ACTION_NAMES,x=["rgb(241, 197, 103)","rgb(233, 130, 121)","rgb(136, 105, 172)","rgb(110, 181, 226)","rgb(137, 181, 146)","rgb(135, 147, 165)"],I=(0,g.default)("editor:informationcard");var _={components:{popover:A.default},data:function(){return{attachment:"",audio:"",hyperlink:"",notes:"",comments:[],taskInfo:"",filelink:"",showTips:!1,tipType:"",tipTop:0,tipLeft:0,topicLeft:"",topicRight:"",topicTop:"",topicBottom:"",computedHeight:"",computedWidth:"264px",icons:{}}},created:function(){this.icons={notes:this.getIconUrl("notes"),task:this.getIconUrl("task"),comments:this.getIconUrl("comments"),hyperlink:this.getIconUrl("hyperlink"),attachment:this.getIconUrl("attachment"),audionotes:this.getIconUrl("audionotes"),filelink:this.getIconUrl("filelink")}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?E(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):E(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},(0,r.mapState)({doNotShowAttachmentMessageAgain:e=>e.attachment.doNotShowAttachmentMessageAgain,lastSaveDirectory:e=>e.attachment.lastSaveDirectory,lastSaveDirectoryBookmark:e=>e.attachment.lastSaveDirectoryBookmark})),mounted(){this.showTips=!1;const e=document.querySelector(".sb-editor-container");if(!e)return void this.close();const t=this.$store.state.editor.sbEditorWrapper.value;if(!t)return void this.close();const o=t.getSelections();if(this.selectedTopic=o&&o[0],!this.selectedTopic||this.selectedTopic.type!==p.default.constant.VIEW_TYPE.BRANCH)return void this.close();const n=this.selectedTopic.el&&this.selectedTopic.el.getBoundingClientRect();if(!n)return void this.close();this.refreshData();const i=this.judgeOnly();if("notes"===i)return void this.handleCommand("editor.showNotesEditor",!0);if("hyperlink"===i)return this.close(),void this._openHyperlink(this.hyperlink);if("attachment"===i)return this.close(),void this._clickAttachment();if("audio"===i)return this.close(),void this._openAudio();this.topicLeft=n.left,this.topicRight=n.right,this.topicTop=n.top,this.topicBottom=n.bottom;const r=e.offsetLeft,a=e.clientWidth,s=n.width,l=137,c=()=>{if("informationcard"!==this.$store.state.workbench.currentVisiblePopover)return;const e=this.selectedTopic.el&&this.selectedTopic.el.getBoundingClientRect();e?(this.topicLeft=e.left,this.topicRight=e.right,this.topicTop=e.top,this.topicBottom=e.bottom,this.updateSize(),setTimeout((()=>{this.$refs.popover.show()}),0)):this.close()},d={animate:!1,finishToRun:c};this.topicLeft<l-s/2?t.execAction(w,{deltaX:l-s/2-this.topicLeft,option:d}):this.topicRight+l-s/2>r+a?t.execAction(w,{deltaX:r+a-this.topicRight-l+s/2,option:d}):c()},beforeDestroy(){this.close()},methods:{getIconUrl:function(e){return(0,m.toURL)(`static/images/information-icon/info_${e}.svg`)},judgeOnly:function(){const e=[];return this.notes&&e.push("notes"),this.hyperlink&&e.push("hyperlink"),this.comments&&this.comments.length&&e.push("comments"),this.taskInfo&&e.push("taskInfo"),this.attachment&&e.push("attachment"),this.audio&&e.push("audio"),1===e.length?e[0]:void 0},updateSize:function(){if(document.querySelector(".popover-box")){let e=16;this.$refs.notesEl&&(e+=this.$refs.notesEl.clientHeight),this.$refs.taskEl&&(e+=this.$refs.taskEl.clientHeight);let t=document.querySelectorAll(".information-card-comments");if(t&&t)for(let o of Array.from(t))e+=o.clientHeight;this.$refs.linkEl&&(e+=this.$refs.linkEl.clientHeight),this.$refs.attachEl&&(e+=this.$refs.attachEl.clientHeight),this.$refs.audioEl&&(e+=this.$refs.audioEl.clientHeight),e=Math.min(300,e),this.computedHeight=e+"px"}},refreshData:function(){this.attachment="",this.audio="",this.hyperlink="",this.notes="",this.comments=[],this.taskInfo="",this.showTips=!1;let e=this.selectedTopic&&this.selectedTopic.model&&this.selectedTopic.model.get("href");e&&(e.startsWith("xap")?this.attachment=this.selectedTopic.model.attributes.title:this.hyperlink=e);let t,o=this.selectedTopic&&this.selectedTopic.model&&this.selectedTopic.model.get("notes");if(o&&o.plain&&(""===o.plain.content||""===o.plain.content.trim())){if(o.html&&o.html.content&&o.html.content.paragraphs)for(let e of o.html.content.paragraphs){if(t)break;if(e.spans)for(let o of e.spans)if(o.image){t=this.$T("[Image]");break}}t||o.plain.content===o.plain.content.trim()||(t=o.plain.content)}else t=o&&o.plain&&o.plain.content;t&&(this.notes=t.trim(),this.notes||(this.notes=" ")),this.comments=JSON.parse(JSON.stringify(this.selectedTopic&&this.selectedTopic.model&&this.selectedTopic.model.get("comments")||[]));let n=this.selectedTopic&&this.selectedTopic.model&&this.selectedTopic.model.get("extensions")||[];if(setTimeout((()=>{this.updateSize()}),0),n&&n.length){let e=n.find((e=>"org.xmind.ui.taskInfo"==e.provider));if(e&&e.content){this.taskInfo={};let t=e.content.find((e=>"assigned-to"==e.name));t&&t.content&&(this.taskInfo.assignto=t.content,this.taskInfo.assigntobg=x[(t.content.substr(0,1).toUpperCase().charCodeAt(0)-65)%6]);let o=e.content.find((e=>"start-date"==e.name)),n=e.content.find((e=>"duration"==e.name));if(o&&n&&o.content&&n.content){let e=new Date(o.content),t=e.getTime();n=n.content;let i=n.indexOf("d");-1!=i&&(t+=Number(24*n.substr(0,i)*60*60*1e3),n=n.substr(i+1));let r=n.indexOf("h");-1!=r&&(t+=Number(60*n.substr(0,r)*60*1e3),n=n.substr(r+1));let a=n.indexOf("m");-1!=a&&(t+=Number(60*n.substr(0,a)*1e3));let s=new Date(t);e.getFullYear()==s.getFullYear()?this.taskInfo.date=e.getFullYear()+" "+(1+Number(e.getMonth()))+"/"+e.getDate()+"-"+(1+Number(s.getMonth()))+"/"+s.getDate():this.taskInfo.date=e.getFullYear()+" "+(1+Number(e.getMonth()))+"/"+e.getDate()+"-"+s.getFullYear()+" "+(1+Number(s.getMonth()))+"/"+s.getDate()}let i=e.content.find((e=>"progress"==e.name));return i&&i.content&&(this.taskInfo.progress=i.content+"%"),void(Object.keys(this.taskInfo).length||(this.taskInfo=""))}}this.taskInfo="";let i=this.selectedTopic&&this.selectedTopic.model&&this.selectedTopic.model.getAudioNotes();i&&i.resourceRefs&&i.resourceRefs.length&&(this.audio=this.selectedTopic.model.attributes.title)},formatHyperlink:function(e){let t;if(e.startsWith("xmind:")){const o=this.$store.state.editor.sbEditorWrapper.value,n=o.getCurrentSheetEditor().model;let i=e.replace("xmind:#",""),r=n.findComponentById(i),a="";if(r)a=n.attributes.title;else for(let e=0;e<o.model.sheets.length;e++){const t=o.model.sheets[e],n=t.findComponentById(i);if(n){r=n,a=t.attributes.title;break}}r&&(t=`${r.attributes.title} (${a})`)}else t=e;return t},onPopoverClose:function(){this.$store.commit("workbench/POPOVER_VISIBLE",{name:""})},close:function(){this.$refs.popover.close()},closeIfEmpty:function(){this.refreshData(),this.attachment||this.hyperlink||this.notes||this.taskInfo||this.comments&&this.comments.length||this.close()},handleCommand:function(e,t){e&&(t&&this.close(),setTimeout((()=>{this.$store.handleCommand(e)}),100))},doShowTips:function(e,t){this.showTips=!0,this.tipTypeCheck=e;let o=t?0:500;this.showTipsTimeout=setTimeout((()=>{this.showTips&&this.tipTypeCheck==e&&(this.tipType=e)}),o)},stopShowTips:function(){this.showTips=!1,this.tipType="",clearTimeout(this.showTipsTimeout)},updatePointerPosition:function(e){!this.tipType&&e.clientX&&e.clientY&&(this.tipLeft=e.clientX+"px",this.tipTop=e.clientY+"px")},deleteInfoItem:function(e){switch(e){case"hyperlink":this.$store.execSnowbrushAction({commandId:"editor.changeHyperlink",args:{link:"",prue:!0}}),this.hyperlink="",this.attachment="",setTimeout((()=>{this.updateSize()}),0),this.notes||this.hyperlink||this.attachment||this.audio||this.close();break;case"notes":this.$store.execSnowbrushAction({commandId:"editor.changeNotes",args:{noteContent:"",prue:!0}}),this.notes="",setTimeout((()=>{this.updateSize()}),0),this.hyperlink||this.hyperlink||this.attachment||this.audio||this.close()}},deleteAudio:function(){this.$store.execSnowbrushAction({commandId:"editor.removeAudioNotes"}),this.audio="",setTimeout((()=>{this.updateSize()}),0),this.notes||this.hyperlink||this.attachment||this.audio||this.close()},_openHyperlink(e){if(e)if(e.startsWith("file:"))this._openFileLink();else if(e.startsWith("xmind:#")){const t=this.$store.state.editor.sbEditorWrapper.value,o=this.selectedTopic,n=e.replace("xmind:#","");t&&t.execAction(y,{componentId:n,callback:({reject:e})=>{if(e){0===s.remote.dialog.showMessageBoxSync({title:this.$T("Invalid Topic Link"),message:this.$T("The target topic may have been deleted. Do you want to delete this topic link as well?"),buttons:[this.$T("Delete It"),this.$T("No")],defaultId:0,cancelId:1})&&t.execAction(k,{link:"",targets:[o]})}}})}else(0,f.openExternal)(e);this.close()},async _clickAttachmentForMas(){if(!this.attachment)return;let e=this.selectedTopic.model.getTitle();const t=this.selectedTopic.model.getHref(),o=this.$store.state.wd.tempStorage,n=a.default.join(o,t.replace("xap:","")),i=a.default.extname(n);e&&!e.endsWith(i)&&(e+=i),this._tryingToSaveAndOpenForMas(n,e,this.lastSaveDirectory,this.lastSaveDirectoryBookmark)},async _tryingToSaveAndOpenForMas(e,t,o,n){let i;try{const r=o;i=s.remote.app.startAccessingSecurityScopedResource(n),c.default.accessSync(r,l.constants.F_OK|l.constants.W_OK);const u=(0,d.suggestFileNameSync)(r,t),p=a.default.join(r,u);await c.default.copyFile(e,p),await s.shell.openPath(p)}catch(o){const{filePaths:n,bookmarks:i,canceled:r}=await s.remote.dialog.showOpenDialog({buttonLabel:this.$T("Save"),properties:["openDirectory"],securityScopedBookmarks:!0});if(r||!n||!n.length)return;if(Array.isArray(n)&&Array.isArray(i)){const o=n[0],r=i[0];await h.default.fetch(u.STORE_COMMIT,{mutations:[{type:"attachment/setLastDirectory",payload:{lastSaveDirectory:o,lastSaveDirectoryBookmark:r}}]}),this._tryingToSaveAndOpenForMas(e,t,o,r)}}finally{"function"==typeof i&&i()}},async _clickAttachment(){this._clickAttachmentForNormal()},async _clickAttachmentForNormal(){if(!this.attachment)return;let e=this.selectedTopic.model.getTitle();const t=this.selectedTopic.model.getHref(),o=this.$store.state.wd.tempStorage,n=a.default.join(o,t.replace("xap:","")),i=a.default.extname(n);let r="";try{r=this.lastSaveDirectory||s.remote.app.getPath("downloads")}catch(e){r="downloads"}if(e&&!e.endsWith(i)&&(e+=i),this.doNotShowAttachmentMessageAgain)this._tryingToSaveAndOpen(n,r,e);else{const{response:t,checkboxChecked:o}=await s.remote.dialog.showMessageBox({title:"XMind",message:this.$T("Trying to Open Attachment"),detail:this.$T("XMind will save this attachment to $1 and open with default application in your system.",r),checkboxLabel:this.$T("Don't show this message again."),buttons:[this.$T("Save and Open"),this.$T("Cancel")],defaultId:0,cancelId:1});0===t&&this._tryingToSaveAndOpen(n,r,e),o&&await h.default.fetch(u.STORE_COMMIT,{mutations:[{type:"attachment/doNotShowAttachmentMessageAgain"}]})}},async _tryingToSaveAndOpen(e,t,o){"win32"===process.platform&&(o=(0,d.filterSpecialCharacterOnWindows)(o));try{c.default.accessSync(t,l.constants.F_OK|l.constants.W_OK);const n=(0,d.suggestFileNameSync)(t,o),i=a.default.join(t,n);await c.default.copyFile(e,i),await s.shell.openPath(i)}catch(n){I.info("Failed to save and open attachment",n);const[i]=await(0,v.showMessageBox)({title:"XMind",message:this.$T("Failed to Save File"),detail:this.$T("XMind doesn't have permission to save file to $1, please choose another folder to save.",t),buttons:[this.$T("Choose Folder"),this.$T("Cancel")],defaultId:0,cancelId:1});if(0===i){const t=await(0,v.showSaveDialog)({title:"Save",suggestPath:{store:this.$store,suggestedName:o}});if(t){const n=a.default.dirname(t);await h.default.fetch(u.STORE_COMMIT,{mutations:[{type:"attachment/setLastDirectory",payload:{lastSaveDirectory:n}}]}),await this._tryingToSaveAndOpen(e,n,o)}}}},_openAudio(){if(this.audio){let e=this.selectedTopic.model.getAudioNotes();if(e&&e.resourceRefs&&e.resourceRefs.length){if(this.$store.state.editor.audioRecording)return;let e="open_new_audio_play"===this.$store.state.editor.audioBarMode?"audio_play":"open_new_audio_play";this.$store.commit("editor/AUDIO_BAR_MODE",{audioBarMode:e,audioAutoplay:!0}),this.close()}}},async _openFileLink(){let e,t;try{e=(0,d.urlToFilePath)(this.hyperlink)}catch(t){e=this.hyperlink.slice("file:".length),I.error((0,b.normalizeError)(t))}if(a.default.isAbsolute(e))t=e;else{if(!this.$store.state.wd.source.startsWith("file:"))return;{const o=(0,d.urlToFilePath)(this.$store.state.wd.source),n=a.default.dirname(o);t=a.default.join(n,e)}}try{c.default.accessSync(t,l.constants.F_OK),await s.shell.openPath(t)}catch(e){I.info("Failed to open file:",e),await(0,v.showMessageBox)({title:"XMind",message:this.$T("Failed to open this file link."),detail:this.$T("Probably the location or name of this file/folder is changed."),buttons:[this.$T("OK")],defaultId:0})}},popHyperlinkMenu(e){const t=e.startsWith("xmind:"),o=e.startsWith("http:")||e.startsWith("https:"),n=e.startsWith("file:");let i=e&&!e.startsWith("xap:")&&(t||o||n);this.buildContextMenu([{label:this.$T("Edit"),enabled:i,click:()=>{t?this.handleCommand("editor.showTopiclinkEditor"):n?this.handleCommand("editor.addFileLink"):o&&this.handleCommand("editor.showHyperlinkEditor"),this.close()}},{type:"separator"},{label:this.$T("Delete"),click:()=>{this.deleteInfoItem("hyperlink"),this.closeIfEmpty()}}])},popAudilMenu(){this.buildContextMenu([{label:this.$T("Edit"),enabled:!1,click:()=>{this.close()}},{type:"separator"},{label:this.$T("Delete"),click:()=>{this.deleteAudio(),this.closeIfEmpty()}}])},popNotesMenu(){this.buildContextMenu([{label:this.$T("Edit"),click:()=>{this.handleCommand("editor.showNotesEditor"),this.close()}},{type:"separator"},{label:this.$T("Delete"),click:()=>{this.deleteInfoItem("notes"),this.closeIfEmpty()}}])},popTaskMenu:function(){this.buildContextMenu([{label:this.$T("Delete"),click:()=>{const e=this.$store.state.editor.sbEditorWrapper.value;e&&e.execAction(C),this.closeIfEmpty()}}])},popCommentMenu:function(e){this.buildContextMenu([{label:this.$T("Delete"),click:()=>{const t=this.$store.state.editor.sbEditorWrapper.value;t&&t.execAction(S,{newCommentsInfo:this.comments.slice(0,e).concat(this.comments.slice(e+1))}),this.closeIfEmpty()}}])},buildContextMenu:function(e){T.buildFromTemplate(e).popup({window:s.remote.getCurrentWindow()})}}};t.Z=_},14107:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(65122)),r=n(o(33311)),a={name:"Labeleditor",components:{TopicPopoverContainer:i.default,MostlyUsedLabels:r.default},directives:{focus:{inserted:function(e){setTimeout((()=>{e.focus()}),100)}}},data:function(){return{labels:[],showTip:!1,showMostlyUsedLabels:!1,labelTip:"",labelTipLeft:0,labelTipTop:0,labelInputStyle:"",content:"",popoverWidth:280}},mounted(){this.changePopoverVisible()},beforeDestroy(){this.close()},methods:{changePopoverVisible:function(){const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return void this.close();const t=e.getSelections(),o=t&&t[0];if(!o)return void this.close();if("labeleditor"!==this.$store.state.workbench.currentVisiblePopover)return;const n=o.model&&o.model.get("labels");n?(this.labels=[].concat(n),this.content=n.toString()):this.content="";const i=o.model&&o.model.attributes&&o.model.attributes.style&&o.model.attributes.style.properties&&o.model.attributes.style.properties["fo:font-family"];i&&(this.labelInputStyle={"font-family":i}),this.$refs.popover&&this.$refs.popover.show()},onEnter:function(e){e&&13===e.keyCode&&this.close()},close:function(){this.$refs.popover&&this.$refs.popover.close()},saveAndClose:function(){const e=this.content.replace(//g,",");this.$store.execSnowbrushAction({commandId:"editor.changeLabel",args:{labelString:e}})},onSpaceKeyDown:function(e,t){t.preventDefault();let o=document.querySelectorAll(".label-editor-box-body-input-space");if("ArrowLeft"==t.key||"ArrowUp"==t.key)o[e-2]&&o[e-2].focus();else if("ArrowRight"==t.key||"ArrowDown"==t.key)o.length==e?this.$refs.inputedit.focus():o[e]&&o[e].focus();else if("Backspace"==t.key)this.labels=this.labels.slice(0,e-1).concat(this.labels.slice(e)),o[e-2]&&o[e-2].focus();else if("Delete"==t.key)this.labels=this.labels.slice(0,e).concat(this.labels.slice(e+1));else if("z"==t.key){("win32"==process.platform?t.ctrlKey:t.metaKey)&&this.$refs.inputedit.focus()}else if("y"==t.key){("win32"==process.platform?t.ctrlKey:t.metaKey)&&(t.preventDefault(),t.stopPropagation())}},onEditKeyDown:function(e){if(","==e.key){e.preventDefault();let t=document.getSelection();if(t&&t.anchorOffset&&t.anchorOffset==t.focusOffset){let e=this.$refs.inputedit.textContent,o=e.substring(0,t.anchorOffset);this.labels.push(o),this.$refs.inputedit.textContent=e.substring(t.anchorOffset)}}else if("ArrowLeft"==e.key||"ArrowUp"==e.key){let t=document.getSelection();if(t&&!t.anchorOffset){let t=document.querySelectorAll(".label-editor-box-body-input-space");t&&t.length&&(e.preventDefault(),t[t.length-1]&&t[t.length-1].focus())}}else if("Backspace"==e.key){let t=document.getSelection();t&&!t.anchorOffset&&this.labels&&this.labels.length&&(e.preventDefault(),this.labels.splice(this.labels.length-1,this.labels.length))}else if("Enter"==e.key)e.preventDefault(),e.stopPropagation(),this.saveAndClose();else if("z"==e.key){if("win32"==process.platform?e.ctrlKey:e.metaKey){this.$refs.inputedit.textContent||(e.preventDefault(),this.labels.splice(this.labels.length-1,this.labels.length))}}else if("y"==e.key){if("win32"==process.platform?e.ctrlKey:e.metaKey){this.$refs.inputedit.textContent||(e.preventDefault(),e.stopPropagation())}}},checkFormat:function(e){let t=document.getSelection();if(t.anchorOffset<this.$refs.labelinput.childElementCount&&t.anchorNode==this.$refs.labelinput){e.preventDefault(),e.stopPropagation();let o=t.anchorOffset;if("Backspace"==e.key)o-1>=0&&(this.labels=this.labels.slice(0,o-1).concat(this.labels.slice(o)));else if("Delete"==e.key)o==this.labels.length-1?this.labels=this.labels.slice(0,this.labels.length-1):this.labels=this.labels.slice(0,o).concat(this.labels.slice(o+1));else if("ArrowLeft"==e.key){if(o-1>=0&&t&&t.rangeCount){let e=t.getRangeAt(0);e.setStart(this.$refs.labelinput,o-1),e.setEnd(this.$refs.labelinput,o-1)}}else if("ArrowRight"==e.key&&t&&t.rangeCount){let e=t.getRangeAt(0);e.setStart(this.$refs.labelinput,o+1),e.setEnd(this.$refs.labelinput,o+1)}}else if(","==e.key){if(e.preventDefault(),e.stopPropagation(),t.anchorOffset==this.$refs.labelinput.childElementCount&&t.anchorNode==this.$refs.labelinput||3==t.anchorNode.nodeType&&0==t.anchorOffset)return;let o,n,i=0;for(let e of this.labels)i+=e.length;let r=document.getSelection().anchorOffset;if(r&&(r<this.$refs.labelinput.lastChild.textContent.length?(o=this.$refs.labelinput.innerText.substr(i,r).trim(),n=this.$refs.labelinput.innerText.substr(i+r),n.endsWith("")||(n+="")):o=this.$refs.labelinput.innerText.substr(i).trim()),!o)return;this.labels.push(o),this.$refs.labelinput.removeChild(this.$refs.labelinput.lastChild),setTimeout((()=>{n?this.$refs.labelinput.append(document.createTextNode(n)):this.$refs.labelinput.append(document.createTextNode("")),this.pointToEnd()}),0)}else"Backspace"==e.key?(setTimeout((()=>{this.$refs.labelinput.lastChild==this.$refs.labelinput.lastElementChild&&(this.$refs.labelinput.append(document.createTextNode("")),this.pointToEnd())}),0),(t.anchorOffset==this.$refs.labelinput.childElementCount&&t.anchorNode==this.$refs.labelinput||3==t.anchorNode.nodeType&&0==t.anchorOffset)&&(e.preventDefault(),e.stopPropagation(),this.labels=this.labels.slice(0,this.labels.length-1))):"Enter"==e.key&&(e.preventDefault(),e.stopPropagation(),this.saveAndClose())},pointToEnd(){let e=document.getSelection();if(e&&e.rangeCount){let t=e.getRangeAt(0),o=this.$refs.labelinput.childElementCount;t.setStart(this.$refs.labelinput,o),t.setEnd(this.$refs.labelinput,o)}},doShowTips:function(e,t){this.labelTip=e,clearTimeout(this.labelTipTimeout),this.labelTipTimeout=setTimeout((()=>{this.labelTip&&this.labelTip==e&&(this.showTip=!0,this.labelTipLeft=t.srcElement.offsetLeft+t.srcElement.clientWidth+"px",this.labelTipTop=t.srcElement.offsetTop-t.srcElement.parentElement.parentElement.scrollTop+(t.srcElement.clientHeight-this.$refs.labelTipEl.clientHeight)/2+"px")}),500)},stopShowTips:function(){this.labelTip="",this.showTip=!1},focusInputEdit:function(){clearTimeout(this.focusInputEditTimeout),this.focusInputEditTimeout=setTimeout((()=>{this.$refs&&this.$refs.inputedit&&this.$refs.inputedit.focus&&this.$refs.inputedit.focus()}),100)},updateLabel:function(e){this.content=e,setTimeout((()=>{const e=this.$refs.labelTextarea,t=e.value.length;e.focus(),e.setSelectionRange(t,t)}),10)}}};t.Z=a},55937:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(61765)),r=n(o(61027)),a=o(90336),s=o(53305),l=o(48932),c=n(o(12753));const d=o(45669),{remote:u}=o(58933),{Menu:p}=u;var h={props:{panelWidth:Number},components:{"tree-list-v2":c.default},data:()=>({findWord:"",replaceWord:"",mode:"find",caseSensitive:!1,wholeWord:!1,topicMatch:!0,notesMatch:!0,relationshipMatch:!0,boundaryMatch:!0,count:0,selected:[],noSelectionImageURL:(0,s.toURL)("static/images/format-panel/empty-selection-icon.svg")}),computed:{sheetRendering(){return this.$store.state[a.SHARED].sheetRendering},isOutlineMode(){return this.$store.state[a.SHARED].editorMode===l.EDITOR_MODE_OUTLINER},lemmatizedFindWord(){if(this.caseSensitive)return this.findWord;try{return d.nlpNormalize(this.findWord)}catch(e){return this.findWord}},workbookData:function(){const e=[{title:"Central Topic",children:[]}],t=this.$store.state.editor,o=this.$store.state.editor.sheetContentChangedTrigger,n=this.$store.state.editor.sheetSwitchedTrigger,i=this.$store.state.editor.sheetTitleChangedTrigger;if(t&&(t.isVisible||o||n||i)){const t=this.$store.state.editor.sbEditorWrapper.value;if(!t)return e;if(!t.getCurrentSheetEditor())return e;let o=t.model.sheets,n=t.model.get("sheets");if(!o.length)return e;const i=[];return o.forEach(((e,t)=>{const{rootTopic:o,id:r}=e.toJSON(),a=n[n.findIndex((e=>e.id===r))].title,s={value:o.id,text:`[${a}]${this._formatTopicTitle(o)}`,expanded:!0,items:[]};s.items=this._travelTopics(o,t),i.push(s)})),this.isEmpty&&(this.isEmpty=!1),i}return e},result(){let e=[];if(this.count=0,!this.findWord)return[];const t=this.$store.state.editor,o=this.$store.state.editor.sbEditorWrapper.value,n=t.isVisible,i=t.sheetContentChangedTrigger,a=t.sheetSwitchedTrigger,s=this.$store.state.editor.sheetTitleChangedTrigger;if(o&&(n||i||a||s)){let t=o.model.sheets,n=o.model.get("sheets"),i=0;for(let o of t){let t=0;const a=n[n.findIndex((e=>e.id===o.id))].title;e.push({value:o.id,type:"sheet",text:a,items:[],expanded:!0});let s=[r.default.constant.TOPIC_ROOT,r.default.constant.TOPIC_ATTACHED,r.default.constant.TOPIC_DETACHED];if(this.isOutlineMode||(s.push(r.default.constant.TOPIC_SUMMARY),s.push(r.default.constant.TOPIC_CALLOUT)),o.traverseTopic(s,(o=>{if(this.topicMatch){let n=o.get("title");this.testTitle(e[i].items,n,{value:o.id,type:"topic",sheetIndex:i,expanded:!0})&&(this.count++,t++)}if(this.boundaryMatch&&!this.isOutlineMode){let n=o.get("boundaries");if(n&&n.length)for(let o of n){let n=o.title;this.testTitle(e[i].items,n,{value:o.id,type:"boundary",sheetIndex:i,expanded:!0})&&(this.count++,t++)}}if(this.notesMatch){let n=o.get("notes");n&&n.plain&&this.testTitle(e[i].items,n.plain.content,{value:o.id+"notes",type:"notes",topicId:o.id,sheetIndex:i,expanded:!0})&&(this.count++,t++)}})),this.relationshipMatch&&!this.isOutlineMode){let n=o.get("relationships");if(n&&n.length)for(let o of n)this.testTitle(e[i].items,o.title,{value:o.id,type:"relationship",sheetIndex:i,expanded:!0})&&(this.count++,t++)}0===t?e.pop():i++,t=0}}return e}},watch:{selected(e){let t=e[e.length-1];t&&(t=this.removeTopicIdNotesSuffix(t),this.isOutlineMode?this.$store.handleCommand("editor.selectTopicById",{componentId:t}):this.$store.handleCommand("editor.selectAndCenter",t))},findWord(e,t){e!==t&&(this.selected=[])}},mounted:function(){this.$nextTick((()=>{this.$refs.searchInput.focus()}))},methods:{isWin32:()=>"win32"==i.default.platform,close(){this.$emit("close")},checkMenuKey(e){this[e]=!this[e]},changeMode(e){this.mode=e},changeSelected(e){this.selected=e},_travelTopics(e,t,o={items:[]}){const n=r.default.constant.TOPIC_TYPE;if(!e.children)return;let i=e.summaries||[],a=e.children[n.SUMMARY]||[],s=e.children[n.ATTACHED]||[];i.length&&!this.isOutlineMode&&(i.forEach((e=>{const{topicId:t,range:o}=e;a=a.map((e=>(e.id===t&&(e.rangeLastIndex=Number(o.slice(1,o.length-1).split(",")[1])+1),e)))})),a=a.sort(((e,t)=>e.rangeLastIndex-t.rangeLastIndex)).map(((e,t)=>(e.rangeLastIndex+=t,e))),a.forEach((e=>{s.splice(e.rangeLastIndex,0,e)})));let l=[...s,...e.children[n.DETACHED]||[]];this.isOutlineMode||l.push(...e.children[n.CALLOUT]||[]);for(const e of l){const n={value:e.id,text:this._formatTopicTitle(e),expanded:!0,items:[]};this._travelTopics(e,t,n),o.items.push(n)}return o.items},_formatTopicTitle(e){return e.image&&e.image.src?`[${this.$T("Image")}] ${e.title}`:e.title},_expandBranch(e){const t=this.$store.state.editor.sbEditorWrapper.value;if(t){let o=t.getComponentViewById(e);if(!o)return;let n=null;for(;o.parent()&&o.parent().type==r.default.constant.VIEW_TYPE.BRANCH;)o=o.parent(),o.model&&o.model.isCollapse&&o.model.isCollapse()&&(n=o);n&&n.model.extendBranch()}},clearAndFocus(){if(this.findWord=this.replaceWord="",this.count=0,this.selected=null,this.$el){let e=this.$el.getElementsByClassName("find-keyword")[0];e&&e.focus()}},replace(){if(!this.selected.length)return;const e=this.$store.state.editor.sbEditorWrapper.value.getComponentViewById(this.selected[0]).type;this.doReplace({value:this.selected[0],type:e}),this.selected=[]},replaceAll(){if(0!==this.count){for(let e of this.result)e.items.forEach((e=>{"sheet"!=e.type&&this.doReplace(e)}));this.selected=[]}},doReplace(e){let{value:t,type:o}=e;if(t&&o)if("notes"==o);else{const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return;let o=e.getComponentViewById(t);if(!o)return;let n=o.model.get("title");n=n.replace(this.getReplaceRegex(),this.replaceWord),this.isOutlineMode?this.$store.execSnowbrushAction({commandId:"editor.changeTitle",args:{id:t,newTitle:n}}):this.$store.execSnowbrushAction({commandId:"editor.changeTitle",args:{newTitle:n,targets:[o]}})}},testTitle(e,t,o){if(!t)return!1;let n=t;if(!this.caseSensitive)try{n=d.nlpNormalize(t)}catch(e){}let i=this.getRegex()[Symbol.search](n);return!(i<0)&&(o.text=t.substring(i-16,i+16),i-16>0&&(o.text="..."+o.text),i+16<t.length&&(o.text+="..."),e.push(o),!0)},getRegex(){return this.createRegExp(this.lemmatizedFindWord,this.wholeWord,!this.caseSensitive,!1)},getReplaceRegex(){return this.createRegExp(this.lemmatizedFindWord,this.wholeWord,!this.caseSensitive,!0)},createRegExp(e,t,o,n){if(!e)return;e=this.escapeRegExpCharacters(e),t&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let i="";return o&&(i+="i"),n&&(i+="g"),new RegExp(e,i)},escapeRegExpCharacters:e=>e.replace(/[-\\{}*+?|^$.[\]()#]/g,"\\$&"),toggleConfig(){p.buildFromTemplate([{label:this.$T("Find"),id:"find",click:e=>{this.changeMode("find"),e.checked=!0},type:"radio",checked:"find"===this.mode},{label:this.$T("Find & Replace").replace(/(&)/g,"$1$1"),id:"replace",click:e=>{this.changeMode("replace"),e.checked=!0},type:"radio",checked:"replace"===this.mode},{type:"separator"},{label:this.$T("Whole Words"),id:"wholeWords",click:e=>{this.checkMenuKey("wholeWord"),e.checked=this.wholeWord},type:"checkbox",checked:this.wholeWord},{label:this.$T("Match Case"),id:"matchCase",click:e=>{this.checkMenuKey("caseSensitive"),e.checked=this.caseSensitive},type:"checkbox",checked:this.caseSensitive},{type:"separator"},{label:this.$T("Topic"),id:"topic",click:e=>{this.checkMenuKey("topicMatch"),e.checked=this.topicMatch},type:"checkbox",checked:this.topicMatch},{label:this.$T("Note"),id:"note",click:e=>{this.checkMenuKey("notesMatch"),e.checked=this.notesMatch},type:"checkbox",checked:this.notesMatch},{label:this.$T("Relationship"),id:"relationship",enabled:!this.isOutlineMode,click:e=>{this.checkMenuKey("relationshipMatch"),e.checked=this.relationshipMatch},type:"checkbox",checked:this.relationshipMatch},{label:this.$T("Boundary"),id:"boundary",enabled:!this.isOutlineMode,click:e=>{this.checkMenuKey("boundaryMatch"),e.checked=this.boundaryMatch},type:"checkbox",checked:this.boundaryMatch}]).popup({window:u.getCurrentWindow()})},removeTopicIdNotesSuffix(e){const t="notes";return(e||"").endsWith(t)?e.slice(0,-1*t.length):e}}};t.Z=h},7437:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=n(o(61027)),a=o(17462),s=n(o(65122)),l=o(96615);function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const{CHANGE_NOTE:u}=r.default.constant.ACTION_NAMES,p={store:null,notesEditor:null};var h={name:"NotesBasic",components:{TopicPopoverContainer:s.default},props:{visible:{type:Boolean,required:!0}},setup(){const{visible:e,link:t,setLink:o,showLinkBox:n,closeLinkBox:i,linkInputBox:r}=(0,l.useNotesLink)(p),{container:a,isContainerFocused:s}=(0,l.useNotesEditorEvents)();return{isShowLinkBox:e,link:t,setLink:o,showLinkBox:n,linkInputBox:r,closeLinkBox:i,container:a,isContainerFocused:s}},data:()=>({position:{left:0,top:0},currentViewId:null,popoverHeight:280,popoverWidth:400,textChange:{},notesEditor:void 0,NotesTextStyles:d({},a.Editor.TextStyles),isComposition:!1}),computed:{containerStyle:e=>({height:e.isShowLinkBox?"206px":"232px"}),notesStyle:e=>({transform:`translateY(${e.isShowLinkBox?"0":"-26"}px)`}),containerClass:e=>`${e.$store.getters["preferences/appearance"]}-theme`},watch:{visible:function(e){this.toggleNotesPopoverVisibility(e),e?(this.$store.unregisterCommands([{id:"escape",provider:`editor/${window.editorId}/popover`}]),this.$store.registerCommands([{id:"escape",provider:`editor/${window.editorId}/popover`,enabledFn:()=>!0,handler:()=>{this.close()}}])):this.$store.unregisterCommands([{id:"escape",provider:`editor/${window.editorId}/popover`}])}},mounted(){this.notesEditor=new a.Editor({container:this.$refs.container}),p.notesEditor=this.notesEditor,p.store=this.$store,this.toggleNotesPopoverVisibility(this.$props.visible),this.$store.registerCommands([{id:"undo",provider:`editor/${window.editorId}/notes`,enabledFn:()=>this.$props.visible&&this.textChange&&this.notesEditor.canUndo(),handler:()=>{this.notesEditor&&this.notesEditor.undo()}},{id:"redo",provider:`editor/${window.editorId}/notes`,enabledFn:()=>this.$props.visible&&this.textChange&&this.notesEditor.canRedo(),handler:()=>{this.notesEditor&&this.notesEditor.redo()}}]);const e=this.$refs.container.querySelector("trix-editor");void 0!==e&&e.addEventListener("keydown",(e=>{9==e.keyCode&&e.preventDefault()}))},beforeDestroy(){this.$store.unregisterCommands([{id:"undo",provider:`editor/${window.editorId}/notes`},{id:"redo",provider:`editor/${window.editorId}/notes`}])},methods:{onContainerMaskClick(){this.notesEditor.focus()},onNotesLinkButtonClick(){this.isShowLinkBox?this.closeLinkBox():this.showLinkBox()},onInputBlur(){this.isShowLinkBox&&this.closeLinkBox()},onInputKeyDown(e){this.isComposition||(["Tab","Enter"].includes(e.key)&&e.preventDefault(),"Enter"===e.key&&this.setLink())},onmousedown(e){this.notesEditor&&(e.target!==this.linkInputBox?this.notesEditor.container.contains(e.target)&&e.target!==this.notesEditor.container||(e.preventDefault(),e.stopPropagation()):this.linkInputBox.focus())},toggleSelectionStyle(e){this.notesEditor&&this.notesEditor.toggleSelectionStyle(e)},toggleNotesPopoverVisibility(e){if(e){const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return void this.close();const t=e.getSelections(),o=t&&t[0];if(!o||o.type!==r.default.constant.VIEW_TYPE.BRANCH)return void this.close();this.currentViewId=o.model.getId(),this.loadNotes(),this.$refs.popover.show()}else this.trySaveNotes(),this.currentViewId=null},trySaveNotes(){this.notesEditor.canUndo()&&this.saveNotes()},saveNotes(){const e=this.$store.state.editor.sbEditorWrapper.value,t=e&&e.getComponentViewById(this.currentViewId);if(this.notesEditor&&t&&e){const o=this.notesEditor.getNoteData();e.execAction(u,{noteContent:this.notesEditor.htmlLength?o:null,targets:[t]})}},async loadNotes(){const e=this.$store.state.editor.sbEditorWrapper.value.getComponentViewById(this.currentViewId),t=e&&e.model&&e.model.get("notes");this.notesEditor&&(this.notesEditor.reset(),t&&this.notesEditor.setNoteData(t),await new Promise((e=>setTimeout(e))),this.notesEditor.focus())},close(){this.$refs.popover.close()}}};t.Z=h},29619:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(11222)),r=n(o(36556)),a=n(o(20144)).default.extend({name:"OutlineContainer",components:{Outliner:r.default},props:{namespace:String,sheetId:String},provide(){return{editingStore:i.default.for(this.namespace),staticMode:!0}},mounted(){if(!this.sheetId)return;const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return;const t=i.default.for(this.namespace),o=e.sheetEditors[this.sheetId],n=o.model;t.state.ready&&t.ownerSheet&&t.ownerSheet.getId()===o.model.getId()||t.init(n),t.commit("refreshSheet")}});t.Z=a},58875:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=n(o(78835)),a=n(o(71191)),s=o(20629),l=o(58933),c=o(90336),d=n(o(41698)),u=o(83450),p=o(24092),h=o(24949);function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const g=(0,d.default)("promotion");var v={name:"Promotion",data:function(){return{ready:!1,loadFinish:!1,httpResponseStatus:!0,timer:null,webview:null}},computed:m(m({},(0,s.mapState)({event:e=>e.notification.currentPromotion||{},isBeginnerModeVisible:e=>e.editor.isBeginnerModeVisible,isBeginnerDialogVisible:e=>e.editor.isBeginnerDialogVisible,isZenMode:e=>e[c.SHARED].zenMode})),{},{eventid:function(){return this.event.id},duration:function(){return this.event.duration},url:function(){return this.event.url},uri:function(){return r.default.parse(this.url)},uriquery:function(){return a.default.parse(this.uri.query)},width:function(){return this.uriquery.w||0},height:function(){return this.uriquery.h||0},closeColor:function(){return"#"+(this.uriquery["close-color"]||"000")},opacity:function(){return this.uriquery.opacity||.3},show:function(){return this.loadFinish&&this.ready&&this.httpResponseStatus&&!this.isBeginnerModeVisible&&!this.isBeginnerDialogVisible&&!this.isZenMode},styleObject(){return{width:this.width+"px",height:this.height+"px",marginBottom:-1*this.height+"px",transition:this.loadFinish?"margin-bottom .8s":null}},closeStyleObject(){return{"--close-color":this.closeColor,"--opacity":this.opacity}},classObject(){return{expand:this.show}}}),watch:{show:function(){this.setAutoClose(this.show)}},created(){if(!this.event||"popup"!==this.event.style)return;if(g.info("Event id:",this.event.id),!this.width||!this.height)return g.warn("Wrong width or height!"),void this.closeOne("wrongWidthOrHeight");const e=this.uri.protocol;return"http:"!==e&&"https:"!==e?(g.warn("Wrong url protocol!"),void this.closeOne("wrongProtocol")):void 0},mounted(){this.loadFinish=!1,this.webview=this.$el.querySelector("webview"),this.webview.addEventListener("did-finish-load",this.finishLoad),this.webview.addEventListener("did-fail-load",this.failLoad),this.webview.addEventListener("new-window",this.newWindow),this.webview.addEventListener("did-get-response-details",this.checkHttpResponse)},beforeDestroy(){this.webview&&(this.webview.removeEventListener("did-finish-load",this.finishLoad),this.webview.removeEventListener("did-fail-load",this.failLoad),this.webview.removeEventListener("new-window",this.newWindow),delete this.webview)},methods:{setAutoClose:function(e=!0){this.duration<=0||(e?this.timer=setTimeout((()=>{this.ready=!1,this.loadFinish=!1,this.closeOne("autoClose")}),this.duration):clearTimeout(this.timer))},finishLoad:function(){this.loadFinish=!0,this.ready=!0,(0,u.trackView)({actionName:"Promotion"})},newWindow:function(e){const t=r.default.parse(e.url).protocol;"http:"===t||"https:"===t?(this.closeOne("newWindow"),(0,p.openExternal)(e.url)):g.info("Invalid protocol:",e.url)},checkHttpResponse:function(e){200!==e.httpResponseCode&&(g.info("Http request fail:",e),this.httpResponseStatus=!1)},failLoad:function(e){g.info("FailLoad:",e),this.ready=!1},closeOne:function(e){this.ready=!1,h.eventManager.emit("promotion:completedOne",{eventid:this.eventid,winid:l.remote.getCurrentWindow().id}),(0,u.trackEvent)({eventCategory:"Notification",eventAction:"closePromotionBy"+e,eventName:this.eventid}),this.$store.commit("notification/setCurrentPromotion",null)}}};t.Z=v},22368:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=n(o(61027)),a=o(83450),s=o(20629),l=o(90336),c=o(48932),d=n(o(11222)),u=o(28441);function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const f=d.default.for("outliner"),{VIEW_TYPE:m,TOPIC_ROOT:g,TOPIC_DETACHED:v,TOPIC_ATTACHED:b,TOPIC_SUMMARY:A,TOPIC_CALLOUT:E}=r.default.constant,T=/[\d\u00ff-\uffff]|\S+/gmu,y=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g;var C={name:"Topiccount",data:()=>({wordCount:0,stringCount:0,topicCount:0,selectionCount:0,selectionWordCount:0,selectionStringCount:0}),computed:h(h({},(0,s.mapState)("editor",["isTopicCountLabelVisible","selectionObs","sheetContentChangedTrigger","sheetSwitchedTrigger"])),{},{isTopicCountButtonDisabled(){return this.$store.state[l.SHARED].sheetRendering},hasSelections(){return 0!==this.selectionCount},isOutlineMode(){return this.$store.state[l.SHARED].editorMode===c.EDITOR_MODE_OUTLINER},topicCountDetails(){return[{title:this.$T("Topics"),count:this.hasSelections?this.selectionCount:this.topicCount},{title:this.$T("Words"),count:this.hasSelections?this.selectionWordCount:this.wordCount},{title:this.$T("Characters"),count:this.hasSelections?this.selectionStringCount:this.stringCount}]},display(){return this.isOutlineMode?`${this.$T("Words")}: ${this.selectionWordCount>0?`${this.selectionWordCount} /`:""} ${this.wordCount}`:`${this.$T("Topic")}: ${this.hasSelections?`${this.selectionCount} /`:""} ${this.topicCount}`},textSelection:()=>window.getSelection().toString()}),watch:{isTopicCountLabelVisible(){this.$withUIKit((e=>{const t=e.pop(this.$refs.popover);t.isActive()?t.close():t.show()}))},selectionObs(){this.freshSelectedTopicInfo()},sheetContentChangedTrigger(){this.freshTopicInfo()},sheetSwitchedTrigger(){this.freshTopicInfo()}},mounted(){this.freshTopicInfo(),document.addEventListener("selectionchange",this.refreshTextSelection,!1),f.on("selectionChanged",(()=>{setTimeout(this.freshSelectedTopicInfo,100)}))},beforeDestroy(){document.removeEventListener("selectionchange",this.refreshTextSelection),f.removeAllListeners("selectionChanged"),this.$withUIKit((e=>{e.pop(this.$refs.popover).close()}))},methods:{_isPureTopic:e=>!!e&&[g,v,b,A,E].includes(e.type()),freshTopicInfo(){const e=this.$store.state.editor.sbEditorWrapper.value,t=e&&e.getCurrentSheetEditor()&&e.getCurrentSheetEditor().model;if(!t)return 0;let o=0,n=0,i=0,r=[g,b,v];this.isOutlineMode||(r=r.concat([A,E])),t.traverseTopic(r,(e=>{o++,n+=this._countWordNumOfStr(e.title||e.attributes.title),i+=this._countCharacterNumOfStr(e.title||e.attributes.title);const t=e.getNotes();if(t&&t.plain&&(n+=this._countWordNumOfStr(t.plain.content),i+=this._countCharacterNumOfStr(t.plain.content)),this.isOutlineMode){const t=e.getLabel().split(",");if(t)for(const e of t)n+=this._countWordNumOfStr(e),i+=this._countCharacterNumOfStr(e)}})),this.topicCount=o,this.wordCount=n,this.stringCount=i},freshSelectedTopicInfo(){let e=[];if(e=this.isOutlineMode?f.state.selectionIds.map((e=>({type:m.BRANCH,model:this.$store.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().model.findComponentById(e)}))):this.$store.state.editor.selections,!e.length)return this.selectionCount=0,this.selectionWordCount=0,void(this.selectionStringCount=0);let t=0,o=0,n=0;e.forEach((e=>{if(e.type==m.BRANCH&&this._isPureTopic(e.model)){++t;const i=e.model,r=i.getTitle();o+=this._countWordNumOfStr(r),n+=this._countCharacterNumOfStr(r);const a=i.getNotes();if(a&&a.plain&&(o+=this._countWordNumOfStr(a.plain.content),n+=this._countCharacterNumOfStr(a.plain.content)),!this.isOutlineMode){const e=i.getLabel().split(",");if(e)for(const t of e)o+=this._countWordNumOfStr(t),n+=this._countCharacterNumOfStr(t)}}})),this.selectionCount=t,this.selectionWordCount=o,this.selectionStringCount=n},_countWordNumOfStr(e){if(!e)return 0;const t=e.match(T);return t?t.length:0},_countCharacterNumOfStr(e){if(!e)return 0;const t=e.match(y);return t?t.length:0},_detailsCSSHeight(){return 24*this.topicCountDetails.length+"px"},clickTopicCount(){(0,a.trackEvent)({eventCategory:"Sheetbar",eventAction:"topicCount"})},refreshTextSelection(){this.isOutlineMode&&(this.selectionWordCount=this._countWordNumOfStr(window.getSelection().toString()))},wrappedTooltipWithKeybinding:u.wrappedTooltipWithKeybinding}};t.Z=C},53590:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=o(20629),a=o(83450);function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var c={name:"BignnerMode",components:{},data:function(){return{waitEdit:!0,startShow:!1,showDialogContent:!1,showTitleShadow:!1,scrollToTop:!1}},computed:l(l(l(l({},(0,r.mapState)("editor",["sbEditor","isTooltipsVisible"])),(0,r.mapState)("tutorial",["actionMode","step"])),(0,r.mapGetters)("tutorial",["currentKey","tutoriallist"])),{},{enterEditMode(){return 3===this.step}}),watch:{enterEditMode(){window.addEventListener("keydown",this.keyDownListener)},actionMode(){this.scrollTo()},waitEdit(){this.scrollTo(1600)}},mounted(){this.$refs.beginnerContent.addEventListener("scroll",this.handleScrollShadow),this.$el.focus(),setTimeout((()=>{this.showDialogContent=!0}),500),setTimeout((()=>{this.startShow=!0,this.scrollTo(1300),this.showTitleShadow=!0}),1200)},beforeDestroy(){this.$refs.beginnerContent.removeEventListener("scroll",this.handleScrollShadow)},destroyed(){window.removeEventListener("keydown",this.keyDownListener),this.$store.commit("tutorial/STEP",0)},methods:{handleScrollShadow(){this.scrollToTop=0===this.$refs.beginnerContent.scrollTop},scrollToBottom(e,t){const o=t.scrollTop,n=t.scrollHeight-o;function i(r){const a=function(e,t,o,n){return(e/=n/2)<1?o/2*e*e+t:-o/2*((e-=1)*(e-2)-1)+t}(r+=30,o,n,e);t.scrollTop=a,r<e&&setTimeout((function(){i(r)}),30)}window.requestAnimationFrame((()=>{i(0)}))},scrollTo(e=500){this.$nextTick((()=>{let t=this.$refs.beginnerContent;this.scrollToBottom(e,t)}))},keyDownListener(){setTimeout((()=>{this.waitEdit=!1,window.removeEventListener("keydown",this.keyDownListener)}),2e3)},exit(){this.$store.commit("editor/UPDATE_BEGINNERMODE_VISIBLE",{isBeginnerModeVisible:!1}),(0,a.trackEvent)({eventCategory:"Tutorial",eventAction:"skipGuide"})}}};t.Z=c},73833:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var n=o(83450),i={name:"TutorialDialog",data:()=>({visible:!1}),mounted(){setTimeout((()=>{this.visible=!0}),500)},methods:{close(){this.$store.commit("editors/setTutorialShowSign",{hasShownTutorial:!0}),this.$store.commit("editor/UPDATE_BEGINNERDIALOG_VISIBLE",{isBeginnerDialogVisible:!1}),this.visible=!1,(0,n.trackEvent)({eventCategory:"Tutorial",eventAction:"skipGuide"}),setTimeout((()=>{this.$el.remove(),this.$destroy()}),300)},confirm(){this.$store.commit("editors/setTutorialShowSign",{hasShownTutorial:!0}),this.$store.commit("editor/UPDATE_BEGINNERMODE_VISIBLE",{isBeginnerModeVisible:!0}),this.$store.commit("editor/UPDATE_BEGINNERDIALOG_VISIBLE",{isBeginnerDialogVisible:!1})}}};t.Z=i},56831:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=n(o(85622)),a=n(o(78835)),s=n(o(71191)),l=o(20629),c=o(1893),d=o(48932),u=o(90336),p=n(o(56957)),h=n(o(33411));function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const g="win32"==process.platform;var v={components:{editor:()=>Promise.resolve().then(o.bind(o,22602)),formatpanel:()=>Promise.resolve().then(o.bind(o,14419)),searchpanel:()=>Promise.resolve().then(o.bind(o,77499)),navigationpanel:()=>Promise.resolve().then(o.bind(o,7188)),promotion:()=>Promise.resolve().then(o.bind(o,77958)),outlinemode:()=>Promise.resolve().then(o.bind(o,73071)),statusbar:()=>Promise.resolve().then(o.bind(o,20823)),"drag-bar":h.default,spinner:p.default},data:function(){return{isWin:g,progressIndicatorText:"",isEditorViewPortMoved:!1,leftBarPanelWidth:268,maxLeftBarPanelWidth:563,rightBarPanelWidth:268,dragedWidth:null,loadedOutliner:!1,isShowRightBarPlacehoder:!1,isShowLeftBarPlacehoder:!1}},created(){this.state=this.$store.state.workbench;const e=this.$store.watch((e=>e.editor.isVisible),(t=>{t&&e()})),t=this.$store.watch((e=>e[u.SHARED].editorMode),(e=>{e===d.EDITOR_MODE_OUTLINER&&(this.loadedOutliner=!0,t())}))},computed:m(m(m(m({},(0,l.mapState)("workbench",["isLeftbarVisible","isZenDarkTheme","workbenchContentToShow"])),(0,l.mapState)(u.SHARED,["isRightbarVisible","rightBarPanel","sheetRendering"])),(0,l.mapState)("editor",{isEditorContentVisible:e=>e.isVisible})),{},{showsLeftbar(){return this.isEditorContentVisible&&this.isLeftbarVisible&&!this.isZenMode},showsRightbar(){return this.isEditorContentVisible&&this.isRightbarVisible&&!this.isZenMode},isZenMode(){return this.$store.state[u.SHARED].zenMode},isOutlineMode(){return this.$store.state[u.SHARED].editorMode===d.EDITOR_MODE_OUTLINER},isOutlinerBackgroundLoading(){return this.$store.state[u.SHARED].loadOutlineMode},isSignInDialogVisible(){return this.$store.state.workbench.isSignInDialogVisible},rightBarComponentName:()=>"formatpanel",leftBarComponentName:()=>"navigationpanel",saveSelections(){if(!this.$store.state.workbench.document)return[];let e=this.$store.state.workbench.document.getSaveAsHandlers(),t=[];return e.forEach((e=>{t.push({type:e.type,name:e.name})})),t},appearance(){return this.$store.getters["preferences/appearance"]},isSheetBarVisible(){return this.$store.state.editor.isSheetBarVisible},computedIsShowStatusBar(){return this.isEditorContentVisible&&this.isSheetBarVisible&&!this.isZenMode},currentLeftBarPanelWidth(){return this.dragedWidth||this.leftBarPanelWidth}}),watch:{sheetRendering(e){this.isEditorContentVisible&&e&&(this.progressIndicatorText="")}},mounted:function(){window.addEventListener("leave-full-screen",this.onLeaveFullScreen);const e=s.default.parse(window.location.search.slice(1));this.$store.commit("wd/init",{source:e.source||"new://workbook",editorId:e.editorId});const t=this.$store.getters["l10n/T"];let n=this.$store.state.wd.source;if(n.startsWith("new"))this.progressIndicatorText=t("Creating new Map ...");else if(n.startsWith("file-cache:")){const e=a.default.parse(n).query;this.progressIndicatorText=t('Opening "$1" ...',s.default.parse(e).originalName||"")}else if(n.startsWith("file:")){const e=(0,c.urlToFilePath)(n),o=r.default.parse(e).name;this.progressIndicatorText=t('Opening "$1" ...',o||"")}else this.progressIndicatorText=t("Opening ...");setTimeout((()=>{this.$store.commit("workbench/workbenchContentToShow");o(32871).default.config(this.$store)}),0)},beforeDestroy(){if(this.unrouteGetMode&&(this.unrouteGetMode(),this.unrouteGetMode=null),window.removeEventListener("leave-full-screen",this.onLeaveFullScreen),this.$el){const e=this.$el.getElementsByClassName("zen-color-picker");for(const t of e)t.removeEventListener("change",this._setcolor)}},methods:{togglePopup(e){if("string"!=typeof this.state.popup.id)return;this.state.popup.dom instanceof HTMLElement&&(()=>this.state.popup.dom.contains(e.target))()||this.$store.commit("workbench/TOGGLE_POPUP",{id:null,dom:null})},_editorUpdated(){this.$emit("update")},onLeaveFullScreen(){this.isZenMode&&this.$store.handleCommand("workbench.toggleZenMode")},forceUpdateUiKitComponent(){this.$withUIKit((e=>{e.update(this.$refs.rightpanel.$el,"update")}))},updateIgnoreResizeEditor(e){this.$store.commit("editor/updateIgnoreResizeEditor",e)},closeLeftBar(){this.$store.commit("workbench/UPDATE_LEFTBAR_STATE",{visible:!1})}}};t.Z=v},35197:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(o(59713)),r=o(61765),a=o(90336),s=o(55175),l=o(83450),c=o(20629),d=n(o(79932)),u=o(96486),p=o(36414),h=o(53305),f=n(o(20293)),m=n(o(58331)),g=o(48932),v=o(28441);function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function A(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const E=A({},"darwin"===r.platform?{Command:"",Shift:"",Ctrl:"",Alt:"",Option:""}:{Meta:"Meta",Shift:"Shift",Ctrl:"Ctrl",Alt:"Alt",Option:"Alt"});var T={name:"Zenmodebar",mixins:[f.default],data:function(){return{isMac:"darwin"==r.platform,isDarkTheme:!1,startTime:-1,startDate:0,timerVisible:!1,timerString:"",originalZoom:null,originalAppearance:"light",activatedPanel:"",isLeftBarVisible:!1,isRightBarVisible:!1,isHoveringOnBottomBar:!1,isBottomBarWorkInProcess:!1,scheduleToShowBottomBar:null,isAppearanceChanging:!1,shortcutPopoverId:`popover_${(0,p.UUID)()}`,zenModeTimerPopoverId:`popover_${(0,p.UUID)()}`,isShowBranchOnlyMode:!1,darkThemeSheets:[]}},components:{formatpanel:()=>Promise.resolve().then(o.bind(o,14419)),searchpanel:()=>Promise.resolve().then(o.bind(o,7188)),bottombar:()=>Promise.resolve().then(o.bind(o,20823)),branchonlybar:()=>Promise.resolve().then(o.bind(o,92730)),"common-none-panel":m.default},computed:A(A(A(A(A({zen(){return this.$store.state[a.SHARED].zenMode}},(0,c.mapGetters)("preferences",["appearance"])),(0,c.mapState)("editor",["sheetSwitchedTrigger","sheetAddedTrigger","isBranchOnlyMode"])),(0,c.mapGetters)({keybindingByCommandId:"keybindings/keybindingByCommandId"})),(0,c.mapState)("workbench",["isZenDarkTheme","workbenchContentToShow"])),{},{isWorkbenchLeftBarVisible(){return this.$store.getters["workbench/isLeftbarVisible"]},shortcutGroups(){return[["editor.addTopic","editor.addSubTopic","editor.addRelationship","editor.addSummary","editor.addBoundary"],["editor.showHyperlinkEditor","editor.showTopiclinkEditor","vana_mas"!==r.env.VANA_RELEASE_ENV?"editor.addFileLink":null,"vana_mas"!==r.env.VANA_RELEASE_ENV?"editor.addFolderLink":null,"editor.showNotesEditor","editor.showLabelEditor","editor.addLocalImage","editor.addAudioOnNewTopic"],["editor.zoomIn","editor.zoomOut","editor.resetZoom","editor.focusAndSelectCenter"]].map((e=>e.filter(Boolean).map((e=>{const t=this.shortcuts.find((t=>t&&t.commandId===e));if(t)return A(A({},t),{},{accelerator:this.keybindingByCommandId(t.commandId)})})).filter(Boolean))).filter((e=>e.length))},bottomBarStyles(){const e=(this.isLeftBarVisible?264:0)+30+8;return{width:`calc(100% - ${e+((this.isRightBarVisible?264:0)+30+8)}px)`,left:`${e}px`}},imageLightBulb:()=>(0,h.toURL)("static/assets/images/zen-mode-bulb.svg")}),watch:{appearance(e,t){e!==t&&(this.originalAppearance=e,this.setEditorAppearance(this.isDarkTheme))},sheetSwitchedTrigger(){this.setMapAppearance(this.isDarkTheme),window.clearTimeout(this.scheduleToShowBottomBar),this.scheduleToShowBottomBar=setTimeout((()=>{this.scheduleToShowBottomBar=null}),3e3)},isLeftBarVisible(e,t){e!==t&&this.$store.commit("workbench/UPDATE_LEFTBAR_STATE",{visible:!!e})},isWorkbenchLeftBarVisible(e){this.isLeftBarVisible=e}},methods:{wrappedTooltipWithKeybinding:v.wrappedTooltipWithKeybinding,toAcceleratorSymbol(e){let t=e.split("+").map((e=>E[e]||e)),o={Control:!1,undefined:!1};return t.filter((e=>void 0===o[e])).join(" ").replace("=","+")},switchRightPanel(e){e===this.activatedPanel&&this.isRightBarVisible?this.isRightBarVisible=!1:(this.isRightBarVisible=!0,this.activatedPanel=e)},bottomBarHoveringDetect(e){if(!this.zen||!this.$refs.bottomBar||!e)return;const t=this.$refs.bottomBar.getBoundingClientRect(),o=t.left,n=t.top-17.5,i=t.height+35,r=t.width,a=e.pageX,s=e.pageY,l=o<a&&o+r>a,c=n<s&&n+i>s;this.isHoveringOnBottomBar=l&&c},setEditorAppearance(e){this.isAppearanceChanging=!0,e?(0,d.default)("dark",(()=>this.isAppearanceChanging=!1)):(0,d.default)("default",(()=>this.isAppearanceChanging=!1))},async setMapAppearance(e){const t=this.$store.state.editor,o=t.sbEditorWrapper.value;if(t&&t.isVisible&&o){const t=o.getCurrentSheetEditor();if(!t)return;if(e)t.activateOverridedStyle(s.ZENDARKTHEMEID,s.DARKTHEME);else{const e=o.model.get("sheets");for(let t of e){const e=o.getSheetEditorById(t.id);e&&e.deactivateOverridedStyle(s.ZENDARKTHEMEID)}}}},setNightMode(e){this.isDarkTheme=e,this.setMapAppearance(e),e?this.setEditorAppearance(!0):this.setEditorAppearance("dark"===this.originalAppearance),this.$store.commit("workbench/UPDATE_ZEN_DARK_THEME_STATE",{isZenDarkTheme:e}),this.$store.commit(`${a.SHARED}/setZenModeNightMode`,{mode:e})},getCurrentSheetEditor(){const e=this.$store.state.editor.sbEditorWrapper.value;if(e)return e.getCurrentSheetEditor()},getSheets(){const e=this.$store.state.editor,t=e.sbEditorWrapper.value;if(e&&e.isVisible&&t)return t.model.get("sheets")},startTimer(){this.stopTimer();let e=new Date;this.startTime=e.getTime(),this.startDate=e.getDate();let t=this.$store.state.editors.zenTimer,o=t&&t.total?t.total:0;t&&t.date&&t.date!=e.getDate()&&(o=0),this.timerString=this.toTimerString(o),this.timer||(this.timer=setInterval((()=>{let e=(new Date).getTime()-this.startTime+o;this.timerString=this.toTimerString(e)}),1e3))},toTimerString(e){let t=Math.floor(e/1e3),o=Math.floor(t/60);t%=60;let n=Math.floor(o/60);return o%=60,n=this.formatNumberWithTwoDigit(n),o=this.formatNumberWithTwoDigit(o),t=this.formatNumberWithTwoDigit(t),`${n}:${o}:${t}`},formatNumberWithTwoDigit:e=>("0"+e).slice(-2),stopTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)},storeTimer(){if(this.startTime<0)return;let e=new Date,t=this.startDate==e.getDate()?e.getTime()-this.startTime:0;(0,l.trackEvent)({eventCategory:"ZenMode",eventAction:"durationZenMode",eventValue:t});let o=this.$store.state.editors.zenTimer;if(o&&o.date&&o.date==e.getDate()){let n=o.total||0;n+=t,this.$store.commit("editors/setZenTimer",{date:e.getDate(),total:n})}else this.$store.commit("editors/setZenTimer",{date:e.getDate(),total:t});this.startTime=-1},_exitZenMode(){this.$store.handleCommand("workbench.toggleZenMode")},_handleBottomBarWorkStatusChange(e){const t=this.isBottomBarWorkInProcess&&!e;null!==this.bottomBarTimer&&(e||t)&&(clearTimeout(this.bottomBarTimer),this.bottomBarTimer=null),t?this.bottomBarTimer=setTimeout((()=>{this.isBottomBarWorkInProcess=e,this.bottomBarTimer=null}),3e3):this.isBottomBarWorkInProcess=e},registerCommands(){this.$store.registerCommands([{id:"workbench.toggleFindAndReplace",provider:`editor/${window.editorId}`,enabled:!0,handler:()=>this.isLeftBarVisible=!this.isLeftBarVisible},{id:"editor.copyStyle",provider:`editor/${window.editorId}/mindmap`,enabledExpr:"enabled",enabledFn:()=>!this.$store.state.workbench.isZenDarkTheme},{id:"editor.pasteStyle",provider:`editor/${window.editorId}/mindmap`,enabledExpr:"enabled",enabledFn:()=>!this.$store.state.workbench.isZenDarkTheme},{id:"editor.resetStyle",provider:`editor/${window.editorId}/mindmap`,enabledExpr:"enabled",enabledFn:()=>!this.$store.state.workbench.isZenDarkTheme},{id:"workbench.outlineMode",provider:`editor/${window.editorId}`,handler:async()=>{this._exitZenMode(),this.$store.commit(`${a.SHARED}/setEditorMode`,{mode:g.EDITOR_MODE_OUTLINER})}}])},unregisterCommands(){this.$store.unregisterCommands([{id:"workbench.toggleFindAndReplace",provider:`editor/${window.editorId}`},{id:"editor.copyStyle",provider:`editor/${window.editorId}/mindmap`},{id:"editor.pasteStyle",provider:`editor/${window.editorId}/mindmap`},{id:"editor.resetStyle",provider:`editor/${window.editorId}/mindmap`},{id:"workbench.outlineMode",provider:`editor/${window.editorId}`}])}},mounted(){if(this.registerCommands(),window.addEventListener("blur",this._windowBlurListener=()=>{this.zen&&(this.timerVisible=!1,this.stopTimer(),this.storeTimer())}),window.addEventListener("focus",this._windowFocusListener=()=>{this.zen&&this.startTimer()}),this._bottombarHoverHandler=(0,u.debounce)(this.bottomBarHoveringDetect,100),window.addEventListener("mousemove",this._bottombarHoverHandler),this.getCurrentSheetEditor()){const e=this.$store.state.editor.sheetStatuses,t={},o=this.getSheets();o&&o.forEach((o=>{e[o.id]&&(t[o.id]=e[o.id].zoomScale),this.$store.commit("editor/updateSheetStatus",{id:o.id,suggestedZoomScale:150})})),Object.keys(t).length&&(this.originalZoom=t)}this.originalAppearance=this.$store.getters["preferences/appearance"],this.timerVisible=!1,this.startTimer()},beforeDestroy:function(){window.clearTimeout(this.scheduleToShowBottomBar),this.unregisterCommands(),window.removeEventListener("blur",this._windowBlurListener),window.removeEventListener("focus",this._windowFocusListener),window.removeEventListener("mousemove",this._bottombarHoverHandler),this.bottomBarTimer&&window.clearTimeout(this.bottomBarTimer);let e=this.getCurrentSheetEditor();if(e&&this.originalZoom){const t=this.getSheets();t&&t.forEach((e=>{this.$store.commit("editor/updateSheetStatus",{id:e.id,suggestedZoomScale:null})}));const o=this.originalZoom[e.model.id]||(0,v.percentageNumberFromPercentageString)(this.$store.getters["preferences/initialZoomLevel"]);this.$store.commit("editor/updateSheetStatus",{id:e.model.id,zoomScale:o}),this.originalZoom=null}this.setMapAppearance(!1),this.setEditorAppearance("dark"===this.originalAppearance),this.$store.commit("workbench/UPDATE_ZEN_DARK_THEME_STATE",{isZenDarkTheme:!1}),this.$store.commit(`${a.SHARED}/setZenModeNightMode`,{mode:!1}),this.timerVisible=!1,this.startTime>0&&(this.stopTimer(),this.storeTimer()),this.$store.commit(`${a.SHARED}/updateRightBarPanel`,{visible:this.isRightBarVisible}),this.$store.commit("workbench/UPDATE_LEFTBAR_STATE",{visible:Boolean(this.isLeftBarVisible)})}};t.Z=T},20072:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nextZoomScaleForZoomOut=function(e){let t=o[o.length-1];for(let n=o.length-2;n>=0&&!(o[n]>=e);n--)t=o[n];return t},t.nextZoomScaleForZoomIn=function(e){let t=o[0];for(let n=1;n<o.length&&!(o[n]<=e);n++)t=o[n];return t},t.MIN_ZOOM_SCALE=t.MAX_ZOOM_SCALE=t.default=void 0;const o=[500,400,300,200,150,120,100,80,50,20];var n=o;t.default=n;const i=o[0];t.MAX_ZOOM_SCALE=i;const r=o[o.length-1];t.MIN_ZOOM_SCALE=r},49643:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(61027)),r=o(54399);function a(){this.rowStart=1,this.tmp={numbersOfColumns:r.COLUMNS_A,cellStart:1,cellWidth:1,cellHeight:0},this.cellHeight=0,this.numbersOfColumns=r.COLUMNS_A}t.default=class{constructor(e){this.rowStart=e.rowStart||1,this.tmp={numbersOfColumns:r.COLUMNS_A,cellWidth:1,cellHeight:0},this.cellHeight=0,this.numbersOfColumns=r.COLUMNS_A,this.timestamp=0}fromCharCode(e){let t;if(e>r.COLUMNS_A+25){t=String.fromCharCode(r.COLUMNS_A+parseInt((e-r.COLUMNS_A)/26)-1)+String.fromCharCode(r.COLUMNS_A+(e-r.COLUMNS_A)%26)}else t=String.fromCharCode(e);return t}charCodeAt(e){let t;if(e.length>1){let o=e.split("");t=26*(o[0].charCodeAt()-r.COLUMNS_A+1)+r.COLUMNS_A-1+(o[1].charCodeAt()-r.COLUMNS_A+1)}else t=e.charCodeAt();return t}calculateCellPosition(e,t=this.rowStart,o=r.COLUMNS_A){let n=e.reduce(((e,t)=>(e[t.columns]=e[t.columns]||[],e[t.columns].push(t),e)),{});const i=Object.keys(n).map((e=>({width:Math.max(...n[e].map((e=>e.title?this.countStringLength(e.title):1)))+r.FREE_POSITION})));return n=Object.keys(n).map((e=>n[e].map(((i,r)=>(e===this.fromCharCode(o+1)&&0===r?i.row=t:i.isFirstChild?n[this.fromCharCode(this.charCodeAt(e)-1)].forEach((e=>{e.id===i.parentId&&(i.row=e.row)})):i.row=n[e][r-1].row+(Array.isArray(n[e][r-1].children)?1:n[e][r-1].children),i.position=i.columns+i.row,i.children&&!Array.isArray(i.children)&&i.children>1&&(i.merges=`${i.position}:${i.columns}${i.row+i.children-1}`),i))))).reduce(((e,t)=>e.concat(t)),[]),{cols:i,_children:n}}countStringLength(e=""){let t=0;for(let o=0;o<e.length;o++){let n=e.charCodeAt(o);t+=94===n||n>127?2:1}return t}walkTopics(e,t={children:[]}){const o=i.default.constant.TOPIC_TYPE;let n=!1;if(!(e.children&&(e.children[o.ATTACHED]&&e.children[o.ATTACHED].length||e.children.length>0)))return this.cellHeight++,{cellHeight:this.cellHeight,children:[]};this.numbersOfColumns++;return[...(e.children.length?e.children:e.children[o.ATTACHED])||[]].forEach(((o,i)=>{!0===n&&(this.numbersOfColumns++,n=!1);const r={id:o.id,title:o.title,children:[],columns:this.fromCharCode(this.numbersOfColumns),parentId:e.id,isFirstChild:0===i};this.walkTopics(o,r),!1===n&&(n=!0),this.numbersOfColumns=this.numbersOfColumns-1,t.children.push(r)})),t.children.forEach(((e,o)=>{if(e.children.length){let n=e.children.slice();t.children[o].children=e.children.filter((e=>e.isLastChild)).length,t.children.push(...n)}else t.children[o].isLastChild=!0})),{cellHeight:this.cellHeight,children:t.children}}handleNoChild(e){return{children:[{children:1,id:e.id,title:e.title,columns:this.fromCharCode(r.COLUMNS_A),row:this.rowStart,position:this.fromCharCode(r.COLUMNS_A)+this.rowStart}],cols:[{width:this.countStringLength(e.title)+r.FREE_POSITION}],merges:[]}}isNoAttachedChild(e){return!(e.children&&e.children.attached&&e.children.attached.length)}isNoDetachedChild(e){return!(e.children&&e.children.detached&&e.children.detached.length)}setWorksheet({merges:e,children:t,cols:o},n){n.columns=o,e.forEach((e=>{n.mergeCells(e)})),t.forEach((e=>{n.getCell(e.position).value=e.title,n.getCell(e.position).alignment={vertical:"middle",horizontal:"center"}}))}doExport(e,t){return a.call(this),Promise.resolve({workbook:e,sheet:t})}}},54399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STRUCTURE_CLASS_SPREADSHEET=t.FLOATING_SPACING=t.COLUMNS_A=t.FREE_POSITION=void 0;t.FREE_POSITION=2;t.COLUMNS_A=65;t.FLOATING_SPACING=3;t.STRUCTURE_CLASS_SPREADSHEET="org.xmind.ui.spreadsheet"},32107:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){const t=e.state.editor,o=e.state.editor.sheetContentChangedTrigger,n=e.state.editor.sheetSwitchedTrigger;if(t&&(t.isVisible||o||n)){const t=Date.now(),o=e.state.editor.sbEditorWrapper.value;if(!o)return;const n=o.getCurrentSheetEditor();if(!n)return;const p=n.model.toJSON();if(!p)return;const h=p.rootTopic,f=new i.Workbook,m=e.state.wd.title,g=f.addWorksheet(m);let v;v=h.structureClass===r.default.constant.STRUCTURECLASS.COLUMNSPREADSHEET?d.default:h.structureClass===r.default.constant.STRUCTURECLASS.SPREADSHEET?u.default:c.default,await v.doExport(h,g,f,n.model),await(0,a.closeProgress)(e);const b=await(0,s.showSaveDialog)({title:"Export",suggestPath:{store:e,sheet:n.model},filters:[{name:"XLSX",extensions:["xlsx"]}]});b&&(await f.xlsx.writeFile(b),(0,l.trackEvent)({eventCategory:"export",eventAction:"durationExportExcel",eventValue:Date.now()-t}),e.commit("rateUs/addRateMasValue",1))}};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=p(t);if(o&&o.has(e))return o.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=i?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=e[r]}n.default=e,o&&o.set(e,n);return n}(o(56804)),r=n(o(61027)),a=o(81815),s=o(95287),l=o(83450),c=n(o(63873)),d=n(o(49583)),u=n(o(87659));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(p=function(e){return e?o:t})(e)}},58262:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(59713)),r=n(o(61027)),a=o(54399),s=n(o(49643));function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class d extends s.default{constructor(e){super(e)}walkMatrixTopics(e,t={children:[]}){const o=r.default.constant.TOPIC_TYPE;if(e.children&&Object.keys(e.children).length)return[...e.children[o.ATTACHED]||[]].forEach(((o,n)=>{const i=Object.assign({},o,{id:o.id,title:o.title,children:[],parentId:e.id,isFirstChild:0===n});this.walkMatrixTopics(o,i),t.children.push(i)})),{children:t.children}}transformStructure(e){let t=e.children.map((e=>e.children.reduce(((e,t)=>(t.labels||(t.labels=[""]),e[t.labels[0]]=e[t.labels[0]]||[],e[t.labels[0]].push(t),e)),{})));let o=e.extensions.find((e=>e.provider===a.STRUCTURE_CLASS_SPREADSHEET)).content[0].content.map((e=>e.content));return t=t.map((e=>o.map((t=>e[t]=e[t]||""===e[t]?e[t]:[{labels:[t],title:""}])))),t=t.map((e=>Object.keys(e).map((t=>e[t])).reduce(((e,t)=>e.concat(t)),[]))),e.children=e.children.map(((e,o)=>(e.children=t[o],e))),e.children}findLastColumns(e){let t=a.COLUMNS_A;return e.forEach((e=>t=Math.max(t,this.charCodeAt(e.columns)))),t}calculateMatrixCellPosition(e,t,o){let n=e.children.reduce(((e,t)=>{if(Array.isArray(t.labels)&&t.labels.every((e=>e))){const o=t.cellHeight||1,{labels:n,columns:i}=t,r=Array.isArray(n)?n[0]:null;if(!r||!i)return e;e[r]||(e[r]={}),e[r]=c(c({},e[r]),{},{[i]:[...e[r][i]||[],c(c({},t),{},{cellHeight:o})]})}return e}),{});n=Object.keys(n).reduce(((e,o,i)=>(i<t.length&&(e[t[i].id]=n[t[i].id]),e)),{}),u.call(this,n),function(e){for(const t in e){let o=e[t];for(const e in o){let t=o[e];Array.isArray(t)&&1===t.length&&1===t[0].cellHeight&&(t[0].cellHeight=o.height)}}}(n);const{_firstColumns:i,rowStart:r}=p.call(this,n,t);t=i;let s=[];for(const e in n){let t=Object.keys(n[e]).filter((t=>Array.isArray(n[e][t])));s=s.length>t.length?s:t}let{children:l,_columns:d}=f.call(this,n,s);n=l,o=h.call(this,o,d);let{inlineChildren:v}=n.filter((e=>e._children&&e._children.length)).reduce(((e,t)=>{let{children:o}=g.call(this,t);return e.inlineChildren=e.inlineChildren.concat(o),e}),{inlineChildren:[]});n=n.concat(v).concat(t).concat(o);let b=n.filter((e=>e.merges)).map((e=>e.merges)),{cols:A,lastColumns:E}=m.call(this,n);return e={title:e.title,position:this.fromCharCode(a.COLUMNS_A)+this.rowStart,merges:`${this.fromCharCode(a.COLUMNS_A)}${this.rowStart}:${E}${this.rowStart}`},n.unshift(e),b.unshift(e.merges),{cols:A,children:n,merges:b,rowStart:r-this.rowStart}}handleFloatingTopic(e){let t=e.children.detached.slice()||[];return t=[e].concat(t),t}}function u(e){Object.keys(e).forEach(((t,o)=>{let n=e[t],i=0;Object.keys(n).forEach((e=>{let t=n[e].reduce(((e,t)=>e+t.cellHeight),0);i=Math.max(i,t)})),n.height=i,e[t].cellStart=0===o?this.rowStart+2:e[Object.keys(e)[o-1]].cellStart+e[Object.keys(e)[o-1]].height}))}function p(e,t){let o;return{_firstColumns:Object.keys(e).map(((n,i)=>{let r;return i===Object.keys(e).length-1&&(o=e[n].cellStart+e[n].height-1),t.forEach((e=>{e.id===n&&(r=e.title)})),{title:r,columns:this.fromCharCode(a.COLUMNS_A),position:this.fromCharCode(a.COLUMNS_A)+e[n].cellStart,merges:`${this.fromCharCode(a.COLUMNS_A)}${e[n].cellStart}:${this.fromCharCode(a.COLUMNS_A)}${e[n].cellStart+e[n].height-1}`}})),rowStart:o}}function h(e,t){return e.map(((e,o)=>Object.assign({},e,{columns:t[o],position:t[o]+(this.rowStart+1),merges:`${t[o]}${this.rowStart+1}:${this.fromCharCode(this.charCodeAt(t[o+1])-1)}${this.rowStart+1}`})))}function f(e,t){let o=t.slice();return{children:e=Object.keys(e).map((n=>Object.keys(e[n]).map((i=>{if(Array.isArray(e[n][i]))return e[n][i].map(((r,a)=>(r.row=0===a?e[n].cellStart:e[n][i][a-1].row+(e[n][i][a-1].cellHeight?e[n][i][a-1].cellHeight:1),t[t.findIndex((e=>e===i))+1]?r.cellColEnd=this.fromCharCode(this.charCodeAt(t[t.findIndex((e=>e===i))+1])-1):(r.cellColEnd=this.fromCharCode(this.charCodeAt(t[t.length-1])+this.tmp.cellWidth-1),o.push(this.fromCharCode(this.charCodeAt(t[t.length-1])+this.tmp.cellWidth))),r.position=r.columns+r.row,this.charCodeAt(r.cellColEnd)===this.charCodeAt(r.columns)+1&&1===this.cellHeight||(r._children&&r._children.length?r.merges=`${r.position}:${r.columns}${r.row+r.cellHeight-1}`:r.merges=`${r.position}:${r.cellColEnd}${r.row+r.cellHeight-1}`),r)))})).filter((e=>e)).reduce(((e,t)=>e.concat(t)),[]))).reduce(((e,t)=>e.concat(t)),[]),_columns:o}}function m(e){let t=e.reduce(((e,t)=>(e[t.columns]=e[t.columns]||[],e[t.columns].push(t),e)),{});t=Object.keys(t).sort(((e,t)=>this.charCodeAt(e)-this.charCodeAt(t))).reduce(((e,o)=>(e[o]=t[o],e)),{});let o=Object.keys(t)[Object.keys(t).length-1];return{cols:Object.keys(t).map((e=>({width:Math.max(...t[e].map((e=>e.title?this.countStringLength(e.title):1)))+a.FREE_POSITION}))),lastColumns:o}}function g(e){let{_children:t}=e;const{_children:o}=this.calculateCellPosition(t,e.row,this.charCodeAt(e.columns));return t=o,{children:t}}t.default=d},49583:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MatrixColumnsExport=void 0;var i=n(o(61027)),r=o(54399),a=o(63873),s=o(87659),l=n(o(58262));class c extends l.default{constructor(e){super(e)}handleRootTopic(e){let t,o;e.children=this.walkMatrixTopics(e).children,e.children=this.transformStructure(e);t=e.extensions.find((e=>e.provider===r.STRUCTURE_CLASS_SPREADSHEET)).content[0].content.map(((e,t)=>({title:e.content,id:t.toString()}))),o=(e=d.call(this,e,t)).children.filter((e=>!(e.labels&&e.labels.length)));let{children:n,merges:i,cols:a,rowStart:s}=this.calculateMatrixCellPosition(e,t,o);return{children:n,merges:i,cols:a,rowStart:s}}doExport(e,t,o,n){let l;if(this.isNoDetachedChild(e)&&this.isNoAttachedChild(e))l=this.handleNoChild(e);else if(this.isNoDetachedChild(e)&&!this.isNoAttachedChild(e))l=this.handleRootTopic(e);else{let t;l=(e=this.handleFloatingTopic(e)).map((e=>{let o;return t=e.structureClass===i.default.constant.STRUCTURECLASS.COLUMNSPREADSHEET?new c({rowStart:this.rowStart}):e.structureClass===i.default.constant.STRUCTURECLASS.SPREADSHEET?new s.MatrixExport({rowStart:this.rowStart}):new a.NormalExport({rowStart:this.rowStart}),this.isNoDetachedChild(e)&&this.isNoAttachedChild(e)?(o=t.handleNoChild(e),this.rowStart=this.rowStart+1+r.FLOATING_SPACING):(o=t.handleRootTopic(e),this.rowStart=this.rowStart+o.rowStart+r.FLOATING_SPACING),o})).reduce(((e,t)=>(e.children=e.children.concat(t.children),e.merges=e.merges.concat(t.merges),e)))}return this.setWorksheet(l,t),super.doExport(o,n)}}function d(e,t){let o=e.children.map((e=>(this.numbersOfColumns+=this.tmp.cellWidth,this.tmp.cellWidth=1,this.tmp.cellHeight=0,e.children.map((e=>{if(e.children&&e.children.length){this.tmp.numbersOfColumns=this.numbersOfColumns;const{children:t}=this.walkTopics(e);e.cellHeight=this.cellHeight;const o=this.findLastColumns(t)-this.tmp.numbersOfColumns+1;e=Object.assign({},e,{_children:t,children:[],cellWidth:o}),this.numbersOfColumns=this.tmp.numbersOfColumns,this.tmp.cellWidth=o>this.tmp.cellWidth?o:this.tmp.cellWidth,this.tmp.cellHeight+=this.cellHeight,this.cellHeight=0}else this.tmp.numbersOfColumns=1;return e.columns=this.fromCharCode(this.numbersOfColumns),e}))))).reduce(((e,t)=>e.concat(t)),[]);return e.children=e.children.filter((e=>!(e.labels&&e.label.length))).concat(o),e.children=e.children.map((e=>(e.labels&&e.labels.length&&t.forEach((t=>{e.labels[0]===t.title&&(e.labels[0]=t.id)})),e))),e}t.MatrixColumnsExport=c;var u=new c({rowStart:1});t.default=u},87659:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MatrixExport=void 0;var i=n(o(61027)),r=o(54399),a=o(63873),s=o(49583),l=n(o(58262));class c extends l.default{constructor(e){super(e)}handleRootTopic(e){let t,o;e.children=this.walkMatrixTopics(e).children,e.children=this.transformStructure(e),t=(e=d.call(this,e)).children.filter((e=>!(Array.isArray(e.labels)&&e.labels.every((e=>e))))).map((e=>({id:e.id,title:e.title})));o=e.extensions.find((e=>e.provider===r.STRUCTURE_CLASS_SPREADSHEET)).content[0].content.map((e=>({title:e.content})));let{children:n,merges:i,cols:a,rowStart:s}=this.calculateMatrixCellPosition(e,t,o);return{children:n,merges:i,cols:a,rowStart:s}}doExport(e,t,o,n){let l;if(this.isNoDetachedChild(e)&&this.isNoAttachedChild(e))l=this.handleNoChild(e);else if(this.isNoDetachedChild(e)&&!this.isNoAttachedChild(e))l=this.handleRootTopic(e);else{let t;l=(e=this.handleFloatingTopic(e)).map((e=>{let o;return t=e.structureClass===i.default.constant.STRUCTURECLASS.COLUMNSPREADSHEET?new s.MatrixColumnsExport({rowStart:this.rowStart}):e.structureClass===i.default.constant.STRUCTURECLASS.SPREADSHEET?new c({rowStart:this.rowStart}):new a.NormalExport({rowStart:this.rowStart}),this.isNoDetachedChild(e)&&this.isNoAttachedChild(e)?(o=t.handleNoChild(e),this.rowStart=this.rowStart+1+r.FLOATING_SPACING):(o=t.handleRootTopic(e),this.rowStart=this.rowStart+o.rowStart+r.FLOATING_SPACING),o})).reduce(((e,t)=>(e.children=e.children.concat(t.children),e.merges=e.merges.concat(t.merges),e)))}return this.setWorksheet(l,t),super.doExport(o,n)}}function d(e){e.children.forEach((t=>{t.children&&t.children.length&&(t.children=t.children.map((e=>Object.assign({},e,{labels:[t.id],label:e.labels[0]}))),t.children.forEach((t=>{e.children.push(t)})),t.children=[])}));let t=e.children.filter((e=>e.label||""===e.label)).reduce(((e,t)=>(e[t.label]||(e[t.label]=[]),e[t.label].push(t),e)),{});return t=Object.keys(t).map((e=>(this.numbersOfColumns+=this.tmp.cellWidth,this.tmp.cellWidth=1,this.tmp.cellHeight=0,t[e].map((e=>{if(e.children&&e.children.length){this.tmp.numbersOfColumns=this.numbersOfColumns;const{children:t}=this.walkTopics(e);e.cellHeight=this.cellHeight;const o=this.findLastColumns(t)-this.tmp.numbersOfColumns+1;e=Object.assign({},e,{_children:t,children:[],cellWidth:o}),this.numbersOfColumns=this.tmp.numbersOfColumns,this.tmp.cellWidth=o>this.tmp.cellWidth?o:this.tmp.cellWidth,this.tmp.cellHeight+=this.cellHeight,this.cellHeight=0}else this.tmp.numbersOfColumns=1;return e.columns=this.fromCharCode(this.numbersOfColumns),e}))))).reduce(((e,t)=>e.concat(t)),[]),e.children=e.children.filter((e=>!(e.label||""===e.label))).concat(t),e}t.MatrixExport=c;var u=new c({rowStart:1});t.default=u},63873:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NormalExport=void 0;var i=o(54399),r=n(o(49643));class a extends r.default{constructor(e){super(e)}handleRootTopic(e,t=this.rowStart){e=function(e){return e.children.attached=e.children.attached||[],e.children.attached=e.children.attached.concat(e.children.detached||[]),e}(e);let{children:o,cellHeight:n}=this.walkTopics(e);const{_children:r,cols:a}=this.calculateCellPosition(o);o=r,o.unshift({children:n,id:e.id,title:e.title,columns:this.fromCharCode(this.tmp.numbersOfColumns),row:t,position:this.fromCharCode(this.tmp.numbersOfColumns)+t}),a.unshift({width:this.countStringLength(e.title)+i.FREE_POSITION});const s=function(e){return e.filter((e=>e.children&&!Array.isArray(e.children)&&e.children>1)).map((e=>`${e.position}:${e.columns}${e.row+e.children-1}`))}(o);return{children:o,cols:a,merges:s,rowStart:n}}doExport(e,t,o,n){let i;return i=this.isNoDetachedChild(e)&&this.isNoAttachedChild(e)?this.handleNoChild(e):this.handleRootTopic(e),this.setWorksheet(i,t),super.doExport(o,n)}}t.NormalExport=a;var s=new a({rowStart:1});t.default=s},5289:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"exportPdfmap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"exportExcel",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"exportMarkdown",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"doExportPng",{enumerable:!0,get:function(){return s.doExportPng}}),Object.defineProperty(t,"exportWorkbookPng",{enumerable:!0,get:function(){return s.exportWorkbookPng}}),Object.defineProperty(t,"exportSvg",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"exportWord",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"exportOPML",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"exportTextBundle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"exportPowerPoint",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"exportToSinglePDFWithSamePageSize",{enumerable:!0,get:function(){return h.exportToSinglePDFWithSamePageSize}}),Object.defineProperty(t,"exportToMultiPDF",{enumerable:!0,get:function(){return h.exportToMultiPDF}}),Object.defineProperty(t,"exportPdfDialog",{enumerable:!0,get:function(){return h.exportPdfDialog}});var i=n(o(52962)),r=n(o(32107)),a=n(o(64174)),s=o(68061),l=n(o(78497)),c=n(o(75144)),d=n(o(67095)),u=n(o(7274)),p=n(o(40084)),h=o(87865)},64174:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,{targetBranch:t}){const o=Date.now(),n=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().model,c=(t=t&&t.model)?t.attributes.title:"",p={manifest:{resources:{}}};t?p.targetBranch=t:p.sheets=[n];let h="";e.getters["activation/status"]!==a.ACTIVATION_STATUS.VALID&&(h+="*XMind - Evaluation Version*");let f=null;try{f=await r.default.formatconverter.toMarkdown(p,{textWatermark:h})}catch(e){u.debug("[Export to Markdown]: ",e)}await(0,d.closeProgress)(e);const m=await(0,s.showSaveDialog)({title:"Export",filters:[{name:"markdown",extensions:["md"]}],suggestPath:{store:e,suggestedName:c,sheet:n}});m&&(await i.default.writeFile(m,f),(0,l.trackEvent)({eventCategory:"export",eventAction:"durationExportMarkdown",eventValue:Date.now()-o}),e.commit("rateUs/addRateMasValue",1))};var i=n(o(2286)),r=n(o(61027)),a=o(48932),s=o(95287),l=o(83450),c=n(o(41698)),d=o(81815);const u=(0,c.default)("core:export")},67095:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){const t=e.state.editor.sbEditorWrapper.value;if(!t)return;const o=t.getCurrentSheetEditor().model,n=Date.now(),u={manifest:{resources:{}},sheets:[o]};let p="";e.getters["activation/status"]!==a.ACTIVATION_STATUS.VALID&&(p+="XMind - Evaluation Version");let h=null;try{h=await r.default.formatconverter.toOPML(u,{textWatermark:p})}catch(e){d.debug("[Snowbrush export to OPML]: ",e)}await(0,s.closeProgress)(e);const f=await(0,l.showSaveDialog)({title:"Export",filters:[{name:"OPML",extensions:["opml"]}],suggestPath:{store:e,sheet:o}});if(f&&h){try{await i.default.writeFile(f,h),e.commit("rateUs/addRateMasValue",1)}catch(e){d.debug("[Export to OPML]: ",e)}(0,c.trackEvent)({eventCategory:"export",eventAction:"durationExportOPML",eventValue:Date.now()-n})}};var i=n(o(2286)),r=n(o(61027)),a=o(48932),s=o(81815),l=o(95287),c=o(83450);const d=(0,n(o(41698)).default)("core:export")},87865:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.exportToSinglePDFWithSamePageSize=v,t.exportToMultiPDF=b,t.exportPdfDialog=async function(e,{targetBranch:t=null}={}){const o=e.state.editor.sbEditorWrapper.value,n=o.getCurrentSheetEditor().getContentBound();let r={contentScope:0,exportTo:0,transparent:!1,exportCategory:"mindmap"};if(!t){const e=await i.default.fetch(a.WINDOW_OPEN,{name:"dialog-export-to-pdf",parentId:window.id,wait:!0,query:{bound:[n.width,n.height],editorId:window.editorId}});if(!e)return;r=e.result}if(!r)return;await async function(e,t){e.commit(`${l.SHARED}/setExporting`,{exporting:!0}),await i.default.fetch(a.WINDOW_OPEN,{name:"dialog-progress",parentId:window.id,query:{type:t,editorId:window.editorId}})}(e,"pdf"),1===r.contentScope&&await o.initAllSheetEditor();if("outliner"===r.exportCategory){if(0===r.exportTo)(0,m.exportPDF)(e);else{const t=Object.keys(o.sheetEditors);(0,m.exportPDFMultiple)(e,t)}return}if("pitch"===r.exportCategory){if(0===r.exportTo)(0,g.exportPDF)(e,!r.transparent);else{const t=Object.keys(o.sheetEditors);(0,g.exportPDF)(e,!r.transparent,t)}return}const c=(0,h.getScreenDPI)(),A=25.4/c.x,E=25.4/c.y;if(0===r.exportTo){const i={content:["currentMap","workbook"][r.contentScope],orientation:"portrait",pageSetup:{background:!r.transparent},margins:{top:0,bottom:1,left:0,right:0},pageSize:{x:210,y:297},scale:"fitMap",sides:"one-sided"};if(0===r.contentScope){const e=t?t.bounds.width:n.width,o=t?t.bounds.height:n.height,r=Math.min(e,o)*A,a=Math.max(e,o)*E;i.pageSize={x:Math.max(r,21),y:Math.max(a,21*a/r)},i.orientation=e>o?"landscape":"portrait"}const a=await v(e,i,t),l=o.getCurrentSheetEditor();let c="";t&&(c=t.model.attributes.title);const u=await(0,s.showSaveDialog)({title:e.getters["l10n/T"]("Save"),suggestPath:{store:e,suggestedName:c,sheet:l.model},filters:[{name:"PDF",extensions:["pdf"]}]});u&&await d.default.writeFile(u,a)}else if(1===r.exportTo){const n={},i={content:["currentMap","workbook"][r.contentScope],orientation:"portrait",pageSetup:{background:!r.transparent},margins:{top:0,bottom:1,left:0,right:0},pageSize:{x:210,y:297},pageSizes:n,scale:"fitMap",sides:"one-sided"},a={},s=Object.keys(o.sheetEditors),l=o.model,c=[],h=(e,t=2)=>{const o=`${e}_${t}`;return c.includes(o)?h(e,t+1):o};for(let e=0;e<s.length;e++){const t=s[e],i=o.sheetEditors[t];let r=l.attributes.sheets[e].title;c.includes(r)&&(r=h(r)),c.push(r),r=r.replace(/[/\\?%*:|"<>]/g,"-"),a[t]=r;const d=i.getContentBound(),u=Math.min(d.width,d.height)*A,p=Math.max(d.width,d.height)*E;n[t]={x:Math.max(u,21),y:Math.max(p,21/p*u),orientation:d.width>d.height?"landscape":"portrait"}}const m=await b(e,i,t),{canceled:g,filePaths:v}=await p.remote.dialog.showOpenDialog(p.remote.getCurrentWindow(),{title:e.getters["l10n/T"]("Save"),buttonLabel:e.getters["l10n/T"]("Save"),properties:["openDirectory","createDirectory"],securityScopedBookmarks:!0});if(g||!v||!v.length)return;const T=v[0],y=(0,f.suggestDirNameSync)(T,o.model.get("title"));await d.default.ensureDir(y);for(const e of Object.keys(m)){let t=a[e];t="win32"===process.platform?(0,f.filterSpecialCharacterOnWindows)(t):t,t=t.replace(/[/\\?%*:|"<>]/g,"-");const o=u.default.resolve(y,t+".pdf");await d.default.writeFile(o,m[e])}}};var i=n(o(24678)),r=o(15055),a=o(99492),s=o(95287),l=o(90336),c=o(81815),d=n(o(2286)),u=n(o(85622)),p=o(58933),h=o(28441),f=o(1893),m=o(89526),g=o(48519);async function v(e,t,o){t.previewType="PDF";const n=await(0,r.prepare)(e,t,o),i={pageSize:{width:1e3*t.pageSize.x,height:1e3*t.pageSize.y},printBackground:!0,landscape:"landscape"===t.orientation};await(0,c.closeProgress)(e);const a=p.remote.getCurrentWebContents(),s=await a.printToPDF(i);return n&&n(),s}async function b(e,t,o){t.previewType="PDF";const n=await(0,r.prepare)(e,t,o);await(0,c.closeProgress)(e);const i={},a=n.effectSide.forSheets,s=Object.keys(a),l={};s.forEach((e=>{const t=a[e];l[e]=t.length>0&&t[0]}));for(const e of s){const o=l[e];Object.values(l).filter((e=>e&&e!==o)).forEach((e=>{n.hideSvg(e)})),n.showSvg(o);const r={x:t.pageSizes[e].x||t.pageSize.x,y:t.pageSizes[e].y||t.pageSize.y},a=t.pageSizes[e].orientation||t.orientation,s={pageSize:{width:1e3*r.x,height:1e3*r.y},printBackground:!0,landscape:"landscape"===a},c=p.remote.getCurrentWebContents(),d=await c.printToPDF(s);d&&(i[e]=d)}return n(),i}},52962:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t={targetBranch:null}){const o=Date.now(),{targetBranch:n}=t,r=e.state.editor.sbEditorWrapper.value;if(!r)return;const d=r.getCurrentSheetEditor().model;r.execAction(p);const m={marginsType:0,pageSize:{width:21e4,height:297e3},printBackground:!0,landscape:!1};let g=null;try{g=await(0,u.prepare)(e,f,n)}catch(t){if(!(e=>"string"==typeof e&&e.indexOf("timeout")>-1)(t))throw t;return void((e,t)=>{let o="Unknown Error";t&&(o=t.stack||t.message||t.toString());h.error(o),(0,l.showMessageBox)({type:"warning",message:e.getters["l10n/T"]("Failed to export this file."),detail:e.getters["l10n/T"]("Your ideas are beyond XMinds capacity. We suggest you to split this file into multiple files before next step."),buttons:[e.getters["l10n/T"]("OK")]})})(e,t)}finally{await(0,s.closeProgress)(e)}let v=null;try{v=await async function(e){return i.remote.getCurrentWebContents().printToPDF(e)}(m)}catch(e){throw e}finally{g(),await(0,s.closeProgress)(e)}let b="";n&&(b=n.model.attributes.title);const A=await(0,l.showSaveDialog)({title:"Save",filters:[{name:"PDF",extensions:["pdf"]}],suggestPath:{store:e,suggestedName:b,sheet:d}});A&&v&&(await a.default.writeFile(A,v),e.commit("rateUs/addRateMasValue",1),(0,c.trackEvent)({eventCategory:"export",eventAction:"durationExportPdfMap",eventValue:Date.now()-o}))};var i=o(58933),r=n(o(61027)),a=n(o(2286)),s=o(81815),l=o(95287),c=o(83450),d=n(o(41698)),u=o(15055);const{REMOVE_ALL_SELECTION:p}=r.default.constant.ACTION_NAMES,h=(0,d.default)("core:export"),f={previewType:"PDF",saveAsPdf:!0,margins:{top:10,bottom:10,left:10,right:10},pageSize:{x:210,y:297},copies:1,content:"currentMap",orientation:"portrait",pageSetup:{background:!0,border:!1,icons:!0},pages:"singlePage",sides:"one-sided",header:{font:{size:10,family:"system-ui"},align:"center",content:""},footer:{font:{size:10,family:"system-ui"},align:"center",content:""}}},68061:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.exportPng=C,t.getPngDataUrlFromSvgText=w,t.doExportPng=async function(e,{scale:t=1,targetBranch:o=null,transparent:n=!1}={}){const i=e.state.editor.sbEditorWrapper.value;if(!i)return;const a=i.getCurrentSheetEditor();let c="";o&&(c=o.model.attributes.title);const d=Date.now();let u;try{u=await C({se:a,scale:t,store:e,targetBranch:o,transparent:n})}catch(t){if(await(0,h.closeProgress)(e),!x(t))throw t;return void I(e,t)}await(0,h.closeProgress)(e);const p=await(0,g.showSaveDialog)({title:"Export",properties:["createDirectory"],suggestPath:{store:e,suggestedName:c,sheet:a.model},filters:[{name:"PNG",extensions:["png"]}]});if(p){const t=y();t>1&&(u=(0,s.changeDpiDataUrl)(u,72*t)),l.default.writeFile(p,new r.Buffer(u.slice("data:image/png;base64,".length),"base64")).then((()=>{(0,v.trackEvent)({eventCategory:"export",eventAction:"durationExportPng",eventValue:Date.now()-d}),e.commit("rateUs/addRateMasValue",1)}))}},t.exportWorkbookPng=async function(e,t,{scale:o=1,targetBranch:n=null,transparent:a=!1}={}){const c=e.state.editor.sbEditorWrapper.value;if(!c)return;c.initAllSheetEditor();const d=Object.values(c.sheetEditors),u=c.model,f=[],m=(e,t=2)=>{const o=`${e}_${t}`;return f.includes(o)?m(e,t+1):o};try{await Promise.all(d.map((async(c,d)=>{let h=await C({se:c,scale:o,store:e,targetBranch:n,transparent:a});const g=y();g>1&&(h=(0,s.changeDpiDataUrl)(h,72*g));let v=u.attributes.sheets[d].title;f.includes(v)&&(v=m(v)),f.push(v),v=v.replace(/[/\\?%*:|"<>]/g,"-");const b="win32"===process.platform?(0,p.filterSpecialCharacterOnWindows)(v):v,A=i.default.join(t,b+".png");return l.default.writeFile(A,new r.Buffer(h.slice("data:image/png;base64,".length),"base64"))})))}catch(t){if(!x(t))throw t;return void I(e,t)}finally{await(0,h.closeProgress)(e)}};var i=n(o(85622)),r=o(23407),a=o(58933),s=o(41809),l=n(o(2286)),c=n(o(19755)),d=o(36414),u=o(48932),p=o(1893),h=o(81815),f=o(12444),m=o(15055),g=o(95287),v=o(83450),b=n(o(41698)),A=o(28441);const E=(0,b.default)("export:png"),T=function(){let e,t;return function(){return e||(t=document.createElement("canvas"),e=t.getContext("2d")),{ctx:e,canvas:t}}}();function y(){const e=a.remote.screen.getAllDisplays().map((e=>e.scaleFactor));return Math.max.apply(null,e)}function C({se:e,scale:t=1,store:o,targetBranch:n=null,transparent:i=!1}={}){const r={padding:50,scale:t,hidpi:96*y(),skipFont:!1,targetBranch:n,timeout:u.EXPORT_IMAGE_TIMEOUT,noBackground:i};if(o.getters["activation/forcesUsingWatermark"]){const t="print-watermark";return Promise.all([e.exportImage(Object.assign(r,{scale:2*r.scale,format:"SVG",timeout:u.EXPORT_IMAGE_TIMEOUT})),(0,f.getWatermarkContent)(t,o)]).then((([t,o])=>new Promise(((i,r)=>{const a=(0,A.getScreenDPI)(),s=25.4/a.x,l=25.4/a.y,u={orientation:"portrait",pageSize:{x:210,y:297}},p=e.getContentBound(),h=n?n.bounds.width:p.width,f=n?n.bounds.height:p.height;u.pageSize={x:Math.max(parseInt(Math.min(h,f)*s)+1,21),y:parseInt(Math.max(h,f)*l)+1},u.orientation=h>f?"landscape":"portrait";const g=u.pageSize,v=u.orientation,b="portrait"===v?g.x:g.y,E="portrait"===v?g.y:g.x,T={x:parseInt(b*a.x/25.4),y:parseInt(E*a.y/25.4)},y=Math.ceil(t.width/T.x),C=Math.ceil(t.height/T.y),S="print_"+(0,d.UUID)(),k=(0,c.default)(t.data).eq(2).attr("width",T.x).attr("height",T.y).attr("id",S).css("display","").addClass("print-el");(0,m.withWatermaskForSVG)(k,o,t,T,{pageX:y,pageY:C,actualSizeMode:!0},v),k.attr("width",t.width).attr("height",t.height);w(`<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [ <!ENTITY quot "&#34;">  <!ENTITY amp "&#38;">  <!ENTITY apos "&#39;">  <!ENTITY lt "&#60;">  <!ENTITY gt "&#62;">  <!ENTITY nbsp "&#160;">  <!ENTITY iexcl "&#161;">  <!ENTITY cent "&#162;">  <!ENTITY pound "&#163;">  <!ENTITY curren "&#164;">  <!ENTITY yen "&#165;">  <!ENTITY brvbar "&#166;">  <!ENTITY sect "&#167;">  <!ENTITY uml "&#168;">  <!ENTITY copy "&#169;">  <!ENTITY ordf "&#170;">  <!ENTITY laquo "&#171;">  <!ENTITY not "&#172;">  <!ENTITY shy "&#173;">  <!ENTITY reg "&#174;">  <!ENTITY macr "&#175;">  <!ENTITY deg "&#176;">  <!ENTITY plusmn "&#177;">  <!ENTITY sup2 "&#178;">  <!ENTITY sup3 "&#179;">  <!ENTITY acute "&#180;">  <!ENTITY micro "&#181;">  <!ENTITY para "&#182;">  <!ENTITY middot "&#183;">  <!ENTITY cedil "&#184;">  <!ENTITY sup1 "&#185;">  <!ENTITY ordm "&#186;">  <!ENTITY raquo "&#187;">  <!ENTITY frac14 "&#188;">  <!ENTITY frac12 "&#189;">  <!ENTITY frac34 "&#190;">  <!ENTITY iquest "&#191;">  <!ENTITY Agrave "&#192;">  <!ENTITY Aacute "&#193;">  <!ENTITY Acirc "&#194;">  <!ENTITY Atilde "&#195;">  <!ENTITY Auml "&#196;">  <!ENTITY Aring "&#197;">  <!ENTITY AElig "&#198;">  <!ENTITY Ccedil "&#199;">  <!ENTITY Egrave "&#200;">  <!ENTITY Eacute "&#201;">  <!ENTITY Ecirc "&#202;">  <!ENTITY Euml "&#203;">  <!ENTITY Igrave "&#204;">  <!ENTITY Iacute "&#205;">  <!ENTITY Icirc "&#206;">  <!ENTITY Iuml "&#207;">  <!ENTITY ETH "&#208;">  <!ENTITY Ntilde "&#209;">  <!ENTITY Ograve "&#210;">  <!ENTITY Oacute "&#211;">  <!ENTITY Ocirc "&#212;">  <!ENTITY Otilde "&#213;">  <!ENTITY Ouml "&#214;">  <!ENTITY times "&#215;">  <!ENTITY Oslash "&#216;">  <!ENTITY Ugrave "&#217;">  <!ENTITY Uacute "&#218;">  <!ENTITY Ucirc "&#219;">  <!ENTITY Uuml "&#220;">  <!ENTITY Yacute "&#221;">  <!ENTITY THORN "&#222;">  <!ENTITY szlig "&#223;">  <!ENTITY agrave "&#224;">  <!ENTITY aacute "&#225;">  <!ENTITY acirc "&#226;">  <!ENTITY atilde "&#227;">  <!ENTITY auml "&#228;">  <!ENTITY aring "&#229;">  <!ENTITY aelig "&#230;">  <!ENTITY ccedil "&#231;">  <!ENTITY egrave "&#232;">  <!ENTITY eacute "&#233;">  <!ENTITY ecirc "&#234;">  <!ENTITY euml "&#235;">  <!ENTITY igrave "&#236;">  <!ENTITY iacute "&#237;">  <!ENTITY icirc "&#238;">  <!ENTITY iuml "&#239;">  <!ENTITY eth "&#240;">  <!ENTITY ntilde "&#241;">  <!ENTITY ograve "&#242;">  <!ENTITY oacute "&#243;">  <!ENTITY ocirc "&#244;">  <!ENTITY otilde "&#245;">  <!ENTITY ouml "&#246;">  <!ENTITY divide "&#247;">  <!ENTITY oslash "&#248;">  <!ENTITY ugrave "&#249;">  <!ENTITY uacute "&#250;">  <!ENTITY ucirc "&#251;">  <!ENTITY uuml "&#252;">  <!ENTITY yacute "&#253;">  <!ENTITY thorn "&#254;">  <!ENTITY yuml "&#255;">  <!ENTITY OElig "&#338;">  <!ENTITY oelig "&#339;">  <!ENTITY Scaron "&#352;">  <!ENTITY scaron "&#353;">  <!ENTITY Yuml "&#376;">  <!ENTITY fnof "&#402;">  <!ENTITY circ "&#710;">  <!ENTITY tilde "&#732;">  <!ENTITY Alpha "&#913;">  <!ENTITY Beta "&#914;">  <!ENTITY Gamma "&#915;">  <!ENTITY Delta "&#916;">  <!ENTITY Epsilon "&#917;">  <!ENTITY Zeta "&#918;">  <!ENTITY Eta "&#919;">  <!ENTITY Theta "&#920;">  <!ENTITY Iota "&#921;">  <!ENTITY Kappa "&#922;">  <!ENTITY Lambda "&#923;">  <!ENTITY Mu "&#924;">  <!ENTITY Nu "&#925;">  <!ENTITY Xi "&#926;">  <!ENTITY Omicron "&#927;">  <!ENTITY Pi "&#928;">  <!ENTITY Rho "&#929;">  <!ENTITY Sigma "&#931;">  <!ENTITY Tau "&#932;">  <!ENTITY Upsilon "&#933;">  <!ENTITY Phi "&#934;">  <!ENTITY Chi "&#935;">  <!ENTITY Psi "&#936;">  <!ENTITY Omega "&#937;">  <!ENTITY alpha "&#945;">  <!ENTITY beta "&#946;">  <!ENTITY gamma "&#947;">  <!ENTITY delta "&#948;">  <!ENTITY epsilon "&#949;">  <!ENTITY zeta "&#950;">  <!ENTITY eta "&#951;">  <!ENTITY theta "&#952;">  <!ENTITY iota "&#953;">  <!ENTITY kappa "&#954;">  <!ENTITY lambda "&#955;">  <!ENTITY mu "&#956;">  <!ENTITY nu "&#957;">  <!ENTITY xi "&#958;">  <!ENTITY omicron "&#959;">  <!ENTITY pi "&#960;">  <!ENTITY rho "&#961;">  <!ENTITY sigmaf "&#962;">  <!ENTITY sigma "&#963;">  <!ENTITY tau "&#964;">  <!ENTITY upsilon "&#965;">  <!ENTITY phi "&#966;">  <!ENTITY chi "&#967;">  <!ENTITY psi "&#968;">  <!ENTITY omega "&#969;">  <!ENTITY thetasym "&#977;">  <!ENTITY upsih "&#978;">  <!ENTITY piv "&#982;">  <!ENTITY ensp "&#8194;">  <!ENTITY emsp "&#8195;">  <!ENTITY thinsp "&#8201;">  <!ENTITY zwnj "&#8204;">  <!ENTITY zwj "&#8205;">  <!ENTITY lrm "&#8206;">  <!ENTITY rlm "&#8207;">  <!ENTITY ndash "&#8211;">  <!ENTITY mdash "&#8212;">  <!ENTITY lsquo "&#8216;">  <!ENTITY rsquo "&#8217;">  <!ENTITY sbquo "&#8218;">  <!ENTITY ldquo "&#8220;">  <!ENTITY rdquo "&#8221;">  <!ENTITY bdquo "&#8222;">  <!ENTITY dagger "&#8224;">  <!ENTITY Dagger "&#8225;">  <!ENTITY bull "&#8226;">  <!ENTITY hellip "&#8230;">  <!ENTITY permil "&#8240;">  <!ENTITY prime "&#8242;">  <!ENTITY Prime "&#8243;">  <!ENTITY lsaquo "&#8249;">  <!ENTITY rsaquo "&#8250;">  <!ENTITY oline "&#8254;">  <!ENTITY frasl "&#8260;">  <!ENTITY euro "&#8364;">  <!ENTITY image "&#8465;">  <!ENTITY weierp "&#8472;">  <!ENTITY real "&#8476;">  <!ENTITY trade "&#8482;">  <!ENTITY alefsym "&#8501;">  <!ENTITY larr "&#8592;">  <!ENTITY uarr "&#8593;">  <!ENTITY rarr "&#8594;">  <!ENTITY darr "&#8595;">  <!ENTITY harr "&#8596;">  <!ENTITY crarr "&#8629;">  <!ENTITY lArr "&#8656;">  <!ENTITY uArr "&#8657;">  <!ENTITY rArr "&#8658;">  <!ENTITY dArr "&#8659;">  <!ENTITY hArr "&#8660;">  <!ENTITY forall "&#8704;">  <!ENTITY part "&#8706;">  <!ENTITY exist "&#8707;">  <!ENTITY empty "&#8709;">  <!ENTITY nabla "&#8711;">  <!ENTITY isin "&#8712;">  <!ENTITY notin "&#8713;">  <!ENTITY ni "&#8715;">  <!ENTITY prod "&#8719;">  <!ENTITY sum "&#8721;">  <!ENTITY minus "&#8722;">  <!ENTITY lowast "&#8727;">  <!ENTITY radic "&#8730;">  <!ENTITY prop "&#8733;">  <!ENTITY infin "&#8734;">  <!ENTITY ang "&#8736;">  <!ENTITY and "&#8743;">  <!ENTITY or "&#8744;">  <!ENTITY cap "&#8745;">  <!ENTITY cup "&#8746;">  <!ENTITY int "&#8747;">  <!ENTITY there4 "&#8756;">  <!ENTITY sim "&#8764;">  <!ENTITY cong "&#8773;">  <!ENTITY asymp "&#8776;">  <!ENTITY ne "&#8800;">  <!ENTITY equiv "&#8801;">  <!ENTITY le "&#8804;">  <!ENTITY ge "&#8805;">  <!ENTITY sub "&#8834;">  <!ENTITY sup "&#8835;">  <!ENTITY nsub "&#8836;">  <!ENTITY sube "&#8838;">  <!ENTITY supe "&#8839;">  <!ENTITY oplus "&#8853;">  <!ENTITY otimes "&#8855;">  <!ENTITY perp "&#8869;">  <!ENTITY sdot "&#8901;">  <!ENTITY lceil "&#8968;">  <!ENTITY rceil "&#8969;">  <!ENTITY lfloor "&#8970;">  <!ENTITY rfloor "&#8971;">  <!ENTITY lang "&#9001;">  <!ENTITY rang "&#9002;">  <!ENTITY loz "&#9674;">  <!ENTITY spades "&#9824;">  <!ENTITY clubs "&#9827;">  <!ENTITY hearts "&#9829;">  <!ENTITY diams "&#9830;"> ]>${k[0].outerHTML}`).then((function(e){i(e)}),(function(e){r(e)}))}))))}return e.exportImage(r).then((e=>e.data))}function S(e,t){return(e-e%t)/t}function k(e,t){return e%t}function w(e,t=1){return new Promise((function(o,n){const{ctx:i,canvas:r}=T();i.clearRect(0,0,r.width,r.height);const a=new Image;a.src=`data:image/svg+xml,${encodeURIComponent(e)}`,a.addEventListener("load",(()=>{setTimeout((()=>{r.width=a.width*t,r.height=a.height*t,i.imageSmoothingEnabled=!1,function(e,t,o,n,i,r){const a=n.getContext("2d"),s=document.createElement("canvas"),l=Math.min(1e4,i),c=Math.min(1e4,r);s.width=l,s.height=c;const d=s.getContext("2d"),u=S(i,l)+(0!==k(i,l)?1:0),p=S(r,c)+(0!==k(r,c)?1:0),h=t/i*l,f=o/r*c;a.clearRect(0,0,i,r);for(let t=0;t<p;t++)for(let o=0;o<u;o++)d.clearRect(0,0,l,c),d.drawImage(e,o*h,t*f,h,f,0,0,l,c),a.drawImage(s,o*l,t*c)}(a,a.width,a.height,r,r.width,r.height),o(r.toDataURL())}),100)})),a.addEventListener("error",(e=>{n({message:"image load error",e,url:a.src})}))}))}const x=e=>"string"==typeof e&&e.indexOf("timeout")>-1,I=(e,t)=>{let o="Unknown Error";t&&(o=t.stack||t.message||t.toString()),E.error(o),(0,g.showMessageBox)({type:"warning",message:e.getters["l10n/T"]("Failed to export this file."),detail:e.getters["l10n/T"]("Your ideas are beyond XMinds capacity. We suggest you to split this file into multiple files before next step."),buttons:[e.getters["l10n/T"]("OK")]})}},78497:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,{scale:t=1,targetBranch:o=null,transparent:n=!1,contentScope:l=0}={}){const c=e.state.editor.sbEditorWrapper.value;if(!c)return;const p=c.getCurrentSheetEditor();if(0===l){const i=await u(p,{scale:t,targetBranch:o,transparent:n});let a="";o&&(a=o.model.attributes.title);const l=await(0,s.showSaveDialog)({title:"Export",suggestPath:{store:e,suggestedName:a,sheet:p.model},properties:["createDirectory"],filters:[{name:"SVG",extensions:["svg"]}]});l&&(await r.default.writeFile(l,i.data),e.commit("rateUs/addRateMasValue",1))}else if(1===l){c.initAllSheetEditor();const o=e.getters["l10n/T"],l=(0,s.suggestSavePath)({store:e}),{canceled:p,filePaths:h}=await a.remote.dialog.showOpenDialog(a.remote.getCurrentWindow(),{buttonLabel:o("Save"),properties:["openDirectory","createDirectory"],defaultPath:l,securityScopedBookmarks:!0});if(p||!h||!h.length)return;const f=i.default.join(h[0],e.state.wd.title);r.default.existsSync(f)||r.default.ensureDir(f);const m=Object.values(c.sheetEditors),g=c.model,v=[],b=(e,t=2)=>{const o=`${e}_${t}`;return v.includes(o)?b(e,t+1):o};Promise.all(m.map((async(e,o)=>{const a=await u(e,{scale:t,transparent:n});let s=g.attributes.sheets[o].title;v.includes(s)&&(s=b(s)),v.push(s),s=s.replace(/[/\\?%*:|"<>]/g,"-");const l="win32"===process.platform?(0,d.filterSpecialCharacterOnWindows)(s):s,c=i.default.join(f,l+".svg");return r.default.writeFile(c,a.data)})))}};var i=n(o(85622)),r=n(o(2286)),a=o(58933),s=o(95287),l=o(48932),c=o(83450),d=o(1893);async function u(e,{scale:t,targetBranch:o=null,transparent:n}){const i=Date.now(),r={padding:50,scale:t,skipFont:!1,targetBranch:o,timeout:l.EXPORT_IMAGE_TIMEOUT,noBackground:n,format:"SVG"};return(0,c.trackEvent)({eventCategory:"export",eventAction:"durationExportSvg",eventValue:Date.now()-i}),await e.exportImage(r)}},7274:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){const t=e.getters["l10n/T"],o=(0,m.suggestSavePath)({store:e}),{canceled:n,filePaths:s}=await g.remote.dialog.showOpenDialog(g.remote.getCurrentWindow(),{buttonLabel:t("Save"),properties:["openDirectory","createDirectory"],defaultPath:o,securityScopedBookmarks:!0});if(n||!s||!s.length)return;!async function(e,t){e.commit(`${u.SHARED}/setExporting`,{exporting:!0}),d.default.fetch(h.WINDOW_OPEN,{name:"dialog-progress",parentId:window.id,wait:!0,query:{type:t,editorId:window.editorId}})}(e,"textBundle");const T=(0,c.suggestDirNameSync)(s[0],e.state.wd.title,".textbundle");await r.default.ensureDir(T),await async function(e,t){const o=e.state.editor.sbEditorWrapper.value;if(!o)return;const n=o.getCurrentSheetEditor().model,s=Date.now();let c="";e.getters["activation/status"]!==l.ACTIVATION_STATUS.VALID&&(c+="*XMind - Evaluation Version*");const d={manifest:{resources:{}},sheets:[n]};try{const{mdText:o,infoJson:l}=await a.default.formatconverter.toTextBundle(d,{textWatermark:c,infoJson:{sourceURL:i.default.join(t,A)}}),u=[];u.push(r.default.writeFile(i.default.join(t,A),o)),u.push(r.default.writeFile(i.default.join(t,E),l));const p=n.toJSON();let h=await e.dispatch("wd/collectXapResourceUrls",[p]);if(h&&h.length){await r.default.mkdir(i.default.join(t,b));for(let o of h){let n=o.substring("xap:".length);u.push(new Promise(((o,a)=>{r.default.copyFile(i.default.join(e.state.wd.tempStorage,n),i.default.join(t,`assets/${n.substring("resources/".length)}`),(e=>{e&&a(e),o()}))})))}}Promise.all(u).then((()=>{e.commit("rateUs/addRateMasValue",1),(0,f.trackEvent)({eventCategory:"export",eventAction:"durationExportTextBundle",eventValue:Date.now()-s})})).catch((e=>{throw new Error(e)}))}catch(e){v.debug("[Export to textBundle]: ",e)}}(e,T),await(0,p.closeProgress)(e)};var i=n(o(85622)),r=n(o(2286)),a=n(o(61027)),s=n(o(41698)),l=o(48932),c=o(1893),d=n(o(24678)),u=o(90336),p=o(81815),h=o(99492),f=o(83450),m=o(95287),g=o(58933);const v=(0,s.default)("core:export"),b="assets/",A="text.md",E="info.json"},81815:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.closeProgress=async function(e){const t=await r.default.fetch(a.WINDOW_GET_ID,{name:"dialog-progress"}),o=t&&i.remote.BrowserWindow.fromId(t);if(o){if(!o.rendererJSLoad)return new Promise((t=>{o.once("renderer-js-load",(async()=>{e.commit(`${s.SHARED}/setExporting`,{exporting:!1}),await r.default.fetch(a.WINDOW_CLOSE,{name:"dialog-progress"}),await(0,l.sleep)(100),t()}))}));e.commit(`${s.SHARED}/setExporting`,{exporting:!1}),await r.default.fetch(a.WINDOW_CLOSE,{name:"dialog-progress"}),await(0,l.sleep)(100)}};var i=o(58933),r=n(o(24678)),a=o(99492),s=o(90336),l=o(36414)},94497:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(85622)),r=o(57818),a=o(1893),s=o(6921);function l(e){return(e||"").replace(/\p{Control}/gu,"")}t.default=class{constructor(e){this.store=e,this.tempStorage=e.state.wd.tempStorage;const t=e.state.editor.sbEditorWrapper.value;this.sheetEditor=t&&t.getCurrentSheetEditor(),this.sheetView=this.sheetEditor&&this.sheetEditor.getSheetView(),this.docTreeData={},this.docData=[]}generateFileName(){const e=this.sheetView.centralBranchView.topicView.titleView.text;return(0,a.simplifyString)(e)}async doExport(){return this.docTreeData=await this.parseTopic(this.sheetView.centralBranchView),this.tileTree(this.docData,this.docTreeData),this.docData}tileTree(e,t){let o={};o.level=t.level,o.title=t.title,t.url&&(o.url=t.url),t.image&&(o.image=t.image),t.notes&&(o.notes=t.notes),t.markers&&(o.markers=t.markers),t.labels&&(o.labels=t.labels),e.push(o);let n=[].concat(t.attached).concat(t.detached).concat(t.summary);if(n.length>0)for(let t of n)this.tileTree(e,t)}async parseTopic(e,t=1){const o=e.topicView;let n={};n.level=t,n.title=l(this.parseTitle(o));const i=o.getInformationData();i&&i.notesInfo&&i.notesInfo.plain&&(n.notes=l(i.notesInfo.plain.content));let r=await this.parseMathJax(o.mathJaxView);r&&(n.image=r);let a=await this.parseImage(o.image);a&&(n.image=a);let s=await this.parseMarkers(o.markersView);s&&(n.markers=s);let c=this.parseLabels(o.labelsView);return c&&(n.labels=c),n.attached=await this.doParseChildren(e,"attached",t+1),n.detached=await this.doParseChildren(e,"detached",t+1),n.summary=await this.doParseChildren(e,"summary",t+1),n}async doParseChildren(e,t,o){const n=e.getChildrenBranchesByType(t);let i=[];if(n.length)for(let e of n)i.push(await this.parseTopic(e,o));return i}parseTitle(e){const t=e.titleView.text,o={"||":"| |"};return(t||"").replace(/\|\|/g,(e=>o[e]))}parseLabels(e){const t=e&&e.labelsInfo;return Array.isArray(t)?t.map((e=>l(e))):null}parseNotes(e){const t=e.get("notes");return t&&t.plain&&t.plain.content?(0,a.simplifyString)(t.plain.content):""}async parseMathJax(e){if(!e||!e.parent)return null;const t=e.parent().model.getImageData();if(!t||!t.src)return null;const o=await this.store.dispatch("wd/loadXap",t.src);return{src:(0,a.urlToFilePath)(o),width:Math.floor(t.width),height:Math.floor(t.height)}}async parseImage(e){if(!e||!e.model)return null;const t=e.model.getSrc();if(!t)return null;const o=await this.store.dispatch("wd/loadXap",t);return{src:(0,a.urlToFilePath)(o),width:Math.floor(e.bounds.width),height:Math.floor(e.bounds.height)}}async parseMarkers(e){const t=e.markerIdList;if(!t.length)return null;let o=[];for(let e of t){const{resource:t}=r.markerModule.getMarkerInfoById(e),n=i.default.join((0,s.getResourceBasePath)(),t);o.push(n)}return o}}},75144:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){const t=Date.now(),o=new r.default(e),n=i.default.join((0,u.getAppPath)(),"static","msword","template-default.docx");let p;try{const t=await o.doExport();p=await(0,a.default)(t,n)}catch(e){throw e}finally{await(0,l.closeProgress)(e)}if(!p)throw new Error("Word Buffer is null!");e.commit("rateUs/addRateMasValue",1),(0,d.trackEvent)({eventCategory:"export",eventAction:"durationExportWord",eventValue:Date.now()-t});const h=await(0,c.showSaveDialog)({title:"Export",filters:[{name:"DOCX",extensions:["docx"]}],suggestPath:{store:e,suggestedName:o.generateFileName()}});h&&s.default.writeFile(h,p)};var i=n(o(85622)),r=n(o(94497)),a=n(o(66321)),s=n(o(2286)),l=o(81815),c=o(95287),d=o(83450),u=o(6921)},78555:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.localFileToPngData=s,t.localFileToLocalPng=function(e,t,o,n){n||"function"!=typeof t||(n=t,t={});s(e,t,(function(e){i.default.writeFile(o,e,n)}))},t.sizeOf=function(e,t,o){let n=`data:${t};base64,`+e.toString("base64");const i=new Image;i.onload=()=>{o&&o(i.width,i.height)},i.onerror=()=>{throw new Error(`There was an error loading the data URI as an image \n${n}`)},i.src=n},t.toPng=l;var i=n(o(2286));const r=2;function a(e,t,o){o||"function"!=typeof t||(o=t,t={}),i.default.readFile(e).then((e=>{l("data:image/svg+xml;base64,"+e.toString("base64"),t,o)}))}function s(e,t,o){o||"function"!=typeof t||(o=t,t={}),a(e,t,(function(e){const t="data:image/png;base64,";if(e.startsWith(t)){let n=e.slice(t.length);o&&o(Buffer.from(n,"base64"))}}))}function l(e,t,o){const{encoderType:n="image/png",encoderOptions:i=.8,backgroundColor:a,pixelRatio:s=r,scale:l=1,width:c,height:d}=t||{},u=new Image(c,d);u.onload=()=>((e,t,r)=>{const c=document.createElement("canvas"),d=c.getContext("2d");c.width=t*l*s,c.height=r*l*s,c.style.width=`${c.width}px`,c.style.height=`${c.height}px`,d.setTransform(s,0,0,s,0,0),d.drawImage(e,0,0,t*l,r*l),a&&(d.globalCompositeOperation="destination-over",d.fillStyle=a,d.fillRect(0,0,c.width,c.height));let u=c.toDataURL(n,i);o(u)})(u,u.width,u.height),u.onerror=()=>{throw new Error(`There was an error loading the data URI as an image \n${e}`)},u.src=e}},66321:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t){const o=i.default.readFileSync(t);return await(0,a.default)({template:o,vm2Sandbox:!1,output:"buffer",data:{items:e},additionalJsContext:{local:c}})};var i=n(o(35747)),r=n(o(97769)),a=n(o(53135)),s=o(78555);const l=40;async function c(e,t=null,o=null){return null===t||null===o?(t=.7,o=.7):e.endsWith(".svg")?(t=1.3*t/l,o=1.3*o/l):(t/=l,o/=l),await new Promise(((n,a)=>{if(e.endsWith(".svg")){let i={width:t*l,height:o*l,pixelRatio:2};(0,s.localFileToPngData)(e,i,(e=>{n({width:t,height:o,data:e,extension:".png"})}))}else i.default.readFile(e,((e,i)=>{if(e)return a(e);const s=(0,r.default)(i),l=s?`.${s.ext}`:".jpg";if(t>16.77){let e=t/o;o=(t=16.77)/e}n({width:t,height:o,data:i,extension:l})}))}))}},17558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MANIFEST=t.M_RESOURCES=t.ZEN_PATH_METADATA=t.ZEN_PATH_CONTENT=t.M_FILE_ENTRIES=void 0;const o="file-entries";t.M_FILE_ENTRIES=o;const n="content.json";t.ZEN_PATH_CONTENT=n;const i="metadata.json";t.ZEN_PATH_METADATA=i;const r="resources";t.M_RESOURCES=r;const a={[o]:{[n]:{},[i]:{}},[r]:{}};t.MANIFEST=a},97509:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importFreemind=function(e){if(e)return i.default.readFile(e,"utf8").then(r.default.formatconverter.fromFreemind)};var i=n(o(2286)),r=n(o(61027))},70746:(e,t,o)=>{"use strict";t.Z=void 0;var n=o(41730),i=o(97509),r=o(51049),a=o(60143),s=o(89259),l=o(65093),c=o(97727),d=o(39468),u={mindmanager:n.importMindmanager,freemind:i.importFreemind,lighten:r.importLighten,mindnode:a.importMindNode,markdown:s.importMarkdown,opml:l.importOPML,textbundle:c.importTextBundle,word:d.importWord};t.Z=u},51049:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importLighten=function(e){if(e){let t=i.default.join(e,"content.json");return r.default.readFile(t).then(a.default.formatconverter.fromLighten)}};var i=n(o(85622)),r=n(o(2286)),a=n(o(61027))},89259:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importMarkdown=function(e){if(e)return i.default.readFile(e,"utf8").then(r.default.formatconverter.fromMarkdown)};var i=n(o(2286)),r=n(o(61027))},41730:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importMindmanager=function(e){if(e)return r.default.readFile(e).then(i.default.formatconverter.fromMindmanager)};var i=n(o(61027)),r=n(o(2286))},60143:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importMindNode=function(e){if(!e)throw new Error("The variable fileDirPath wrong!");return a.default.isDirectorySync(e)?a.default.readdir(e).then((t=>{if(!t.includes("contents.xml"))throw new Error("no contents.xml");let o=function(e){const t=i.default.join(e,c);let o={},n=a.default.readdirSync(t);if(n.length>0){const e=r.default.algo.SHA256.create();o={},n.forEach((n=>{const s=a.default.readFileSync(i.default.join(t,n)),d=new Uint8Array(s),u=e.update(r.default.lib.WordArray.create(d)).finalize().toString(r.default.enc.Hex),p=i.default.extname(n),h=i.default.join(c,`${u}${p}`);o[n]=h,l.MANIFEST[l.M_FILE_ENTRIES][h]={},l.MANIFEST[l.M_RESOURCES][h]=d}))}return o}(e),n=a.default.readFileSync(i.default.join(e,"contents.xml"));return s.default.formatconverter.fromMindNode(n,o,l.MANIFEST)})):a.default.readFile(e).then(s.default.formatconverter.fromMindNodeZip)};var i=n(o(85622)),r=n(o(81354)),a=n(o(2286)),s=n(o(61027)),l=o(17558);const c="resources"},65093:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importOPML=function(e){if(e)return i.default.readFile(e,"utf8").then(r.default.formatconverter.fromOPML)};var i=n(o(2286)),r=n(o(61027))},97727:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importTextBundle=function(e){if(e){if(i.default.isDirectorySync(e)){const t=new RegExp("^text.[^.]+","gi");return i.default.readdir(e).then((o=>{const n=o.find((e=>t.test(e)));if(!n)throw new Error("No plain text contents file");const l=[];return l.push(i.default.readFile(r.default.join(e,n))),o.includes(s)&&l.push(async function(e,t){const o=r.default.join(e,t),n={},a=await i.default.readdir(o);if(!a||!a.length)return n;for(const e of a){const t=await i.default.readFile(r.default.join(o,e));n[e]=t}return n}(e,s)),Promise.all(l).then((e=>a.default.formatconverter.fromTextBundle(...e)))}))}return i.default.readFile(e).then(a.default.formatconverter.fromTextBundlePack)}};var i=n(o(2286)),r=n(o(85622)),a=n(o(61027));const s="assets"},39468:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.importWord=async function(e){const t=new E(e);return function(e,t){const o={id:(0,r.UUID)(),title:"sheet",rootTopic:e.toJSON()};return{id:(0,r.UUID)(),sheets:[o],manifest:t}}(await t.read(),t.manifest)};var i=n(o(41698)),r=o(36414),a=n(o(2286)),s=n(o(85622)),l=n(o(81354)),c=n(o(25413)),d=n(o(96082)),u=o(27357),p=o(98e3),h=o(41767);const f=(0,i.default)("Import Word"),{MANIFEST:m,M_FILE_ENTRIES:g,M_RESOURCES:v}=o(17558),b={TITLE:"title",SUBTITLE:"subtitle",CAPTION:"caption",contentType:{TEXT:"text",HYPERLINK:"hyperlink",IMAGE:"image"},nodeType:{TOPIC:"topic",TABLE:"table",TABLE_ROW:"tableRow",TABLE_CELL:"tableCell"},styleMap:{STYLE_ID_HEADING:{heading1:1,heading2:2,heading3:3,heading4:4,heading5:5,heading6:6},STYLE_NAME_HEADING:{"heading 1":1,"heading 2":2,"heading 3":3,"heading 4":4,"heading 5":5,"heading 6":6},LIST:{ListParagraph:"list"}}},A={alignment:null,heading:null,hasHeading:!1,list:null,indent:null};p.Element.prototype.text=function(){return Array.isArray(this.children)?this.children.reduce(((e,t)=>e+(t.value||"")),""):""};class E{constructor(e,t){this.input={path:e},this.options=(0,u.readOptions)(t),this.stack=[],this.indentStack=[],this.indentUnit=null,this.indentStart=0,this.listStack=[],this.lastReadNode=null,this.rootNode=null,this.manifest=m}async read(){const e=await a.default.readFile(this.input.path).then(h.openArrayBuffer),t=await d.default.read(e,this.input),o=this.parseDocument(t.value);let n=this.parseRootTopic(o[0],o[1]);this.stack.push(this.rootNode);for(const e of o){if(n){--n;continue}const t=this.parseStyle(e),o=await this.parseContent(e),i=Array.isArray(o)?this.tidyContents(e,o):o;let r=null;if(r=i instanceof T?i:new T({content:i,style:t,type:b.nodeType.TOPIC}),t.indent>0&&(!t.hasHeading||!this.lastReadNode||t.heading>this.lastReadNode.style.heading||t.heading===this.lastReadNode.style.heading&&t.indent>this.lastReadNode.style.indent)){const e=this.calcIndentLevel(r);r.level=this.stack.length+e}else if(!t.hasHeading&&t.hasList){const e=this.calcListLevel(r);r.level=this.stack.length+e}else if(t.subTitle)r.level=this.calcSubtitleLevel(r);else if(t.caption){this.calcCaptionValid(r)||(r.level=this.calcLevel(r))}else r.level=this.calcLevel(r);t.hasHeading&&(!this.lastReadNode||t.heading<this.lastReadNode.style.heading)&&(this.indentStack=[],this.indentStart=0,this.listStack=[]),t.hasList||(this.listStack=[]),t.indent&&!t.hasHeading||r.type===b.nodeType.TABLE||(this.indentStack=[],this.indentStart=0),this.lastReadNode=r}return this.rootNode}calcIndentLevel(e){const t=e.style;if(0===this.indentStack.length&&t.indent>1&&(this.indentStart=t.indent-1),0===this.indentStack.length){const e=this.stack[this.stack.length-1];e.children.length>0&&this.lastReadNode.type!==b.nodeType.TABLE?this.indentStack.push(e.children[e.children.length-1]):this.indentStack.push(e)}const o=t.indent-this.indentStart,n=o-(this.indentStack.length-1);if(0===n){this.indentStack.splice(o);this.indentStack[this.indentStack.length-1].children.push(e),this.indentStack.push(e)}else if(1===n){this.indentStack[this.indentStack.length-1].children.push(e),this.indentStack.push(e)}else if(n>1){let t=null,o=n-1;for(;o;){const e=new T({level:this.stack.length});t=this.indentStack[this.indentStack.length-1],t.children.push(e),this.indentStack.push(e),--o}t=this.indentStack[this.indentStack.length-1],t.children.push(e),this.indentStack.push(e)}else if(n<0){const t=this.indentStack.length-1-Math.abs(n);this.indentStack.splice(Math.max(t,1));this.indentStack[this.indentStack.length-1].children.push(e),this.indentStack.push(e)}return t.hasHeading&&this.lastReadNode&&t.heading>=this.lastReadNode.style.heading&&this.stack.push(e),this.indentStack.length-1}calcListLevel(e){const t=e.style;if(0===this.listStack.length){const e=this.stack[this.stack.length-1];e.children.length>0?this.listStack.push(e.children[e.children.length-1]):this.listStack.push(e)}const o=t.list-(this.listStack.length-1);if(0===o){this.listStack[this.listStack.length-1].children.push(e),this.listStack.push(e)}else if(o>0){let t=null,n=o;for(;n;){const e=new T({level:this.listStack.length+this.stack.length-1});t=this.listStack[this.listStack.length-1],t.children.push(e),this.listStack.push(e),--n}t=this.listStack[this.listStack.length-1],t.children.push(e)}else if(o<0){const t=this.listStack.length-Math.abs(o);this.listStack.splice(Math.max(t,1));this.listStack[this.listStack.length-1].children.push(e),this.listStack.push(e)}return this.listStack.length-1}calcLevel(e){let t=this.stack[this.stack.length-1];if(!e.style.hasHeading&&!e.style.list)return t.children.push(e),this.stack.length;if(e.style.hasHeading&&t.style.hasHeading){if(e.style.heading>t.style.heading)return this.stack.push(e),e.parent=t,t.children.push(e),this.stack.length-1;if(e.style.heading===t.style.heading)return this.stack.pop(),t=this.stack[this.stack.length-1],t.children.push(e),this.stack.push(e),this.stack.length;for(;this.stack.length>0;)if(this.stack.pop(),t=this.stack[this.stack.length-1],t.style.hasHeading&&e.style.heading>t.style.heading){this.stack.push(e),e.parent=t,t.children.push(e);break}return this.stack.length-1}return t.style.hasHeading?(e.parent=t,t.children.push(e),this.stack.length):e.style.hasHeading?(this.stack.length>1&&(this.stack.pop(),t=this.stack[this.stack.length-1],t.children.push(e)),this.stack.length):void 0}calcSubtitleLevel(e){return this.lastReadNode?this.lastReadNode.children.push(e):f.warn("No lastReadNode?",e.content),this.stack.length}calcCaptionValid(e){return!(!this.lastReadNode||this.lastReadNode.content.title)&&(this.lastReadNode.content.title=e.content.title,!0)}parseDocument(e){return"document"===e.type?e.children.map((e=>e)):[]}tidyContents(e,t){const o=t.flat(1/0);if(1===o.length&&o[0].type)return Object.assign({title:""},o[0]);if(o.every((e=>"string"==typeof e)))return{title:o.join("")};{let t=null;for(const e of o)if("object"==typeof e&&e.type){t=e;break}return t?(t.title=this.rawText(e),t):{title:this.rawText(e)}}}async parseContent(e){return"paragraph"===e.type?this.parseParagraph(e):"run"===e.type?await this.parseRun(e):"hyperlink"===e.type?this.parseHyperlink(e):"text"===e.type?e.value:"image"===e.type?await this.parseImage(e):"table"===e.type?await this.parseTable(e):"tableCell"===e.type?this.parseTableCell(e):(f.info("Ignore content type:",e.type,e),"")}async parseParagraph(e){return await Promise.all(e.children.map((e=>this.parseContent(e))))}parseRun(e){return Promise.all(e.children.map((e=>this.parseContent(e))))}parseHyperlink(e){return{type:b.contentType.HYPERLINK,href:e.href,text:this.rawText(e)||e.href}}async parseImage(e){const t=await e.read("uint8array"),o=c.default.detectExtension(e.contentType),n=this.genResourceMap(t,o);return this.manifest[g][n.src]={},this.manifest[v][n.src]=t,{type:b.contentType.IMAGE,data:t,src:`xap:${n.src}`,imageType:e.contentType}}async parseTable(e){const t=e.children;if(!Array.isArray(t)||!Array.isArray(t[0].children))return null;const o=[];let n,i=[];if(1===t[0].children.length){const e=t[0].children[0],o=await Promise.all(e.children.map((e=>this.parseContent(e))));n=this.tidyContents(e,o),t.shift()}const r=this.parseTableHeader(t[0]&&t[0].children);for(let e=0;e<t.length;e++){const n=t[e];let a=0;i=[];const s=n.children.length===r.length;for(let t=0;t<r.length;t++){const l=r[t],c=s?n.children[t]:n.children[a];if(c){if(i=this.computeSlotStack(o,c,t,i),0!==e)if(s)l.children.push(this.parseTableCell(c));else if(o.length>0&&o[0].idx===t){const e=o.shift();e.row>1&&(e.row-=1,o.push(e)),l.children.push(this.parseTableCell(c)),++a}else l.children.push(this.parseTableCell())}else l.children.push(this.parseTableCell())}}return new T({type:b.nodeType.TABLE,children:r,content:Object.assign({title:"",type:b.contentType.TEXT,structureClass:"org.xmind.ui.spreadsheet.column"},n)})}parseTableHeader(e){let t=[];if(!e||!Array.isArray(e))return t;for(let o=0;o<e.length;o++){const n=e[o];t.push(this.parseTableCell(n));for(let e=0;e<n.colSpan-1;e++)t.push(this.parseTableCell(null))}return t}computeSlotStack(e,t,o,n){let i=0;if(n.length>0)if(i=n[1]+n[2]-t.rowSpan,i>0)e.push({idx:o,row:i});else if(i<0){let t=0;e.length>0&&(t=e[e.length-1].idx+1);for(let n=t;n<o;++n)e.push({idx:n,row:-i})}return[t.colSpan,t.rowSpan,i]}parseTableCell(e=null){return new T({content:{title:e?this.rawText(e):"",type:b.contentType.TEXT},type:b.nodeType.TABLE_CELL})}parseRootTopic(e,t){let o=0;const n=this.parseStyle(e),i=this.rawText(e),r=s.default.parse(this.input.path).name;if(n.title||"title"===n.heading||"center"===n.alignment||i===r){Object.assign(n,{hasHeading:!0,heading:0}),this.rootNode=new T({content:{title:i},style:n,level:0}),++o;const e=this.parseStyle(t);(e.subTitle||"subtitle"===e.heading)&&(this.rootNode.note=this.rawText(t),++o)}else this.rootNode=new T({content:{title:r},style:{alignment:null,heading:0,hasHeading:!0,list:null,indent:null},level:0});return o}parseStyle(e){const t=(e.styleId||"").toLowerCase(),o=(e.styleName||"").toLowerCase(),n=b.styleMap.STYLE_ID_HEADING[t]||b.styleMap.STYLE_NAME_HEADING[o],i=[t,o].includes(b.TITLE),r=[t,o].includes(b.SUBTITLE),a=[t,o].includes(b.CAPTION),s=b.styleMap.LIST[e.styleId]||!1,l=Number(e.numbering&&e.numbering.level);return{alignment:e.alignment,hasHeading:n>-1,heading:n||null,hasList:s,list:s?l:null,indent:(e=>{if(!e)return null;if(!this.indentUnit&&(e.firstLine>0||e.start>0)&&(this.indentUnit=e.firstLine||e.start),e.firstLine>0||e.start>0){let t=Number(e.start);e.hanging&&(t-=Number(e.hanging));const o=Number(e.firstLine);return Math.round((o+t)/this.indentUnit)}return null})(e.indent),title:i,subTitle:r,caption:a}}rawText(e){return e&&Array.isArray(e.children)?e.children.map((e=>"text"===e.type?e.value:Array.isArray(e.children)?this.rawText(e):"")).join(""):""}genResourceMap(e,t){return{width:100,height:100,src:`resources/${l.default.algo.SHA256.create().update(l.default.lib.WordArray.create(e)).finalize().toString(l.default.enc.Hex)}.${t}`}}}class T{constructor({content:e,style:t,level:o,parent:n,type:i,children:r}={}){this.content=Object.assign({title:"",type:b.contentType.TEXT},e),this.parent=n,this.level=o,this.type=i||b.nodeType.TOPIC,this.style=Object.assign({},A,t),this.children=r||[]}toJSON(){const e={id:(0,r.UUID)()};switch(this.content.type){case b.contentType.TEXT:"string"==typeof this.content?e.title=this.content:Object.assign(e,this.content),this.note&&(e.notes={plain:{content:this.note}});break;case b.contentType.HYPERLINK:this.content.href?Object.assign(e,this.content):e.title=this.content.text;break;case b.contentType.IMAGE:Object.assign(e,{title:this.content.title,image:{src:this.content.src}});break;default:e.title="",f.warn("Unknown node type:",this.content)}if(e.title=(e.title||"").trim(),this.children.length>0){const t=this.children.filter((e=>e.type===b.nodeType.TABLE_CELL||!!(0!==e.content.title.length||e.content.type!==b.contentType.TEXT||e.children&&0!==e.children.length))).map((e=>e.toJSON()));e.children={attached:t}}return e}}},41767:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.openArrayBuffer=async function(e){const t=new i.default,o=await t.loadAsync(e);return{exists:function(e){return null!==o.file(e)},read:async function(e,t){const n=o.file(e);return["base64","uint8array","nodebuffer"].includes(t)?await n.async(t):await n.async("string")},write:function(e,t){o.file(e,t)},toBuffer:function(){return o.generate({type:"nodebuffer"})}}},t.splitPath=function(e){const t=e.lastIndexOf("/");return-1===t?{dirname:"",basename:e}:{dirname:e.substring(0,t),basename:e.substring(t+1)}},t.joinPath=function(){const e=Array.prototype.filter.call(arguments,(function(e){return e}));let t=[];return e.forEach((function(e){/^\//.test(e)?t=[e]:t.push(e)})),t.join("/")};var i=n(o(66085))},89526:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.exportPDF=async function(e){const t=await(0,i.outlinePrepare)(e,p);await(0,c.closeProgress)(e);const o=await(0,r.showSaveDialog)({title:e.getters["l10n/T"]("Save"),suggestPath:p.suggestPath,filters:[{name:"PDF",extensions:["pdf"]}]});if(o){let n={pageSize:{width:1e3*p.pageSize.x,height:1e3*p.pageSize.y},marginsType:0,printBackground:!0,landscape:"landscape"==p.orientation};const i=await a.remote.getCurrentWebContents().printToPDF(n);s.default.writeFile(o,i),t(),e.commit("rateUs/addRateMasValue",1)}else t()},t.exportPDFMultiple=async function(e,t){const o=document.createElement("div");o.style.display="none",t.forEach((t=>{const n=new u.default({propsData:{namespace:t,sheetId:t},store:e});n.$mount(),o.appendChild(n.$el)})),document.body.appendChild(o),await(0,c.closeProgress)(e);const{canceled:n,filePaths:r}=await a.remote.dialog.showOpenDialog(a.remote.getCurrentWindow(),{title:e.getters["l10n/T"]("Save"),buttonLabel:e.getters["l10n/T"]("Save"),properties:["openDirectory","createDirectory"],securityScopedBookmarks:!0});if(n||!r||!r.length)return;const h=e.state.editor.sbEditorWrapper.value;if(!h)return;const f=r[0],m=(0,d.suggestDirNameSync)(f,h.model.get("title"));await s.default.ensureDir(m);const g=h.model,v=[],b=(e,t=2)=>{const o=`${e}_${t}`;return v.includes(o)?b(e,t+1):o};for(let o=0;o<t.length;o++){const n=t[o],r=await(0,i.outlinePrepare)(e,p,n);let c={pageSize:{width:1e3*p.pageSize.x,height:1e3*p.pageSize.y},marginsType:0,printBackground:!0,landscape:"landscape"==p.orientation};const u=await a.remote.getCurrentWebContents().printToPDF(c);r();let h=g.attributes.sheets[o].title;v.includes(h)&&(h=b(h)),v.push(h),h="win32"===process.platform?(0,d.filterSpecialCharacterOnWindows)(h):h,h=h.replace(/[/\\?%*:|"<>]/g,"-");const f=l.default.resolve(m,h+".pdf");await s.default.writeFile(f,u)}o.remove()};var i=o(44049),r=o(95287),a=o(58933),s=n(o(2286)),l=n(o(85622)),c=o(81815),d=o(1893),u=n(o(95559));const p={content:"currentMap",copies:1,margins:{top:"20mm",bottom:"6mm",left:"14mm",right:"14mm"},orientation:"landscape",pageSetup:{background:!0},pageSize:{x:297,y:210},saveAsPdf:!0,scale:"fitMap",sides:"one-sided",useSelectedPrinter:!1}},44049:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.outlinePrepare=async function(e,t,o=""){const{cleanUp:n,addToRemoveEl:l}=(()=>{let e=[];return{cleanUp(){e.forEach((e=>e.remove())),e=[]},addToRemoveEl:t=>(e.push(t),t)}})();let c=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor();t.suggestPath={store:e,sheet:c.model};let d={x:"portrait"===t.orientation?t.pageSize.x:t.pageSize.y,y:"portrait"===t.orientation?t.pageSize.y:t.pageSize.x};const u=o?`.outliner-${o} .vana-outliner`:".vana-outliner";let p=document.querySelector(u).cloneNode(!0);l((0,i.default)("<div>").addClass("print-el").append(p).appendTo((0,i.default)(document.body)));const h=Object.assign({},s,t.margins||{}),f=e.getters["activation/watermarkType"]===r.WATERMARK_TYPES.EVALUATING?(0,a.getRotatedWatermarkContent)("print-watermark",e):null;let m;f&&(m=`\n    .print-el:after {\n      content: "";\n      display: block;\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      z-index: 1;\n      background: url(${f}) 0 0 repeat;\n    }\n    `);const g=`\n    <style id="print_css">\n      .print-el {\n        display: none;\n        overflow: hidden;\n      }\n      ${f?m:""}\n      @page{\n        size: ${d.x}mm ${d.y}mm ${t.orientation};\n        margin-top: ${h.top};\n        margin-left: ${h.left};\n        margin-right:  ${h.right};\n        margin-bottom: ${h.bottom};\n      }\n      @media print {\n        .print-el {\n          display: block;\n          position: relative;\n          overflow: hidden;\n        }\n        * {\n          webkit-transition: none !important;\n          transition: none !important;\n        }\n        html {\n          background-color: #fff;\n        }\n        body {\n          overflow: visible !important;\n          background-color: #fff;\n        }\n        #app {\n          display: none !important;\n        }\n        em {\n          font-family: auto !important;\n        }\n      }\n    </style>\n  `;return l((0,i.default)(g).appendTo((0,i.default)(document.head))[0]),n};var i=n(o(19755)),r=o(48932),a=o(12444);const s={top:"0mm",bottom:"0mm",left:"0mm",right:"0mm"}},53166:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pitchPrepare=async function(e,t,o){const{cleanUp:n,addToRemoveEl:s}=(()=>{let e=[];return{cleanUp(){e.forEach((e=>e.remove())),e=[]},addToRemoveEl:t=>(e.push(t),t)}})(),l=e.getters["activation/watermarkType"],c="default"===t.themeId,d=l===r.WATERMARK_TYPES.EVALUATING?(0,a.getRotatedWatermarkContent)("print-watermark",e,c):null,u=(0,i.default)("<div>");if(u.css("position","relative"),o.forEach((e=>{(0,i.default)(e).css("page-break-before","always"),u.append((0,i.default)(e))})),d){const e=(0,i.default)("<div>");e.css({position:"absolute",width:"100%",height:"100%",top:"0",left:"0",background:`url(${d}) 0 0 repeat`,"z-index":"1"}),u.append(e)}s((0,i.default)("<div>").addClass("print-el").append(u).appendTo((0,i.default)(document.body)));const p=`\n    <style id="print_css">\n      .print-el {\n        display: block;\n        overflow: auto;\n        visibility: hidden;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100px;\n        height: 100px;\n      }\n      @media print {\n        .print-el {\n          display: block;\n          overflow: visible !important;\n          visibility: visible;\n          width: auto;\n          height: auto;\n        }\n        html {\n          background-color: ${t.backgroundColor};\n        }\n        body {\n          overflow: visible !important;\n          background-color: ${t.backgroundColor};\n        }\n        #app {\n          display: none !important;\n        }\n        em {\n          font-family: auto !important;\n        }\n      }\n    </style>\n  `;return s((0,i.default)(p).appendTo((0,i.default)(document.head))[0]),n};var i=n(o(19755)),r=o(48932),a=o(12444)},2177:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentSupportedPrinters=T,t.printHandle=async function(e){e.state[g.SHARED].editorMode===v.EDITOR_MODE_OUTLINER?await async function(e){let t={};const o=a.default.parse(window.location.search.slice(1)).editorId||"",{result:n}=await d.default.fetch(l.WINDOW_OPEN,{name:"dialog-print",parentId:window.id,wait:!0,query:{editorId:o}});if(n&&"finish"===n.action){t=n.settings;const o=await(0,m.outlinePrepare)(e,t);o&&y(e,t,(()=>setTimeout((()=>{o(),e.commit("rateUs/addRateMasValue",10)}),500)))}}(e):await async function(e){const t=e.state.editor.sbEditorWrapper.value;t.initAllSheetEditor();const o=t.getCurrentSheetEditor(),n=t.findSheetIndex(o.model.id),i=s.default.utils,r=t.getCurrentSheetEditor().getSheetView(),c=i.styleManager.getStyleValue(r,s.default.constant.STYLE_KEYS.FILL_COLOR),u=t.model.sheets.map((e=>e.id)),p=a.default.parse(window.location.search.slice(1)).editorId||"",{result:h}=await d.default.fetch(l.WINDOW_OPEN,{name:"dialog-print",parentId:window.id,wait:!0,query:{backgroundColor:c,currentSheetEditorIndex:n,editorId:p,targetSheetId:u}});if(h&&"finish"===h.action){let t=h.settings;t.margins={top:10,bottom:10,left:10,right:10};const o=await(0,f.prepare)(e,A(A({},t),{},{withFooter:!0,boundaryFillNone:"win32"===process.platform}));o&&y(e,t,(()=>{setTimeout((()=>{o(),e.commit("rateUs/addRateMasValue",10)}),500)}))}}(e)},t.print=y;var i=n(o(59713)),r=n(o(35747)),a=n(o(71191)),s=n(o(61027)),l=o(99492),c=n(o(41698)),d=n(o(24678)),u=o(95287),p=o(36414),h=o(58933),f=o(15055),m=o(44049),g=o(90336),v=o(48932);function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function A(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const E=(0,c.default)("core:printer");function T(){return h.remote.getCurrentWebContents().getPrinters().map((e=>({name:e.name,displayName:e.displayName,description:e.description})))}async function y(e,t,o){let n=T();if(t.useSelectedPrinter&&!t.saveAsPdf&&n.length>0){let e={silent:!0,pageSize:{width:1e3*t.pageSize.x,height:1e3*t.pageSize.y},printBackground:!0,landscape:"landscape"==t.orientation,deviceName:t.selectedPrinter.name,copies:parseInt(t.copies)};h.remote.getCurrentWebContents().print(e,((e,t)=>{e||E.error((0,p.normalizeError)(t)),o&&o()}))}else if(!t.useSelectedPrinter&&t.saveAsPdf){const n=await(0,u.showSaveDialog)({title:e.getters["l10n/T"]("Save"),suggestPath:t.suggestPath,filters:[{name:"PDF",extensions:["pdf"]}]});if(n){let e={pageSize:{width:1e3*t.pageSize.x,height:1e3*t.pageSize.y},printBackground:!0,landscape:"landscape"==t.orientation};const o=await h.remote.getCurrentWebContents().printToPDF(e);r.default.writeFile(n,o,(e=>{if(e)return E.debug("[Print to PDF]: ",e)}))}o&&o()}else h.remote.getCurrentWebContents().print({silent:!1,printBackground:!0},(()=>{o&&o()}))}},19057:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateContentGenerators=void 0;var n=o(36414);const i={brace:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:e("Map 1"),rootTopic:{id:(0,n.UUID)(),title:e("Whole Object"),structureClass:"org.xmind.ui.brace.right",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("Part 1"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Part 2"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Part 3"),titleUnedited:!0}]}}}),fishbone:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:e("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:e("Problem"),structureClass:"org.xmind.ui.fishbone.leftHeaded",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("People"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Method"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Materials"),titleUnedited:!0}]},extensions:[{content:[{content:"2",name:"right-number"}],provider:"org.xmind.ui.map.unbalanced"},{provider:"org.xmind.ui.spreadsheet",content:[{name:"columns",content:[{name:"column",content:e("Strengths")},{name:"column",content:e("Weakness")}]}]}]}}),logic:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:e("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:e("Reasoning"),structureClass:"org.xmind.ui.logic.right",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("Deductive"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Inductive"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Analogical"),titleUnedited:!0}]}}}),map:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:e("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:e("Central Topic"),structureClass:"org.xmind.ui.map.unbalanced",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("Main Topic 1"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Main Topic 2"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Main Topic 3"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Main Topic 4"),titleUnedited:!0}]},extensions:[{content:[{content:"3",name:"right-number"}],provider:"org.xmind.ui.map.unbalanced"}]}}),matrix:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:e("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:e("SWOT"),structureClass:"org.xmind.ui.spreadsheet",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("Opportunities"),titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:" ",titleUnedited:!0,labels:[e("Weakness")]},{id:(0,n.UUID)(),title:" ",titleUnedited:!0,labels:[e("Strengths")]}]}},{id:(0,n.UUID)(),title:e("Threats"),titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:" ",titleUnedited:!0,labels:[e("Strengths")]},{id:(0,n.UUID)(),title:" ",titleUnedited:!0,labels:[e("Weakness")]}]}}]}}}),org:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:e("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:e("Management"),structureClass:"org.xmind.ui.org-chart.down",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("Finance"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Marketing"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Product"),titleUnedited:!0}]}}}),recent:({structureClass:e,$T:t}={})=>({id:(0,n.UUID)(),class:"sheet",title:t("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:t("Central Topic"),structureClass:e,titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:t("Main Topic 1"),titleUnedited:!0},{id:(0,n.UUID)(),title:t("Main Topic 2"),titleUnedited:!0}]},extensions:[{content:[{content:"2",name:"right-number"}],provider:"org.xmind.ui.map.unbalanced"}]}}),timeline:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:e("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:e("The First Season"),structureClass:"org.xmind.ui.timeline.horizontal",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("The Second Season"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("The Third Season"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("The Final Season"),titleUnedited:!0}]}}}),tree:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:e("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:e("Outline"),structureClass:"org.xmind.ui.tree.right",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("Introduction"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Major Point"),titleUnedited:!0},{id:(0,n.UUID)(),title:e("Conclusion"),titleUnedited:!0}]}}}),treetable:({$T:e}={})=>({id:(0,n.UUID)(),class:"sheet",title:"Map 1",rootTopic:{id:(0,n.UUID)(),class:"topic",title:e("Cost"),structureClass:"org.xmind.ui.treetable",titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:e("Food"),titleUnedited:!0,children:{attached:[{title:"",titleUnedited:!0,id:(0,n.UUID)()}]}},{id:(0,n.UUID)(),title:e("Accommodation"),titleUnedited:!0,children:{attached:[{title:"",titleUnedited:!0,id:(0,n.UUID)()}]}},{id:(0,n.UUID)(),title:e("Transportation"),titleUnedited:!0,children:{attached:[{title:"",titleUnedited:!0,id:(0,n.UUID)()}]}}]}}}),default:({structureClass:e,$T:t}={})=>({id:(0,n.UUID)(),class:"sheet",title:t("Map 1"),rootTopic:{id:(0,n.UUID)(),class:"topic",title:t("Central Topic"),structureClass:e,titleUnedited:!0,children:{attached:[{id:(0,n.UUID)(),title:t("Main Topic 1"),titleUnedited:!0},{id:(0,n.UUID)(),title:t("Main Topic 2"),titleUnedited:!0}]},extensions:[{content:[{content:"2",name:"right-number"}],provider:"org.xmind.ui.map.unbalanced"}]}})};t.TemplateContentGenerators=i},40359:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getSheetTemplate=async function({template:e,structure:t,$T:o,colorTheme:n,skeleton:i}={}){void 0===t&&(t="org.xmind.ui.map.unbalanced");void 0===o&&(o=e=>e);let a=(r.TemplateContentGenerators[e]||r.TemplateContentGenerators.default)({structureClass:t,$T:o});return a=l(a,{colorTheme:n,skeleton:i}),a},t.injectTheme=l;var i=n(o(59713)),r=o(19057),a=o(74627);function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e,{colorTheme:t,skeleton:o}={}){let n=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e);const r=(0,a.getColorThemeDataById)(t||a.DEFAULT_COLOR_THEME_ID),l=(0,a.getSkeletonThemeDataById)(o||a.DEFAULT_SKELETON_ID);let c={};return r&&(c=(0,a.combineColorTheme)(c,r)),l&&(c=(0,a.combineSkeletonTheme)(c,l),n=(0,a.combineSkeletonStructureStyleToContent)(n,l)),n.theme=c,n}},15551:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(63728)),r=o(90336),a=n(o(61027));const{CHANGE_LABEL:s}=a.default.constant.ACTION_NAMES;t.default=e=>{function t(t){return"separator"==t.type?Object.assign({},t):function(t={}){let n={};n.click=t.click||function(){void 0!==t.arg?e.handleCommand(t.commandId,t.arg):e.handleCommand(t.commandId)};const a=e.getters[`${r.SHARED}/commandById`](t.commandId);!t.label&&a&&(n.label=a.label);n.accelerator=e.getters["keybindings/formarKeybindingForMenu"](t.accelerator||e.getters["keybindings/keybindingByCommandId"](t.commandId)),n.interactive=t.interactive;let s=a&&a.enabled;a&&a.enabledFn&&(s=a.enabledFn(!0));n.enabled=t.enabled||s||!1,n.label=function(e,{args:t=[],interactive:n=!1}={}){e=o("$$",e).toString(),t.length>0&&(e=(0,i.default)(e,...t));n&&(e+="...");return e}(t.label,t),n.submenu=t.submenu,t.id&&(n.id=t.id);t.onClickWithParams&&(n.click=(...e)=>t.onClickWithParams(...e,t.arg));return n}(t)}function o(...t){return e.getters["l10n/T"](...t)}const n=[{commandId:"delete",label:o("Delete")},{type:"separator"},{commandId:"editor.copyStyle",label:o("Copy Style")},{commandId:"editor.pasteStyle",label:o("Paste Style")},{label:o("Reset Style"),commandId:"editor.resetStyle"}],l=[{label:o("Rename")},{type:"separator"},{commandId:"addSheet",label:o("Insert Sheet")},{type:"separator"},{label:o("Copy Sheet")},{label:o("Paste Sheet")},{label:o("Duplicate Sheet")},{type:"separator"},{label:o("Delete Sheet")}],c=[{label:o("Paste"),commandId:"paste",enabled:!0,onClickWithParams:(...t)=>{if(t.length>0){const o=t[t.length-1];e.execSnowbrushAction({commandId:"paste",args:{clientPosition:o&&o.clientPosition}})}}},{type:"separator"},{commandId:"editor.preAddFloatingTopic",label:o("Insert Floating Topic")},{commandId:"editor.addRelationship",label:o("Insert Relationship")},{type:"separator"},{commandId:"editor.focusAndSelectCenter",label:o("Go to Central Topic")},{commandId:"selectAll",label:o("Select All")}],d=[{commandId:"editor.showEditBox",label:o("Edit")},{commandId:"delete",label:o("Delete")},{type:"separator"},{commandId:"editor.copyStyle",label:o("Copy Style")},{commandId:"editor.pasteStyle",label:o("Paste Style")},{label:o("Reset Style"),commandId:"editor.resetStyle"}],u=[{commandId:"editor.showEditBox",label:o("Edit")},{commandId:"delete",label:o("Delete")},{type:"separator"},{commandId:"editor.copyStyle",label:o("Copy Style")},{commandId:"editor.pasteStyle",label:o("Paste Style")},{label:o("Reset Style"),commandId:"editor.resetStyle"}],p=[{label:o("Cut"),commandId:"cut"},{label:o("Copy"),commandId:"copy"},{commandId:"delete",label:o("Delete")},{type:"separator"},{commandId:"editor.saveAsAttachment",label:o("Save As")},{type:"separator"},{commandId:"editor.rotateImageLeft",label:o("Rotate Left")},{commandId:"editor.resetImage",label:o("Reset Size")}],h=[{commandId:"editor.removeAudioNotes",label:o("Delete")},{type:"separator"},{commandId:"editor.saveAsAudioNote",label:o("Save As")}],f=[{label:o("Edit"),commandId:"editor.showMarkerPopup"},{type:"separator"},{label:o("Cut"),commandId:"editor.cutMarker"},{label:o("Copy"),commandId:"editor.copyMarker"},{label:o("Delete"),commandId:"editor.deleteMarker"},{type:"separator"},{label:o("Highlight Relevant Topics"),commandId:"workbench.showMarkerNavigationPanelAndSelect"}],m=[{label:o("Delete"),commandId:"editor.deleteInfoItem"}],g=[{label:o("Edit"),commandId:"editor.editInfoItem"},{type:"separator"},{label:o("Delete"),commandId:"editor.deleteInfoItem"},{type:"separator"},{label:o("View All Notes"),commandId:"workbench.showNoteNavigationPanelAndSelect"}],v=[{label:o("Edit"),commandId:"editor.editInfoItem"},{type:"separator"},{label:o("Delete"),commandId:"editor.deleteInfoItem"}],b=[{commandId:"delete",label:o("Delete")}],A=[{commandId:"delete",label:o("Delete")}],E=[{label:o("Delete"),enabled:!0,onClickWithParams:(...t)=>{const[,,,o]=t,{labelText:n}=o,i=e.state.editor.sbEditorWrapper.value,r=i.getSelections()[0].model.get("labels");i.execAction(s,{labelString:r.filter((e=>e.trim()!==n)).toString()})}},{type:"separator"},{label:o("Highlight Relevant Topics"),commandId:"workbench.showLabelNavigationPanelAndSelect"}],T=[{label:o("Delete"),commandId:"editor.deleteInfoItem"},{type:"separator"},{commandId:"editor.saveAsAttachment",label:o("Save As")}],y=[{label:o("Edit"),commandId:"editor.addFileLink"},{label:o("Delete"),commandId:"editor.deleteInfoItem"}],C=[{commandId:"editor.showEquationEditor",label:o("Edit")},{type:"separator"},{label:o("Cut"),commandId:"cut"},{label:o("Copy"),commandId:"copy"},{commandId:"delete",label:o("Delete")},{type:"separator"},{commandId:"editor.saveAsEquation",label:o("Save As")},{type:"separator"},{commandId:"editor.resizeEquation",label:o("Reset Size")}];function S(e,t){return"separator"==e.type?Object.assign({},e):Object.assign({arg:t},e)}function k(e){return!("hasExtendBranch"in e)||!0===e.hasExtendBranch}function w(e){if("editor.toggleBranchOnly"===e.commandId&&void 0!==e.arg){e.label=e.arg.sheetView.activatedTopBranchView?o("Show Full Content"):o("Show Branch Only");let t=e.arg;for(;t&&!t.isCentralBranch();){if(t.model.type()==a.default.constant.TOPIC_TYPE.DETACHED)return!1;if(t.model.type()==a.default.constant.TOPIC_TYPE.CALLOUT)return!1;if(t.model.type()==a.default.constant.TOPIC_TYPE.SUMMARY)return!1;t=t.parent()}}return!0}return{getTemplateForEditorTopic:function(n,i,s,l,c){const{ROOT:d,SUMMARY:u}=a.default.constant.TOPIC_TYPE,p="main",h="editor.align",f="editor.divide",m=[{commandId:h,label:o("Left"),enabled:!0,arg:{direction:"left"}},{commandId:h,label:o("Center"),enabled:!0,arg:{direction:"center"}},{commandId:h,label:o("Right"),enabled:!0,arg:{direction:"right"}},{type:"separator"},{commandId:h,label:o("Top"),enabled:!0,arg:{direction:"top"}},{commandId:h,label:o("Middle"),enabled:!0,arg:{direction:"middle"}},{commandId:h,label:o("Bottom"),enabled:!0,arg:{direction:"bottom"}},{type:"separator"},{commandId:f,label:o("Distribute Horizontally"),arg:{direction:"horizon"}},{commandId:f,label:o("Distribute Vertically"),arg:{direction:"vertical"}}].map(t),g=[{commandId:"workbench.exportPng2",label:o("PNG"),arg:{targetBranch:s},interactive:!0},{commandId:"workbench.exportSvg2",label:o("SVG"),arg:{targetBranch:s},interactive:!0},{commandId:"workbench.exportPdf",label:o("PDF"),arg:{targetBranch:s},interactive:!0},{commandId:"workbench.exportMd",label:o("Markdown"),arg:{targetBranch:s},interactive:!0}].map(t);return[{commandId:"cut",label:o("Cut"),excludeSelectionType:u},{commandId:"copy",label:o("Copy"),excludeSelectionType:u},{commandId:"paste",label:o("Paste"),excludeSelectionType:u},{commandId:"duplicate",label:o("Duplicate"),excludeSelectionType:u},{commandId:"delete",label:o("Delete")},{commandId:"deleteSingleTopic",label:o("Delete Single Topic"),excludeSelectionType:u},{type:"separator"},{commandId:"editor.copyStyle",label:o("Copy Style")},{commandId:"editor.pasteStyle",label:o("Paste Style")},{label:o("Reset Style"),commandId:"editor.resetStyle"},{type:"separator"},{commandId:"editor.toggleBranch",label:o("Fold Subtopic"),excludeSelectionType:d,hasExtendBranch:i,enabled:c},{commandId:"editor.toggleAllBranch",label:o("Fold All Sub-branches"),hasExtendBranch:i,enabled:l,arg:n},{commandId:"editor.toggleBranch",label:o("Unfold Subtopic"),excludeSelectionType:d,hasExtendBranch:!i,enabled:c},{commandId:"editor.toggleAllBranch",label:o("Unfold All Sub-branches"),hasExtendBranch:!i,enabled:l,arg:n},{type:"separator",excludeSelectionType:d,id:"align"},{type:"separator",excludeSelectionType:d},{submenu:g,label:o("Export Branch To"),excludeSelectionType:d,enabled:!0},{type:"separator",excludeSelectionType:d},{commandId:"editor.toggleBranchOnly",label:o("Show Branch Only"),arg:s,excludeSelectionType:d},{type:"separator",excludeSelectionType:d},{id:"align",submenu:m,label:o("Align Floating Topic"),enabled:!0},{commandId:"editor.newSheetFromTopic",label:o("New Sheet From Topic")},{type:"separator",includeSelectionType:p},{commandId:"editor.resetPosition",label:o("Reset Position"),includeSelectionType:p}].filter((function(e){return!n||("includeSelectionType"in e?e.includeSelectionType==n:!("excludeSelectionType"in e)||e.excludeSelectionType!=n)})).filter((function(t){if("align"===t.id){const t=e.getters[`${r.SHARED}/commandById`](h);return!!t&&t.enabled}return!0})).filter(k).filter(w).map(t)},getTemplateForEditorSheetContent:e=>c.map((t=>S(t,e))).map(t),getTemplateForEditorCallout:()=>n.map(t),getTemplateForEditorSheetTabBar:()=>l.map(t),getTemplateForEditorBoundary:()=>d.map(t),getTemplateForEditorRelationship:()=>u.map(t),getTemplateForEditorImageOrAttachment:()=>p.map(t),getTemplateForEditorAudioNote:()=>h.map(t),getTemplateForEditorNote:()=>b.map(t),getTemplateForEditorHyperlink:()=>A.map(t),getTemplateForEditorLabel:(e,o)=>E.map((t=>S(t,{labelText:e,modelId:o}))).map(t),getTemplateForEditorMarker:(e,o)=>f.map((t=>S(t,Object.assign(e,{topicId:o})))).map(t),getTemplateForEditorInfoItemWithEdit:(e,o)=>({[a.default.constant.VIEW_TYPE.NOTE]:g,[a.default.constant.VIEW_TYPE.HREF]:v,jump:v}[e].map((t=>S(t,{iconType:e,modelId:o}))).map(t)),getTemplateForEditorInfoItem:e=>m.map((t=>S(t,{iconType:e}))).map(t),getTemplateForEditorAttachment:e=>T.map((t=>S(t,{iconType:e}))).map(t),getTemplateForEditorFileLink:(e,o)=>y.map((t=>S(t,{iconType:e,isFileLink:o}))).map(t),getTemplateForEditorEquation:e=>C.map((t=>S(t,{iconType:e}))).map(t)}}},33869:(e,t,o)=>{"use strict";var n=o(95318),i=n(o(59713)),r=n(o(71191)),a=n(o(2872)),s=n(o(24678)),l=n(o(35746)),c=n(o(83465)),d=n(o(15777)),u=o(90336),p=o(99492),h=n(o(60379)),f=n(o(1750)),m=n(o(64051)),g=n(o(96207)),v=n(o(52541)),b=n(o(96659)),A=n(o(17539)),E=n(o(16641)),T=n(o(6194)),y=n(o(40528)),C=n(o(76966)),S=n(o(93262)),k=n(o(86106));function w(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?w(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const I=r.default.parse(window.location.search.slice(1)).editorId||"";window.editorId=I,window.canPreformUIkitMutationObserver=({target:e})=>{if(e&&e instanceof Element){const t=e.getAttribute("id");return!t||!t.startsWith("sbsvg")}return!0},(0,a.default)(k.default,{name:"editor",storeModules:{[u.SHARED]:x(x({},l.default),{},{remoteNamespace:(0,u.EDITOR_SHARED_WITH_ID)(I)}),[u.FRAME_SHARED]:x({},c.default),fonts:h.default,workbench:f.default,editor:m.default,tutorial:g.default,notification:d.default,outline:v.default,focus:b.default,wd:A.default},storePlugins:[(0,T.default)(),(0,E.default)(),(0,S.default)(),(0,y.default)(),(0,C.default)()]}).then((e=>{const t=s.default.route((0,p.EDITOR_RENDERER_DESTROY_WITH_ID)(window.editorId),(()=>{window.isBeingDestroyed||(window.isBeingDestroyed=!0,e.$destroy(),t()),setTimeout((()=>{window.isDestroyed=!0}),0)}))}))},96615:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useNotesLink=function(e){const t=(0,i.ref)(!1),o=(0,i.ref)(""),n=(0,i.ref)(null);function r(){t.value=!0,a.default.nextTick((()=>{n.value.focus()})),e.notesEditor.trix.editor.activateAttribute("frozen");const i=e.notesEditor.getSingleWholeLink();o.value=i||""}return(0,i.onMounted)((()=>{e.store.registerCommands([{id:"notes.removeLink",provider:`editor/${window.editorId}/notes`,enabledFn:()=>!0,handler:()=>{e.notesEditor&&e.notesEditor.removeLink()}},{id:"notes.editLink",provider:`editor/${window.editorId}/notes`,enabledFn:()=>!0,handler:()=>{e.notesEditor&&r()}}])})),(0,i.onBeforeUnmount)((()=>{e.store.unregisterCommands([{id:"notes.removeLink",provider:`editor/${window.editorId}/notes`},{id:"notes.editLink",provider:`editor/${window.editorId}/notes`}])})),{visible:t,link:o,setLink:function(){if(!o.value)return void e.notesEditor.removeLink();e.notesEditor.setLink(o.value),o.value=""},showLinkBox:r,linkInputBox:n,closeLinkBox:function(){t.value=!1,e.notesEditor.trix.editor.deactivateAttribute("frozen"),e.notesEditor.focus()}}},t.useNotesEditorEvents=function(){const e=(0,i.ref)(null),t=(0,i.ref)(!1),o=()=>t.value=!0,n=()=>t.value=!1,a=e=>r.shell.openExternal(e.detail.href);return(0,i.onMounted)((()=>{e.value.addEventListener("focus",o),e.value.addEventListener("blur",n),e.value.addEventListener("link-activated",a)})),(0,i.onBeforeUnmount)((()=>{e.value.removeEventListener("focus",o),e.value.removeEventListener("blur",n),e.value.removeEventListener("link-activated",a)})),{container:e,isContainerFocused:t}};var i=o(90571),r=o(58933),a=n(o(20144))},24407:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.reactive)({width:-1,height:-1}),o=e.root.$store,n=()=>{o.state.editor.ignoreResizeEditor||e.refs.sbEditorContainer&&(t.width=e.refs.sbEditorContainer.clientWidth,t.height=e.refs.sbEditorContainer.clientHeight)};(0,i.watch)((()=>o.state.editor.ignoreResizeEditor),(()=>{o.state.editor.ignoreResizeEditor||n()}));let l=null;(0,i.onMounted)((()=>{setTimeout((()=>{e.refs.sbEditorContainer&&(l=new ResizeObserver((0,a.debounce)((()=>n()),50)),l.observe(e.refs.sbEditorContainer)),e.root.$nextTick((()=>{n()}))}),0)})),(0,i.onBeforeUnmount)((()=>{l&&(l.disconnect(),l=null)}));const c=()=>{const t=o.state.editor.sbEditorWrapper.value;if(!t)return;if(!e||!e.refs||!e.refs.sbEditorContainer)return;const n=e.refs.sbEditorContainer.getBoundingClientRect(),i=t.getCurrentSheetEditor().getScrollContainer(),a={x:n.x,y:n.y,height:i.clientHeight,width:i.clientWidth},s=t.sheetEditors;Object.keys(s).forEach((e=>{s[e].execAction(r.default.constant.ACTION_NAMES.RESIZE_EDITOR,{visibleAreaBounds:a})}))};(0,i.watch)((()=>({width:t.width,height:t.height})),((e,t)=>{if(!t||t.width<0||t.height<0)return;(e=>{const t=o.state.editor.sbEditorWrapper.value;t&&t&&t.execAction(r.default.constant.ACTION_NAMES.MOVE_VIEWPORT,e)})({deltaX:(e.width-t.width)/2,deltaY:(e.height-t.height)/2,option:{animate:!1,finishToRun:()=>{c()}}})})),(0,i.watch)((()=>o.state[s.SHARED].zenMode),(t=>{t?e.root.$nextTick((()=>{const e=o.state.editor.sbEditorWrapper.value;e&&e.execAction(r.default.constant.ACTION_NAMES.FOCUS_CENTER,{animated:!1})})):e.root.$nextTick((()=>{(()=>{const e=o.state.editor.sbEditorWrapper.value;if(!e)return;const t=e.getCurrentSheetEditor(),n=t.getSheetView().getCentralBranchView(),i=t&&t.model&&t.model.rootTopic();e.execAction(r.default.constant.ACTION_NAMES.FOCUS_CENTER,{targets:[n],animated:!1,finishToRun:()=>{t&&t.execAction(r.default.constant.ACTION_NAMES.SELECT,{id:i.id,isSingle:!0,prue:!0})}})})()}))})),(0,i.watch)((()=>o.state.editor.isBranchOnlyMode),(()=>{e.root.$nextTick((()=>{c()}),{lazy:!0})}))};var i=o(90571),r=n(o(61027)),a=o(96486),s=o(90336)},33970:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.root.$store;t.registerCommands([{id:"save",provider:`editor/${window.editorId}`,enabledFn:()=>t.state[u.SHARED].dirty,handler:()=>{t.getters["wd/canSave"]?b():A()}},{id:"saveAs",provider:`editor/${window.editorId}`,enabledFn:()=>t.state.workbench.ready,handler:()=>{A()}},{id:"saveSheetAs",provider:`editor/${window.editorId}`,enabledFn:()=>t.state.workbench.ready,handler:(...e)=>{!async function({sheetIndex:e}){const n=t.state.editor.sbEditorWrapper.value;n.getSheetEditorById(e)||n.initSheetEditor(e);let i=t.state.wd.workbookWrapper.value.sheets[e].rootTopic().attributes.title||"",r=await(0,a.showSaveDialog)({title:"Save Sheet As",suggestPath:{store:t,suggestedName:i},filters:[{name:o("XMind Workbook"),extensions:["xmind"]}]});if(!r)return!1;let s=`file://${r}`;await t.dispatch("wd/saveSheetAs",{sheetIndex:e,newSource:s})}(...e)}}]),(0,i.onBeforeUnmount)((()=>{t.unregisterCommands([{id:"save",provider:`editor/${window.editorId}`},{id:"saveAs",provider:`editor/${window.editorId}`},{id:"saveSheetAs",provider:`editor/${window.editorId}`}])}));const o=t.getters["l10n/T"];async function n(){t.state[u.SHARED].zenMode&&(await t.handleCommand("workbench.toggleZenMode"),await new Promise((e=>setTimeout(e,500)))),await t.dispatch("wd/close")}let f=h.default.route((0,m.EDITOR_CLOSE_DOCUMENT)(window.editorId),(async()=>{if(t.state.wd&&t.state.wd.isDirty){let e=await async function(){const e=o("Save"),t=o("Don't Save"),n=o("Cancel"),i=[];"win32"===process.platform?i.push(e,t,n):"darwin"===process.platform?i.push(e,n,t):i.push(t,n,e);let[r]=await(0,a.showMessageBox)({type:"none",title:"XMind",message:o("Do you want to save the changes?"),detail:o("Your changes will be lost if you don't save them."),buttons:i,defaultId:i.indexOf(e),cancelId:i.indexOf(n),noLink:!0});if(r==i.indexOf(t))return!0;if(r==i.indexOf(e)){return await b()}return!1}();return e&&await n(),{canceled:!e}}return await n(),{}}));async function b(){if(t.state.wd.isOldVersionWrapper.value){const e=o("Save"),n=o("Save as"),i=o("Cancel"),r=[];"win32"===process.platform?r.push(n,e,i):"darwin"===process.platform?r.push(n,i,e):r.push(e,i,n);let[s]=await(0,a.showMessageBox)({type:"none",title:"XMind",message:o("Saving file from XMind"),detail:o("Once you save the file, it cannot be opened normally in older version of XMind 8 Update 3."),buttons:r,defaultId:r.indexOf(n),cancelId:r.indexOf(i),noLink:!0});return s===r.indexOf(e)?(t.state.wd.isOldVersionWrapper.value=!1,await b(),!0):s===r.indexOf(n)&&await A()}return t.getters["wd/canSave"]?(await t.dispatch("wd/save"),t.state.editor.sbEditorWrapper.value.execAction(r.default.constant.ACTION_NAMES.WORKBOOK_SAVED,{prue:!0}),!0):await A()}async function A(){let e=await t.dispatch("wd/getSaveAsHandlers");if(!e||!e.length)throw new Error("No save-as handlers available.");return e.length,await E(e[0])}async function E(e){let n=await e.prompt({title:t.state.wd.title,source:t.state.wd.source},{suggestedName:T(),$T:o,store:t});if(t.commit("editor/SUGGESTED_NAME",{suggestedName:null}),!n)return!1;await t.dispatch("wd/saveAs",{newSource:n});const i=t.state.editor.sbEditorWrapper.value;return i&&i.execAction(r.default.constant.ACTION_NAMES.WORKBOOK_SAVED,{prue:!0}),y(),!0}function T(){const e=t.state.wd.workbookWrapper.value;let o=e.sheets[0].rootTopic().attributes.title,n=o&&o.replace(/\n+/g," ");return n=n||t.state.editor.suggestedName,n=n||t.getters["wd/getRepresentedFilePath"]||(e?e.sheets[0].rootTopic().attributes.title:null),n}function y(){let e=t.state.wd.source;e&&t.commit("editors/appendRecentlyOpenedItem",{source:e,timestamp:(new Date).getTime()})}(0,i.onBeforeUnmount)((()=>{f&&(f(),f=null)})),(0,i.watch)((()=>t.state.wd.opened),(o=>{o&&t.state.wd.source.startsWith("file:")&&e.root.$nextTick((function(){y()}))})),(0,i.watch)((()=>t.state.wd.saving),(async e=>{if(e){const e=s.default.join((0,l.getWorkbooksPath)(),window.editorId);let t=null;try{t=await(0,d.folderSize)(e)}catch(e){return void v.error((0,g.normalizeError)(e))}t>p.BIG_MINDMAP_LIST.FILE_SIZE&&h.default.fetch(m.WINDOW_OPEN,{name:"dialog-progress",parentId:window.id,wait:!0,query:{type:"xmind",editorId:window.editorId}})}else h.default.fetch(m.WINDOW_CLOSE,{name:"dialog-progress"})})),(0,i.watch)((()=>t.state.wd.saveEvent),(e=>{"postsave"===e&&(0,c.trackEvent)({eventCategory:"Save",eventAction:"save",eventValue:1})})),(0,i.watch)((()=>t.state.wd.saveAsEvent),(e=>{"postsaveas"===e&&(0,c.trackEvent)({eventCategory:"Save",eventAction:"saveAs",eventValue:1})})),(0,i.watch)((()=>t.state.wd.saveSheetEvent),(e=>{"postsavesheet"===e&&(0,c.trackEvent)({eventCategory:"Save",eventAction:"saveSheet",eventValue:1})})),(0,i.watch)((()=>t.state.wd.closeEvent),(e=>{"closed"===e&&(0,c.trackEvent)({eventCategory:"Quit",eventAction:"closeTab",eventValue:1})}))};var i=o(90571),r=n(o(61027)),a=o(95287),s=n(o(85622)),l=o(6921),c=o(83450),d=o(1893),u=o(90336),p=o(48932),h=n(o(24678)),f=n(o(41698)),m=o(99492),g=o(36414);const v=(0,f.default)("editor:saver")},8098:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){const{ZOOM:t,SET_MINI_MAP_DISPLAY:n,REFRESH_MIND_MAP:h,FOCUS_INPUT:A}=r.default.constant.ACTION_NAMES,E=e.root.$store,T=e.refs;function y(){E.commit("editor/UPDATE_LABEL_TIP",{labelTip:{show:!1,content:"",lastest:""}})}async function C(e){const s=await function(){const t=E.state.wd.workbookWrapper.value;return new Promise((o=>{if(E.state.fonts.loaded){let n=new r.default.WorkbookEditor({el:e.sbEditorContainer,model:t});o(n)}else{const n=E.watch((e=>e.fonts.loaded),(i=>{if(i){n();let i=new r.default.WorkbookEditor({el:e.sbEditorContainer,model:t});o(i)}}))}}))}();E.state.editor.sbEditorWrapper.value=s,E.state.wd.thumbnailGeneratorWrapper.value={generateThumbnail:async function(e){if(E.state[u.SHARED].editorMode!==l.EDITOR_MODE_SNOWBRUSH)return;const t=E.state.editor.sbEditorWrapper.value;if(t&&t.getChildEditors()){let o=t.getChildEditors()[e||0],n=o.getContentBound(),i=n.width,r=n.height;i/r>420/260?r=260*i/420:i=420*r/260,(i<420||r<260)&&(i=420,r=260),(i>2100||r>1300)&&(i=2100,r=1300);let a=(await o.exportImage({width:i,height:r,skipFont:!1,timeout:l.EXPORT_IMAGE_TIMEOUT})).data.replace(/^data:image\/png;base64,/,"");return Buffer.from(a,"base64")}return}};let c=null,p=null;!function(){const{VIEW_TYPE:e,TOPIC_TYPE:t}=r.default.constant,o=s;o.on(r.default.constant.EVENTS.SELECTION_CHANGED,(0,a.debounce)((n=>{const i=o;let r=!1,a=n.filter((t=>t.type===e.BRANCH)),s=a.some((e=>e.isCentralBranch()));if(!a.length||s){r=!0;const e=i.getCurrentSheetEditor().getSheetView().getCentralBranchView(),o=e.getChildrenBranchesByType(t.ATTACHED),n=e.getChildrenBranchesByType(t.DETACHED),s=e.getChildrenBranchesByType(t.SUMMARY);a=o.concat(n,s)}const l=!C(a);E.commit("editor/SE_BRANCH_COLLAPSE_TOGGLE",{hasExtend:l,allBranch:r}),E.commit("editor/SELECTION_CHANGED",{selections:Array.from(n)})}),100)),o.on(r.default.constant.EVENTS.AFTER_SHEET_CONTENT_CHANGE,(e=>{E.commit("wd/changeDirty",s.isWorkBookModified()),E.state[u.SHARED].isEditingTitle||E.commit("editor/updateSheetContentChanged"),"structureClass"===e.attr&&E.commit("editor/STRUCTURE_CLASS_CHANGED"),(0,f.trackEvent)({eventCategory:"Edit",eventAction:"edit",eventValue:1})})),o.on(r.default.constant.EVENTS.AFTER_THEME_CHANGED,(()=>{E.commit("editor/updateThemeChanged")})),o.on(r.default.constant.EVENTS.SE_BRANCH_COLLAPSE_TOGGLE,(n=>{const i=o;let r=!1,a=i.getSelections().filter((t=>t.type===e.BRANCH)),s=a.some((e=>e.isCentralBranch()));if(!a.length||s){r=!0;const e=i.getCurrentSheetEditor().getSheetView().getCentralBranchView(),o=e.getChildrenBranchesByType(t.ATTACHED),n=e.getChildrenBranchesByType(t.DETACHED),s=e.getChildrenBranchesByType(t.SUMMARY);a=o.concat(n,s)}const l=!C(a);E.commit("editor/SE_BRANCH_COLLAPSE_TOGGLE",{hasExtend:l,allBranch:r})})),o.on(r.default.constant.EVENTS.AFTER_MODIFY_STATUS_CHANGE,(()=>{E.commit("wd/changeDirty",s.isWorkBookModified()),E.dispatch("wd/saveTemp"),h()})),o.on(r.default.constant.EVENTS.AFTER_SHEET_TITLE_CHANGE,((e,t)=>{E.commit("editor/SHEET_TITLE_CHANGE",{id:e,title:t})})),o.on(r.default.constant.EVENTS.SHEET_SWITCHED,(()=>{const e=o.getCurrentSheetEditor(),t=e.model.id;k(e),E.getters["editor/isSheetEditorAvailable"](t)||e.afterRender().then((()=>{if(E.state[u.SHARED].editorMode===l.EDITOR_MODE_SNOWBRUSH&&E.state[u.SHARED].sheetRendering&&null!==E.state[u.SHARED].sheetRenderingStartAt){const t=(new Date).getTime()-E.state[u.SHARED].sheetRenderingStartAt;t<l.MIN_SHEET_LOADING_TIME?setTimeout((()=>{E.commit(`${u.SHARED}/updateSheetRendering`,{sheetRendering:!1,sheetRenderingStartAt:null})}),l.MIN_SHEET_LOADING_TIME-t):E.commit(`${u.SHARED}/updateSheetRendering`,{sheetRendering:!1,sheetRenderingtartAt:null}),S(e)}else E.getters["editor/isSheetEditorAvailable"](t)||S(e)})),e.execAction(n,{show:E.getters["editor/isMinimapShow"]}),E.commit("editor/SHEET_SWITCHED",{id:t});let i=null!==e.getSheetView().activatedTopBranchView;E.commit("editor/BRANCH_ONLY_MODE",{isBranchOnlyMode:i})})),o.on(r.default.constant.EVENTS.AFTER_ADD_NEW_SHEET,((e,t)=>{let n=t&&Number.isInteger(t.at)?t.at:o.model.sheets.length-1;E.state[u.SHARED].merging||o.switchTo(n)})),o.on(r.default.constant.EVENTS.AFTER_UI_STATUS_ACTIVATE,(e=>{e==r.default.constant.UI_STATUS.EDIT_TITLE&&E.commit(`${u.SHARED}/setIsEditingTitle`,{isEditing:!0})})),o.on(r.default.constant.EVENTS.AFTER_UI_STATUS_DEACTIVATE,(e=>{e==r.default.constant.UI_STATUS.EDIT_TITLE&&(E.commit(`${u.SHARED}/setIsEditingTitle`,{isEditing:!1}),E.commit("editor/updateSheetContentChanged"))})),o.on(r.default.constant.EVENTS.VIEW_PORT_MOVING,(()=>{E.state.workbench.popup.id&&E.commit("workbench/TOGGLE_POPUP",{id:null,dom:null}),E.state.editor.labelTip.show&&y()})),o.on(r.default.constant.EVENTS.SCALE_CHANGED,(()=>{const e=o.getCurrentSheetEditor().getSVGView().getScale();w(o.getCurrentSheetEditor(),{zoomScale:e}),E.commit("editor/SHEET_SCALE_CHANGED",{sheetId:o.currentSheetId})})),o.switchTo(0)}(),function(){const{VIEW_TYPE:e,TOPIC_TYPE:t}=r.default.constant,o=e=>setTimeout((()=>{"function"==typeof e&&e()}));function n(e){setTimeout((function(){i.remote.Menu.buildFromTemplate(e).popup({window:i.remote.getCurrentWindow()})}),0)}s.onEvent("contextmenu",e.BRANCH,(i=>{i.stopPropagation();const a=function(){const{model:e}=i.currentTarget.sbView,o=e.type();return o==t.ATTACHED&&e.parent()&&e.parent().type()==t.ROOT?"main":o}(),{ROOT:l}=r.default.constant.TOPIC_TYPE;let c=s.getSelections().filter((t=>t.type===e.BRANCH));if(a===l){const e=s.getCurrentSheetEditor().getSheetView().getCentralBranchView(),o=e.getChildrenBranchesByType(t.ATTACHED),n=e.getChildrenBranchesByType(t.DETACHED),i=e.getChildrenBranchesByType(t.SUMMARY);c=o.concat(n,i)}const d=!C(c),u=a===l&&c.filter((e=>e.model.children().length)).length>0,p=a!==l&&c.filter((e=>!e.isCentralBranch())).some((e=>e.model.children().length>0));o((()=>{T().then((e=>{n(a==t.CALLOUT?e.getTemplateForEditorCallout():e.getTemplateForEditorTopic(a,d,i.currentTarget.sbView,u,p))}))}))})),s.onEvent("contextmenu",e.SVG,(e=>{e.stopPropagation(),o((()=>{T().then((t=>{n(t.getTemplateForEditorSheetContent({clientPosition:{x:e.clientX,y:e.clientY}}))}))}))})),s.onEvent("contextmenu",e.BOUNDARY,(e=>{e.stopPropagation(),o((()=>{T().then((e=>{n(e.getTemplateForEditorBoundary())}))}))})),s.onEvent("contextmenu",e.RELATIONSHIP,(e=>{e.stopPropagation(),o((()=>{T().then((e=>{n(e.getTemplateForEditorRelationship())}))}))})),s.onEvent("contextmenu",e.IMAGE,(e=>{e.stopPropagation(),o((()=>{T().then((e=>{n(e.getTemplateForEditorImageOrAttachment())}))}))})),s.onEvent("contextmenu",e.MARKER,(e=>{e.stopPropagation(),e.sbView&&o((()=>{T().then((t=>{const o=e.sbView.parent();if(!o)return;const i=o.parent();if(!i)return;let r=i.model.getId();n(t.getTemplateForEditorMarker(e.sbView,r))}))}))})),s.onEvent("contextmenu",e.INFORMATION_ICON,(t=>{if(t.stopPropagation(),t.sbView){const i=t.sbView.iconType;if(!i)return;if(i===e.HREF||i===e.NOTE||"jump"===i){let r=null;i==e.NOTE&&(r=t.sbView.parent().model.getId()),o((()=>{T().then((e=>{n(e.getTemplateForEditorInfoItemWithEdit(i,r))}))}))}else i==e.COMMENT||i==e.TASK?o((()=>{T().then((e=>{n(e.getTemplateForEditorInfoItem(i))}))})):i===e.ATTACHMENT?o((()=>{T().then((e=>{n(e.getTemplateForEditorAttachment(i))}))})):i===e.FILE?o((()=>{T().then((e=>{let o=t.sbView.parent().model.getHref();try{o=(0,v.urlToFilePath)(o)}catch(e){o=o.slice("file:".length),b.error((0,d.normalizeError)(e))}let r=!1;try{r=g.default.isDirectorySync(o)}catch(e){}n(e.getTemplateForEditorFileLink(i,!r))}))})):i===e.AUDIO&&o((()=>{T().then((e=>{n(e.getTemplateForEditorAudioNote())}))}))}})),s.onEvent("contextmenu",e.NOTE,(e=>{e.stopPropagation(),o((()=>{T().then((e=>{n(e.getTemplateForEditorNote())}))}))})),s.onEvent("contextmenu",e.HREF,(e=>{e.stopPropagation(),o((()=>{T().then((e=>{n(e.getTemplateForEditorHyperlink())}))}))})),s.onEvent("contextmenu",e.MATH_JAX,(e=>{e.stopPropagation(),o((()=>{T().then((e=>{n(e.getTemplateForEditorEquation())}))}))})),s.onEvent("contextmenu",e.LABELUNIT,(async function(e){e.stopPropagation(),await o();const t=await T();if(clearTimeout(p),E.commit("editor/UPDATE_LABEL_TIP",{labelTip:{}}),e.sbView.isSpecialUtil)return;let i=e.sbView.parent().parent().model.getId();const r=e.sbView.originLabel;n(t.getTemplateForEditorLabel(r,i))}))}(),s.onEvent("click",r.default.constant.VIEW_TYPE.INFORMATION_ICON,(()=>{setTimeout((()=>{E.handleCommand("workbench.toggleInfoCard")}),100)})),s.onEvent("click",r.default.constant.VIEW_TYPE.MARKER,(e=>{e.sbView.markerId&&setTimeout((()=>{E.handleCommand("editor.showMarkerPopup",e.sbView)}),100)})),s.onEvent("click",r.default.constant.VIEW_TYPE.LABELUNIT,(()=>{setTimeout((()=>{E.handleCommand("editor.showLabelEditor")}),100)})),s.onEvent("mouseover",r.default.constant.VIEW_TYPE.LABELUNIT,(t=>{let o={};if(!E.state.editor.labelTip.show&&!E.state.editor.labelTip.content){let n=t.currentTarget;o.show=!1,o.content=t.sbView.originLabelUnitText,E.commit("editor/UPDATE_LABEL_TIP",{labelTip:o}),clearTimeout(p),p=setTimeout((()=>{if(e.labelTipEl&&E.state.editor.labelTip.content==t.sbView.originLabelUnitText){let t=JSON.parse(JSON.stringify(E.state.editor.labelTip));t.left=n.sbView.$el.position().left+n.getBBox().width+"px",t.top=n.sbView.$el.position().top+(n.getBBox().height-e.labelTipEl.clientHeight)/2+"px",t.show=!0,E.commit("editor/UPDATE_LABEL_TIP",{labelTip:t})}}),500)}})),s.onEvent("mouseout",r.default.constant.VIEW_TYPE.LABELUNIT,(()=>{y()})),s.onEvent("dblclick",r.default.constant.VIEW_TYPE.MATH_JAX,(e=>{e.stopPropagation(),E.handleCommand("editor.showEquationEditor")})),i.ipcRenderer.on("frame-focus",(()=>{let e=s.getCurrentSheetEditor().getModule(r.default.constant.MODULE_NAME.EDIT_RECEIVER);e.isVisible()&&e.hide()})),setTimeout((()=>{E.commit("editor/VISIBLE",{isVisible:!0}),E.dispatch("wd/updateMemento",{forceUpdate:!0})}),0);!E.state.editors.hasShownTutorial&&setTimeout((()=>{E.commit("editor/UPDATE_BEGINNERDIALOG_VISIBLE",{isBeginnerDialogVisible:!0})}),1400),E.commit("editor/SB_CREATED",{sbEditor:s}),E.commit("workbench/ready"),s.execAction(A,{preventScroll:!0});let h=(0,a.throttle)((()=>{E.dispatch("wd/autoCache")}),3e5);async function T(){if(!c){const{default:e}=await Promise.resolve().then(o.bind(o,15551));c=e(E)}return c}function C(e){let t;return t=!e.filter((e=>!e.isCentralBranch())).every((e=>!e.model.children().length))&&(e&&e.filter((e=>!e.isCentralBranch())).filter((e=>e.model.children().length)).every((e=>e.model&&e.model.isCollapse&&e.model.isCollapse()))),t}function S(e){const t=e,o=t.getSheetView().getCentralBranchView(),n=t&&t.model&&t.model.rootTopic();s.execAction(r.default.constant.ACTION_NAMES.SELECT,{id:n.id,isSingle:!0,prue:!0}),s.execAction(r.default.constant.ACTION_NAMES.FOCUS_CENTER,{targets:[o],prue:!0,animated:!1,finishToRun:()=>{document.body.focus(),s.execAction(r.default.constant.ACTION_NAMES.FOCUS_INPUT,{preventScroll:!0})}}),k(e),w(e,{inited:!0})}function k(e){const o=e.model.id,n=E.state.editor.sheetStatuses[o];let i=n&&n.zoomScale||(0,m.percentageNumberFromPercentageString)(E.getters["preferences/initialZoomLevel"]);E.state.editor.sheetStatuses.suggestedDefaultZoomScale&&(i=E.state.editor.sheetStatuses.suggestedDefaultZoomScale),n&&n.suggestedZoomScale&&(i=n.suggestedZoomScale),i!==e.getSVGView().getScale()&&e.execAction(t,{scale:i,prue:!0}),w(e,{zoomScale:i})}function w(e,{inited:t,zoomScale:o}={}){const n=e.model.id;E.commit("editor/updateSheetStatus",{id:n,inited:t,zoomScale:o})}}(0,s.watch)((()=>E.state.wd.openEvent),(e=>{"postopen"===e&&C(T)})),(0,s.watch)((()=>E.getters["editor/zoomScaleForActiveSheet"]),(e=>{const o=E.state.editor.sbEditorWrapper.value;o&&e&&o.getCurrentSheetEditor().getSVGView().getScale()!==e&&o.execAction(t,{scale:e})})),(0,s.watch)((()=>E.getters["editor/isMinimapShow"]),(e=>{const t=E.state.editor.sbEditorWrapper.value;t&&t.execAction(n,{show:e})})),(0,s.watch)((()=>E.getters["focus/isFocusMissing"]),(()=>{if(E.state[u.SHARED].editorMode===l.EDITOR_MODE_SNOWBRUSH){const e=E.state.editor.sbEditorWrapper.value;e&&e.execAction(A,{preventScroll:!0})}})),(0,s.watch)((()=>E.getters["preferences/cjkFontFamily"]),(e=>{setTimeout((()=>{const t=E.state.editor.sbEditorWrapper.value;t&&(t.config(r.default.constant.CONFIG.CJK_FONT_FAMILY,e||null),t.execAction(h))}),0)})),(0,s.watch)((()=>E.state.editor.isBranchOnlyMode),(e=>{const t=E.state.editor.sbEditorWrapper.value;t&&t.execAction(e?r.default.constant.ACTION_NAMES.SHOW_BRANCH_ONLY:r.default.constant.ACTION_NAMES.SHOW_FULL_CONTENT)})),(0,s.onMounted)((()=>{E.state.wd.workbookWrapper.value&&C(T)})),function(){let e=null;(0,s.onMounted)((()=>{e=p.default.route((0,c.EDITOR_GET_SHEET_PREVIEW_IMAGE_DATA)(window.editorId),(({exportImageOptions:e,sheetId:t}={})=>(({exportImageOptions:e,sheetId:t}={})=>{const o=E.state.editor.sbEditorWrapper.value;if(!o||!E.state.wd.workbookWrapper.value)return Promise.reject(new Error("Cannot generate preview image when no document canvas is available."));const n={format:"SVG",hideCollapseOpen:!1,hideCollapseClose:!1,timeout:l.EXPORT_IMAGE_TIMEOUT};o.initSheetEditor(o.findSheetIndex(t));const i=o.getSheetEditorById(t);let r=Object.assign({},n,e);return new Promise((e=>{setTimeout((()=>{e(i.exportImage(r))}),0)})).catch((e=>(b.error("[GetImageData]: ",(0,d.normalizeError)(e)),Promise.reject(e))))})({exportImageOptions:e,sheetId:t})))})),(0,s.onBeforeUnmount)((()=>{e&&(e(),e=null)}))}(),(0,s.watch)((()=>E.state.editor.selectionObs),(()=>{const e=E.state.editor.sbEditorWrapper.value,t=e&&e.getSelections()[0];if(!t||t&&"branch"!==t.type)return;const o=t.topicView.getInformationData();if(!o)return E.state.editor.isAllowInsertHyperLink||E.commit("editor/updateAllowInsertHyperLink",!0),E.state.editor.isAllowInsertAttachment||E.commit("editor/updateAllowInsertAttachment",!0),void(E.state.editor.isAllowInsertAudioNotes||E.commit("editor/updateAllowInsertAudioNotes",!0));const n=o.hrefInfo&&!o.hrefInfo.startsWith("xap"),i=o.hrefInfo&&o.hrefInfo.startsWith("xap"),r=o.audioNotesInfo;n?(E.commit("editor/updateAllowInsertHyperLink",!0),E.commit("editor/updateAllowInsertAttachment",!1),E.commit("editor/updateAllowInsertAudioNotes",!1)):i?(E.commit("editor/updateAllowInsertHyperLink",!1),E.commit("editor/updateAllowInsertAttachment",!0),E.commit("editor/updateAllowInsertAudioNotes",!1)):r&&(E.commit("editor/updateAllowInsertHyperLink",!1),E.commit("editor/updateAllowInsertAttachment",!1),E.commit("editor/updateAllowInsertAudioNotes",!0))})),function(){let e=null;(0,s.onMounted)((()=>{e=p.default.route((0,c.EDITOR_GET_CURRENT_SHEET_THEME)(window.editorId),(()=>{const e=E.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().exportTheme();return e.id="CUSTOM-"+(0,d.UUID)(),e}))})),(0,s.onBeforeUnmount)((()=>{e(),e=null}))}(),window.addEventListener("blur",y),(0,s.onBeforeUnmount)((()=>{window.removeEventListener("blur",y)}))};var i=o(58933),r=n(o(61027)),a=o(96486),s=o(90571),l=o(48932),c=o(99492),d=o(36414),u=o(90336),p=n(o(24678)),h=n(o(41698)),f=o(83450),m=o(28441),g=n(o(2286)),v=o(1893);const b=(0,h.default)("editor:useSnowbrush")},2340:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.root.$store;(0,a.onMounted)((()=>{t.state.wd.workbookWrapper.value||(t.commit("editor/VISIBLE",{isVisible:!1}),u.debug('Snowbrush editor creation delayed for workbook "%s"...',t.state.wd.title),t.dispatch("wd/open").catch((e=>(u.error('Error occurred while opening document "%s":',t.state.wd.source,JSON.stringify(e,Object.getOwnPropertyNames(e))),t.dispatch("wd/handleOpenError",{error:e}).then((t=>{const{recovered:o=!1,prompted:n=!1}=t||{};if(!o){if(!n)return s.default.fetch(l.WINDOW_OPEN,{name:"dialog-problem",payload:{name:"OpenError",message:e.message||e,stack:e.stack,code:"OPEN_FILE"}}).then((()=>{window.close()}));window.close()}}))))))})),t.state.wd.passwordHelperWrapper.value={async askForPassword(e){const o=(0,d.urlToFilePath)(t.state.wd.source),{result:n}=await s.default.fetch(l.WINDOW_OPEN,{name:"dialog-enterpassword",parentId:window.id,wait:!0,query:{errEncryptCount:e,hint:t.state.wd.materialWrapper&&t.state.wd.materialWrapper.value.passwordHint||"",filename:r.default.basename(o)}});return n.password}},function(){window.addEventListener("focus",o);let e=!1;function o(){t.state.wd.workbookWrapper&&!t.state.wd.saving&&(e||(e=!0,t.dispatch("wd/heartbeatTest").then((t=>{setTimeout((()=>{e=!1}),0);const{shouldClose:o=!1}=t||{};o&&window.close()}))))}(0,a.onBeforeUnmount)((()=>{window.removeEventListener("focus",o)}))}(),(0,a.watch)((()=>t.state.wd.closed),(e=>{e&&(u.debug('Removing snowbrush editor for workbook "%s"....',t.state.wd.title),t.commit("editor/VISIBLE",{isVisible:!1}))})),(0,a.watch)((()=>t.state.wd.isDirty),(e=>{let t=i.remote.getCurrentWindow();t&&t.setDocumentEdited(e)}))};var i=o(58933),r=n(o(85622)),a=o(90571),s=n(o(24678)),l=o(99492),c=n(o(41698)),d=o(1893);const u=(0,c.default)("editor:useWd")},2887:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(59713)),r=n(o(85622)),a=n(o(66085)),s=n(o(61027)),l=o(96486),c=o(99492),d=o(90336),u=o(36414),p=n(o(2286)),h=o(48932),f=n(o(24678)),m=o(83450),g=n(o(99636)),v=o(40359);function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function A(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const E=n(o(11222)).default.for("outliner");async function T(e,t,o,n){const{result:i}=await f.default.fetch(c.WINDOW_OPEN,{name:"dialog-enterpassword",wait:!0,parentId:null===n?window.id:n,query:{errEncryptCount:e,type:"merge",filename:t,hint:o||""}});return i?i.password:null}async function y(e,t=""){let o=null,n=null;const{fromXMind:i}=s.default.formatconverter;try{o=await i(e,{password:t})}catch(e){n=e.message}return{xmindData:o,exception:n}}async function C(e,t,o){const n=[];Object.keys(e).forEach((e=>{const i=r.default.join(o,e);t.manifest.resources[e]&&n.push(new Promise((o=>{p.default.ensureDirSync(r.default.dirname(i)),p.default.writeFileSync(i,t.manifest.resources[e]),o()})))})),await Promise.all(n)}function S(e,t){const o={};for(const n in e.manifest["file-entries"])t["file-entries"][n]||(o[n]=e.manifest["file-entries"][n]);return o}function k(e,t){Object.keys(e).forEach((e=>{t["file-entries"][e]={}}))}function w(e){const t=[s.default.constant.STYLE_KEYS.FONT_STYLE,s.default.constant.STYLE_KEYS.FONT_FAMILY,s.default.constant.STYLE_KEYS.FONT_WEIGHT,s.default.constant.STYLE_KEYS.FONT_SIZE,s.default.constant.STYLE_KEYS.TEXT_TRANSFORM,s.default.constant.STYLE_KEYS.TEXT_DECORATION];for(const o in e)-1===t.indexOf(o)&&delete e[o];return e}function x(e){return e.map((e=>(e.style&&e.style.properties&&(e.style.properties=w(e.style.properties)),e)))}function I(e){return e.map((e=>(delete e.style,e)))}function _(e){return e.style&&e.style.properties&&(e.style.properties=w(e.style.properties)),e.customWidth&&delete e.customWidth,e.children&&(e.children.attached&&(e.children.attached=e.children.attached.map((e=>_(e)))),e.children.callout&&(e.children.callout=x(e.children.callout)),e.children.summary&&(e.children.summary=x(e.children.summary))),e.boundaries&&(e.boundaries=I(e.boundaries)),e.summaries&&(e.summaries=I(e.summaries)),e}function B(e,t){const o=[];let n=[];return e.sheets.forEach((e=>{const i=g.default.cloneSheet(e),r=[];i.relationships&&(n=n.concat(x(i.relationships))),i.rootTopic=_(i.rootTopic),i.rootTopic.children&&i.rootTopic.children.detached&&(i.rootTopic.children.detached.forEach((e=>{r.push(t.createTopic(_(e)))})),delete i.rootTopic.children.detached);const a=t.createTopic(i.rootTopic);r.forEach((e=>a.addChildTopic(e))),o.push(a)})),{topics:o,relationships:n}}function O(e,t){const o=[];return t.sheets.forEach((t=>{const n=g.default.cloneSheet(t);o.push(n.id),e.addSheet(n.id,n,{title:n.title})})),o}var M=async function(e,t,o){if(!t||!t.length)return;(0,m.trackEvent)({eventCategory:"Tools",eventAction:"startMergeXMindFiles",eventName:`target: ${o.mergeIntoMultiSheet?"Multiple Sheets":"Current Map"}, createIndexSheet: ${o.createIndexSheet}, fileCount: ${t.length}`});let n=!0,i=null;const b=(new Date).getTime();if(1===t.length&&p.default.statSync(t[0]).size<h.BIG_MINDMAP_LIST.FILE_SIZE&&(n=!1),n){const{id:e}=await f.default.fetch(c.WINDOW_OPEN,{name:"dialog-progress",parentId:window.id,height:h.WINDOW_SETTINGS["dialog-progress"].height-30,query:{type:"merging",editorId:window.editorId,fileTotalCount:t.length}});i=e}e.commit(`${d.SHARED}/setMerging`,{merging:!0});const w=e.state.wd.workbookWrapper.value,x=e.state.wd.manifestWrapper.value,I=e.state.editor.sbEditorWrapper.value,_=e.state.editor.activeSheetId,M=e.getters["l10n/T"],L=I.getCurrentSheetEditor().getSheetView(),R=I.getCurrentSheetEditor().model.getUndo(),N=I.getCurrentSheetEditor().model.rootTopic(),{isFileEncrypted:D}=s.default.formatconverter,P=[];let F=[],W=[],$=[];R.keepAllInOne(!0);try{for(const n of t){const s=r.default.basename(n),l=await p.default.readFile(n);let c=null;try{c=await a.default.loadAsync(l)}catch(t){P.push(s),e.commit(`${d.SHARED}/updateMergingProgress`);continue}let h=null;const f=await D(c);if(f){let t=0;for(;;){const o=await T(t,s,f.passwordHint,i);if(null===o){P.push(s),e.commit(`${d.SHARED}/updateMergingProgress`);break}const n=await y(c,o);if(n.xmindData){h=n.xmindData;break}null!==n.xmindData||t++}}else{const e=await y(c);if(e.exception){P.push(s);continue}h=e.xmindData}if(null===h)continue;const m=S(h,x);if(Object.keys(m).length&&(await C(m,h,e.state.wd.tempStorage),await k(m,x)),o.mergeIntoMultiSheet)$=$.concat(O(w,h));else{const{topics:e,relationships:t}=B(h,N);W=W.concat(e),F=F.concat(t)}e.commit(`${d.SHARED}/updateMergingProgress`),t.length===e.state[d.SHARED].mergingCount&&await(0,u.sleep)(300)}if(o.mergeIntoCurrentSheet){e.commit(`${d.SHARED}/updateSheetRendering`,{sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,u.sleep)(100),W.forEach((e=>{N.addChildTopic(e)})),F.forEach((e=>{L.model.addRelationship(e)})),await I.getCurrentSheetEditor().afterRender();const t=(new Date).getTime()-e.state[d.SHARED].sheetRenderingStartAt;t<h.MIN_SHEET_LOADING_TIME&&await(0,u.sleep)(h.MIN_SHEET_LOADING_TIME-t),e.state[d.SHARED].editorMode===h.EDITOR_MODE_OUTLINER?E.commit("refreshSheet"):e.commit(`${d.SHARED}/updateSheetRendering`,{sheetRendering:!1,sheetRenderingStartAt:null})}const m=(new Date).getTime()-b;n&&m<1e3&&await(0,u.sleep)(1e3-m)}catch(e){throw e}finally{if(o.createIndexSheet&&e.state[d.SHARED].merging&&P.length!==t.length){const t=w.sheets.map((e=>(0,l.pick)(e.attributes.rootTopic,["id","title","titleUnedited"]))),o=await async function(e,t,o){const{LOGICRIGHT:n}=s.default.constant.STRUCTURECLASS,i=e.state.editor.sbEditorWrapper.value,r=e.getters["l10n/T"],a=r,l=await(0,v.getSheetTemplate)({$T:(...e)=>a(...e),colorTheme:"0df8cd54-91cd-4160-9747-229e0171d358",skeleton:"742a0094a75af3d82d6aebec36",structure:n}),c=g.default.cloneSheet(l);return c.rootTopic.title=r("Contents"),c.rootTopic.children.attached=o.map((e=>A(A({},e),{},{id:(0,u.UUID)(),href:`xmind:#${e.id}`}))),t.addSheet(c.id,c,{title:r("Contents")}),t.updateSheetOrderToBefore(c.id,t.getSheetByIndex(0).id),i.switchTo(0),c.id}(e,w,t);$.push(o)}if(o.mergeIntoMultiSheet&&!o.createIndexSheet&&(e.commit(`${d.SHARED}/updateSheetRendering`,{sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,u.sleep)(100),I.switchTo(w.sheets.length-1)),R.keepAllInOne(!1),n&&await f.default.fetch(c.WINDOW_CLOSE,{name:"dialog-progress"}),e.commit(`${d.SHARED}/setMerging`,{merging:!1}),e.commit(`${d.SHARED}/updateMergingProgress`,0),o.mergeIntoMultiSheet){const e=R.pop();R.add({undo:()=>{$.forEach((e=>{w.removeSheet(e)})),I.switchTo(w.findSheetIndex(_))},redo:()=>{e._tasks.forEach((e=>e.redo()))}})}P.length&&await f.default.fetch(c.WINDOW_OPEN,{name:"dialog-err",height:h.WINDOW_SETTINGS["dialog-err"].height,payload:{isCustomError:!0,autoExpand:!0,expansionHeight:115,code:"mergeFailed",title:M("Failed to Merge $1 $2",P.length,P.length>1?M("Files"):M("File")),message:P.map(((e,t)=>`${t+1}. ${e.split(".xmind")[0]}`)).join("\n")}})}};t.default=M},76341:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useOutlineNotesLink=function(e){function t(){a.commit("changeHyperlinkEditorMode",i.HYPERLINK_EDITOR_MODE.NOTES),e.notesEditor.trix.editor.activateAttribute("frozen"),e.store.handleCommand("editor.showHyperlinkEditor")}return(0,n.onMounted)((()=>{a.on(`notes.setLink-${e.topicId}`,(t=>{e.notesEditor&&e.notesEditor.setLink(t)})).on(`notes.getDefaultLink-${e.topicId}`,(()=>{if(!e.notesEditor)return;const t=e.notesEditor.getSingleWholeLink()||"";a.commit("setDefaultNotesLink",t)})).on(`notes.removeLink-${e.topicId}`,(()=>{e.notesEditor&&e.notesEditor.removeLink()})).on(`notes.editLink-${e.topicId}`,(()=>{e.notesEditor&&t()})).on(`notes.deactivateFrozen-${e.topicId}`,(()=>{e.notesEditor&&e.notesEditor.trix.editor.deactivateAttribute("frozen")}))})),(0,n.onBeforeUnmount)((()=>{a.removeAllListeners(`notes.setLink-${e.topicId}`).removeAllListeners(`notes.getDefaultLink-${e.topicId}`).removeAllListeners(`notes.removeLink-${e.topicId}`).removeAllListeners(`notes.editLink-${e.topicId}`).removeAllListeners(`notes.deactivateFrozen-${e.topicId}`)})),{showLinkEditor:t}};var n=o(90571),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,o&&o.set(e,n);return n}(o(11222));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}const a=i.default.for("outliner")},68654:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(24678)),r=o(24092),a=o(99492),s=o(98125),l=o(56125);var c=class{constructor(e){this.$store=e}CheckOAuth(){return new Promise((e=>{const t=this.$store.state;if(!(t.biggerplate.accessToken&&t.biggerplate.realExpireTime>Date.now()))return this.refreshTokenAsync(t.biggerplate.refreshToken).catch((()=>{i.default.fetch(a.WINDOW_OPEN,{name:"biggerplate",wait:!0}).then((()=>{t.biggerplate.accessToken&&t.biggerplate.realExpireTime>Date.now()&&e()}))}));e()}))}refreshTokenAsync(e){return new Promise(((t,o)=>{e?fetch("https://accounts.biggerplate.com/oauth/token",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},method:"POST",body:new URLSearchParams({client_id:l.BIGGERPLATE.CLIENT_ID,client_secret:l.BIGGERPLATE.CLIENT_SECRET,refreshToken:e,grant_type:"refresh_token"})}).then((async e=>{if(!e||!e.ok)return void o();const n=await e.json();n.access_token?(await i.default.fetch(a.STORE_COMMIT,{mutations:[{type:"biggerplate/updateBiggerplat",payload:{accessToken:n.access_token,realExpireTime:Date.now()+1e3*(n.expires_in-100),refreshToken:n.refresh_token}}]}),t()):o("OAuth failed")})):o()}))}async upload(e,t){const o=await(0,s.compress)({dispatch:(e,t)=>this.$store.dispatch(`wd/${e}`,t),commit:(e,t)=>this.$store.commit(`wd/${e}`,t),state:this.$store.state.wd}),n=new ArrayBuffer(o.length),i=new Uint8Array(n);for(let e=0;e<o.length;e++)i[e]=o[e];const a=new File([n],`${e}.xmind`,{type:"application/vnd.xmind.workbook"}),l=new FormData,c={title:[e],description:[t||e],map:[a,`${e}.xmind`]};for(const[e,t]of Object.entries(c))l.set(e,...t);const d=await fetch("https://api.biggerplate.com/maps",{headers:{"Transfer-Encoding":"chunked",Authorization:this.$store.state.biggerplate.accessToken},method:"POST",body:l});if(!d||!d.ok||200!==d.status)return Promise.reject(d&&d.statusText);{const e=await d.json(),{url:t}=e;t&&(0,r.openExternal)(t)}}};t.default=c},21674:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AuthError=void 0;var i=n(o(76417)),r=n(o(52624)),a=n(o(24678)),s=o(99492),l=o(98125);class c extends Error{}t.AuthError=c;t.default=class{constructor(e,t,o){this.$store=e,this.store=e,this.type=t,this.editorId=o}async CheckOAuth(){var e=this.getAccountData();if(!e||!e.oauthToken)return this.makeOauth()}getNoteData(){return new Promise((async(e,t)=>{try{const t=this.getAccountData(),o=new r.default.Client({token:t.oauthToken,sandbox:false,china:t.china});this.noteStore=o.getNoteStore(),this.noteBooks=await this.noteStore.listNotebooks(),e(this.noteBooks.map((e=>({guid:e.guid,name:e.name}))))}catch(e){9===e.errorCode&&t(new c("Authentication expired. Please reauthorize.")),t(e)}}))}getAccountData(){const e=this.$store.state;return{oauthToken:e.evernote.oauthToken,username:e.evernote.username,china:e.evernote.china}}makeOauth(){return new Promise((e=>{a.default.fetch(s.WINDOW_OPEN,{name:"evernote",wait:!0}).then((()=>{var t=this.getAccountData();t&&t.oauthToken&&e()}))}))}createResource(e,t,o,n){const a=i.default.createHash("md5").update(t).digest("hex");return{resource:{notebookGuid:this.noteBooks[e]||null,mime:o,data:new r.default.Types.Data({bodyHash:a,body:t,size:t.length}),attributes:{fileName:this.store.state.wd.title+`.${n}`}},bodyHash:a}}async getFileAsync(e){const t={dispatch:(e,t)=>this.$store.dispatch(`wd/${e}`,t),commit:(e,t)=>this.$store.commit(`wd/${e}`,t),state:this.$store.state.wd};let o=await(0,l.compress)(t);const{resource:n,bodyHash:i}=this.createResource(e,o,"application/vnd.xmind.workbook","xmind");return{resource:n,content:`Attachment: <br /><en-media type="${n.mime}" hash="${i}" /><br /><br />`}}async getPreviewAsync(e){const t=this.$store.state.editor.sbEditorWrapper.value,o=await a.default.fetch((0,s.EDITOR_GET_SHEET_PREVIEW_IMAGE_DATA)(this.editorId),{sheetId:t&&t.currentSheetId,exportImageOptions:{skipFont:!1,format:"PNG"}}),n=new Buffer(o.data.replace("data:image/png;base64,",""),"base64"),{resource:i,bodyHash:r}=this.createResource(e,n,"image/png","png"),l={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"}},c={escape:RegExp("["+Object.keys(l.escape).join("")+"]","g")};return{resource:i,content:`<div style="width:100%;text-align:center;"><h2>${this.store.state.wd.title.replace(c.escape,(e=>l.escape[e]))}</h2><br /><en-media type="${i.mime}" hash="${r}" /></div><br /><br />`}}getText(){return{content:(0,l.saveText)(this.$store)+"<br /><br />"}}async saveEvernote({notebookGuid:e,selecteFile:t,selecteImage:o,selectPlain:n}){let i=Object.assign(new r.default.Types.Note,{title:this.store.state.wd.title,notebookGuid:e,content:['<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note>'],resources:[]});if(t){let{resource:t,content:o}=await this.getFileAsync(e);i.content.push(o),i.resources.push(t)}if(o){let{resource:t,content:o}=await this.getPreviewAsync(e);i.content.push(o),i.resources.push(t)}if(n){let{content:e}=this.getText();i.content.push(e)}return i.content.push('<br /><br /><div style="width:100%;text-align:right;color:rgb(153,153,153)">'+(new Date).toDateString()+". Created by XMind</div><br /></en-note>"),i.content=i.content.map((e=>e.trim())).join(""),await this.noteStore.createNote(i)}getEditor(){return this.$store.state.editor}}},87405:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(98125),r=o(58933),a=n(o(41698)),s=n(o(24678)),l=o(24092),c=o(99492),d=o(48932);const u=(0,a.default)("editor:share-to-library");t.default=class{constructor(e,t,o){this.$store=e,this.$T=e.getters["l10n/T"],this.type=t,this.editorId=o,this.canceled=!1,this.uploadInfo=null,this.title="",this.isPrivate=!1}async getPreviewAsync(){const e=this.$store.state.editor.sbEditorWrapper.value,t=await s.default.fetch((0,c.EDITOR_GET_SHEET_PREVIEW_IMAGE_DATA)(this.editorId),{sheetId:e&&e.currentSheetId,exportImageOptions:{skipFont:!1,format:"PNG"}});return t.buffer=new Buffer(t.data.replace("data:image/png;base64,",""),"base64"),t}async getUploadInfoAsync(){if(!this.canceled){if(!this.uploadInfo)try{this.uploadInfo=await s.default.fetch(c.XOS.CREATE_UPLOAD_SESSION,{title:this.title})}catch(e){throw e}return this.uploadInfo}}async compressAsync(e,t,o){if(this.canceled)return;const n=this.isPrivate?3:1,r=await this.getUploadInfoAsync();if(!r)return;const a=await this.getPreviewAsync(),s=a.buffer,l=this.$store.state.editor.sbEditorWrapper.value,c=l.model.sheets.findIndex((({id:e})=>e===l.currentSheetId));let d={width:a.height,height:a.width};const u={dispatch:(e,t)=>this.$store.dispatch(`wd/${e}`,t),commit:(e,t)=>this.$store.commit(`wd/${e}`,t),state:this.$store.state.wd,saveCurrentSheetOnly:o,currentSheetIndex:c};return await(0,i.compress)(u,{description:e,author:{name:this.$store.state.account.user},share:{privacy:n,lang:t,url:r.url},thumbnail:{image:s,x:d.width,y:d.height}})}async upload(e,t,o,n=!1,i=!1){if(this.canceled)return;this.isPrivate=i,this.title=e;const a=await this.getUploadInfoAsync();if(!a)return;const u={map:[await this.compressAsync(t,o,n),`${e}.xmind`],session:a.session,action:"upload"};try{await s.default.fetch(c.XOS.UPLOAD_MAP,u)}catch(e){if(e.code===d.UPLOAD_MAP_SERVER_STATUS.E_PARAM_MISSING)throw{code:401,message:"Session expired"};throw e}return this.queryProcess().then((()=>async()=>{const e=r.remote.getCurrentWindow().id;switch(this.type){case"blog":{let t='<iframe src="'+this.uploadInfo.url.replace("xmind.net/m/","xmind.net/embed/")+'" width="900px" height="540px" frameborder="0" scrolling="no"></iframe>';await s.default.fetch(c.WINDOW_OPEN,{name:"dialog-copy-link-to-share",parentId:e,wait:!0,query:{link:encodeURIComponent(t),type:"blog"}});break}case"xmind share":await s.default.fetch(c.WINDOW_OPEN,{name:"dialog-copy-link-to-share",parentId:e,wait:!0,query:{link:encodeURIComponent(this.uploadInfo.url),type:"xmind share"}});break;default:(0,l.openExternal)(this.uploadInfo[this.type])}}))}async queryProcess(){let e=null;const t=await this.getUploadInfoAsync();if(!t)return;const o=async()=>{if(!this.canceled)return new Promise((async(n,i)=>{try{const{status:r}=await s.default.fetch(c.XOS.UPLOAD_MAP,{session:t.session,action:"query"});r!==d.UPLOAD_MAP_PROGRESS_STATUS.UPLOADING&&r!==d.UPLOAD_MAP_PROGRESS_STATUS.PROCESSING||(e=setTimeout((()=>n(o)),500)),r===d.UPLOAD_MAP_PROGRESS_STATUS.ERROR&&(u.warn("Error in query uploading progress"),i("Something wrong in uploading")),r===d.UPLOAD_MAP_PROGRESS_STATUS.FINISHED&&(e&&clearTimeout(e),n())}catch(e){if(e.code===d.UPLOAD_MAP_SERVER_STATUS.E_KEY_NOT_EXIST||e.code===d.E_UNAUTHORIZED)throw{code:d.E_UNAUTHORIZED,message:"Session expired"};throw e}}));e&&clearTimeout(e);try{await s.default.fetch(c.XOS.UPLOAD_MAP,{session:t.session,action:"cancel"})}catch(e){throw e}};return o()}}},81284:(e,t,o)=>{"use strict";var n=o(95318);t.Z=void 0;var i=o(58933),r=n(o(71191)),a=n(o(61027)),s=n(o(41698)),l=o(99492),c=n(o(24678)),d=n(o(87405)),u=n(o(68654)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=h(t);if(o&&o.has(e))return o.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=i?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=e[r]}n.default=e,o&&o.set(e,n);return n}(o(21674));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(h=function(e){return e?o:t})(e)}const f=(0,s.default)("editor:share");var m=async function(e,t){const o=a.default.utils,n=e.state.editor.sbEditorWrapper.value,s=n.getCurrentSheetEditor().getSheetView(),h=o.styleManager.getStyleValue(s,a.default.constant.STYLE_KEYS.FILL_COLOR);if("biggerplate"===t){const o=new u.default(e);await o.CheckOAuth();const a=r.default.parse(window.location.search.slice(1)).editorId||"",s=c.default.route((0,l.EDITOR_SHARE_TO_LIBRARY)(a),(({title:t,description:n})=>o.upload(t,n).catch((e=>(f.info("upload biggerplate error",e),e))).then((()=>{e.commit("rateUs/addRateMasValue",10)}))));c.default.fetch(l.WINDOW_OPEN,{name:"dialog-share",parentId:i.remote.getCurrentWindow().id,wait:!0,query:{type:t,editorId:a,sheetId:n.currentSheetId,mapName:e.state.wd.title,backgroundColor:h}}).then((()=>{s()}))}else if("evernote"===t){const o=r.default.parse(window.location.search.slice(1)).editorId||"",n=new p.default(e,t,o);let a=null;async function s(){try{return await n.CheckOAuth(),await n.getNoteData()}catch(t){if(t instanceof p.AuthError)return e.commit("evernote/clearEvernote"),await s();throw f.info("get evernote book list error",t),t}}if(a=await s(),!Array.isArray(a)||!a.length)throw f.info("got none evernote book list",a),new Error("Got none evernote book list");const d=c.default.route((0,l.EDITOR_SHARE_TO_EVERNOTE)(o),(async t=>n.saveEvernote(t).catch((e=>(f.info("upload evernote error",e.stack||e.message||e.toString()),e))).then((()=>{e.commit("rateUs/addRateMasValue",10)}))));c.default.fetch(l.WINDOW_OPEN,{name:"dialog-evernote",parentId:i.remote.getCurrentWindow().id,wait:!0,query:{bookList:JSON.stringify(a),editorId:o}}).then((()=>{d()}))}else{const o=r.default.parse(window.location.search.slice(1)).editorId||"",n=new d.default(e,t,o),a=c.default.route((0,l.EDITOR_SHARE_TO_LIBRARY)(o),(o=>n.upload(o.title,o.description,o.lang,"CURRENT_SHEET"===o.uploadSheetTypes,o.isPrivate).then((t=>{u.then(t).then((()=>{e.commit("rateUs/addRateMasValue",10)}))})).catch((e=>(f.info(`upload ${t} error:`,e.message||e),e))))),s=e.state.editor.sbEditorWrapper.value,u=c.default.fetch(l.WINDOW_OPEN,{name:"dialog-share",parentId:i.remote.getCurrentWindow().id,wait:!0,query:{type:t,editorId:o,sheetId:s&&s.currentSheetId,mapName:e.state.wd.title,backgroundColor:h}}).then((()=>{n.canceled=!0,a()}))}};t.Z=m},98125:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.compo=function(e,t,o){const n=f(e,t,o),i=o.beforeCreate;return n.beforeCreate=function(){if(this.$store.registerModule(e,t),i instanceof Function)return i.apply(this,arguments)},n},t.mapModule=f,t.appendComponent=function({el:e,store:t,path:o,storeSub:n,component:r}){const a=f(o,n,r);let s=a.beforeCreate;return a.el=e,a.beforeCreate=function(){if(t.registerModule(o,n),this.$store=t,!(s instanceof Function))return;const e=s.apply(this,arguments);return s=void 0,e},new i.default(a)},t.promize=function(e,...t){return new Promise((o=>{e.apply(null,[...t,function(){o(arguments)}])}))},t.filterObj=function(e,t){const o={};let n,i;for(n in e)i=e[n],t(n,i)&&(o[n]=i);return o},t.getSvgData=function(e){return new Promise(((t,o)=>{(0,s.svgAsPngUri)(e,{},(e=>{if(!e)return o("no uri");const n=new Buffer(e.replace("data:image/png;base64,",""),"base64");t(n)}))}))},t.saveText=function(e){const t=e.state.editor.sbEditorWrapper.value;let o=t&&t.getCurrentSheetEditor();return b("",o.getSheetModel()._rootTopic).replace(/[\x00-\x08\x0b-\x0c\x0e-\x1f]/g,"")},t.compress=async function(e,t){const{state:o,dispatch:n,saveCurrentSheetOnly:i,currentSheetIndex:r}=e;if(t){let e=decodeURIComponent(o.title+".xmind"),s=l.remote.app.getPath("temp"),c=d.default.join(s,e);return i&&Number.isInteger(r)&&r>=0?await n("saveAsLocalFile",{filePath:c,toEncrypt:!1,sheetIndexes:[r],inject:e=>{Object.assign(e.metadata,A(t))}}):await n("saveAsLocalFile",{filePath:c,toEncrypt:!1,inject:e=>{Object.assign(e.metadata,A(t))}}),a.default.readFile(c)}{let e=decodeURIComponent(o.title+".xmind"),t=l.remote.app.getPath("temp"),i=d.default.join(t,e);return await n("saveAsLocalFile",{filePath:i}),a.default.readFile(i)}},t.USERDATA_PATH=t.TwoWayModel=void 0;var i=n(o(20144)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=h(t);if(o&&o.has(e))return o.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=i?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=e[r]}n.default=e,o&&o.set(e,n);return n}(o(20629)),a=n(o(2286)),s=o(81803),l=o(58933),c=n(o(51091)),d=n(o(85622)),u=o(28441),p=o(6921);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(h=function(e){return e?o:t})(e)}function f(e,t,o){const n=e.join("/");o.computed=o.computed||{},t.state=t.state||{};const i=Object.keys(t.state),a=i.filter((e=>t.state[e]instanceof m)),s=i.filter((e=>!a.includes(e))),l=a.reduce(((o,i)=>(t.state[i]=t.state[i].value,o[i]={get(){return(0,u.dive)(this.$store.state,...e)[i]},set(e){this.$store.commit(n+"/SET",{key:i,value:e})}},o)),{});return Object.assign(o.computed,r.mapState(n,s),r.mapGetters(n,Object.keys(t.getters||{})),l),o.methods=o.methods||{},t.mutations=t.mutations||{},t.mutations.SET=function(e,{key:t,value:o}){e[t]=o},Object.assign(o.methods,r.mapMutations(n,Object.keys(t.mutations)),r.mapActions(n,Object.keys(t.actions||{}))),o}i.default.use(r);class m{constructor(e){this.value=e}}t.TwoWayModel=m;const g=(0,p.getAppDataPath)()+"/share";t.USERDATA_PATH=g,a.default.ensureDirSync(g);const v="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";function b(e,t){let o=e+c.default.encodeXML(t.attributes.title||"")+"<br />";if(e+=v,t._children){if(t._children.attached)for(let n of t._children.attached)o+=b(e,n);if(t._children.detached&&Array.isArray(t._children.detached))for(let e of t._children.detached)o+=b(v,e)}return o}function A(e){return{DESCRIPTION:e.description||"",Author:e.author.name||"",downloadable:1===e.share.privacy,Thumbnail:{Origin:{X:e.thumbnail.x,Y:e.thumbnail.y}},Create:{Time:new Date},Share:{Privacy:e.share.privacy,Downloadable:1===e.share.privacy?1:0,LanguageChannel:e.share.lang}}}Promise.seq||(Promise.seq=function(e){var t=Promise.resolve();for(let o in e)t=t.then(e[o]);return t})},32871:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(28614),i=o(58933),r=o(17462),a=o(91115),s=o(90571);const l=0,c=1;class d extends n.EventEmitter{constructor(){super(),this.spellcheckerData={},this.spellchecker={isMisspelled:e=>this.spellcheckerData.misspelledWord===e,getCorrectionsForMisspelling:e=>this.spellcheckerData.misspelledWord===e?this.spellcheckerData.dictionarySuggestions:[]}}config(e){this.store=e,i.remote.getCurrentWebContents().on("context-menu",((e,t)=>{this.spellcheckerData={misspelledWord:t.misspelledWord,dictionarySuggestions:t.dictionarySuggestions}}));const t=(e,t)=>{let o;if(t.includes(e))o=e;else{let[n]=e.split(/[-_]/),i=t.map((e=>e.split(/[-_]/)[0])).indexOf(n);i>-1&&(o=t[i])}return o};(0,s.watch)((()=>this.store.getters["preferences/language"]),(e=>{const o=i.remote.getCurrentWebContents().session,n=o.availableSpellCheckerLanguages,r=t(e,n)||"en-US",a=this.store.state.preferences.systemLanguage,s=t(a,n)||"en-US";o.setSpellCheckerLanguages([...new Set([r,s,"en-US"])])})),window.addEventListener("contextmenu",(e=>{if(!e.target.closest('textarea, input[type="text"], [contenteditable="true"], [contenteditable=""]'))return;let t=l;r.Editor.getHref(e.target)&&(t=c,(0,a.selectLinkRange)(e.target.closest("a"))),setTimeout((()=>{this.buildSpellContextMenu(document.getSelection().toString(),e.target,t)}),100)}))}buildSpellContextMenu(e,t,o){"function"==typeof this.suggestedBuildSpellContextMenu?(this.suggestedBuildSpellContextMenu(),this.suggestedBuildSpellContextMenu=null):this.buildDefaultSpellContextMenu(e,t,o)}genDefaultMenuPart(e,t){const o=this.store.getters["l10n/T"];let n=this.getCorrectionsForMisspelling(t);if(this.spellchecker.isMisspelled(t)&&n&&n.length)for(let t of n)e.push({label:t,click:()=>document.execCommand("insertText",!1,t)});else e.push({label:o("No Guesses Found"),enabled:!1});e.push({type:"separator"}),e.push({label:o("Learn Spelling"),click:()=>this.add(t)})}genLinkMenuPart(e,t){if(!(t=t.closest("a")))return;const o=this.store.getters["l10n/T"];e.push({label:o("Open Link"),click:()=>i.shell.openExternal(t.href)}),e.push({label:o("Copy Link"),click:()=>i.clipboard.writeText(t.href)}),e.push({label:o("Edit Link"),click:()=>this.store.handleCommand("notes.editLink")}),e.push({label:o("Remove Link"),click:()=>{this.store.handleCommand("notes.removeLink")}})}buildDefaultSpellContextMenu(e,t,o){const n=[],r=this.store.getters["l10n/T"];o===l?this.genDefaultMenuPart(n,e):o===c&&this.genLinkMenuPart(n,t),n.push({type:"separator"}),n.push({label:r("Cut"),enabled:"string"==typeof e&&""!=e,click:()=>document.execCommand("cut")}),n.push({label:r("Copy"),enabled:"string"==typeof e&&""!=e,click:()=>document.execCommand("copy")}),n.push({label:r("Paste"),enabled:i.clipboard.readText()&&""!=i.clipboard.readText(),click:()=>document.execCommand("insertText",!1,i.clipboard.readText())}),n.push({type:"separator"}),n.push({label:r("Select All"),click:()=>document.execCommand("selectAll")});i.remote.Menu.buildFromTemplate(n).popup({window:i.remote.getCurrentWindow()})}getCorrectionsForMisspelling(e){return this.spellchecker.getCorrectionsForMisspelling(e)}add(e){i.remote.getCurrentWebContents().session.addWordToSpellCheckerDictionary(e)}setSuggestedBuildSpellContextMenuFn(e){this.suggestedBuildSpellContextMenu=e}}var u=new d;t.default=u},98930:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tutorialHandle=void 0;var n=o(90336);t.tutorialHandle=(e,t)=>(!e.state.editor.isBeginnerModeVisible||e.state[n.SHARED].zenMode||e.state.tutorial.actionMode&&e.getters["tutorial/currentKey"]===t&&e.dispatch("tutorial/next"),!1)},55175:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ZENDARKTHEMEID=t.DARKTHEME=void 0;var i=n(o(31845)),r=n(o(61027));const{styleManager:a}=r.default.utils,{CLASS_TYPE:s,STYLE_KEYS:l}=r.default.constant,{TEXT_COLOR:c,LINE_COLOR:d,BORDER_LINE_COLOR:u,FILL_COLOR:p}=l,{CENTRAL_TOPIC:h,MAIN_TOPIC:f,SUB_TOPIC:m,SUMMARY_TOPIC:g,CALLOUT_TOPIC:v,FLOATING_TOPIC:b,BOUNDARY:A,SUMMARY:E,RELATIONSHIP:T,MAP:y}=s,C=[c],S=[d,u,p],k=[d],w=[d],x=[d],I=(e,t)=>i.default&&i.default[e]&&i.default[e].properties&&i.default[e].properties[t],_=(e,t)=>i.default[e].properties[t],B=e=>{let t;return t=e.model&&e.model.componentType==r.default.constant.MODEL_TYPE.TOPIC?(e=>{const t=a.getClassList(e);return t&&t.length&&"topic"!=t[0]?t[0]:a.getClassName(e)})(e):a.getClassName(e),t},O=(e,t,o)=>I(e,t)?_(e,t):a.getStyleValue(o,t,{ignoreUser:!0,ignoreClass:!0}),M=(e,t,o)=>I(e,t)?_(e,t):a.getStyleValue(o,t,{ignoreClass:!0,ignoreTheme:!0}),L=(e,t,o)=>I(e,t)?_(e,t):O(a.getClassName(o),t,o),R={beforeUser:(()=>{let e=[];const t=[h,f,m,b,g,v];for(let o of t)for(let t of S)e.push({type:t,value:e=>O(o,t,e),test:e=>e&&B(e)==o});const o=["importantTopic","minorTopic","expiredTopic"],n=[h,f,m,g,b,v,A,y];for(let t of[...new Set([...o,...n])])for(let o of S.concat(C))e.push({type:o,value:e=>L(t,o,e),test:e=>e&&B(e)==t});for(let t of n)e.push({type:p,value:e=>O(t,p,e),test:e=>e&&B(e)==t&&("none"!=a.getStyleValue(e,p,{ignoreLayeredBeforeUser:!0})||t===y)});return e})(),beforeClass:(()=>{let e=[];const t=[h,f,m,b,g,v,A,E,T];for(let o of t)for(let t of C)e.push({type:t,value:e=>M(o,t,e),test:e=>e&&B(e)==o});for(let t of w)e.push({type:t,value:e=>M(A,t,e),test:e=>e&&B(e)==A});for(let t of k)e.push({type:t,value:e=>M(E,t,e),test:e=>e&&B(e)==E});for(let t of x)e.push({type:t,value:e=>M(T,t,e),test:e=>e&&B(e)==T});return e})()};t.DARKTHEME=R;t.ZENDARKTHEMEID="zen_dark_theme"},31845:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={importantTopic:{type:"topic",properties:{"fo:font-weight":"bold","fo:color":"#FFEEF0","svg:fill":"#dc3545"}},minorTopic:{type:"topic",properties:{"fo:font-weight":"bold","fo:color":"#FFF9ED","svg:fill":"#F8C453"}},expiredTopic:{type:"topic",properties:{"fo:font-style":"italic","fo:text-decoration":"line-through"}},centralTopic:{properties:{"border-line-color":"#999A9B","line-color":"#999A9B","fo:color":"#999A9B","svg:fill":"#2B2D2E"},styleId:"6fd88cbb1c41e60a2dcbab55d5",type:"topic"},floatingTopic:{properties:{"border-line-color":"#BF4F42","line-color":"#999A9B","svg:fill":"#442324","fo:color":"#BF4F42"},styleId:"6fd88cbd20a1e46cb1cbab55d5",type:"topic"},subTopic:{properties:{"fo:color":"#999A9B","border-line-color":"#999A9B","line-color":"#999A9B","svg:fill":"#1D1F21"},styleId:"337cdcb67563ac37de32e87d4f",type:"topic"},mainTopic:{properties:{"fo:color":"#999A9B","line-color":"#999A9B","border-line-color":"#999A9B","svg:fill":"#2B2D2E"},styleId:"ee5e513de0abb542adf54aceff",type:"topic"},calloutTopic:{properties:{"fo:color":"#1D1F21","svg:fill":"#999A9B","line-color":"#999A9B"},styleId:"54ab5d5b58d9138b92d2289cf8",type:"topic"},summary:{properties:{"line-color":"#BF4F42"},styleId:"7f0999789387b3521dd9c94049",type:"summary"},summaryTopic:{properties:{"fo:color":"#BF4F42","border-line-color":"#BF4F42","line-color":"#999A9B","svg:fill":"#442324"},styleId:"5a28b5f05a20aa9afbec18924d",type:"topic"},boundary:{properties:{"line-color":"#3A7692","svg:fill":"#1D1F21","fo:color":"#FFFFFF"},styleId:"6a984ff75f648edbc9736a29c8",type:"boundary"},relationship:{properties:{"line-color":"#BF4F42","fo:color":"#BF4F42"},styleId:"3beafd12dbcfc8084b998b03ce",type:"relationship"},map:{properties:{"svg:fill":"#1D1F21"},styleId:"eaeba27d8840395e210c7b7802",type:"map"}}},46429:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(o(61027)).default.constant.ACTION_NAMES;var r={[i.ADD_NEW_SHEET]:"default",[i.REMOVE_SHEET]:"default",[i.CHANGE_SHEET_TITLE]:"default",[i.SET_MINI_MAP_DISPLAY]:"default",[i.SET_EXT_COL_ICON_DISPLAY]:"default",[i.UNDO]:"snowbrush.canUndo",[i.REDO]:"snowbrush.canRedo",[i.ADD_SUB_TOPIC]:"selection.allTopics&!selection.hasCallout",[i.ADD_TOPIC_AFTER]:"selection.allTopics&!selection.hasSummary&!selection.hasCallout",[i.ADD_TOPIC_BEFORE]:"selection.allTopics&!selection.hasCentralTopic&!selection.hasActivatedTopBranch&!selection.hasSummary&!selection.hasCallout",[i.ADD_PARENT_TOPIC]:"selection.hasTopic&!selection.allFloatingTopic&!selection.allSummaries&!selection.allCallout&!selection.onlyCentralTopic&!selection.onlyActivatedTopBranch",[i.ADD_CALLOUT_TOPIC]:"selection.hasTopic&!(selection.single&selection.hasCentralTopic)&!selection.hasCallout&!selection.hasTreeTableCell",[i.ADD_FLOATING_TOPIC]:"default",[i.PRE_ADD_FLOATING_TOPIC]:"default",[i.ADD_SUMMARY]:"selection.allTopics&!selection.hasFloatingTopic&!selection.hasCentralTopic&!selection.hasSummary&!selection.hasBoundary&!selection.hasTreeTableCell&!selection.hasFinebone",[i.ADD_BOUNDARY]:"selection.hasTopic&!(selection.single&selection.hasCentralTopic)&!selection.allFloatingTopic&!selection.hasFinebone",[i.ADD_RELATIONSHIP]:"((selection.hasTopic&(selection.single|selection.couple))|!selection.hasTopic)&!selection.hasRelationship&!selection.hasImage",[i.ADD_IMAGE]:"selection.allTopics|selection.hasImage",[i.CHANGE_MARKER]:"selection.allTopics",[i.CHANGE_NOTE]:"selection.allTopics",[i.CHANGE_HYPER_LINK]:"selection.allTopics",[i.CHANGE_LABEL]:"selection.allTopics",[i.CHANGE_TITLE]:"selection.single&(selection.hasTopic|selection.hasBoundary|selection.hasRelationship)",[i.DUPLICATE_TOPIC]:"selection.allTopics&!selection.hasCentralTopic&!selection.hasSummary&!selection.hasCallout",[i.COPY_STYLE]:"selection.single",[i.PASTE_STYLE]:"snowbrush.canPasteStyle",[i.ZOOM]:"default",[i.SELECT]:"default",[i.SELECT_TOPIC_BY_ID]:"default",[i.CHANGE_THEME]:"default",[i.CHANGE_TOPIC_OVERLAP]:"default",[i.CHANGE_TOPIC_POSITIONING]:"default",[i.CHANGE_FLOATING_TOPIC_FLEXIBLE]:"default",[i.CHANGE_LEGEND_DISPLAY]:"default",[i.CHANGE_MULTI_LINE_COLORS]:"default",[i.CHANGE_CJK_FONT_FAMILY]:"default",[i.UPDATE_CLASS_INTO_THEME]:"default",[i.RESIZE_EDITOR]:"default",[i.SELECT_ALL]:"default",[i.FIT_MAP]:"default",[i.FOCUS_INPUT]:"default",[i.ADD_CLASS]:"default",[i.REMOVE_CLASS]:"default",[i.REMOVE_CLASS_FROM_THEME]:"default",[i.SELECTION_NAVIGATE]:"selection.hasTopic&focus.mindMap",[i.EXCHANGE_SIBLING_TOPIC]:"selection.single&selection.hasTopic",[i.SHOW_EDIT_BOX]:"selection.single&(selection.hasTopic|selection.hasBoundary|selection.hasRelationship)",[i.HIDE_EDIT_BOX]:"default",[i.CHANGE_TOPIC_CUSTOM_WIDTH]:"selection.single&selection.hasTopic",[i.CHANGE_COMMENTS_INFO]:"selection.allTopics",[i.REMOVE_TASK_INFO]:"selection.allTopics",[i.COPY]:"selection.some",[i.PASTE]:"selection.hasTopic|selection.none",[i.CUT]:"selection.some",[i.DELETE_ITEM]:"!selection.onlyCentralTopic",[i.DELETE_SINGLE_TOPIC]:"selection.single&selection.hasTopic&!selection.onlyCentralTopic&!selection.hasFloatingTopic&!selection.hasSummary&!selection.hasCallout",[i.ALIGN]:"selection.multiple&selection.allTopics&selection.hasFloatingTopic",[i.DIVIDE]:"selection.greaterThanCouple&selection.allFloatingTopic",[i.EXTEND_BRANCHES]:"selection.allTopics&!selection.hasCallout",[i.FOCUS_CENTER]:"selection.single&selection.hasTopic",[i.INSERT_AUDIO_NOTES_ON_NEW_TOPIC]:"selection.single&selection.hasTopic&!selection.hasCallout",[i.INSERT_AUDIO_NOTES]:"selection.single&selection.hasTopic&!selection.hasCallout",[i.INSERT_HREF_ON_NEW_TOPIC]:"selection.single&selection.hasTopic&!selection.hasCallout",[i.REMOVE_AUDIO_NOTES]:"selection.hasTopic",[i.RESET_IMAGE]:"selection.allImages",[i.RESET_POSITION]:"selection.allTopics&!selection.hasFloatingTopic",[i.SHOW_BRANCH_ONLY]:"selection.single&selection.hasTopic",[i.SET_STYLE_OBJECT]:"default",[i.SET_SUMMARY_STYLE_OBJECT]:"default",[i.CHANGE_FONT_SIZE]:"default",[i.CHANGE_BRANCH_LINE_STYLE]:"default",[i.CHANGE_FONT_FAMILY]:"default",[i.CHANGE_TEXT_COLOR]:"default",[i.CHANGE_LINE_COLOR]:"default",[i.CHANGE_SHAPE_COLOR]:"default",[i.CHANGE_BORDER_COLOR]:"default",[i.CHANGE_LINE_WIDTH]:"default",[i.CHANGE_LINE_PATTERN]:"default",[i.CHANGE_BORDER_WIDTH]:"default",[i.CHANGE_FONT_WEIGHT]:"default",[i.CHANGE_FONT_STYLE]:"default",[i.CHANGE_TEXT_DECORATION]:"default",[i.CHANGE_SHAPE_CLASS]:"default",[i.CHANGE_START_ARROW_TYPE]:"default",[i.CHANGE_END_ARROW_TYPE]:"default",[i.CHANGE_SHEET_BACKGROUND]:"default",[i.CHANGE_INFO_ITEM_DISPLAY]:"default",[i.CHANGE_LINE_TAPERED]:"default",[i.CHANGE_COLOR_GRADIENT]:"default",[i.CHANGE_TEXT_ALIGN]:"default",[i.CHANGE_MULTI_LINE_COLORS]:"default",[i.CHANGE_TEXT_TRANSFORM]:"default",[i.CHANGE_SUMMARY_LINE_WIDTH]:"default",[i.CHANGE_SUMMARY_LINE_COLOR]:"default",[i.CHANGE_SUMMARY_LINE_STYLE]:"default",[i.CHANGE_BOUNDARY_LINE_PATTERN]:"default",[i.CHANGE_STRUCTURE]:"default",[i.FILTER_BRANCH]:"default",[i.CHANGE_COMPACT_LAYOUT_MODE_LEVEL]:"default",[i.TOGGLE_ALIGNMENT_BY_LEVEL_MODE]:"default",[i.CHANGE_FILL_STYLE]:"default"};t.default=r},43528:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(61027)),r=n(o(46429));const{REMOVE_SHEET:a,ADD_NEW_SHEET:s,SET_STYLE_OBJECT:l,SET_SUMMARY_STYLE_OBJECT:c,RESET_POSITION:d,ADD_TOPIC_AFTER:u,ADD_TOPIC_BEFORE:p,ADD_SUB_TOPIC:h,ADD_PARENT_TOPIC:f,PRE_ADD_FLOATING_TOPIC:m,ADD_RELATIONSHIP:g,ADD_BOUNDARY:v,ADD_SUMMARY:b,CHANGE_MARKER:A,ADD_CALLOUT_TOPIC:E,ADD_IMAGE:T,CHANGE_NOTE:y,CHANGE_HYPER_LINK:C,CHANGE_LABEL:S,CHANGE_FONT_SIZE:k,CHANGE_STRUCTURE:w,CHANGE_BRANCH_LINE_STYLE:x,CHANGE_FONT_FAMILY:I,CHANGE_TEXT_COLOR:_,CHANGE_LINE_COLOR:B,CHANGE_SHAPE_COLOR:O,CHANGE_BORDER_COLOR:M,CHANGE_LINE_WIDTH:L,CHANGE_LINE_PATTERN:R,CHANGE_BORDER_WIDTH:N,CHANGE_FONT_WEIGHT:D,CHANGE_FONT_STYLE:P,CHANGE_TEXT_DECORATION:F,CHANGE_SHAPE_CLASS:W,CHANGE_START_ARROW_TYPE:$,CHANGE_END_ARROW_TYPE:U,CHANGE_SHEET_BACKGROUND:j,CHANGE_INFO_ITEM_DISPLAY:H,CHANGE_LINE_TAPERED:Y,CHANGE_COLOR_GRADIENT:V,CHANGE_TEXT_ALIGN:z,ZOOM:Z,SELECT:G,SELECT_TOPIC_BY_ID:q,CHANGE_TITLE:X,CHANGE_SHEET_TITLE:K,SET_MINI_MAP_DISPLAY:J,FIT_MAP:Q,CHANGE_TOPIC_OVERLAP:ee,CHANGE_TOPIC_POSITIONING:te,CHANGE_FLOATING_TOPIC_FLEXIBLE:oe,CHANGE_LEGEND_DISPLAY:ne,CHANGE_MULTI_LINE_COLORS:ie,CHANGE_TEXT_TRANSFORM:re,CHANGE_SUMMARY_LINE_WIDTH:ae,CHANGE_SUMMARY_LINE_COLOR:se,CHANGE_SUMMARY_LINE_STYLE:le,CHANGE_BOUNDARY_LINE_PATTERN:ce,SELECT_ALL:de,SELECTION_NAVIGATE:ue,EXCHANGE_SIBLING_TOPIC:pe,CHANGE_CJK_FONT_FAMILY:he,RESET_IMAGE:fe,ALIGN:me,DIVIDE:ge,UPDATE_CLASS_INTO_THEME:ve,REMOVE_CLASS_FROM_THEME:be,ADD_CLASS:Ae,REMOVE_CLASS:Ee,SHOW_EDIT_BOX:Te,REMOVE_AUDIO_NOTES:ye,CHANGE_TOPIC_CUSTOM_WIDTH:Ce,CHANGE_COMMENTS_INFO:Se,REMOVE_TASK_INFO:ke,COPY:we,COPY_STYLE:xe,PASTE_STYLE:Ie,PASTE:_e,DUPLICATE_TOPIC:Be,DELETE_ITEM:Oe,DELETE_SINGLE_TOPIC:Me,REDO:Le,UNDO:Re,CUT:Ne,CHANGE_THEME:De,HIDE_EDIT_BOX:Pe,FILTER_BRANCH:Fe,CHANGE_COMPACT_LAYOUT_MODE_LEVEL:We,TOGGLE_ALIGNMENT_BY_LEVEL_MODE:$e,CHANGE_FILL_STYLE:Ue}=i.default.constant.ACTION_NAMES,je={"editor.removeSheet":{actionId:a},"editor.addNewSheet":{actionId:s},"editor.setStyleObject":{actionId:l},"editor.setSummaryStyleObject":{actionId:c},"editor.addTopic":{actionId:u,args:{prue:!0}},"editor.addTopicBefore":{actionId:p},"editor.addSubTopic":{actionId:h,args:{prue:!0}},"editor.addParentTopic":{actionId:f},"editor.preAddFloatingTopic":{actionId:m},"editor.addRelationship":{actionId:g},"editor.addBoundary":{actionId:v},"editor.addSummary":{actionId:b},"editor.addMarker":{actionId:A},"editor.addCallout":{actionId:E},"editor.addImage":{actionId:T},"editor.changeNotes":{actionId:y},"editor.changeHyperlink":{actionId:C},"editor.changeLabel":{actionId:S},"editor.changeFontSize":{actionId:k},"editor.changeStructure":{actionId:w},"editor.changeBranchLineStyle":{actionId:x},"editor.changeFontFamily":{actionId:I},"editor.changeTextColor":{actionId:_},"editor.changeLineColor":{actionId:B},"editor.changeShapeColor":{actionId:O},"editor.changeBorderColor":{actionId:M},"editor.changeLineWidth":{actionId:L},"editor.changeLinePattern":{actionId:R},"editor.changeBorderWidth":{actionId:N},"editor.changeFontWeight":{actionId:D},"editor.changeFontStyle":{actionId:P},"editor.changeTextDecoration":{actionId:F},"editor.changeShapeClass":{actionId:W},"editor.changeStartArrowType":{actionId:$},"editor.changeEndArrowType":{actionId:U},"editor.changeSheetBackground":{actionId:j},"editor.changeInfoItemDisplay":{actionId:H},"editor.changeLineTapered":{actionId:Y},"editor.changeColorGradient":{actionId:V},"editor.changeTextAlign":{actionId:z},"editor.copyStyle":{actionId:xe},"editor.pasteStyle":{actionId:Ie},"editor.zoom":{actionId:Z},"editor.select":{actionId:G},"editor.selectTopicById":{actionId:q},"editor.changeTitle":{actionId:X},"editor.changeSheetTitle":{actionId:K},"editor.setMiniMapDisplay":{actionId:J},"editor.fitMap":{actionId:Q},"editor.changeTopicOverlap":{actionId:ee},"editor.changeTopicPositioning":{actionId:te},"editor.changeFloatingTopicFlexible":{actionId:oe},"editor.changeLegendDisplay":{actionId:ne},"editor.changeMultiLineColors":{actionId:ie},"editor.changeTextTransform":{actionId:re},"editor.changeSummaryLineWidth":{actionId:ae},"editor.changeSummaryLineColor":{actionId:se},"editor.changeSummaryLineStyle":{actionId:le},"editor.changeBoundaryLinePattern":{actionId:ce},selectAll:{actionId:de},"editor.selectionNavigateUp":{actionId:ue,args:{direction:"up"}},"editor.selectionNavigateDown":{actionId:ue,args:{direction:"down"}},"editor.selectionNavigateLeft":{actionId:ue,args:{direction:"left"}},"editor.selectionNavigateRight":{actionId:ue,args:{direction:"right"}},"editor.selectionNavigateUpWithShift":{actionId:ue,args:{direction:"up",addNext:!0}},"editor.selectionNavigateDownWithShift":{actionId:ue,args:{direction:"down",addNext:!0}},"editor.selectionNavigateLeftWithShift":{actionId:ue,args:{direction:"left",addNext:!0}},"editor.selectionNavigateRightWithShift":{actionId:ue,args:{direction:"right",addNext:!0}},"editor.exchangeSiblingTopicUp":{actionId:pe,args:{direction:"up"}},"editor.exchangeSiblingTopicDown":{actionId:pe,args:{direction:"down"}},"editor.exchangeSiblingTopicLeft":{actionId:pe,args:{direction:"left"}},"editor.exchangeSiblingTopicRight":{actionId:pe,args:{direction:"right"}},"editor.moveTopicToTop":{actionId:pe,args:{direction:"up",toEdge:!0}},"editor.moveTopicToBottom":{actionId:pe,args:{direction:"down",toEdge:!0}},"editor.addMarkerOne":{actionId:A,args:{markerId:"priority-1"}},"editor.addMarkerTwo":{actionId:A,args:{markerId:"priority-2"}},"editor.addMarkerThree":{actionId:A,args:{markerId:"priority-3"}},"editor.addMarkerFour":{actionId:A,args:{markerId:"priority-4"}},"editor.addMarkerFive":{actionId:A,args:{markerId:"priority-5"}},"editor.addMarkerSix":{actionId:A,args:{markerId:"priority-6"}},"editor.addMarkerSeven":{actionId:A,args:{markerId:"priority-7"}},"editor.changeCJKFontFamily":{actionId:he},"editor.resetImage":{actionId:fe},"editor.align":{actionId:me},"editor.divide":{actionId:ge},"editor.updateClassIntoTheme":{actionId:ve},"editor.removeClassFromTheme":{actionId:be},"editor.addClass":{actionId:Ae},"editor.removeClass":{actionId:Ee},"editor.showEditBox":{actionId:Te},"editor.removeAudioNotes":{actionId:ye},"editor.changeTopicCustomWidth":{actionId:Ce},"editor.changeCommentsInfo":{actionId:Se},"editor.removeTaskInfo":{actionId:ke},"editor.resetPosition":{actionId:d},"editor.changeTheme":{actionId:De},"editor.hideEditBox":{actionId:Pe,deactivatedWhenDisabled:!0},"editor.filterBranch":{actionId:Fe},"editor.changeCompactLayoutModeLevel":{actionId:We},"editor.toggleAlignmentByLevel":{actionId:$e},"editor.changeFillStyle":{actionId:Ue},copy:{actionId:we},paste:{actionId:_e},duplicate:{actionId:Be},delete:{actionId:Oe},deleteSingleTopic:{actionId:Me},redo:{actionId:Le},undo:{actionId:Re},cut:{actionId:Ne}};Object.keys(je).forEach((e=>{const t=je[e],o=r.default[t.actionId];t.expr=o}));var He=je;t.default=He},17971:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(59713)),r=n(o(61027)),a=o(90336);function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){let o=0,n=0,i=0,a=0,s=0,l=0,c=0,d=0,u=0,p=0;e.forEach((e=>{const h=e.id,f=e.type;if(f===r.default.constant.VIEW_TYPE.BRANCH){let e=t.getSVGView().model2View[h];if(!e)return;let r=t.getSheetView().getActivatedTopBranchView();o++,e.isCentralBranch()?s++:e.isDetachedBranch()?a++:e.isCalloutBranch()?i++:e.isSummaryBranch()&&n++,e===r&&c++}else f===r.default.constant.VIEW_TYPE.BOUNDARY?d++:f===r.default.constant.VIEW_TYPE.RELATIONSHIP?u++:f===r.default.constant.VIEW_TYPE.IMAGE?p++:f===r.default.constant.VIEW_TYPE.MATH_JAX&&l++}));const h=t.isActionExecutable.apply(t,[r.default.constant.ACTION_NAMES.PASTE_STYLE]);return{"selection.none":0===o&&0===d&&0===u&&0===p&&0===l,"selection.single":o+d+u+p+l===1,"selection.couple":o+d+u+p+l===2,"selection.greaterThanCouple":o+d+u+p+l>2,"selection.multiple":o+d+u+p+l>1,"selection.some":o+d+u+p+l>=1,"selection.hasTopic":o>0,"selection.hasCentralTopic":s>0,"selection.hasActivatedTopBranch":c>0,"selection.hasBoundary":d>0,"selection.hasRelationship":u>0,"selection.hasSummary":n>0,"selection.hasCallout":i>0,"selection.hasFloatingTopic":a>0,"selection.hasImage":p>0,"selection.hasEquation":l>0,"selection.onlyCentralTopic":o===s&&0===l&&0===d&&0===u&&0===p,"selection.onlyActivatedTopBranch":o===c&&0===d&&0===u&&0===p,"selection.allTopics":o>0&&0===l&&0===d&&0===u&&0===p,"selection.allBoundaries":0===o&&0===l&&d>0&&0===u&&0===p,"selection.allRelationships":0===o&&0===l&&0===d&&u>0&&0===p,"selection.allSummaries":o===n&&0===l&&0===d&&0===u&&0===p,"selection.allCallout":o===i&&0===l&&0===d&&0===u&&0===p,"selection.allFloatingTopic":o===a&&0===l&&0===d&&0===u&&0===p,"selection.allImages":0===o&&0===l&&0===d&&0===u&&p>0,"selection.allEquations":0===o&&l>0&&0===d&&0===u&&0===p,"snowbrush.canPasteStyle":h}}function d(e){return{"snowbrush.inEditTitleMode":e.includes(r.default.constant.UI_STATUS.EDIT_TITLE),"snowbrush.inBranchOnly":e.includes(r.default.constant.UI_STATUS.SHOW_BRANCH_ONLY),"snowbrush.inDraggingMode":e.includes(r.default.constant.UI_STATUS.DRAG)}}function u(e,t){let o=0,n=0;return e.forEach((e=>{const i=e.id;if(e.type===r.default.constant.VIEW_TYPE.BRANCH){let e=t.getSVGView().model2View[i];if(!e)return;r.default.utils.utils.isTreeTableCell(e)&&o++,(r.default.utils.utils.isFishBoneHead(e)||r.default.utils.utils.isFishBoneMainBone(e))&&n++}})),{"selection.hasTreeTableCell":o>0,"selection.hasFinebone":n>0}}t.default=(e,t)=>{e.on(r.default.constant.EVENTS.SE_UI_STATUS_CHANGED,(o=>{let n=e.getCurrentSheetEditor();const i=c(o.selections,n),r=d(o.semaphores),s=u(o.selections,n),p=l(l(l({},i),r),s);o.sync?(t.dispatch(`${a.SHARED}/updateContexts`,p),t.commit(`${a.SHARED}/updateContextsSync`,p)):t.dispatch(`${a.SHARED}/updateContexts`,p)})),e.on(r.default.constant.EVENTS.SHEET_SWITCHED,(()=>{let o=e.getCurrentSheetEditor(),n=o.getModule(r.default.constant.MODULE_NAME.UI_STATUS);if(n){const e=n.getStatus(),i=c(e.selections,o),r=d(e.semaphores),s=u(e.selections,o),p=l(l(l({},i),r),s);t.dispatch(`${a.SHARED}/updateContexts`,p)}})),e.on(r.default.constant.EVENTS.UNDO_STATE_CHANGE,(e=>{const o={"snowbrush.canUndo":e.canUndo,"snowbrush.canRedo":e.canRedo};t.dispatch(`${a.SHARED}/updateContexts`,o)})),e.on(r.default.constant.EVENTS.AFTER_SHEET_CONTENT_CHANGE,(o=>{if("structureClass"!==o.attr)return;let n=e.getCurrentSheetEditor(),i=n.getModule(r.default.constant.MODULE_NAME.UI_STATUS);if(i){const e=i.getStatus(),o=c(e.selections,n),r=d(e.semaphores),s=u(e.selections,n),p=l(l(l({},o),r),s);t.dispatch(`${a.SHARED}/updateContexts`,p)}}))}},96659:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={namespaced:!0,state:()=>({lastFocusedElementTag:"initial",focusMissing:{}}),getters:{isFocusMissing:e=>null===e.lastFocusedElementTag},mutations:{updateLastFocusedElementTag(e,t){e.lastFocusedElementTag=t}}};t.default=o},71554:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(78835)),r=n(o(71191)),a=n(o(85622)),s=o(40051),l={protocol:"file-cache",async open(){const{state:e}=this,t=function(e){const t="file-cache://";if(e&&e.startsWith(t)){const t=i.default.parse(e),o=r.default.parse(t.query);return{filePath:o.source,fileName:o.originalName}}throw new Error("Document source error")}(e.source),o=t.fileName;return await(0,s.openXMind)(t.filePath,e,{suggestTitle:a.default.basename(o,".xmind")})}};t.default=l},23950:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(59713)),r=n(o(78835)),a=n(o(85622)),s=n(o(71191)),l=n(o(66085)),c=o(99492),d=n(o(2286)),u=o(1893),p=n(o(24678)),h=o(95287),f=o(83450),m=o(6921),g=o(40051);function v(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function b(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var A={protocol:"file",async open(){const{state:e}=this,t=(0,u.urlToFilePath)(e.source);return await(0,g.openXMind)(t,e)},async handleOpenError(e){const{state:t,store:o,$T:n,logger:i}=this;if("ENOENT"===e.code)return await(0,h.showMessageBox)({type:"warning",title:"XMind",message:n("The file doesn't exist."),buttons:[n("OK")],defaultId:0,cancelId:0,noLink:!0}),{recovered:!1,prompted:!0};const l=o.getters["fileCache/fileCacheItem"]((0,u.urlToFilePath)(t.source));if(l){let[e]=await(0,h.showMessageBox)({type:"info",message:n("Failed to Open"),detail:n("Your XMind file is corrupted, or you lack the necessary permissions to open it. You can try to open the previous version of this file."),buttons:[n("Open"),n("Cancel")],defaultId:0,cancelId:1});if(0===e){i.debug("Start restore snapshot!",l);const e=l.fileCacheId,t=l.filename;let o=l.firstSnapshotId;if(l.snapshots.length>0){o=l.snapshots.pop().id}(0,f.trackEvent)({eventCategory:"FileCache",eventAction:"messageBoxRestoreSnapshot"});const n=a.default.join((0,m.getFileCachePath)(),e,o+".xmind");return p.default.fetch(c.EDITOR_OPEN,{source:r.default.format({protocol:"file-cache",slashes:!0,search:s.default.stringify({originalName:t,source:n})})}),{recovered:!0,prompted:!0}}return{recovered:!1,prompted:!0}}return{recovered:!1,prompted:!1}},async heartbeatTest(){const{store:e,state:t,dispatch:o,commit:n,$T:i,logger:r}=this;let a=(0,u.urlToFilePath)(t.source);try{return await d.default.access(a,d.default.constants.R_OK),{shouldClose:!1}}catch(s){if(r.info("Opened XMind File is removed, now try to close file",a,s.toString()),t.isDirty){const n=await(0,h.showMessageBox)({type:"warning",title:"XMind",message:i("This mind map has been deleted from disk. You can delete it now or save as a new XMind file."),buttons:[i("Save As"),i("Delete")],defaultId:0,cancelId:0,noLink:!0});if(Array.isArray(n)&&n.length>0&&0===n[0]){let n=await(0,h.showSaveDialog)({suggestPath:{store:e,doc:t},filters:[{name:i("XMind Workbook"),extensions:["xmind"]}]});if(n)return await o("saveAs",{newSource:(0,u.filePathToUrl)(n)}),{shouldClose:!1}}}return n("changeDirty",!1),{shouldClose:!0}}},async loadXap(e){const{state:t}=this,o=t.manifestWrapper.value;let n=r.default.parse(e),i=n.hostname+n.pathname;return new Promise(((n,r)=>{o["file-entries"][i]?n("file://"+a.default.join(t.tempStorage,i)):r(e)}))},async collectXapResources(){const{dispatch:e,state:t}=this;let o={},n=[];const i=t.workbookWrapper.value;for(let e of i.sheets)n.push(e.toJSON());let r=await e("collectXapResourceUrls",n);for(let e of r){let n=e.substring("xap:".length),i=await d.default.readFile(a.default.join(t.tempStorage,n));o[n]=i}return o},async getSaveAsHandlers(){const{state:e}=this;return{name:"My Computer",type:"local",async prompt(t,o={}){let n=await(0,h.showSaveDialog)({suggestPath:b({doc:e,oldDoc:t},o),filters:[{name:o.$T("XMind Workbook"),extensions:["xmind"]}]});return n?(0,u.filePathToUrl)(n):null}}},canSave(){const{state:e,logger:t}=this,o=(0,u.urlToFilePath)(e.source);if(d.default.existsSync(o))try{d.default.accessSync(o,d.default.constants.R_OK|d.default.constants.W_OK)}catch(e){return t.warn("File can not be saved: ",o,e),!1}return!0},getRepresentedFilePath(){const{state:e}=this;return(0,u.urlToFilePath)(e.source)},async save(){const{state:e,logger:t,dispatch:o,commit:n,rootState:i}=this,r=(0,u.urlToFilePath)(e.source),s=e.workbookWrapper.value;s.set("title",a.default.basename(r,".xmind")),n("setTitle",s.get("title")),await(0,g.saveXMind)({wd:b(b({},e),{},{activeSheetId:i.editor.sbEditorWrapper.value.currentSheetId}),filePath:r,logger:t}),async function(e){if(!d.default.existsSync(e))throw new Error("ensureFileFine: File not exist after saved file!");const t=await d.default.readFile(e),o=await l.default.loadAsync(t);if(!o||!o.files)throw new Error("ensureFileFine: zip content is empty.")}(r).then((()=>{n("changeResaving",!1),p.default.fetch(c.FILE_CACHE_CREATE,{srcPath:r,docId:s.id})})).catch((()=>{e.resaving?(n("changeResaving",!1),t.error("This file can not be saved, please save as another file.")):(n("changeResaving",!0),o("save"))}))}};t.default=A},66833:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(78835)),r=n(o(85622)),a=o(36414),s=o(99492),l=n(o(24678)),c=o(40051),d={protocol:"http",async open(){const{state:e,logger:t}=this,o=function(e){const t=r.default.parse(e);return".xmind"===t.ext?t.base:Math.random().toString(36).slice(2)+".xmind"}(i.default.parse(e.source).pathname);let n;try{n=await l.default.fetch(s.XOS.FILE_DOWNLOAD,{downloadUrl:e.source,filename:o,cacheId:o}),this.logger.debug("Temp File:",n)}catch(e){return t.error("Download file failure:",(0,a.normalizeError)(e)),Promise.reject(new Error("Download file failure, please retry."))}return await(0,c.openXMind)(n,e)}};t.default=d},12301:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(78835)),r=n(o(85622)),a=o(36414),s=o(99492),l=n(o(24678)),c=o(40051),d={protocol:"https",async open(){const{state:e,logger:t}=this,o=function(e){const t=r.default.parse(e);return".xmind"===t.ext?t.base:Math.random().toString(36).slice(2)+".xmind"}(i.default.parse(e.source).pathname);let n;try{n=await l.default.fetch(s.XOS.FILE_DOWNLOAD,{downloadUrl:e.source,filename:o,cacheId:o}),this.logger.debug("Temp File:",n)}catch(e){return t.error("Download file failure:",(0,a.normalizeError)(e)),Promise.reject(new Error("Download file failure, please retry."))}return await(0,c.openXMind)(n,e)}};t.default=d},2219:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(85622)),r=n(o(78835)),a=n(o(2286)),s=o(36414),l=o(40359),c={protocol:"import",open(){const{state:e,commit:t}=this,n=r.default.parse(e.source).hostname,a=o(70746).Z;return Promise.resolve(e.source).then(d).then((e=>Promise.all([Promise.resolve(e),a[n](e)]))).then((async([n,r])=>{n.endsWith("quick-entry/Untitled.md")&&t("changeDirty",!0);const a={sheets:r.sheets.map((e=>({id:e.id,title:e.title}))),title:i.default.basename(n,i.default.extname(n)),id:(0,s.UUID)()},c=new(o(61027).default.Model.Workbook)(a);return r.sheets.forEach((e=>{e=(0,l.injectTheme)(e),c.addSheet(e.id,e)})),e.manifestWrapper.value=r.manifest,c})).catch((e=>{throw window.close(),e}))},async collectXapResources(){const{state:e,dispatch:t}=this;let o={},n=[];const r=e.workbookWrapper.value;for(let e of r.sheets)n.push(e.toJSON());let s=await t("collectXapResourceUrls",n);for(let t of s){let n=t.substring("xap:".length),r=await a.default.readFileAsync(i.default.join(e.tempStorage,n));o[n]=r}return o}};function d(e){let t=r.default.parse(e,!0).query,o=t?t.source:"";if(!o)throw new Error(`Invalid file path URL: "${e}"`);return"win32"===process.platform&&o.startsWith("/")&&(o=o.substring(1)),o}t.default=c},55233:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(78835)),r=n(o(85622)),a=n(o(71191)),s=n(o(2286)),l=n(o(66085)),c=o(58933),d=o(36414),u=o(40359);const p=r.default.join(c.remote.app.getAppPath(),"static/templates");var h={protocol:"new",async open(){const{state:e,$T:t}=this,n=e.source,h=i.default.parse(n),m=a.default.parse(h.query),g=m.title,v=m.theme,b=m.template,A=m.structure,E=m.skeleton,T=m.colortheme,y=await(0,u.getSheetTemplate)({colorTheme:T,skeleton:E,template:b,structure:A,$T:t}),C=o(61027).default;if(y){let e=JSON.parse(JSON.stringify(y));const o={id:(0,d.UUID)(),title:f({$T:t}),sheets:[{id:e.id,title:t("$$",e.title)||t("Sheet 1")}]},n=new C.Model.Workbook(o);return n.addSheet(e.id,e),n}{let t=r.default.join(p,v);if(s.default.existsSync(t)||(t=r.default.join(c.remote.app.getPath("userData"),"vana","library",v)),!s.default.existsSync(t))throw new Error(`No such template "${v}".`);try{const n=await s.default.readFile(t),i=await l.default.loadAsync(n),{fromXMind:r}=o(61027).default.formatconverter,a=await r(i),c={sheets:a.sheets.map((e=>({id:e.id,title:e.title}))),id:(0,d.UUID)(),title:g},u=new C.Model.Workbook(c);return a.sheets.forEach((e=>{u.addSheet(e.id,e)})),e.manifestWrapper.value=a.manifest,u}catch(e){throw new Error(e)}}}};function f({$T:e}){const t=e("Untitled"),o=c.remote.BrowserWindow.getAllWindows();let n=new Set;for(let e of o)n.add(e.getTitle());let i=Array.from(n).filter((e=>e==t||e.includes(t)&&2==e.split(" ").length&&Number.isInteger(Number(e.split(" ")[1])))),r=0;for(let e of i)r=e==t?Math.max(r,1):Math.max(r,Number(e.split(" ")[1]));return 0==r?t:`${t} ${r+1}`}t.default=h},17539:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=u(t);if(o&&o.has(e))return o.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=i?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=e[r]}n.default=e,o&&o.set(e,n);return n}(o(38893)),r=n(o(23950)),a=n(o(55233)),s=n(o(71554)),l=n(o(66833)),c=n(o(12301)),d=n(o(2219));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(u=function(e){return e?o:t})(e)}(0,i.use)(r.default),(0,i.use)(a.default),(0,i.use)(s.default),(0,i.use)(l.default),(0,i.use)(c.default),(0,i.use)(d.default);var p=i.default;t.default=p},40051:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.openXMind=async function(e,t,{suggestTitle:n}={}){const a=o(61027).default,{fromXMind:u,isFileEncrypted:p}=a.formatconverter,h=await s.default.read(e),f=await r.default.loadAsync(h),m=n||i.default.basename(e,".xmind"),g=t.materialWrapper.value;let v;const b=await p(f);if(b){const e=b.passwordHint;e&&(t.materialWrapper.value=g||{},t.materialWrapper.value.passwordHint=e);let o=0;const n=async()=>{const{result:e}=await d.default.fetch(c.WINDOW_OPEN,{name:"dialog-enterpassword",parentId:window.id,wait:!0,query:{errEncryptCount:o,hint:t.materialWrapper.value&&t.materialWrapper.value.passwordHint||"",filename:m}}),n=e.password;if(null===n)throw new Error("Cancel Open");t.materialWrapper.value=t.materialWrapper.value||{},t.materialWrapper.value.password=n},i=async()=>{const e={password:t.materialWrapper.value&&t.materialWrapper.value.password,workbookTitle:m},r=async()=>{try{await n()}catch(e){return!1}return await i()};if(!e.password)return await r();try{v=await u(f,e)}catch(e){return o++,await r()}return!0};if(!await i())return void window.close()}else v=await u(f);const A={sheets:v.sheets.map((e=>({id:e.id,title:e.title}))),title:m,id:(0,l.UUID)()},E=new a.Model.Workbook(A);return v.sheets.forEach((e=>{E.addSheet(e.id,e)})),t.manifestWrapper.value=v.manifest,t.isOldVersionWrapper.value=v.isOldVersion,E},t.saveXMind=async function({wd:e,filePath:t,logger:n,sheetIndex:l,ignoreThumbnail:c}={}){const d=new r.default,m=e.materialWrapper.value,g=e.workbookWrapper.value,v=e.manifestWrapper.value;let b={};b.metadata={creator:{name:"Vana",version:[(0,p.default)("version"),(0,p.default)("buildNumber")].join(".")},activeSheetId:e.activeSheetId},b.sheets=[];let A=g.toJSON();if(Number.isInteger(l)){let e=g.getSheetByIndex(l).toJSON();for(let t of A.sheets)if(e.id===t.id){e.title=t.title;break}b.sheets.push(e)}else for(let e=0;e<A.sheetOrder.length;e++){let t=g.getSheetByIndex(e).toJSON();t.id=A.sheetOrder[e];for(let e of A.sheets)if(t.id==e.id){t.title=e.title;break}b.sheets.push(t)}b.manifest=v?(0,a.cloneDeep)(v):{"file-entries":{"metadata.json":{},"manifest.json":{},"content.json":{}}};const E=[];m&&m.password?E.push((0,u.load)("static/images/xmindfile_lock.png").then((e=>{b.manifest["file-entries"]["Thumbnails/thumbnail.png"]={skipEncrypt:!0},b.manifest.resources["Thumbnails/thumbnail.png"]=e}))):c||E.push(f(e,l).then((e=>{e&&(b.manifest["file-entries"]["Thumbnails/thumbnail.png"]={},b.manifest.resources["Thumbnails/thumbnail.png"]=e)})).catch((e=>{n.warn("error on export image",e)})));let T=await h(b.sheets);for(let t of T){let o=t.substring("xap:".length);E.push(s.default.read(i.default.join(e.tempStorage,o)).then((e=>{b.manifest.resources[o]=e,b.manifest["file-entries"][o]={}})))}await Promise.all(E);const y={password:m&&m.password,passwordHint:m&&m.passwordHint,zip:d},C=o(61027).default,{toXMind:S}=C.formatconverter;await S(b,y);const k=await d.generateAsync({type:"nodebuffer",compression:"STORE"});await s.default.write(t,k)},t.collectXapResourceUrls=h,t.generateThumbnail=f;var i=n(o(85622)),r=n(o(66085)),a=o(96486),s=n(o(86554)),l=o(36414),c=o(99492),d=n(o(24678)),u=o(53305),p=n(o(60226));async function h(e){let t=[];return function e(o){if((0,l.isArray)(o))for(let t of o)e(t);else if((0,l.isObject)(o))for(let t in o){e(o[t])}else"string"==typeof o&&(o.startsWith("xap:resources")||o.startsWith("xap:attachments"))&&t.push(o)}(e),t}async function f(e,t){const o=e.thumbnailGeneratorWrapper.value;if(o&&o.generateThumbnail)return o.generateThumbnail(t)}},38893:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.use=function(e){y[e.protocol]=e},t.default=void 0;var i=n(o(59713)),r=n(o(85622)),a=n(o(78835)),s=o(36414),l=o(1893),c=n(o(2286)),d=n(o(66085)),u=o(99492),p=n(o(24678)),h=o(6921),f=n(o(41698)),m=o(90336),g=n(o(60226)),v=o(40051),b=n(o(61027));function A(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?A(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):A(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const T=(0,f.default)("workbook:document"),y={};var C={namespaced:!0,state:{inited:!1,opened:!1,closed:!1,saving:!1,resaving:!1,openEvent:null,saveEvent:null,saveAsEvent:null,saveSheetEvent:null,closeEvent:null,isDirty:!1,title:null,source:null,manifestWrapper:(0,s.wrapper)({"file-entries":{"metadata.json":{},"manifest.json":{},"content.json":{}},resources:{}}),mementoWrapper:(0,s.wrapper)(null),materialWrapper:(0,s.wrapper)(null),workbookWrapper:(0,s.wrapper)(null),passwordHelperWrapper:(0,s.wrapper)(null),thumbnailGeneratorWrapper:(0,s.wrapper)(null),isOldVersionWrapper:(0,s.wrapper)(!1),editorId:null,tempStorage:null},getters:{canSave:(e,t)=>t._delegate&&t._delegate.canSave&&t._delegate.canSave.call({state:e,getters:t,logger:T}),saved:e=>!e.isDirty,_delegate:e=>{let t=a.default.parse(e.source).protocol;return t?(t.endsWith(":")&&(t=t.substr(0,t.length-1)),y[t]):null},getRepresentedFilePath:(e,t)=>t._delegate&&"function"==typeof t._delegate.getRepresentedFilePath?t._delegate.getRepresentedFilePath.call({getters:t,state:e,logger:T}):null},mutations:{init(e,t){if(e.source=t.source,e.editorId=t.editorId||(0,s.UUID)(),e.tempStorage=r.default.join((0,h.getWorkbooksPath)(),e.editorId),t.editorId)try{const t=r.default.join(e.tempStorage,".memento.json");e.mementoWrapper.value=JSON.parse(c.default.readFileSync(t))}catch(e){}e.inited=!0},_openEvent(e,{event:t,workbook:o}){o&&(e.workbookWrapper=(0,s.wrapper)(o)),"opened"===t&&(e.opened=!0),e.openEvent=t},_saveEvent(e,{event:t}){"presave"===t&&(e.saving=!0),"saved"===t&&(e.saving=!1),e.saveEvent=t},_saveAsEvent(e,{event:t}){"presaveas"===t&&(e.saving=!0),"postsaveas"===t&&(e.saving=!1),e.saveAsEvent=t},_saveSheetEvent(e,{event:t}){"presavesheet"===t&&(e.saving=!0),"postsavesheet"===t&&(e.saving=!1),e.saveSheetEvent=t},_closeEvent(e,{event:t}){"closed"===t&&(e.closed=!0),e.closeEvent=t},_changeSource(e,t){e.source=function(e){const t=e.indexOf("?");return t>-1?e.slice(0,t):e}(t)},changeDirty(e,t){e.isDirty=t},setTitle(e,t){e.title=t},changeSaving(e,t){e.saving=t},changeResaving(e,t){e.resaving=t}},actions:{setDirty({commit:e,rootState:t},o){const n=t.editor.sbEditorWrapper.value;o?(e("changeDirty",!0),n.execAction(b.default.constant.ACTION_NAMES.WORKBOOK_MODIFIED)):(e("changeDirty",!1),n.execAction(b.default.constant.ACTION_NAMES.WORKBOOK_SAVED))},checkOpen:async({state:e})=>e.inited,async open({state:e,commit:t,dispatch:o,getters:n,rootGetters:i,rootState:r},a){if(!await o("checkOpen"))throw new Error(`Cannot open workbook from "${e.source}"`);t("_openEvent","preopen");const s=e.mementoWrapper?e.mementoWrapper.value:null;if(s&&s.shouldOpenFromTempStorage){const e=await o("_openFromTempStorage");if(!e)return;return t("setTitle",e.get("title")),t("_openEvent",{event:"opened",workbook:e}),t("_openEvent",{event:"postopen"}),e}const l=await n._delegate.open.call({state:e,commit:t,dispatch:o,getters:n,rootState:r,rootGetters:i,logger:T,$T:i["l10n/T"]},a);if(l)return t("setTitle",l.get("title")),t("_openEvent",{event:"opened",workbook:l}),await o("saveTemp",{workbook:l}),t("_openEvent",{event:"postopen"}),l},async handleOpenError({state:e,getters:t,commit:o,dispatch:n,rootState:i,rootGetters:r},a){return t._delegate&&"function"==typeof t._delegate.handleOpenError?t._delegate.handleOpenError.call({state:e,commit:o,dispatch:n,getters:t,rootState:i,rootGetters:r,logger:T,$T:r["l10n/T"],store:this},a.error):{recovered:!1,prompted:!1}},async _openFromTempStorage({commit:e,state:t}){const n=t.tempStorage;if(!c.default.existsSync(n)||!c.default.existsSync(r.default.join(n,"manifest.json")))return void window.close();const i=o(61027).default,{decryptContent:a}=i.formatconverter;let l=JSON.parse(c.default.readFileSync(r.default.join(n,"manifest.json")));const d=l["file-entries"]["content.json"]&&l["file-entries"]["content.json"]["encryption-data"],u=l["file-entries"]["metadata.json"]&&l["file-entries"]["metadata.json"]["encryption-data"];let p=null,h=null,f=0;for(;!p||!h;){const e=t.materialWrapper.value;if(e&&!e.password&&(d||u)){if(!t.passwordHelperWrapper.value)throw new Error("The workbook is encrypted.");const e=await t.passwordHelperWrapper.value.askForPassword(f);if(null===e)return void window.close();t.materialWrapper.value.password=e}let o=await c.default.readFile(r.default.join(n,"content.json"),d?"base64":"utf8");if(d)try{o=a(o,t.materialWrapper.value.password,d)}catch(e){T.error((0,s.normalizeError)(e)),f++,t.materialWrapper.value={};continue}p=JSON.parse(o);let i=await c.default.readFile(r.default.join(n,"metadata.json"),u?"base64":"utf8");if(u)try{i=a(i,t.materialWrapper.value.password,u)}catch(e){T.error((0,s.normalizeError)(e)),f++,t.materialWrapper.value={};continue}h=JSON.parse(i)}let m=p.map((e=>({id:e.id,title:e.title})));const g=t.mementoWrapper.value,v={sheets:m,title:g.title,id:g.workbookId},b=new i.Model.Workbook(v);return p.forEach((e=>{b.addSheet(e.id,e)})),t.manifestWrapper.value=l,e("_changeSource",g.source),b},async saveTemp({state:e}){const t=o(61027).default,{encryptContent:n}=t.formatconverter,i=e.tempStorage;c.default.ensureDirSync(i);let a=[];const s=e.manifestWrapper.value,l=e.materialWrapper.value,d=e.workbookWrapper.value;if(s.resources){c.default.ensureDirSync(r.default.join(i,"resources"));for(let e in s.resources)if(s["file-entries"][e]){let t=s.resources[e];s["file-entries"][e]={};const o=r.default.join(i,e);c.default.ensureDirSync(r.default.dirname(o)),a.push(c.default.writeFile(o,t).catch((e=>{T.warn("something wrong in save resource to temp directory",e)})))}}s.resources={};let u=[],p=d.toJSON();for(let e=0;e<p.sheetOrder.length;e++){let t=d.getSheetByIndex(e).toJSON();t.id=p.sheetOrder[e];for(let e of p.sheets)if(t.id==e.id){t.title=e.title;break}u.push(t)}s["file-entries"]["content.json"]={};let h=JSON.stringify(u);if(l&&l.password){let e=n(h,l.password);s["file-entries"]["content.json"]["encryption-data"]=e.encryptData,h=e.encryptedContent}a.push(c.default.writeFile(r.default.join(i,"content.json"),h)),s["file-entries"]["metadata.json"]={};let f=JSON.stringify(d.metadata||{});if(l&&l.password){let e=n(f,l.password);s["file-entries"]["metadata.json"]["encryption-data"]=e.encryptData,f=e.encryptedContent}a.push(c.default.writeFile(r.default.join(i,"metadata.json"),f)),a.push(c.default.writeFile(r.default.join(i,"manifest.json"),JSON.stringify(s))),await Promise.all(a)},async save({state:e,commit:t,dispatch:o,getters:n,rootState:i,rootGetters:r},a){if(n.saved)t("_saveEvent",{event:"saved"});else{if(!n.canSave)throw new Error(`Cannot save workbook to "${e.source}"`);t("_saveEvent",{event:"presave"}),await n._delegate.save.call({state:e,commit:t,dispatch:o,getters:n,rootState:i,rootGetters:r,logger:T},a),t("changeDirty",!1),t("_saveEvent",{event:"saved"}),t("_saveEvent",{event:"postsave"})}},async saveAs({state:e,commit:t,dispatch:o,getters:n,rootState:i,rootGetters:r},a){if(t("_changeSource",a.newSource),!n.canSave)throw new Error(`Cannot save workbook to "${e.source}"`);p.default.fetch(u.EDITOR_CHANGE_SOURCE,{editorId:window.editorId,source:e.source}),t("_saveAsEvent",{event:"presaveas"}),n._delegate.save&&await n._delegate.save.call({state:e,commit:t,dispatch:o,getters:n,rootState:i,rootGetters:r,logger:T},a),t("changeDirty",!1),t("_saveAsEvent",{event:"postsaveas"})},async saveSheetAs({commit:e,state:t,rootState:o},{sheetIndex:n,newSource:i}){e("_saveSheetEvent",{event:"presavesheet"});const r=(0,l.urlToFilePath)(i);await(0,v.saveXMind)({wd:E(E({},t),{},{activeSheetId:o.editor.sbEditorWrapper.value.currentSheetId}),filePath:r,logger:T,sheetIndex:n}),e("_saveSheetEvent",{event:"postsavesheet"})},async close({state:e,commit:t,dispatch:o,getters:n,rootState:i,rootGetters:r},a){t("_closeEvent",{event:"preclose"}),t("changeDirty",!1),n._delegate.close&&await n._delegate.close.call({state:e,commit:t,dispatch:o,getters:n,rootState:i,rootGetters:r,logger:T},a),await o("_clearTempStorage"),t("_closeEvent",{event:"closed"}),t("_closeEvent",{event:"postclose"})},async getSaveAsHandlers({state:e,getters:t,commit:o,dispatch:n,rootState:i,rootGetters:r},a){let s=[];for(let l in y){if(a&&a.ignores&&a.ignores.indexOf(l)>-1)continue;const c=y[l];if("function"==typeof c.getSaveAsHandlers){const a=await c.getSaveAsHandlers.call({getters:t,state:e,commit:o,dispatch:n,rootState:i,rootGetters:r,logger:T,$T:r["l10n/T"]});a&&Array.isArray(a)&&a.length>0?s=s.concat(a):a&&"function"==typeof a.prompt&&s.push(a)}}return s},async _clearTempStorage({state:e}){const t=e.tempStorage;T.debug("Start clearing temp storage: ",t);const o=function(e){if(c.default.statSync(e).isDirectory()){for(let t of c.default.readdirSync(e))o(r.default.join(e,t));c.default.rmdirSync(e)}else c.default.removeSync(e)};try{o(t)}catch(e){T.warn(`Something wrong when clearing temp storage: ${t}`,e)}T.debug("Temp storage still exists: ",c.default.existsSync(t))},async saveAsLocalFile({dispatch:e,state:t,rootState:n},{filePath:i,toEncrypt:r,inject:a,sheetIndexes:s}){let l=t.workbookWrapper.value,u=new d.default;const p=o(61027).default,{toXMind:h}=p.formatconverter;let f={metadata:{creator:{name:"Vana",version:[(0,g.default)("version"),(0,g.default)("buildNumber")].join(".")},activeSheetId:n.editor.sbEditorWrapper.value.currentSheetId},sheets:[]},m=l.toJSON();const b=e=>{let t=l.getSheetByIndex(e).toJSON();t.id=m.sheetOrder[e];for(let e of m.sheets)if(t.id==e.id){t.title=e.title;break}return t};if(s)s.forEach((e=>{const t=b(e);f.sheets.push(t)}));else for(let e=0;e<m.sheetOrder.length;e++){let t=b(e);f.sheets.push(t)}f.manifest=t.manifestWrapper.value||{"file-entries":{"metadata.json":{},"manifest.json":{},"content.json":{}}};let A=await(0,v.generateThumbnail)(t,0);A&&(f.manifest.resources["Thumbnails/thumbnail.png"]=A,f.manifest["file-entries"]["Thumbnails/thumbnail.png"]={});let E=await e("collectXapResources");for(let e in E)f.manifest["file-entries"][e]={},f.manifest.resources[e]=E[e];const T=t.materialWrapper.value;let y={password:r?T&&T.password:null,passwordHint:r?T&&T.passwordHint:null,zip:u};a&&await a(f),await h(f,y);let C=await u.generateAsync({type:"nodebuffer",compression:"DEFLATE"});await c.default.writeFile(i,C)},async loadXap({getters:e,commit:t,dispatch:o,state:n,rootState:i,rootGetters:s},l){if("function"==typeof e._delegate.loadXap)return e._delegate.loadXap.call({getters:e,state:n,commit:t,dispatch:o,rootState:i,rootGetters:s,logger:T},l);let c=a.default.parse(l),d=c.hostname+c.pathname;const u=n.manifestWrapper.value;return new Promise(((e,t)=>{u["file-entries"][d]?e("file://"+r.default.join(n.tempStorage,d)):t(l)}))},generateXap:async({getters:e,commit:t,dispatch:o,state:n,rootState:i,rootGetters:r},{extType:a,xapType:s,data:l,isBase64:d}={})=>(d&&(l=l.replace(/^data:image\/([a-zA-Z]*);base64,/,""),l=Buffer.from(l,"base64")),"function"==typeof e._delegate.generateXap?e._delegate.generateXap.call({getters:e,state:n,commit:t,dispatch:o,rootState:i,rootGetters:r,logger:T},n,a,l):"x-sticker"===s?c.default.readFile(l).then((e=>o("_doGenerateXap",{data:e,extType:a}))):o("_doGenerateXap",{data:new Uint8Array(l),extType:a})),async _doGenerateXap({getters:e,commit:t,dispatch:o,state:n,rootState:i,rootGetters:a},l){const d=l.data,u=l.extType;return new Promise((l=>{let p="resources/"+(0,s.HASH)(d)+"."+u,h="xap:"+p;n.manifestWrapper.value["file-entries"][p]={},e._delegate&&e._delegate.saveXapResource?e._delegate.saveXapResource.call({getters:e,state:n,commit:t,dispatch:o,rootState:i,rootGetters:a,logger:T},h,d).then((()=>l(h))):c.default.writeFile(r.default.join(n.tempStorage,p),d).then((()=>{l(h)}))}))},async collectXapResources({getters:e,dispatch:t,commit:o,state:n,rootState:i,rootGetters:a}){if("function"==typeof e._delegate.collectXapResources)return e._delegate.collectXapResources.call({getters:e,state:n,commit:o,dispatch:t,rootState:i,rootGetters:a,logger:T});let s={},l=[];const d=n.workbookWrapper.value;for(let e of d.sheets)l.push(e.toJSON());let u=await t("collectXapResourceUrls",l);for(let e of u){let t=e.substring("xap:".length),o=await c.default.readFile(r.default.join(n.tempStorage,t));s[t]=o}return s},collectXapResourceUrls:async(e,t)=>(0,v.collectXapResourceUrls)(t),heartbeatTest:async({getters:e,commit:t,dispatch:o,state:n,rootState:i,rootGetters:r},a)=>e._delegate&&"function"==typeof e._delegate.heartbeatTest?e._delegate.heartbeatTest.call({getters:e,commit:t,dispatch:o,state:n,rootState:i,rootGetters:r,$T:r["l10n/T"],logger:T},a):{shouldClose:!1},async updateMemento({state:e,rootGetters:t},{forceUpdate:o}){const n=e.tempStorage,i=r.default.join(n,".memento.json");if((o||c.default.existsSync(i))&&e.workbookWrapper.value)try{const o={docId:e.editorId,source:e.source,title:e.title,dirty:!!e.isDirty,workbookId:e.workbookWrapper.value.id,shouldOpenFromTempStorage:!0,frameId:t[`${m.EDITOR_OWNERSHIP}/editorToFrame`][e.editorId]};T.debug("Save Memento: ",o),c.default.writeFileSync(i,JSON.stringify(o))}catch(e){T.error("Error when saving memento.json.",(0,s.normalizeError)(e))}},async autoCache({state:e,rootGetters:t,rootState:o}){const n=e.workbookWrapper.value,i=n.id,a=t["fileCache/fileCacheItemById"](i)||e.source.startsWith("file:")&&t["fileCache/fileCacheItem"]((0,l.urlToFilePath)(e.source)),d=a?a.fileCacheId:i,f=(0,s.UUID)(),m=r.default.join((0,h.getFileCachePath)(),d,f+".xmind");c.default.ensureDirSync(r.default.dirname(m)),T.debug(`Auto cache: (source is ${m}), (workbookId is ${n.id})`);try{await(0,v.saveXMind)({wd:E(E({},e),{},{activeSheetId:o.editor.sbEditorWrapper.value.currentSheetId}),filePath:m,logger:T,ignoreThumbnail:!0}),await p.default.fetch(u.FILE_CACHE_CREATE,{saveType:"cache",filename:e.title,snapshotId:f,fileCacheId:d})}catch(e){T.error((0,s.normalizeError)(e))}}}};t.default=C},81946:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(90336),r=o(48932),a=o(36414),s=n(o(27921)),l=n(o(53125)),c=n(o(4296)),d=n(o(71502)),u=n(o(99808)),p=n(o(75099)),h=n(o(42965));t.default=(e,t)=>{e.watch((()=>{const o=`editor/${window.editorId}`,n=`editor/${window.editorId}/outliner`,a=`editor/${window.editorId}/mindmap`,f=`editor/${window.editorId}/mindmap/snowbrush`,m=`editor/${window.editorId}/mindmap/beginnerMode`,g=`editor/${window.editorId}/mindmap/editTitleMode`,v=`editor/${window.editorId}/popover`,b=`editor/${window.editorId}/mapShot`,A={[o]:(0,s.default)(e),[n]:(0,c.default)(e),[a]:(0,l.default)(e),[f]:(0,p.default)(e),[g]:(0,d.default)(e),[m]:(0,u.default)(e),[v]:[],[b]:(0,h.default)(e)},E={};"function"==typeof t&&Object.assign(E,t(e));const T=A[o].concat(E[o]).filter((e=>!!e)),y=A[n].concat(E[n]).filter((e=>!!e)),C=A[a].concat(E[a]).filter((e=>!!e)),S=A[f].concat(E[f]).filter((e=>!!e)),k=A[g].concat(E[g]).filter((e=>!!e)),w=A[m].concat(E[m]).filter((e=>!!e)),x=A[v].concat(E[v]).filter((e=>!!e)),I=A[b].concat(E[b]).filter((e=>!!e)),_=[],B=[],O=Object.keys(E).filter((e=>!(e in A))).map((e=>E[e])).reduce(((e,t)=>[].concat(e).concat(t))).filter((e=>!!e));let M=!0,L=!0,R=!0,N=!0,D=!0,P=!0,F=!0,W=!0;const $=e.getters[`${i.SHARED}/aggregatedContexts`],U=e.state[i.SHARED].editorMode===r.EDITOR_MODE_SNOWBRUSH,j=e.state[i.SHARED].editorMode===r.EDITOR_MODE_OUTLINER,H=!!$["snowbrush.inEditTitleMode"],Y=!!$["snowbrush.inDraggingMode"],V=!!$["editor.inBeginnerMode"],z=!!$["editor.inMapShotMode"];L=L&&U,L=L&&!H,L=L&&!Y,N=N&&j,D=D&&H,P=P&&V&&!H,F=F&&!!$["focus.popover"],W=W&&z;const Z=!!$["focus.input"];L=L&&!Z,N=N&&!Z,D=D&&!Z,P=P&&!Z,F=F&&!Z,W=W&&!Z;const G=!!$["focus.popover"];L=L&&!G,N=N&&!G,D=D&&!G,P=P&&!G,W=W&&!G,R=R&&L;const q=!!$["editor.inIMEMode"];M=M&&!q,M=M&&!z;const X=e.state[i.SHARED].pitchMode;M=M&&!X;let K=[];const J=["editor.addSheet"];return M&&(K.push(...T),L&&K.push(...C),N&&K.push(...y),R&&K.push(...S),K.push(..._),K.push(...B),D&&K.push(...k),P&&K.push(...w),F&&K.push(...x),e.state[i.SHARED].sheetRendering&&(K=K.filter((e=>J.includes(e.id))))),W&&K.push(...I),K.push(...O),K}),(0,a.microDebounce)((t=>{e.commit(`${i.SHARED}/updateCommands`,t)})))}},5364:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.REMOVE_CLASS_FROM_THEME=t.DELETE_ITEM=t.CHANGE_HYPER_LINK=t.TOPICKEYS=t.FONTKEYS=t.FILL_COLOR=t.BORDER_LINE_COLOR=t.BORDER_LINE_WIDTH=t.LINE_COLOR=t.LINE_WIDTH=t.LINE_CLASS=t.SHAPE_CLASS=t.TEXT_DECORATION=t.TEXT_TRANSFORM=t.TEXT_ALIGN=t.TEXT_COLOR=t.FONT_SIZE=t.FONT_WEIGHT=t.FONT_STYLE=t.FONT_FAMILY=t.TOPIC_TYPE=t.VIEW_TYPE=t.CLASS_TYPE=void 0;var i=n(o(61027));const{CLASS_TYPE:r,VIEW_TYPE:a,TOPIC_TYPE:s}=i.default.constant;t.TOPIC_TYPE=s,t.VIEW_TYPE=a,t.CLASS_TYPE=r;const{FONT_FAMILY:l,FONT_STYLE:c,FONT_WEIGHT:d,FONT_SIZE:u,TEXT_COLOR:p,TEXT_ALIGN:h,TEXT_TRANSFORM:f,TEXT_DECORATION:m,SHAPE_CLASS:g,LINE_CLASS:v,LINE_WIDTH:b,LINE_COLOR:A,BORDER_LINE_WIDTH:E,BORDER_LINE_COLOR:T,FILL_COLOR:y}=i.default.constant.STYLE_KEYS;t.FILL_COLOR=y,t.BORDER_LINE_COLOR=T,t.BORDER_LINE_WIDTH=E,t.LINE_COLOR=A,t.LINE_WIDTH=b,t.LINE_CLASS=v,t.SHAPE_CLASS=g,t.TEXT_DECORATION=m,t.TEXT_TRANSFORM=f,t.TEXT_ALIGN=h,t.TEXT_COLOR=p,t.FONT_SIZE=u,t.FONT_WEIGHT=d,t.FONT_STYLE=c,t.FONT_FAMILY=l;const C=[l,u,c,d,m,p,h,f];t.FONTKEYS=C;const S=[g,v,b,A,E,T,y];t.TOPICKEYS=S;const{CHANGE_HYPER_LINK:k,DELETE_ITEM:w,REMOVE_CLASS_FROM_THEME:x}=i.default.constant.ACTION_NAMES;t.REMOVE_CLASS_FROM_THEME=x,t.DELETE_ITEM=w,t.CHANGE_HYPER_LINK=k},99808:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(30632);t.default=e=>{const t=`editor/${window.editorId}/mindmap/beginnerMode`,o=(0,n.evaluateSnowbrushActionFn)(e),i=(0,n.evaluateFn)(e);return[{id:"editor.addSubTopic",enabled:o("editor.addSubTopic","editor.inBeginnerMode"),provider:t},{id:"editor.addTopic",enabled:o("editor.addTopic","editor.inBeginnerMode"),provider:t},{id:"editor.showEditBox",enabled:o("editor.showEditBox","editor.inBeginnerMode"),provider:t},{id:"escape",enabled:i("editor.inBeginnerMode"),provider:t}]}},59756:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(98930);t.default=e=>({"editor.addSubTopic":function(){const t=e.getters["keybindings/keybindingByCommandId"]("editor.addSubTopic");(0,n.tutorialHandle)(e,t),e.execSnowbrushAction({commandId:"editor.addSubTopic"})},"editor.addTopic":function(){const t=e.getters["keybindings/keybindingByCommandId"]("editor.addTopic");(0,n.tutorialHandle)(e,t),e.execSnowbrushAction({commandId:"editor.addTopic"})},"editor.showEditBox":function(){const t=e.getters["keybindings/keybindingByCommandId"]("editor.showEditBox");(0,n.tutorialHandle)(e,t),e.execSnowbrushAction({commandId:"editor.showEditBox"})},escape:function(){e.commit("editor/UPDATE_BEGINNERMODE_VISIBLE",{isBeginnerModeVisible:!1})}})},71502:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(30632);t.default=e=>{const t=`editor/${window.editorId}/mindmap/editTitleMode`,o=(0,n.evaluateSnowbrushActionFn)(e);return[{id:"escape",enabled:o("editor.hideEditBox","snowbrush.inEditTitleMode"),provider:t},{id:"paste",enabled:o("paste","snowbrush.inEditTitleMode"),provider:t}]}},52982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>({escape:function(){e.execSnowbrushAction({commandId:"editor.hideEditBox"})},paste:function(){e.execSnowbrushAction({commandId:"paste",args:{toImage:!0,toMarker:!0}})}})},27921:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(90336),i=o(48932),r=o(30632);t.default=e=>{const t=`editor/${window.editorId}`,o=(0,r.evaluateFn)(e);return[{id:"workbench.outlineMode",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.mapMode",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_SNOWBRUSH,provider:t},{id:"workbench.switchToMapOrOutliner",enabled:e.state.workbench.ready,provider:t},{id:"toggleFullScreen",enabled:e.state.workbench.ready,provider:t},{id:"workbench.exitFullScreen",enabled:o("!snowbrush.inEditTitleMode",(()=>e.state.workbench.ready)),provider:t},{id:"workbench.showZenMode",enabled:e.state.editor.sbEditorCreated&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.toggleZenMode",enabled:e.state.editor.sbEditorCreated&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.toggleNavigationPanel",enabled:e.state.workbench.ready,provider:t,label:e.state.workbench.isLeftbarVisible?"Hide Navigation Panel":"Show Navigation Panel"},{id:"workbench.toggleFindAndReplace",enabled:e.state.workbench.ready,provider:t},{id:"workbench.toggleStickerPanel",enabled:e.state.workbench.ready,provider:t},{id:"workbench.toggleMarkerPanel",enabled:o("!selection.hasImage",(()=>e.state.workbench.ready)),provider:t},{id:"workbench.toggleMapPanel",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.toggleStylePanel",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.toggleRightPanel",enabled:e.state.workbench.ready,provider:t,label:e.state[`${n.SHARED}`].isRightbarVisible&&e.state[`${n.SHARED}`].rightBarPanel===i.RIGHT_BAR_PANEL_FORMAT?"Hide Format Panel":"Show Format Panel"},{id:"workbench.toggelStatusBar",enabled:e.state.workbench.ready,provider:t},{id:"workbench.toggleInfoCard",enabled:e.state.workbench.ready,provider:t},{id:"workbench.exportPng1",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.exportPng2",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.exportSvg1",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.exportSvg2",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.exportPdf",enabled:o("default",(()=>e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER)),provider:t},{id:"workbench.exportPdfMap",enabled:o("default",(()=>e.state.workbench.ready)),provider:t},{id:"workbench.exportExcel",enabled:e.state.workbench.ready,provider:t},{id:"workbench.exportPowerPoint",enabled:e.state.workbench.ready,provider:t},{id:"workbench.exportMd",enabled:e.state.workbench.ready,provider:t},{id:"workbench.exportOPML",enabled:e.state.workbench.ready,provider:t},{id:"workbench.exportTextBundle",enabled:e.state.workbench.ready,provider:t},{id:"workbench.exportWord",enabled:e.state.workbench.ready,provider:t},{id:"workbench.setpassword",enabled:e.state.workbench.ready,provider:t},{id:"print",enabled:e.state.workbench.ready,provider:t},{id:"shareXmindLink",enabled:e.state.workbench.ready,provider:t},{id:"sharePublic",enabled:e.state.workbench.ready,provider:t},{id:"sharePrivate",enabled:e.state.workbench.ready,provider:t},{id:"shareBlog",enabled:e.state.workbench.ready,provider:t},{id:"shareBiggerPlate",enabled:e.state.workbench.ready,provider:t},{id:"shareEvernote",enabled:e.state.workbench.ready,provider:t},{id:"sharePinterest",enabled:e.state.workbench.ready,provider:t},{id:"shareTwitter",enabled:e.state.workbench.ready,provider:t},{id:"shareFacebook",enabled:e.state.workbench.ready,provider:t},{id:"shareMail",enabled:e.state.workbench.ready,provider:t},{id:"editor.addSheet",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"customizeTheme",enabled:e.state.editor.sbEditorCreated&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"createTheme",enabled:e.state.editor.sbEditorCreated&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"showMapShot",enabled:e.state.editor.sbEditorCreated&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER&&!e.state[n.SHARED].mapShot&&!e.state[n.SHARED].zenMode,provider:t},{id:"mapShot",enabled:e.state.editor.sbEditorCreated&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER&&!e.state[n.SHARED].zenMode,provider:t},{id:"mergeXMindFiles",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"allThemes",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"keyAssist",enabled:!0,provider:t},{id:"workbench.showNoteNavigationPanelAndSelect",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.showLabelNavigationPanelAndSelect",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.showMarkerNavigationPanelAndSelect",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.toggleTopicNavigationPanel",enabled:e.state.workbench.ready,provider:t},{id:"workbench.toggleNoteNavigationPanel",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"workbench.toggleLabelAndMarkerNavigationPanel",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"editor.rotateImageLeft",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"randomColorTheme",enabled:e.state.workbench.ready&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t}]}},84947:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(59713)),r=n(o(85622)),a=o(58933),s=n(o(61027)),l=o(90336),c=o(48932),d=o(99492),u=o(36414),p=n(o(2286)),h=n(o(24678)),f=o(95287),m=o(73725),g=o(83450),v=o(40359),b=n(o(99636)),A=n(o(2887)),E=o(28441),T=o(74627);function y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function C(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?y(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}t.default=e=>{return{"workbench.outlineMode":t,"workbench.mapMode":n,"workbench.switchToMapOrOutliner":function(){e.state[l.SHARED].editorMode===c.EDITOR_MODE_SNOWBRUSH?t():n()},toggleFullScreen:()=>a.remote.getCurrentWindow().setFullScreen(!a.remote.getCurrentWindow().isFullScreen()),"workbench.exitFullScreen":function(){if(!a.remote.getCurrentWindow().isFullScreen())return;a.remote.getCurrentWindow().setFullScreen(!1)},"workbench.showZenMode":async function(){let t=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor();await h.default.fetch(d.EDITOR_ENTER_ZEN_MODE,{editorId:window.editorId,targetId:"zenModeContainer"}),(0,g.trackView)({actionName:"EnterZenMode"});null!==t.getSheetView().activatedTopBranchView&&t.execAction(s.default.constant.ACTION_NAMES.SHOW_BRANCH_ONLY,{switchMode:!0})},"workbench.toggleZenMode":async function(){let t=e.state[l.SHARED].zenMode;e.commit("workbench/UPDATE_LEFTBAR_STATE",{type:"topic",visible:!1,suggestSelection:{type:null,id:null}}),t?await h.default.fetch(d.EDITOR_LEAVE_ZEN_MODE,{editorId:window.editorId}):e.handleCommand("workbench.showZenMode");e.commit("rateUs/updateTempStatus",t)},"workbench.toggleNavigationPanel":()=>i(),"workbench.toggleFindAndReplace":function(){i()},"workbench.toggleStickerPanel":()=>S(c.RIGHT_BAR_PANEL_IMAGE,c.IMAGE_PANEL_TAB_STICKER),"workbench.toggleMarkerPanel":()=>S(c.RIGHT_BAR_PANEL_IMAGE,c.IMAGE_PANEL_TAB_MARKER),"workbench.toggleSlidePanel":()=>S(c.RIGHT_BAR_PANEL_FORMAT,c.FORMAT_PANEL_TAB_SLIDE),"workbench.toggleMapPanel":()=>S(c.RIGHT_BAR_PANEL_FORMAT,c.FORMAT_PANEL_TAB_MAP),"workbench.toggleStylePanel":()=>S(c.RIGHT_BAR_PANEL_FORMAT,c.FORMAT_PANEL_TAB_STYLE),"workbench.toggleRightPanel":()=>{e.commit(`${l.SHARED}/updateRightBarPanel`,{visible:!e.state[l.SHARED].isRightbarVisible})},"workbench.toggelStatusBar":function(){e.commit("workbench/TOGGLE_STATUS_BAR",{isStatusBarVisible:!e.state.workbench.isStatusBarVisible})},"workbench.toggleInfoCard":function(){e.commit("workbench/POPOVER_VISIBLE",{name:"informationcard"})},"workbench.exportPng2":w,"workbench.exportSvg2":x,"workbench.exportPng1":(...e)=>k("png",...e),"workbench.exportSvg1":(...e)=>k("svg",...e),"workbench.exportPdf":async function({targetBranch:t=null}={}){if(e.state[l.SHARED].editorMode!==c.EDITOR_MODE_SNOWBRUSH)return I({targetBranch:t});const{exportPdfDialog:n}=o(5289);n(e,{targetBranch:t}),(0,g.trackEvent)({eventCategory:"export",eventAction:"exportPdf"})},"workbench.exportPdfMap":I,"workbench.exportExcel":function(){B({type:"xlsx"});const{exportExcel:t}=o(5289);t(e),(0,g.trackEvent)({eventCategory:"export",eventAction:"exportExcel"})},"workbench.exportPowerPoint":function(){B({type:"powerpoint"});const{exportPowerPoint:t}=o(5289);t(e)},"workbench.exportMd":async function({targetBranch:t}={}){B({type:"markdown"});const{exportMarkdown:n}=o(5289);n(e,{targetBranch:t}),(0,g.trackEvent)({eventCategory:"export",eventAction:"exportMarkdown"})},"workbench.exportOPML":async function({targetBranch:t}={}){B({type:"opml"});const{exportOPML:n}=o(5289);n(e,{targetBranch:t}),(0,g.trackEvent)({eventCategory:"export",eventAction:"exportOPML"})},"workbench.exportTextBundle":async function({targetBranch:t}={}){const{exportTextBundle:n}=o(5289);n(e,{targetBranch:t}),(0,g.trackEvent)({eventCategory:"export",eventAction:"exportTextBundle"})},"workbench.exportWord":async function(){B({type:"docx"});const{exportWord:t}=o(5289);t(e),(0,g.trackEvent)({eventCategory:"export",eventAction:"exportWord"})},"workbench.setpassword":function(){const t=e.state.wd.materialWrapper.value;h.default.fetch(d.WINDOW_OPEN,{name:"dialog-setpassword",parentId:window.id,wait:!0,query:{oldPassword:t&&t.password||"",passwordHint:t&&t.passwordHint||""}}).then((({result:t={}}={})=>{const{action:o,newPassword:n,newPasswordHint:i}=t;"set"===o?(e.state.wd.materialWrapper.value={password:n,passwordHint:i},e.commit("wd/changeDirty",!0)):"remove"===o&&(e.state.wd.materialWrapper.value={},e.commit("wd/changeDirty",!0))})).catch((()=>{}))},print:async function(){const{printHandle:t}=await Promise.resolve().then(o.bind(o,2177));t(e)},shareXmindLink:()=>_("xmind share"),shareBlog:()=>_("blog"),shareBiggerPlate:()=>_("biggerplate"),shareEvernote:()=>_("evernote"),sharePinterest:()=>_("pinterest"),shareTwitter:()=>_("twitter"),shareFacebook:()=>_("facebook"),shareMail:async function(){let t=e.state.wd,n=decodeURIComponent(t.title+".xmind"),i=a.remote.app.getPath("temp"),s=r.default.join(i,n);await e.dispatch("wd/saveAsLocalFile",{filePath:s});let l=p.default.readFileSync(s);const c=o(16478).Z;let u=(new c).createChild(!1,{filename:n}).setContent(l),f=new c("multipart/form-data");f.setHeader({From:"",To:"",Subject:"","MIME-Version":"1.0","X-Unsent":1,"X-Priority":3,"X-Has-Attach":"yes","X-Mozilla-Draft-Info":"internal/draft; vcard=0; receipt=0; DSN=0; uuencode=0"}),f.appendChild(u);let m=r.default.join(i,"XMind.eml");p.default.writeFileSync(m,f.build()),a.shell.openExternal(`file://${m}`).catch((e=>{h.default.fetch(d.WINDOW_OPEN,{name:"dialog-problem",payload:{name:"OpenError",message:e.message||e,stack:e.stack,code:"OPEN_EMAIL"}})}))},createTheme:function(){const t=a.remote.BrowserWindow.getAllWindows().filter((e=>e.getTitle()===c.DIALOG_ALL_THEMES_TITLE&&e.getParentWindow()&&e.getParentWindow().id===window.id));t.length&&t[0].close();const o="CUSTOM-"+(0,u.UUID)();e.handleCommand("themeEditor",{id:o,editorId:window.editorId,parentId:window.id,openType:"create-theme"}),(0,g.trackEvent)({eventCategory:"ThemeEditor",eventAction:"createTheme"})},showMapShot:function(){(function(){e.state[l.SHARED].isRightbarVisible&&e.commit(`${l.SHARED}/updateRightBarPanel`,{visible:!1});e.state.workbench.isLeftbarVisible&&e.commit("workbench/UPDATE_LEFTBAR_STATE",{visible:!1})})(),e.commit(`${l.SHARED}/setMapShot`,{inMapShot:!0}),e.dispatch(`${l.SHARED}/updateContexts`,{"editor.inMapShotMode":!0});e.state.editor.sbEditorWrapper.value.execAction("clearSelection")},mapShot:function(){e.state[l.SHARED].mapShot?(e.commit(`${l.SHARED}/setMapShot`,{inMapShot:!1}),e.dispatch(`${l.SHARED}/updateContexts`,{"editor.inMapShotMode":!1}),(0,g.trackEvent)({eventAction:"enterMapShot"})):e.handleCommand("showMapShot")},mergeXMindFiles:async function(){(0,g.trackEvent)({eventCategory:"Tools",eventAction:"clickMergeXMindFiles"});const{result:t}=await h.default.fetch(d.WINDOW_OPEN,{name:"dialog-merging-options",parentId:window.id,wait:!0});if(null===t)return;const{canceled:o,filePaths:n}=await a.remote.dialog.showOpenDialog({properties:["openFile","multiSelections"],filters:[{name:e.getters["l10n/T"]("XMind Workbook"),extensions:["xmind"]}]});if(o)return;await(0,A.default)(e,n,t)},"editor.addSheet":async function(t){const o=e.state.editor.sbEditorWrapper.value;if(!o)return;const n=e.getters["l10n/T"];if(!t||!t.sheetId){const e=o.getCurrentSheetEditor().model.theme()||null,i=e&&e.getColorThemeId(),r=e&&e.getSkeletonThemeId(),a=await(0,v.getSheetTemplate)({colorTheme:i,skeleton:r,$T:(...e)=>n(...e)});if(!a)return;const s=JSON.parse(JSON.stringify(a)),l=b.default.cloneSheet(s);i||r||(l.theme=e?e.toJSON():{});let c=o.model.sheets.length+1,d=n("Map $1",c);l.title=d,t={sheetId:l.id,sheetData:l,options:{title:d}}}(0,g.trackEvent)({eventCategory:"Command",eventAction:"addSheet"});const i=["addNewSheet",t];o.execAction.apply(o,i)},customizeTheme:()=>O({type:"customizeTheme"}),allThemes:()=>O({type:"allThemes"}),keyAssist:function(){h.default.fetch(d.WINDOW_OPEN,{name:"dialog-keyassist",query:{editorMode:e.state[l.SHARED].editorMode}})},"workbench.showNoteNavigationPanelAndSelect":e=>y(c.LEFT_BAR_PANEL_SUGGEST_SELECTION_NOTE,e),"workbench.showLabelNavigationPanelAndSelect":e=>y(c.LEFT_BAR_PANEL_SUGGEST_SELECTION_LABEL,e),"workbench.showMarkerNavigationPanelAndSelect":e=>y(c.LEFT_BAR_PANEL_SUGGEST_SELECTION_MARKER,e),"workbench.toggleTopicNavigationPanel":()=>i(c.LEFT_BAR_PANEL_TAB_TOPIC),"workbench.toggleNoteNavigationPanel":()=>i(c.LEFT_BAR_PANEL_TAB_NOTE),"workbench.toggleLabelAndMarkerNavigationPanel":()=>i(c.LEFT_BAR_PANEL_TAB_TAG),"editor.rotateImageLeft":()=>async function({isClockwise:t}){const o=e.state.editor.sbEditorWrapper.value,n=o.getSelections()[0];if(!n)return;let i,a;const{size:l,imageUrl:c}=n.figure,d=n.image.src,h=e.state.wd.manifestWrapper.value,f=()=>{o.execAction(s.default.constant.ACTION_NAMES.CHANGE_IMAGE,{imageData:{src:i,width:l.height,height:l.width},flipAndRotateRecord:{type:"rotate",value:t?90:-90}})};if(".svg"===r.default.extname(c)){const t=await(0,E.rotateSVG)(r.default.join(e.state.wd.tempStorage,c.replace("xap:","")));return a=`resources/${(0,u.HASH)(t)}.svg`,i="xap:"+a,h["file-entries"][a]={},void p.default.writeFile(r.default.join(e.state.wd.tempStorage,a),t).then((()=>{f()}))}a=`resources/${(0,u.HASH)(d)}-${t?"rotate-right":"rotate-left"}.png`,i="xap:"+a,h["file-entries"][a]={};const m=r.default.join(e.state.wd.tempStorage,a);if(p.default.existsSync(m))p.default.readFile(m,{encoding:"base64"}).then((()=>{f()}));else{const e=(0,E.rotateBase64Image90deg)(n.image.src,t).replace(/^data:image\/png;base64,/,"");p.default.writeFile(m,e,"base64").then((()=>{f()}))}}({rotate:!0,isClockwise:!1}),randomColorTheme:()=>function(){const t=(0,T.getRandomColorTheme)();e.commit("theme/changeLastRandomColorTheme",t.id),e.commit("theme/appendRecentlyUsedColorTheme",t.id),e.execSnowbrushAction({commandId:"editor.changeTheme",args:{colorThemeData:t,options:{toFixUserStyle:!0}}})}()};async function t(){e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().hibernate(!0),e.commit(`${l.SHARED}/updateSheetRenderingInMode`,{sheetRenderingInMode:c.EDITOR_MODE_OUTLINER}),e.commit(`${l.SHARED}/updateSheetRendering`,{sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),e.handleCommand("editor.filterBranch",{idList:[]}),await(0,u.sleep)(100),e.commit(`${l.SHARED}/setEditorMode`,{mode:c.EDITOR_MODE_OUTLINER})}function n(){e.commit(`${l.SHARED}/updateSheetRenderingInMode`,{sheetRenderingInMode:c.EDITOR_MODE_SNOWBRUSH}),e.commit(`${l.SHARED}/setEditorMode`,{mode:c.EDITOR_MODE_SNOWBRUSH});const t=e.state.editor.sbEditorWrapper.value;Object.values(t.sheetEditors).forEach((e=>{e.hibernate(!1)}))}function i(t=c.LEFT_BAR_PANEL_TAB_TOPIC,o=null,n=!1){const{leftBarPanelTab:i,isLeftbarVisible:r}=e.state.workbench,a={visible:!(!r||i===t)||!r,tab:t,suggestSelection:o};n&&(a.visible=!0),e.commit("workbench/UPDATE_LEFTBAR_STATE",a)}function y(e,t){switch(e){case c.LEFT_BAR_PANEL_SUGGEST_SELECTION_NOTE:i(c.LEFT_BAR_PANEL_TAB_NOTE,{type:c.LEFT_BAR_PANEL_SUGGEST_SELECTION_NOTE,id:(0,c.CREATE_LEFT_BAR_PANEL_NOTE_VIEW_ID)(t.modelId)},!0);break;case c.LEFT_BAR_PANEL_SUGGEST_SELECTION_LABEL:i(c.LEFT_BAR_PANEL_TAB_TAG,{type:c.LEFT_BAR_PANEL_SUGGEST_SELECTION_LABEL,id:(0,c.CREATE_LEFT_BAR_PANEL_TAG_VIEW_LABEL_ID)(t.labelText)},!0);break;case c.LEFT_BAR_PANEL_SUGGEST_SELECTION_MARKER:i(c.LEFT_BAR_PANEL_TAB_TAG,{type:c.LEFT_BAR_PANEL_SUGGEST_SELECTION_MARKER,id:(0,c.CREATE_LEFT_BAR_PANEL_TAG_VIEW_MARKER_ID)(t.markerId)},!0)}}function S(t,o){const n=e.state[l.SHARED].isRightbarVisible&&e.state[l.SHARED].rightBarPanel===t&&e.state[l.SHARED].rightPanelTab===o;e.commit(`${l.SHARED}/updateRightBarPanel`,{visible:!n,panel:t,tab:o})}async function k(t="png",{targetBranch:o=null}={}){const n=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().getContentBound(),{result:i}=await h.default.fetch(d.WINDOW_OPEN,{name:"dialog-export-to-image",parentId:window.id,wait:!0,query:{type:t,bound:[n.width,n.height],editorId:window.editorId}});i&&("svg"===i.type?x(C({targetBranch:o},i)):w(C({targetBranch:o},i)))}async function w({targetBranch:t,scale:n=1,transparent:i=!1,contentScope:s=0}={}){const{doExportPng:l,exportWorkbookPng:c}=o(5289);if(1===s){const o=e.state.editor.sbEditorWrapper.value;if(!o)return;o.initAllSheetEditor();const s=e.getters["l10n/T"],l=(0,f.suggestSavePath)({store:e}),{canceled:d,filePaths:u}=await a.remote.dialog.showOpenDialog(a.remote.getCurrentWindow(),{buttonLabel:s("Save"),properties:["openDirectory","createDirectory"],defaultPath:l,securityScopedBookmarks:!0});if(d||!u||!u.length)return;const h=r.default.join(u[0],e.state.wd.title);p.default.existsSync(h)||p.default.ensureDir(h),B({type:"png"}),c(e,h,{targetBranch:t,scale:n,transparent:i})}else B({type:"png"}),l(e,{targetBranch:t,scale:n,transparent:i});(0,g.trackEvent)({eventCategory:"export",eventAction:"exportPng",eventName:1===s?"Whole":"Current"})}function x({targetBranch:t,scale:n,transparent:i,contentScope:r}={}){const{exportSvg:a}=o(5289);a(e,{targetBranch:t,scale:n,transparent:i,contentScope:r}),(0,g.trackEvent)({eventCategory:"export",eventAction:"exportSvg"})}async function I({targetBranch:t}={}){B({type:"pdf"});const{exportPdfmap:n}=o(5289);n(e,{targetBranch:t}),(0,g.trackEvent)({eventCategory:"export",eventAction:"exportPdfMap"})}async function _(t){if(await async function(t){if(!["evernote","biggerplate","email"].includes(t)){let{user:t}=e.state.account;if(!Boolean(t)){let t;const o=new Promise((o=>{t=e.watch((e=>e.account.user),(e=>{t(),o(e)}))}));if(!await h.default.fetch(d.WINDOW_OPEN,{name:"dialog-signin",wait:!0}).then((({result:e})=>e&&e.success?o:(t(),!1))))return!1}}return e.getters["app/usableShareItems"].includes(t)}(t)){(0,o(81284).Z)(e,t)}}async function B({type:t}){e.commit(`${l.SHARED}/setExporting`,{exporting:!0}),h.default.fetch(d.WINDOW_OPEN,{name:"dialog-progress",parentId:window.id,wait:!0,query:{type:t,editorId:window.editorId}})}function O(t){"customizeTheme"===t.type&&(0,g.trackEvent)({eventCategory:"ThemeEditor",eventAction:"clickCustomizeTheme"});const o=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().getSheetView().centralBranchView.model.getStructureClass();h.default.fetch(d.WINDOW_OPEN,{name:"dialog-all-themes",parentId:window.id,query:{themeTab:"customizeTheme"===t.type?"custom":"built-in",editorId:window.editorId,parentId:window.id,centralTopicStructureClass:m.STRUCTURECLASS2PREVIEWCLASSMAP[o]||"map-unbalance",previewClassList:Object.values(m.STRUCTURECLASS2PREVIEWCLASSMAP)}})}}},42965:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(90336),i=o(48932);t.default=e=>{const t=`editor/${window.editorId}/mapShot`;return[{id:"showMapShot",enabled:e.state.editor.sbEditorCreated&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER&&!e.state[n.SHARED].mapShot,provider:t},{id:"mapShot",enabled:e.state.editor.sbEditorCreated&&e.state[n.SHARED].editorMode!==i.EDITOR_MODE_OUTLINER,provider:t},{id:"editor.toggleMiniMap",label:e.state.editor.minimapEnable?"Hide Map Overview":"Show Map Overview",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.zoomIn",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.zoomOut",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.resetZoom",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.fitMap",enabled:e.state.editor.sbEditorCreated,provider:t}]}},11088:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(84947)),r=n(o(55616)),a=n(o(8045));t.default=e=>{const t=(0,i.default)(e),o=(0,r.default)(e),n=(0,a.default)(e);return{showMapShot:t.showMapShot,mapShot:t.mapShot,"editor.toggleMiniMap":o["editor.toggleMiniMap"],"editor.zoomIn":o["editor.zoomIn"],"editor.zoomOut":o["editor.zoomOut"],"editor.resetZoom":o["editor.resetZoom"],"editor.fitMap":n["editor.fitMap"]}}},53125:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(90336),i=o(30632);t.default=e=>{const t=`editor/${window.editorId}/mindmap`,o=(0,i.evaluateFn)(e),r=e.state.editor.isBranchOnlyMode?"Show Full Content":"Show Branch Only",a=o(e.state.editor.isBranchOnlyMode?"default":"selection.single&selection.hasTopic&!selections.hasCallout&!selection.hasCentralTopic&!selection.hasSummary"),s=[{id:"editor.newSheetFromTopic",enabled:o("selection.single&selection.hasTopic"),provider:t},{id:"editor.toggleBranch",enabled:o("selection.hasTopic"),provider:t,label:e.state.editor.hasExtend?"Fold Subtopic":"Unfold Subtopic"},{id:"editor.toggleAllBranch",enabled:o("selection.hasTopic"),provider:t,label:e.state.editor.hasExtend?"Fold All Sub-branches":"Unfold All Sub-branches"},{id:"editor.resetStyle",enabled:o("default",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.toggleMarkerPopoverInZenMode",enabled:e.state[n.SHARED].zenMode,provider:t},{id:"editor.previousSheet",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.nextSheet",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.toggleTopicCountLabel",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.toggleStylePopoverInZenMode",enabled:e.state[n.SHARED].zenMode,provider:t},{id:"editor.showTopiclinkEditor",enabled:o("selection.single&selection.hasTopic",(()=>e.state.editor.sbEditorCreated&&e.state.editor.isAllowInsertHyperLink)),provider:t},{id:"editor.showHyperlinkEditor",enabled:o("selection.single&selection.hasTopic",(()=>e.state.editor.sbEditorCreated&&e.state.editor.isAllowInsertHyperLink)),provider:t},{id:"editor.showEquationEditor",enabled:o("(selection.hasEquation&selection.single)|(selection.hasTopic&selection.single)",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.resizeEquation",enabled:o("(selection.hasEquation&selection.single)|selection.hasTopic",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.addFileLink",enabled:o("selection.single&selection.hasTopic",(()=>e.state.editor.sbEditorCreated&&e.state.editor.isAllowInsertHyperLink&&!0)),provider:t},{id:"editor.addFolderLink",enabled:o("selection.single&selection.hasTopic",(()=>e.state.editor.sbEditorCreated&&e.state.editor.isAllowInsertHyperLink&&!0)),provider:t},{id:"editor.showNotesEditor",enabled:o("selection.single&selection.hasTopic",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.showLabelEditor",enabled:o("selection.allTopics",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.showMarkerPopup",enabled:o("selection.single&selection.hasTopic",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.toggleBeginnerMode",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.toggleBeginnerModeTips",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.zoomIn",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.zoomOut",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.resetZoom",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.cutMarker",enabled:o("selection.single&selection.hasTopic"),provider:t},{id:"editor.copyMarker",enabled:o("selection.single&selection.hasTopic"),provider:t},{id:"editor.deleteMarker",enabled:o("selection.single&selection.hasTopic"),provider:t},{id:"editor.removeMarker",enabled:o("selection.hasTopic"),provider:t},{id:"editor.addAudioOnNewTopic",enabled:o("selection.single&selection.hasTopic&!selection.hasCallout",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.addAttachment",enabled:o("selection.single&selection.hasTopic",(()=>e.state.editor.sbEditorCreated&&e.state.editor.isAllowInsertAttachment)),provider:t},{id:"editor.addAttachmentOnNewTopic",enabled:o("selection.single&selection.hasTopic",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.saveAsAttachment",enabled:o("default"),provider:t},{id:"editor.saveAsAudioNote",enabled:o("default"),provider:t},{id:"editor.saveAsEquation",enabled:o("default"),provider:t},{id:"editor.addLocalImage",enabled:o("selection.single&selection.hasTopic|selection.hasImage",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.changeImage",enabled:o("selection.single&selection.hasTopic|selection.hasImage"),provider:t},{id:"editor.focusAndSelectCenter",enabled:o("default"),provider:t},{id:"editor.deleteLabel",enabled:!0,provider:t},{id:"editor.removeLabel",enabled:o("selection.hasTopic"),provider:t},{id:"editor.removeLink",enabled:o("selection.hasTopic"),provider:t},{id:"editor.removeNote",enabled:o("selection.hasTopic"),provider:t},{id:"editor.removeStickerOrImageOrEquation",enabled:o("selection.hasTopic"),provider:t},{id:"editor.keepTextOnly",enabled:o("selection.hasTopic"),provider:t},{id:"editor.selectAndCenter",enabled:o("default"),provider:t},{id:"editor.deleteInfoItem",enabled:o("selection.single&selection.hasTopic"),provider:t},{id:"editor.editInfoItem",enabled:o("selection.single&selection.hasTopic"),provider:t},{id:"editor.showBranchOnly",enabled:o("selection.single&selection.hasTopic&!selections.hasCallout&!selection.hasCentralTopic&!selection.hasSummary",(()=>!e.state.editor.isBranchOnlyMode)),provider:t},{id:"editor.exitBranchOnly",enabled:o("default",(()=>e.state.editor.isBranchOnlyMode)),provider:t},{id:"editor.toggleBranchOnly",label:r,enabled:a,provider:t},{id:"editor.boldText",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.italicText",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.strikethroughText",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.uppercaseText",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.lowercaseText",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.capitalizeText",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.alignTextLeft",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.centerText",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.alignTextRight",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.increaseFontSize",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.decreaseFontSize",enabled:o("selection.some&selection.hasTopic&!focus.popover"),provider:t},{id:"editor.setStyleAsVeryImportant",enabled:o("selection.hasTopic&!selections.hasCallout&!selection.hasCentralTopic&!selection.hasSummary"),provider:t},{id:"editor.setStyleAsImportant",enabled:o("selection.hasTopic&!selections.hasCallout&!selection.hasCentralTopic&!selection.hasSummary"),provider:t},{id:"editor.setStyleAsCrossOut",enabled:o("selection.hasTopic&!selections.hasCallout&!selection.hasCentralTopic&!selection.hasSummary"),provider:t},{id:"editor.setStyleAsDefault",enabled:o("selection.hasTopic&!selections.hasCallout&!selection.hasCentralTopic&!selection.hasSummary"),provider:t},{id:"editor.updateStyleToSameLevelTopics",enabled:o("selection.hasTopic&!selection.hasCentralTopic"),provider:t},{id:"editor.updateStyleToSameTypeTopics",enabled:o("selection.hasTopic&!selection.hasCentralTopic"),provider:t},{id:"editor.toggleBranchLevelOne",enabled:o("selection.hasTopic"),provider:t},{id:"editor.toggleBranchLevelTwo",enabled:o("selection.hasTopic"),provider:t},{id:"editor.toggleBranchLevelThree",enabled:o("selection.hasTopic"),provider:t},{id:"editor.toggleBranchLevelFour",enabled:o("selection.hasTopic"),provider:t},{id:"editor.toggleBranchLevelFive",enabled:o("selection.hasTopic"),provider:t},{id:"editor.toggleBranchLevelSix",enabled:o("selection.hasTopic"),provider:t},{id:"editor.toggleBranchLevelSeven",enabled:o("selection.hasTopic"),provider:t},{id:"editor.toggleBranchLevelEight",enabled:o("selection.hasTopic"),provider:t},{id:"editor.toggleBranchLevelNine",enabled:o("selection.hasTopic"),provider:t}];return s.push({id:"editor.toggleSheetBar",label:e.state.editor.isSheetBarVisible?"Hide Sheet Bar":"Show Sheet Bar",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.toggleMiniMap",label:e.state.editor.minimapEnable?"Hide Map Overview":"Show Map Overview",enabled:e.state.editor.sbEditorCreated,provider:t}),s}},55616:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(59713)),r=n(o(61027)),a=n(o(85622)),s=o(58933),l=o(28441),c=o(68061),d=o(99492),u=o(20072),p=n(o(2286)),h=o(36414),f=o(1893),m=o(90336),g=o(48932),v=n(o(24678)),b=o(83450),A=n(o(13976)),E=o(95287),T=n(o(86554)),y=o(36019),C=n(o(8045)),S=o(5364),k=o(74627);function w(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?w(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}t.default=e=>{return x(x({},(0,C.default)(e)),{},{"editor.toggleMarkerPopoverInZenMode":function(){},"editor.toggleStylePopoverInZenMode":function(){},"editor.toggleSheetBar":function(){const t=e.state.editor;t&&e.commit("editor/SHEET_BAR_VISIBLE",{isSheetBarVisible:!t.isSheetBarVisible})},"editor.previousSheet":function(){const t=e.state.editor.sbEditorWrapper.value,o=t.model.get("sheets"),n=o.map((e=>e.id)),i=t.getCurrentSheetEditor().model.id;if(!o||o&&o.length<2)return;const r=n.indexOf(i);if(r>-1){let e=r-1;e=e<0?e+n.length:e,t.switchTo(e)}},"editor.nextSheet":function(){const t=e.state.editor.sbEditorWrapper.value,o=t.model.get("sheets"),n=o.map((e=>e.id)),i=t.getCurrentSheetEditor().model.id;if(!o||o&&o.length<2)return;const r=n.indexOf(i);if(r>-1){const e=(r+1)%n.length;t.switchTo(e)}},"editor.toggleTopicCountLabel":function(){const t=!e.state.editor.isTopicCountLabelVisible;e.commit("editor/TOPIC_COUNT_LABEL_VISIBLE",{isTopicCountLabelVisible:t})},"editor.showTopiclinkEditor":I,"editor.showHyperlinkEditor":n,"editor.showEquationEditor":function(){e.commit("workbench/POPOVER_VISIBLE",{name:"equation-editor"})},"editor.resizeEquation":function(){const t=e.state.editor.sbEditorWrapper.value;if(!t)return;t.execAction(r.default.constant.ACTION_NAMES.RESIZE_MATH_JAX,{newWidth:null,prue:!0})},"editor.addFileLink":({isFileLink:e=!0}={})=>i(e),"editor.addFolderLink":()=>i(!1),"editor.showNotesEditor":w,"editor.showLabelEditor":function(){e.commit("workbench/POPOVER_VISIBLE",{name:"labeleditor"})},"editor.toggleBeginnerMode":function(){e.commit("editor/UPDATE_BEGINNERMODE_VISIBLE",{isBeginnerModeVisible:!0})},"editor.toggleBeginnerModeTips":function(){e.commit("editor/UPDATE_BEGINNERTOOLTIPS_VISIBLE",{isTooltipsVisible:!e.state.editor.isTooltipsVisible})},"editor.newSheetFromTopic":function(){const t=e.state.editor.sbEditorWrapper.value;let o=t.getSelections()[0];const n=t.getCurrentSheetEditor(),i=JSON.parse(JSON.stringify(n.model.toJSON()));let a=JSON.parse(JSON.stringify(o.model.toJSON()));const s=A.default.cloneBranch(i,a),{branch:l,theme:c,relationships:d}=s;if(!l)return;l.href||(l.href=`xmind:#${o.model.getId()}`);const u=o.model,p=u.classList().filter((e=>!["importantTopic","minorTopic","expiredTopic"].includes(e)));l.class=p.join(" ");const f=o.topicView.titleView.text;let m={id:(0,h.UUID)(),class:"sheet",title:f,rootTopic:l,theme:c,relationships:d};const g=n.model.theme()||null,v=g&&g.getColorThemeId(),b=g&&g.getSkeletonThemeId();if(v||b){const e=(0,k.getColorThemeDataById)(v||k.DEFAULT_COLOR_THEME_ID),t=(0,k.getSkeletonThemeDataById)(b||k.DEFAULT_SKELETON_ID);let o={};e&&(o=(0,k.combineColorTheme)(o,e)),t&&(o=(0,k.combineSkeletonTheme)(o,t),m=(0,k.combineSkeletonStructureStyleToContent)(m,t)),m.theme=o}t.execAction(r.default.constant.ACTION_NAMES.ADD_NEW_SHEET,{sheetId:m.id,sheetData:m,options:{title:f},prue:!0});const E="xmind:#"+l.id;t.execAction(r.default.constant.ACTION_NAMES.CHANGE_HYPER_LINK,{link:E,targets:[o],prue:!0})},"editor.toggleBranch":function(){const t=e.state.editor.sbEditorWrapper.value;if(!t)return;const n=t.getSelections(),i=o(n)?[r.default.constant.ACTION_NAMES.EXTEND_BRANCHES]:[r.default.constant.ACTION_NAMES.COLLAPSE_BRANCHES];t.execAction.apply(t,i)},"editor.toggleAllBranch":function(){const{VIEW_TYPE:t,TOPIC_TYPE:n}=r.default.constant,i=e.state.editor.sbEditorWrapper.value;if(!i)return;let a=i.getSelections().filter((e=>e.type===t.BRANCH));if(1===a.length&&a[0].isCentralBranch()){const e=i.getCurrentSheetEditor().getSheetView().getCentralBranchView(),t=e.getChildrenBranchesByType(n.ATTACHED),o=e.getChildrenBranchesByType(n.DETACHED),r=e.getChildrenBranchesByType(n.SUMMARY);a=t.concat(o,r)}const s=o(a)?["extendBranches",{spread:!0}]:["collapseBranches",{spread:!0}];i.execAction.apply(i,s)},"editor.resetStyle":function(){const t=e.state.editor.sbEditorWrapper.value;if(!t)return;let o=t.getSelections();o.length||(o=[t.getCurrentSheetEditor().getSheetView()]);for(let e of o)t.execAction(r.default.constant.ACTION_NAMES.SET_STYLE_OBJECT,{styleObj:null,targets:[e]})},"editor.showMarkerPopup":function(t){if(!t)return;e.commit("editor/SELECTED_MARKER_VIEW",{markerView:t}),e.commit("workbench/POPOVER_VISIBLE",{name:"markerpopup"})},"editor.zoomIn":function(){let t=e.getters["editor/zoomScaleForActiveSheet"],o=(0,u.nextZoomScaleForZoomIn)(t);t!==o&&e.commit("editor/updateSheetStatus",{id:e.state.editor.activeSheetId,zoomScale:o})},"editor.zoomOut":function(){let t=e.getters["editor/zoomScaleForActiveSheet"],o=(0,u.nextZoomScaleForZoomOut)(t);t!==o&&e.commit("editor/updateSheetStatus",{id:e.state.editor.activeSheetId,zoomScale:o})},"editor.resetZoom":function(){e.commit("editor/updateSheetStatus",{id:e.state.editor.activeSheetId,zoomScale:100})},"editor.cutMarker":function(t){if(!t)return;const o=e.state.editor.sbEditorWrapper.value;if(!o)return;o.execAction(r.default.constant.ACTION_NAMES.CUT,{targets:[t]})},"editor.copyMarker":function(t){if(!t)return;const o=e.state.editor.sbEditorWrapper.value;if(!o)return;o.execAction(r.default.constant.ACTION_NAMES.COPY,{targets:[t]})},"editor.deleteMarker":function(t){if(!t)return;const o=e.state.editor.sbEditorWrapper.value;if(!o)return;o.execAction(r.default.constant.ACTION_NAMES.DELETE_ITEM,{targets:[t]})},"editor.addAudioOnNewTopic":function(){e.commit("editor/AUDIO_BAR_MODE",{audioBarMode:"audio_record",audioAutoplay:!1}),(0,b.trackEvent)({eventCategory:"WorkBench",eventAction:"addRecordAudioBar"})},"editor.addAttachment":_,"editor.addAttachmentOnNewTopic":function(){_({newTopic:!0})},"editor.saveAsAttachment":O,"editor.saveAsAudioNote":async function(){O("AUDIO_NOTE")},"editor.saveAsEquation":async function(){const t=e.state.editor.sbEditorWrapper.value;if(!t)return;const o=t.getSelections(),n=o[0]&&o[0].s$mathJaxOutPutNestedSVG&&o[0].s$mathJaxOutPutNestedSVG.node&&o[0].s$mathJaxOutPutNestedSVG.node.outerHTML;if(!n)return;(0,c.getPngDataUrlFromSvgText)(n,(0,l.getMaxDPIRatio)()).then((function(t){const o=e.getters["l10n/T"];(0,l.saveAsImageData)(e,t,o("Equation")+".png")}))},"editor.addLocalImage":async function(){const t=e.getters["l10n/T"],{filePaths:o,canceled:n}=await s.remote.dialog.showOpenDialog(s.remote.getCurrentWindow(),{buttonLabel:t("Insert"),filters:[{name:"All",extensions:["png","apng","jpg","jpeg","jpe","jif","jfif","jfi","tif","webp","gif","svg","xbm","xbm","dib","ico"]},{name:"PNG",extensions:["png","apng"]},{name:"JPG",extensions:["jpg","jpeg","jpe","jif","jfif","jfi"]},{name:"WebP",extensions:["webp"]},{name:"GIF",extensions:["gif"]},{name:"SVG",extensions:["svg"]},{name:"XBM",extensions:["xbm"]},{name:"BMP",extensions:["xbm","dib"]},{name:"ICO",extensions:["ico"]}]});if(n||!o||!o.length)return;let i=o[0];p.default.existsSync(i)&&p.default.readFile(i).then((t=>{let o="resources/"+(0,h.HASH)(t)+a.default.extname(i),n="xap:"+o;e.state.wd.manifestWrapper.value["file-entries"][o]={},p.default.writeFile(a.default.join(e.state.wd.tempStorage,o),t).then((()=>{B(n)}))}))},"editor.changeImage":B,"editor.focusAndSelectCenter":function(){const t=e.state.editor.sbEditorWrapper.value,o=t.getCurrentSheetEditor(),n=o.getSheetView().getCentralBranchView(),i=o&&o.model&&o.model.rootTopic();o&&o.execAction(r.default.constant.ACTION_NAMES.SELECT,{id:i.id,isSingle:!0,noAutoMove:!0,prue:!0}),t.execAction(r.default.constant.ACTION_NAMES.FOCUS_CENTER,{targets:[n],animated:!0,finishToRun:()=>{o&&o.execAction(r.default.constant.ACTION_NAMES.FOCUS_INPUT,{preventScroll:!0})}})},"editor.deleteLabel":function(){e.state.editor.sbEditorWrapper.value.execAction(r.default.constant.ACTION_NAMES.CHANGE_LABEL,{labelString:""})},"editor.selectAndCenter":async function(t){const o=e.state.editor.sbEditorWrapper.value;let n;if(o.getCurrentSheetEditor().model.findComponentById(t))n=o.getComponentViewById(t);else for(let i=0;i<o.model.sheets.length;i++){const r=o.model.sheets[i];if(r.findComponentById(t)){r.id!==o.currentSheetId&&((e.state[m.SHARED].editorMode===g.EDITOR_MODE_OUTLINER||e.state[m.SHARED].editorMode===g.EDITOR_MODE_SNOWBRUSH&&!e.getters["editor/isSheetEditorAvailable"](r.id))&&(e.commit(`${m.SHARED}/updateSheetRendering`,{sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,h.sleep)(100)),o.switchTo(o.findSheetIndex(r.id)),await(0,h.sleep)(50)),n=o.sheetEditors[r.id]&&o.sheetEditors[r.id].getComponentViewById(t);break}}n&&o.execAction(r.default.constant.ACTION_NAMES.FOCUS_CENTER,{targets:[n],animated:!1,finishToRun:()=>{if(!n.model)return;const e=n.model.get("id");switch(n.type){case r.default.constant.VIEW_TYPE.BRANCH:o.execAction(r.default.constant.ACTION_NAMES.HIGH_LIGHT_SELECT,{id:e});break;default:o.execAction(r.default.constant.ACTION_NAMES.SELECT,{id:e,isSingle:!0,noAutoMove:!0})}}})},"editor.deleteInfoItem":function(t){const o=t.iconType;if(!o)return;const n=e.state.editor.sbEditorWrapper.value;switch(o){case r.default.constant.VIEW_TYPE.ATTACHMENT:case r.default.constant.VIEW_TYPE.HREF:case r.default.constant.VIEW_TYPE.FILE:case"jump":n.execAction(r.default.constant.ACTION_NAMES.CHANGE_HYPER_LINK,{link:""});break;case r.default.constant.VIEW_TYPE.NOTE:n.execAction(r.default.constant.ACTION_NAMES.CHANGE_NOTE);break;case r.default.constant.VIEW_TYPE.COMMENT:n.execAction(r.default.constant.ACTION_NAMES.CHANGE_COMMENTS_INFO);break;case r.default.constant.VIEW_TYPE.TASK:n.execAction(r.default.constant.ACTION_NAMES.REMOVE_TASK_INFO)}},"editor.editInfoItem":function(e){const t=e.iconType;if(!t)return;switch(t){case r.default.constant.VIEW_TYPE.HREF:n();break;case"jump":I();break;case r.default.constant.VIEW_TYPE.NOTE:w()}},"editor.showBranchOnly":function(){e.commit("editor/BRANCH_ONLY_MODE",{isBranchOnlyMode:!0})},"editor.exitBranchOnly":function(){e.commit("editor/BRANCH_ONLY_MODE",{isBranchOnlyMode:!1})},"editor.toggleBranchOnly":function(){e.state.editor.isBranchOnlyMode?e.handleCommand("editor.exitBranchOnly"):e.handleCommand("editor.showBranchOnly")},"editor.toggleMiniMap":function(){let t=!e.state.editor.minimapEnable;e.commit("editor/UPDATE_MINIMAP_ENABLE_STATE",{minimapEnable:t}),t&&(0,b.trackEvent)({eventCategory:"Sheetbar",eventAction:"openOverview"})},"editor.removeMarker":M,"editor.removeLabel":L,"editor.removeLink":()=>N(S.CHANGE_HYPER_LINK,{link:"",prue:!0}),"editor.removeNote":R,"editor.removeStickerOrImageOrEquation":D,"editor.keepTextOnly":function(){N(S.CHANGE_HYPER_LINK,{link:"",prue:!0}),R(),M(),L(),D()},"editor.boldText":()=>P("editor.changeFontWeight",{styleKey:S.FONT_WEIGHT,styleValue:"bold",targetArgs:{fontWeight:"bold",prue:!0},fallbackArgs:{fontWeight:"normal"}}),"editor.italicText":()=>P("editor.changeFontStyle",{styleKey:S.FONT_STYLE,styleValue:"italic",targetArgs:{fontStyle:"italic"},fallbackArgs:{fontStyle:"normal"}}),"editor.strikethroughText":()=>P("editor.changeTextDecoration",{styleKey:S.TEXT_DECORATION,styleValue:"line-through",targetArgs:{textDecoration:"add:line-through"},fallbackArgs:{textDecoration:"none"}}),"editor.uppercaseText":()=>P("editor.changeTextTransform",{styleKey:S.TEXT_TRANSFORM,styleValue:"uppercase",targetArgs:{type:"uppercase",prue:!0},fallbackArgs:{type:"manual",prue:!0}}),"editor.lowercaseText":()=>P("editor.changeTextTransform",{styleKey:S.TEXT_TRANSFORM,styleValue:"lowercase",targetArgs:{type:"lowercase",prue:!0},fallbackArgs:{type:"manual",prue:!0}}),"editor.capitalizeText":()=>P("editor.changeTextTransform",{styleKey:S.TEXT_TRANSFORM,styleValue:"capitalize",targetArgs:{type:"capitalize",prue:!0},fallbackArgs:{type:"manual",prue:!0}}),"editor.alignTextLeft":()=>P("editor.changeTextAlign",{targetArgs:{textAlign:"left",prue:!0}}),"editor.centerText":()=>P("editor.changeTextAlign",{targetArgs:{textAlign:"center",prue:!0}}),"editor.alignTextRight":()=>P("editor.changeTextAlign",{targetArgs:{textAlign:"right",prue:!0}}),"editor.increaseFontSize":()=>F("increase"),"editor.decreaseFontSize":()=>F("decrease"),"editor.setStyleAsVeryImportant":()=>W("importantTopic"),"editor.setStyleAsImportant":()=>W("minorTopic"),"editor.setStyleAsCrossOut":()=>W("expiredTopic"),"editor.setStyleAsDefault":()=>W(null),"editor.updateStyleToSameTypeTopics":()=>$(!0),"editor.updateStyleToSameLevelTopics":()=>$(!1),"editor.toggleBranchLevelOne":()=>t(1),"editor.toggleBranchLevelTwo":()=>t(2),"editor.toggleBranchLevelThree":()=>t(3),"editor.toggleBranchLevelFour":()=>t(4),"editor.toggleBranchLevelFive":()=>t(5),"editor.toggleBranchLevelSix":()=>t(6),"editor.toggleBranchLevelSeven":()=>t(7),"editor.toggleBranchLevelEight":()=>t(8),"editor.toggleBranchLevelNine":()=>t(9)});function t(t){const o=e.state.editor.sbEditorWrapper.value;if(!o)return;let n=o.getSelections();if(n.length||(n=[o.getCurrentSheetEditor().getSheetView()]),n.length>1)return;n.every((e=>function(e,t){if(e.isCentralBranch())return!1;if(!e.model.children().length)return!1;if(e.model.isCollapse)return!1;const o=(e,t=1)=>e.map((e=>"function"==typeof e.isCollapse&&e.isCollapse()?{isCollapse:!0,depth:t}:"function"==typeof e.children&&e.children().length?o(e.children(),t+1):{isCollapse:!1,depth:t})),n=o(e.model.children()).flat(1/0);return!n.every((e=>!e.isCollapse))&&n.every((e=>!e.isCollapse||e.depth===t))}(e,t)))||o.execAction(r.default.constant.ACTION_NAMES.COLLAPSE_TO_SPECIFIC_RELATIVE_LAYER,{relativeLayer:t,targets:n})}function o(e,t){let o;if(e.filter((e=>!e.isCentralBranch())).every((e=>!e.model.children().length)))o=!1;else{if(e=e.filter((e=>!e.isCentralBranch())).filter((e=>e.model.children().length)),t){return e.map((e=>e.model.children().map((e=>{let o=[e];for(let e=0;e<t;e++)o=o.map((e=>e.isCollapse()?e:e.children().length?e.children():e)).flat();return o})).flat())).flat().every((e=>e.isCollapse()))}o=e.every((e=>e.model&&e.model.isCollapse&&e.model.isCollapse()))}return o}function n(){e.commit("workbench/POPOVER_VISIBLE",{name:"hyperlinkeditor"})}async function i(t){const o=t?["openFile"]:["openDirectory"],n=e.getters["l10n/T"],{filePaths:i,bookmarks:a,canceled:l}=await s.remote.dialog.showOpenDialog(s.remote.getCurrentWindow(),{properties:o,buttonLabel:n("Insert"),securityScopedBookmarks:!0});if(l||!i||!i.length)return;const c=i[0];if(!p.default.existsSync(c))return;if(a&&a.length===i.length)for(let e=0;e<i.length;e++){const t=i[e],o=a[e];t&&o&&await T.default.bindBookmark({fp:t,bookmark:o})}const d=(0,f.filePathToUrl)(c);e.state.editor.sbEditorWrapper.value.execAction(r.default.constant.ACTION_NAMES.CHANGE_HYPER_LINK,{link:d})}function w(){e.commit("workbench/POPOVER_VISIBLE",{name:"notes"})}function I(){const t=e.state.editor.sbEditorWrapper.value,o=t.getSelections(),n=o&&o[0];if(!n)return;const i="xmind:#",a=n.model&&n.model.get("href");let s=!1,l=null;a&&a.startsWith(i)&&(l=a.substr(i.length),s=!0);let c=v.default.route(d.EDITOR_GET_SHEETS_DATA,(()=>{const t=e.state.editor.sbEditorWrapper.value;return JSON.stringify(t.model.sheets)}));v.default.fetch(d.WINDOW_OPEN,{name:"dialog-topiclink",parentId:window.id,wait:!0,query:{_sheetsString:JSON.stringify(t.model.get("sheets")),hasTopicLink:s,xmindObjectId:l}}).then((({result:e}={})=>{if(c&&(c(),c=null),e&&"set"===e.action){const o=i+e.topicId;if(t.execAction(r.default.constant.ACTION_NAMES.CHANGE_HYPER_LINK,{link:o}),e.twoWay){const o=t.getComponentViewById(e.topicId);t.execAction(r.default.constant.ACTION_NAMES.CHANGE_HYPER_LINK,{link:i+n.model.getId(),targets:[o]})}}else e&&"remove"===e.action&&t.execAction(r.default.constant.ACTION_NAMES.CHANGE_HYPER_LINK,{link:""})})).catch((()=>{}))}async function _({newTopic:t=!1}={}){const o=e.getters["l10n/T"],{filePaths:n,canceled:i}=await s.remote.dialog.showOpenDialog(s.remote.getCurrentWindow(),{buttonLabel:o("Insert")});if(i||!n||!n.length)return;let l=n[0];if(p.default.existsSync(l)){const n=p.default.statSync(l);if(n.isDirectory())return void(0,E.showMessageBox)({type:"warning",title:"XMind",detail:o("Folder is not supported."),message:o("Insert Attachment Failed"),buttons:[o("OK")],defaultId:0,cancelId:0,noLink:!0});if(n.size>20*Math.pow(1024,2)){const t=e.getters["l10n/T"];(0,E.showMessageBox)({type:"warning",title:"XMind",detail:t("File size cannot exceed 20MB."),message:t("Insert Attachment Failed"),buttons:[t("OK")],defaultId:0,cancelId:0,noLink:!0})}else p.default.readFile(l).then((o=>{let n="resources/"+(0,h.HASH)(o)+a.default.extname(l),i="xap:"+n;const s=e.state.editor.sbEditorWrapper.value;e.state.wd.manifestWrapper.value["file-entries"][n]={};let c=l.substr(l.lastIndexOf(a.default.sep)+1);p.default.writeFile(a.default.join(e.state.wd.tempStorage,n),o).then((()=>{t?s.execAction(r.default.constant.ACTION_NAMES.INSERT_HREF_ON_NEW_TOPIC,{link:i,title:c}):s.execAction(r.default.constant.ACTION_NAMES.CHANGE_HYPER_LINK,{link:i})}))}))}}function B(t){const o=e.state.editor.sbEditorWrapper.value,[n]=o.getSelections(),{VIEW_TYPE:i}=r.default.constant;switch(n.type){case i.IMAGE:o.execAction(r.default.constant.ACTION_NAMES.ADD_IMAGE,{imageInfo:t,targets:[n.parent().parent()]});break;default:o.execAction(r.default.constant.ACTION_NAMES.ADD_IMAGE,{imageInfo:t})}}async function O(t=null){const o=e.state.editor.sbEditorWrapper.value;if(!o)return;const n=o.getSelections(),i=n&&n[0]&&n[0].model;if(!i)return;const{resourcePath:r,filename:s}=function(t,o){let n=null,i=null;switch(o){case"AUDIO_NOTE":n=t.get("extensions").filter((e=>"org.xmind.ui.audionotes"===e.provider))[0].resourceRefs[0],i=n.split("/").slice(-1).pop();break;default:switch(t.componentType){case"Image":n=t.get("src"),i=n.split("/").slice(-1).pop();break;default:{n=t.get("href"),i=t.get("title");const e=a.default.extname(n);i&&!i.endsWith(e)&&(i+=e)}}}if(!n.startsWith("xap:"))return;return n=a.default.join(e.state.wd.tempStorage,n.replace("xap:","")),{resourcePath:n,filename:i}}(i,t);(0,l.saveAs)(e,r,s)}function M(){const t=e.state.editor.sbEditorWrapper.value;t&&t.getSelections().forEach((e=>{const t=e.model;t.getMarkersData().map((e=>e.get("markerId"))).forEach((e=>t.removeMarker(e)))}))}function L(){const t=e.state.editor.sbEditorWrapper.value;t&&t.getSelections().forEach((e=>{e.model.changeLabel("")}))}function R(){const t=e.state.editor.sbEditorWrapper.value;t&&t.getSelections().forEach((e=>{e.model.changeNote("")}))}function N(t,o){const n=e.state.editor.sbEditorWrapper.value;n&&n.execAction(t,x(x({},o),{},{targets:[...n.getSelections()]}))}function D(){const t=e.state.editor.sbEditorWrapper.value;if(!t)return;t.getSelections().forEach((e=>{const o=e.model.getId(),n=t.getComponentViewById(o);if(!n)return;const i=n.topicView.mathJaxView,r=n.topicView.image;i&&t.execAction(S.DELETE_ITEM,{targets:[i]}),r&&t.execAction(S.DELETE_ITEM,{targets:[r]})}))}function P(t,{styleKey:o,styleValue:n,targetArgs:i,fallbackArgs:a}){const s=e.state.editor.sbEditorWrapper.value;if(!s)return;const l=s.getSelections(),c=[];if(o){const e=l.map((e=>e.model.getId()));for(const t of e){let e=s.getComponentViewById(t);if(!e)continue;const n=r.default.utils.styleManager.getStyleValue(e,o);let i=n;n&&"string"==typeof n&&(i=n.trim()),c.push(i)}}let d=i;a&&c.every((e=>e===n))&&(d=a),e.execSnowbrushAction({commandId:t,args:x(x({},d),{},{targets:l})})}function F(t){const o=e.state.editor.sbEditorWrapper.value;if(!o)return;o.getSelections().forEach((n=>{const i=n.model.getId(),a=o.getComponentViewById(i);if(!a)return;const s=r.default.utils.styleManager.getStyleValue(a,S.FONT_SIZE),l=Number(s.slice(0,-2));let c=l;c="increase"===t?l>=60?l:l+2:l<=8?l:l-2,e.execSnowbrushAction({commandId:"editor.changeFontSize",args:{size:`${c}pt`,prue:!0,targets:[n]}})}))}function W(t){const o=e.state.editor.sbEditorWrapper.value;if(!o)return;o.getSelections().forEach((n=>{const i=[{commandId:"editor.setStyleObject",args:{styleObj:null}}],a=n.model.getId(),s=o.getComponentViewById(a);if(!s)return;r.default.utils.styleManager.getClassList(s).forEach((e=>{i.push({commandId:"editor.removeClass",args:{className:e}})})),t&&i.push({commandId:"editor.addClass",args:{className:t}}),i.forEach((t=>{e.execSnowbrushAction({commandId:t.commandId,args:x(x({},t.args),{},{prue:!0,targets:[n]})})}))}))}function $(t){if(!e.state.editor.sbEditorWrapper.value)return;if(!(0,y.isSameSelectionType)(e)||!(0,y.isSameSelectionStyles)(e))return;const o=(0,y.getUniqueComputedSelectionClassLists)(e),n=(0,y.isSelectionHasQuickStyleClass)(e);(0,y.isSelectionAreSubTopics)(e)&&!n?t?(0,y.handleUpdateToAllLevels)(e,o[0]):(0,y.handleUpdateToSameLevels)(e,(0,y.getUniqueSelectionLevels)(e)[0],o[0]):n?(0,y.handleUpdatePresetQuickStyle)(e,o[0]):(0,y.handleUpdateToAllLevels)(e,o[0])}}},4296:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(30632),r=o(90336),a=o(48932),s=o(47977),l=n(o(11222)),c=n(o(72185));const d=l.default.for("outliner"),u=c.default.for("context-menu");t.default=e=>{const t=`editor/${window.editorId}/outliner`,o=(0,i.evaluateFn)(e);function n(t,n){if(n){const t=n;n=()=>!e.state.editor.inputMethodInputting&&(e.state[r.SHARED].editorMode===a.EDITOR_MODE_OUTLINER&&t())}else n=()=>!e.state.editor.inputMethodInputting&&e.state[r.SHARED].editorMode===a.EDITOR_MODE_OUTLINER;return o(t,n)}const l=[{id:"outliner.init",enabled:n(""),provider:t},{id:"editor.newSheetFromTopic",enabled:n("",(()=>d.state.selectionIds.length<=1&&""!==d.state.currentEditingTopicId)),provider:t},{id:"editor.removeSheet",enabled:n(""),provider:t},{id:"editor.changeSheetTitle",enabled:n(""),provider:t},{id:"outliner.indent",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover",(()=>d.state.version>0&&(e.state.shared.contexts["selection.some"]||e.state.shared.contexts["selection.text"]||""!==u.state.targetTopicId)&&(d.state.selectionIds.length<=0?(0,s.isIndentable)(d.fullFlattenedSheet,d.state.currentEditingTopicId)||(0,s.isIndentable)(d.fullFlattenedSheet,u.state.targetTopicId):d.state.selectionIds.map((e=>d.getTopicById(e))).filter(Boolean).some((({id:e})=>(0,s.isIndentable)(d.fullFlattenedSheet,e)))))),provider:t},{id:"editor.addSubTopic",enabled:!1,provider:t},{id:"outliner.outdent",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover",(()=>d.state.version>0&&(e.state.shared.contexts["selection.some"]||e.state.shared.contexts["selection.text"]||""!==u.state.targetTopicId)&&(d.state.selectionIds.length<=0?d.getTopicById(d.state.currentEditingTopicId)&&(0,s.isOutdentable)(null,d.getTopicById(d.state.currentEditingTopicId),d.rootTopicId)||d.getTopicById(u.state.targetTopicId)&&(0,s.isOutdentable)(null,d.getTopicById(u.state.targetTopicId),d.rootTopicId):d.tidySelection().map((e=>d.getTopicById(e))).filter(Boolean).every((e=>(0,s.isOutdentable)(null,e,d.rootTopicId)))))),provider:t},{id:"outliner.addTopic",enabled:n("selection.text&!focus.input&!focus.outlinerNotes&!focus.popover",(()=>d.state.selectionIds.length<=1)),provider:t},{id:"editor.enterLineBreak",enabled:n(""),provider:t},{id:"outliner.selectionNavigateUp",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover",(()=>!e.state.editor.inputMethodInputting)),provider:t},{id:"outliner.selectionNavigateDown",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover",(()=>!e.state.editor.inputMethodInputting)),provider:t},{id:"outliner.multiSelectionNavigateUp",enabled:n("!focus.input|!focus.outlinerNotes"),provider:t},{id:"outliner.multiSelectionNavigateDown",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"outliner.exchangeSiblingTopicUp",enabled:n("selection.text|selection.some"),provider:t},{id:"outliner.exchangeSiblingTopicDown",enabled:n("selection.text|selection.some"),provider:t},{id:"selectAll",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranch",enabled:n("(selection.text|selection.some)&!focus.popover",(()=>{const e=d.tidySelection();return e.length>0?e.map((e=>(0,s.hasChildTopics)(d.fullFlattenedSheet,e))).reduce(((e,t)=>e||t)):(0,s.hasChildTopics)(d.fullFlattenedSheet,u.state.targetTopicId)||(0,s.hasChildTopics)(d.fullFlattenedSheet,d.state.currentEditingTopicId)})),provider:t},{id:"outliner.foldBranch",enabled:n("!focus.popover"),provider:t},{id:"outliner.unfoldBranch",enabled:n("!focus.popover"),provider:t},{id:"editor.toggleAllBranch",enabled:n("!focus.popover"),provider:t},{id:"workbench.exportPdf",enabled:n("!focus.popover"),provider:t},{id:"workbench.exportPdfMap",enabled:n("!focus.popover"),provider:t},{id:"copy",enabled:n("!focus.outlinerNotes&!focus.popover",(()=>e.state.shared.contexts["selection.some"]||e.state.shared.contexts["selection.text"]||""!==u.state.targetTopicId)),provider:t},{id:"cut",enabled:n("!focus.outlinerNotes&!focus.popover",(()=>e.state.shared.contexts["selection.some"]||e.state.shared.contexts["selection.text"]||""!==u.state.targetTopicId)),provider:t},{id:"paste",enabled:n("!focus.outlinerNotes&!focus.popover",(()=>e.state.shared.contexts["selection.some"]||e.state.shared.contexts["selection.text"]||""!==u.state.targetTopicId)),provider:t},{id:"delete",enabled:n("(selection.text|selection.some)&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"outliner.deleteWithDel",enabled:n("(selection.text|selection.some)&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"outliner.delete",enabled:n(""),provider:t},{id:"outliner.deleteTopic",enabled:n(""),provider:t},{id:"duplicate",enabled:n("!focus.outlinerNotes&!focus.popover",(()=>e.state.shared.contexts["selection.some"]||e.state.shared.contexts["selection.text"]||""!==u.state.targetTopicId)),provider:t},{id:"outliner.getTopic",enabled:n(""),provider:t},{id:"outliner.changeTopicTitle",enabled:n(""),provider:t},{id:"outliner.insertAsSubTopic",enabled:n(""),provider:t},{id:"outliner.insertEmptySubTopic",enabled:n(""),provider:t},{id:"outliner.insertAfterTopic",enabled:n(""),provider:t},{id:"outliner.insertBeforeTopic",enabled:n(""),provider:t},{id:"outliner.setRootTopic",enabled:n(""),provider:t},{id:"editor.showBranchOnly",enabled:n(""),provider:t},{id:"editor.exitBranchOnly",enabled:!0,provider:t},{id:"editor.toggleBranchOnly",enabled:n(""),provider:t},{id:"outliner.serRootTopicAsOriginal",enabled:n(""),provider:t},{id:"editor.showNotesEditor",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover",(()=>(e.state.shared.contexts["selection.text"]||""!==u.state.targetTopicId)&&d.state.selectionIds.length<=1)),provider:t},{id:"outliner.saveNotes",enabled:!0,provider:t},{id:"outliner.removeNotes",enabled:n(""),provider:t},{id:"editor.removeLabel",enabled:n("!focus.popover"),provider:t},{id:"editor.keepTextOnly",enabled:n("!focus.popover"),provider:t},{id:"outliner.resizeTopicImage",enabled:n(""),provider:t},{id:"editor.addLocalImage",enabled:n("",(()=>d.state.selectionIds.length<=1&&""!==d.state.currentEditingTopicId)),provider:t},{id:"outliner.addLocalImage",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"outliner.addTopicImage",enabled:n(""),provider:t},{id:"editor.changeImage",enabled:n(""),provider:t},{id:"outliner.removeTopicImage",enabled:n(""),provider:t},{id:"editor.removeMarker",enabled:n("!focus.popover"),provider:t},{id:"editor.removeStickerOrImageOrEquation",enabled:n("!focus.popover"),provider:t},{id:"outliner.saveAsImage",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.showEquationEditor",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"outliner.resizeTopicEquation",enabled:n(""),provider:t},{id:"outliner.changeTopicEquation",enabled:n(""),provider:t},{id:"outliner.removeTopicEquation",enabled:n(""),provider:t},{id:"outliner.updateTopicEquationInfo",enabled:n(""),provider:t},{id:"outliner.saveAsEquation",enabled:n(""),provider:t},{id:"outliner.updateTopicLabels",enabled:n(""),provider:t},{id:"editor.showLabelEditor",enabled:n("!focus.popover"),provider:t},{id:"outliner.showTopicLabelsPopover",enabled:n("!focus.popover"),provider:t},{id:"editor.addMarker",enabled:n(""),provider:t},{id:"editor.addMarkerOne",enabled:n(""),provider:t},{id:"editor.addMarkerTwo",enabled:n(""),provider:t},{id:"editor.addMarkerThree",enabled:n(""),provider:t},{id:"editor.addMarkerFour",enabled:n(""),provider:t},{id:"editor.addMarkerFive",enabled:n(""),provider:t},{id:"editor.addMarkerSix",enabled:n(""),provider:t},{id:"editor.addMarkerSeven",enabled:n(""),provider:t},{id:"editor.deleteMarker",enabled:n(""),provider:t},{id:"outliner.changeHyperlink",enabled:n(""),provider:t},{id:"editor.removeLink",enabled:n("!focus.popover"),provider:t},{id:"editor.showTopiclinkEditor",enabled:n("selection.single|selection.text",(()=>{if(!e.state.editor.sbEditorCreated)return!1;if(d.state.selectionIds.length>1)return!1;const t=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().model.findComponentById(d.state.currentEditingTopicId);if(!t)return!1;if(t.getAudioNotes())return!1;const o=t.get("href")||"";return o.length<=0||!o.startsWith("xap:")})),provider:t},{id:"editor.showHyperlinkEditor",enabled:n("selection.single|selection.text",(()=>{if(!e.state.editor.sbEditorCreated)return!1;if(d.state.selectionIds.length>1)return!1;const t=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().model.findComponentById(d.state.currentEditingTopicId);if(!t)return!1;if(t.getAudioNotes())return!1;const o=t.get("href")||"";return o.length<=0||!o.startsWith("xap:")})),provider:t},{id:"outliner.removeHyperlink",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"outliner.changeEquation",enabled:!1,provider:t},{id:"outliner.showEquationEditor",enabled:!1,provider:t},{id:"editor.addFileLink",enabled:n("",(()=>{if(!e.state.editor.sbEditorCreated)return!1;if(d.state.selectionIds.length>1)return!1;const t=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().model.findComponentById(d.state.currentEditingTopicId);if(!t)return!1;if(t.getAudioNotes())return!1;const o=t.get("href")||"";return o.length<=0||!o.startsWith("xap:")})),provider:t},{id:"editor.addFolderLink",enabled:n("",(()=>{if(!e.state.editor.sbEditorCreated)return!1;if(d.state.selectionIds.length>1)return!1;const t=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().model.findComponentById(d.state.currentEditingTopicId);if(!t)return!1;if(t.getAudioNotes())return!1;const o=t.get("href")||"";return o.length<=0||!o.startsWith("xap:")})),provider:t},{id:"editor.addAttachmentOnNewTopic",enabled:n("selection.single|selection.text",(()=>e.state.editor.sbEditorCreated&&d.state.selectionIds.length<=1&&""!==d.state.currentEditingTopicId)),provider:t},{id:"outliner.saveAsAttachment",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"outliner.clickAttachmentWithSaveAs",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"outliner.clickAttachment",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.addAudioOnNewTopic",enabled:n("",(()=>e.state.editor.sbEditorCreated&&d.state.selectionIds.length<=1&&""!==d.state.currentEditingTopicId)),provider:t},{id:"outliner.changeAudioNotes",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"outliner.removeAudioNotes",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"outliner.saveAsAudioNote",enabled:n("",(()=>e.state.editor.sbEditorCreated)),provider:t},{id:"editor.toggleSheetBar",label:e.state.editor.isSheetBarVisible?"Hide Sheet Bar":"Show Sheet Bar",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.zoomIn",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.zoomOut",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"editor.resetZoom",enabled:e.state.editor.sbEditorCreated,provider:t},{id:"outliner.focusTopic",enabled:n(""),provider:t},{id:"editor.selectTopicById",enabled:n(""),provider:t},{id:"editor.deleteMarker",enabled:n(""),provider:t},{id:"outliner.addTopicSelection",enabled:n(""),provider:t},{id:"outliner.removeTopicSelection",enabled:n(""),provider:t},{id:"outliner.clearSelection",enabled:n(""),provider:t},{id:"outliner.moveCaretCharacterToBeginning",enabled:n(""),provider:t},{id:"outliner.moveCaretCharacterToEnd",enabled:n(""),provider:t},{id:"outliner.moveCaretCharacterToAboveSiblingTopic",enabled:n(""),provider:t},{id:"outliner.moveCaretCharacterToBelowSiblingTopic",enabled:n(""),provider:t},{id:"editor.toggleBranchLevelOne",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranchLevelTwo",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranchLevelThree",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranchLevelFour",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranchLevelFive",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranchLevelSix",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranchLevelSeven",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranchLevelEight",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t},{id:"editor.toggleBranchLevelNine",enabled:n("!focus.input&!focus.outlinerNotes&!focus.popover"),provider:t}];return n("focus.popover")||l.push({id:"undo",enabled:n("!focus.popover"),provider:t},{id:"redo",enabled:n("!focus.popover"),provider:t}),l.forEach((e=>{e.group="outliner"})),l}},94294:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(59713)),r=o(58933),a=n(o(20144)),s=o(96486),l=n(o(71171)),c=n(o(45518)),d=n(o(85622)),u=(n(o(78835)),n(o(61027))),p=o(31669),h=o(36414),f=n(o(2286)),m=o(99492),g=o(48932),v=o(90336),b=o(20072),A=n(o(24678)),E=o(95287),T=o(83450),y=o(47977),C=o(9613),S=o(31381),k=n(o(71510)),w=o(40359),x=n(o(99636)),I=n(o(13976)),_=(o(89526),n(o(11222))),B=n(o(72185));function O(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function M(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?O(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const{ADD_NEW_SHEET:L,REMOVE_SHEET:R,COLLAPSE_BRANCHES:N,EXTEND_BRANCHES:D,SHOW_BRANCH_ONLY:P,CHANGE_MARKER:F,REMOVE_MARKER:W,CHANGE_HYPER_LINK:$,INSERT_AUDIO_NOTES:U,REMOVE_AUDIO_NOTES:j,CHANGE_SHEET_TITLE:H,DELETE_ITEM:Y,CHANGE_MATH_JAX:V,RESIZE_MATH_JAX:z}=u.default.constant.ACTION_NAMES,Z=u.default.constant.TOPIC_TYPE,G=_.default.for("outliner"),q=B.default.for("context-menu");t.default=e=>{const t=new k.default;function n(e){return e.state.editor.sbEditorWrapper.value}function i(e){return n(e).getCurrentSheetEditor().model}t.init(e);const u={"editor.removeSheet":B,"editor.newSheetFromTopic":function t(o=G.state.currentEditingTopicId){o=o.topicId||o;const r=ce(o=(0,s.isString)(o)?o:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0]);if(!r)return;const a=r.toJSON(),c=n(e),d=c.getComponentViewById(o);if(!d)return;const u=c.getCurrentSheetEditor(),p=JSON.parse(JSON.stringify(u.model.toJSON())),h=JSON.parse(JSON.stringify(d.model.toJSON())),{branch:f,theme:m,relationships:g}=I.default.cloneBranch(p,h);if(!f)return;f.href||(f.href=`xmind:#${h.id}`);const v=a.title,b=(0,l.default)();_({sheetId:b,sheetData:{id:b,class:"sheet",title:v,rootTopic:f,theme:m,relationships:g},options:{title:v}});const A=a.href||"";xe({topicId:a.id,link:"xmind:#"+f.id});i(e).getUndo().push({name:"newSheetFromTopic",undo:()=>{xe({topicId:a.id,link:A}),B(b)},redo:()=>t(o)})},"editor.changeSheetTitle":({sheetId:t,newTitle:o})=>{n(e).execAction(H,{sheetId:t,newTitle:o})},undo:()=>{if(e.state[v.SHARED].contexts["focus.outlinerNotes"])G.emit("undo-notes-"+G.state.currentEditingTopicId);else{const t=i(e).getUndo(),o=t.getLastGroup();if(!o||"outliner"===o.getName())return;t.undo(),G.commit("refreshSheet")}},redo:()=>{if(e.state[v.SHARED].contexts["focus.outlinerNotes"])G.emit("redo-notes-"+G.state.currentEditingTopicId);else{i(e).getUndo().redo(),G.commit("refreshSheet")}},"editor.addSubTopic":N,"outliner.indent":N,"outliner.outdent":P,"outliner.addTopic":function(e=G.state.currentEditingTopicId){if(e=e.topicId||e,!(e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0]))return!0;const t=ce(e);if(!t)return;const o=(0,S.getTopicTextElementById)(e);if(!o)return!1;const n=G.state.selectionIds,i=(0,S.getCaretCharacterOffsetWithin)(o),r=t.getTitle()||(0,S.getTextElementContent)(o),l=t.getIndexInParent(),c=t.isRootTopic(),d=!c&&t.parent().isRootTopic(),u=!!t.getImageModel(),p=!!t.getNotes(),h=t.getLabel().split(",").filter(Boolean).length>0,f=t.getMarkersData().length>0,m=!c&&!(d||t.getIndexInParent()!==t.parent().children(t.type()).length-1||u||p||h||f),g=t.createTopic({title:""});switch(!0){case 1===n.length&&n[0]===e:(0,y.hasChildTopics)(G.fullFlattenedSheet,e)?t.addChildTopic(g,{type:"attached",at:0}):t.parent().addChildTopic(g,{type:t.type(),at:l+1}),G.commit("clearSelection"),G.commit("refreshSheet"),setTimeout((()=>{const e=(0,S.getTopicTextElementById)(g.getId());e&&((0,S.scrollToElement)(e),e.focus())}),10);break;case i<r.length||!c&&r.length<=0&&l<t.parent().children(t.type()).length-1:let o,s,d=r.slice(0,i),u=r.slice(i);if(c)o=t,de({topicId:t.getId(),title:d,focus:!1}),s=t.addChildTopic(t.createTopic({title:u}),{type:"attached",at:0}),setTimeout((()=>{const e=(0,S.getTopicTextElementById)(s.getId());e&&((0,S.scrollToElement)(e),(0,S.setCaretCharacterOffsetWithIn)(e,0))}),10);else{s=t,de({topicId:t.getId(),title:u,focus:!1});const e=l;o=t.parent().addChildTopic(t.createTopic({title:d}),{type:t.type(),at:e})}if(o&&s){const e=s.toJSON().markers||[];if(e.length>0)for(const{markerId:t}of e)we({topicId:s.getId(),markerId:t}),Se({topicId:o.getId(),markerId:t})}G.commit("refreshSheet"),G.emit("changeTopicTitle-"+o.getId(),o.getTitle(),!1),G.emit("changeTopicTitle-"+s.getId(),s.getTitle(),!1),setTimeout((()=>{G.emit("focus-"+s.getId())}),10);break;case r.length>0:switch(!0){case G.zipStatus.indexOf(e)<0&&t.children().length>0:t.addChildTopic(g,{at:0});break;case!c:t.parent().addChildTopic(g,{type:t.type(),at:l+1});break;case c:t.addChildTopic(g,{type:"attached",at:0})}G.commit("refreshSheet",!1),a.default.nextTick((()=>{const e=(0,S.getTopicTextElementById)(g.getId());e&&((0,S.scrollToElement)(e),e.focus())}));break;case r.length<=0&&m:P(e);break;case r.length<=0&&!m:if(c)t.addChildTopic(g,{type:"attached",at:0});else{const e=l+1;t.parent().addChildTopic(g,{type:t.type(),at:e})}G.commit("refreshSheet",!1),a.default.nextTick((()=>{const e=(0,S.getTopicTextElementById)(g.getId());e&&((0,S.scrollToElement)(e),e.focus())}))}},"outliner.selectionNavigateUp":async function(e=G.state.currentEditingTopicId){if(!e||G.tidySelection().length>0){const t=G.tidySelection();e=t[0],G.commit("clearSelection"),await a.default.nextTick()}if(!e)return;const t=G.fullFlattenedSheet.filter((e=>e.show)),o=(0,S.getTopicTextElementById)(e);if(!o)return;const{isOnFirstLine:n}=(0,S.calculateCaretLinePos)(o);if(!n)return!0;const i=t.findIndex((t=>t.id===e))-1;let r;if(i>=0){const e=t[i];r=(0,S.getTopicTextElementById)(e.id)}else r=(0,S.getTopicTextElementById)(G.rootTopicId);if(!r)return;(0,S.scrollToElement)(r),r.focus(),(0,S.setCaretCharacterOffsetWithIn)(r,0)},"outliner.selectionNavigateDown":async function(e=G.state.currentEditingTopicId){if(!e||G.tidySelection().length>0){const t=G.tidySelection();e=t[t.length-1],G.commit("clearSelection"),await a.default.nextTick()}if(!e)return;const t=G.fullFlattenedSheet.filter((e=>e.show)),o=(0,S.getTopicTextElementById)(e);if(!o)return;const{isOnLastLine:n}=(0,S.calculateCaretLinePos)(o);if(!n&&(0,S.getTextElementContent)(o).length>0)return!0;const i=t.findIndex((t=>t.id===e))+1;if(i<0||i>t.length-1)return;const r=t[i],s=(0,S.getTopicTextElementById)(r.id);if(!s)return;(0,S.scrollToElement)(s),s.focus(),(0,S.setCaretCharacterOffsetWithIn)(s,0)},"outliner.multiSelectionNavigateUp":function(e=G.state.currentEditingTopicId){const t=G.fullFlattenedSheet.filter((e=>e.show));e=e.topicId||e,e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId;const o=G.tidySelection();if(o.length<=0)(0,S.clearTextSelection)(),G.commit("addSelection",e),G.commit("setStartTopic",e);else{const e=o[0],n=o[o.length-1],i=G.state.startTopicId;let r="";switch(!0){case e===i&&(0,y.hasPrevSibling)(t,n):r=(0,y.getPrevSiblingTopic)(t,n).id;break;case n===i&&(0,y.hasPrevSibling)(t,e):r=(0,y.getPrevSiblingTopic)(t,e).id}if(!r)return;G.commit("toggleEditable",!1);let a=t.findIndex((e=>e.id===i)),s=t.findIndex((e=>e.id===r));s<a&&([a,s]=[s,a]);const l=t.slice(a,s+1);G.commit("clearSelection");for(const e of l)G.commit("addSelection",e.id);const c=(0,S.getTopicTextElementById)(t[a].id);c&&(0,S.scrollToElement)(c)}},"outliner.multiSelectionNavigateDown":function(e=G.state.currentEditingTopicId){const t=G.fullFlattenedSheet.filter((e=>e.show));e=e.topicId||e,e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId;const o=G.tidySelection();if(o.length<=0)(0,S.clearTextSelection)(),G.commit("addSelection",e),G.commit("setStartTopic",e);else{const e=o[0],n=o[o.length-1],i=G.state.startTopicId;let r="";switch(!0){case e===i&&(0,y.hasNextSibling)(t,n):r=(0,y.getNextSiblingTopic)(t,n).id;break;case n===i&&(0,y.hasNextSibling)(t,e):r=(0,y.getNextSiblingTopic)(t,e).id}if(!r)return;G.commit("toggleEditable",!1);let a=t.findIndex((e=>e.id===i)),s=t.findIndex((e=>e.id===r));s<a&&([a,s]=[s,a]);const l=t.slice(a,s+1);G.commit("clearSelection");for(const e of l)G.commit("addSelection",e.id);const c=(0,S.getTopicTextElementById)(t[s].id);c&&(0,S.scrollToElement)(c)}},"outliner.exchangeSiblingTopicUp":function(){const e=G.fullFlattenedSheet;let t=G.tidySelection();if(t.length<=0&&!G.state.currentEditingTopicId)return!0;let o=-1;if(t.length<=0&&G.state.currentEditingTopicId){t=[G.state.currentEditingTopicId];const e=(0,S.getTopicTextElementById)(t[0]);e&&(o=(0,S.getCaretCharacterOffsetWithin)(e))}const n=t.map((e=>ce(e))),i=t.map((t=>e.findIndex((e=>e.id===t)))),r=Math.min(...i),a=ce(e[r].id);if(!a)return;const s=a.parent(),l=a.getIndexInParent()-1;if(l<0)return!0;let c=s.type();"root"===c&&(c=a.type());for(const e of n.reverse())e.parent().removeChildTopic({at:e.getIndexInParent(),type:e.type()}),s.addChildTopic(e,{type:c,at:l});if(G.commit("refreshSheet"),1===n.length){const e=(0,S.getTopicTextElementById)(n[0].getId());e&&(G.commit("toggleEditable",!0),o<0&&(o=(0,S.getTextElementContent)(e).length),(0,S.scrollToElement)(e),(0,S.setCaretCharacterOffsetWithIn)(e,o))}},"outliner.exchangeSiblingTopicDown":function(){const e=G.fullFlattenedSheet;let t=G.tidySelection();if(t.length<=0&&!G.state.currentEditingTopicId)return!0;let o=-1;if(t.length<=0&&G.state.currentEditingTopicId){t=[G.state.currentEditingTopicId];const e=(0,S.getTopicTextElementById)(t[0]);e&&(o=(0,S.getCaretCharacterOffsetWithin)(e))}const n=t.map((e=>ce(e))).filter(Boolean),i=t.map((t=>e.findIndex((e=>e.id===t)))),r=Math.max(...i),s=ce(e[r].id);if(!s)return;const l=s.parent(),c=s.getIndexInParent()+1;if(c<0)return!0;let d=l.type();"root"===d&&(d=s.type());for(const e of n.reverse())e.parent().removeChildTopic({at:e.getIndexInParent(),type:e.type()}),l.addChildTopic(e,{type:d,at:c});G.commit("refreshSheet"),a.default.nextTick((()=>{if(1===n.length){const e=(0,S.getTopicTextElementById)(n[0].getId());e&&(G.commit("toggleEditable",!0),o<0&&(o=(0,S.getTextElementContent)(e).length),(0,S.scrollToElement)(e),(0,S.setCaretCharacterOffsetWithIn)(e,o))}}))},selectAll:function(){if(G.tidySelection().length<=0&&G.state.currentEditingTopicId){const e=(0,S.getTopicTextElementById)(G.state.currentEditingTopicId);if(!e)return!1;if((0,S.getSelectionLength)(e)===(0,S.getTextElementContent)(e).length)return(0,S.clearTextSelection)(),void X();(0,S.setSelectionRange)(e,0,(0,S.getTextElementContent)(e).length)}else X()},"outliner.foldBranch":K,"outliner.unfoldBranch":J,"editor.toggleBranch":function(e=G.state.currentEditingTopicId){let t=G.tidySelection();if(t.length>0){const e=t.filter((e=>(0,y.hasChildTopics)(G.fullFlattenedSheet,e))).map((e=>!(G.zipStatus.indexOf(e)>=0))).reduce(((e,t)=>e||t))?"fold":"unfold";for(const o of t)Q(o,e)}else if(e){e=e.topicId||e,e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0];const t=G.zipStatus.indexOf(e)>=0?"unfold":"fold";Q(e,t)}},"editor.toggleAllBranch":function(){const e=G.fullFlattenedSheet.filter((e=>0===e.depth)),t=e.map((e=>!(G.zipStatus.indexOf(e.id)>=0))).reduce(((e,t)=>e||t))?"fold":"unfold";for(const o of e){const e=ce(o.id);e&&("fold"===t?e.collapseBranch():e.extendBranch(),G.commit("setZippedStatus",{topicId:o.id,zipped:"fold"===t}))}},"workbench.exportPdfMap":ee,"workbench.exportPdf":ee,copy:te,cut:function(){if(e.state[v.SHARED].contexts["focus.input"])return document.execCommand("cut"),void i(e).getUndo().add({undo:()=>document.execCommand("undo"),redo:()=>document.execCommand("redo")});switch(G.commit("setCopyMode","cut"),G.state.selectionType){case"TOPIC":let e=te();if(Array.isArray(e)||(e=G.tidySelection()),e.length<=0)return document.execCommand("cut");for(const t of e){const e=ce(t);e.isRootTopic()||e&&e.parent().removeChildTopic({at:e.getIndexInParent(),type:e.type()})}break;case"IMAGE":const t=te();if(!Array.isArray(t))return!0;if(t.length<=0)return!0;for(const e of t){const t=ce(e);t&&(t.removeImage(),G.commit("hideTopicImage",e))}break;case"MARKER":const{topicIds:o,markerIds:n}=te();if(!Array.isArray(o)||!Array.isArray(n))return!0;if(o.length<=0||n.length<=0)return!0;for(const e of o){if(ce(e))for(const t of n)we({topicId:e,markerId:t})}break;case"EQUATION":const i=te();if(!Array.isArray(i))return!0;if(i.length<=0)return!0;for(const e of i){const t=ce(e);t&&(t.removeMathJaxInfo(),G.commit("hideTopicEquation",e))}}G.commit("refreshSheet")},paste:async function(o=G.state.currentEditingTopicId){if(e.state[v.SHARED].contexts["focus.input"])return document.execCommand("paste"),void i(e).getUndo().add({undo:()=>document.execCommand("undo"),redo:()=>document.execCommand("redo")});t.ready||t.init(e);o=o.topicId||o,o=(0,s.isString)(o)?o:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0];const n=r.clipboard.readImage();let a="win32"===process.platform?r.clipboard.readBuffer("FileNameW").toString("ucs2"):r.clipboard.read("public.file-url").replace("file://","");a=decodeURIComponent(a.replace(new RegExp(String.fromCharCode(0),"g"),""));const u=r.clipboard.readText();let p={};try{p=await t.getClipboardData()}catch(e){}const h="mathJax"===(p["text/x-type"]||""),m=(!n.isEmpty()||c.default.lookup(d.default.extname(a).substring(1)).startsWith("image")||"image"===(p["text/x-type"]||""))&&!h,g=!n.isEmpty(),b=a.length>0,A=u&&u.length>0,E="branch"===(p["text/x-type"]||""),T="marker"===(p["text/x-type"]||"");if(Object.keys(p).length<=0&&!m&&!b&&!A&&!h)return!0;let y,C,k=[];const w=G.state.copyMode,x=G.state.selectionIds,I=x.length>0;switch(!0){case m&&b:y=await f.default.readFile(a);const r=d.default.extname(a).substring(1);if(C=await e.dispatch("wd/generateXap",{extType:r,data:y}),I)for(const t of G.state.selectionIds)e.handleCommand("outliner.addLocalImage",{topicId:t,src:C});else e.handleCommand("outliner.addLocalImage",{topicId:o,src:C});break;case m&&g&&!b:if(y=n.toPNG(),C=await e.dispatch("wd/generateXap",{extType:"png",data:y}),I)for(const t of G.state.selectionIds)e.handleCommand("outliner.addLocalImage",{topicId:t,src:C});else e.handleCommand("outliner.addLocalImage",{topicId:o,src:C});break;case m&&!g&&!b:if(k=await t.getImagesFromClipboard(),!o&&x.length<=0)return!0;if(x.length>0)for(const e of x)oe(k,e);else o&&(o=o.topicId||o,oe(k,o));G.commit("setZippedStatus",{topicId:o,zipped:!1}),"cut"===w&&(t.clearClipboardData(),G.commit("setCopyMode","copy"));break;case T:if(k=await t.getMarkersFromClipboard(),!o&&x.length<=0)return!0;if(x.length>0)for(const e of x)oe(k,e);else o&&(o=o.topicId||o,oe(k,o));G.commit("setZippedStatus",{topicId:o,zipped:!1}),"cut"===w&&(t.clearClipboardData(),G.commit("setCopyMode","copy"));break;case E:if(k=await t.getTopicsFromClipboard(),!o&&x.length<=0)return!0;if(x.length>0){const e=ce(x[0]);if(!e||!e.parent||!e.parent())return!1;const t=e.parent(),o=e.getIndexInParent(),n=e.type();k.forEach((e=>e.id=(0,l.default)()));for(const e of k.reverse())t.addChildTopic(t.createTopic(e),{at:o,type:n});for(const e of x)ne(e);const i=k.pop().id;setTimeout((e=>G.commit("focus-"+id)),50,i)}else o&&(o=o.topicId||o,oe(k,o));G.commit("setZippedStatus",{topicId:o,zipped:!1}),"cut"===w&&(t.clearClipboardData(),G.commit("setCopyMode","copy"));break;case h:const s=p["text/x-array-json"][0];if(!(s&&s.content&&s.content.content))return;for(const e of G.state.selectionIds.length?G.state.selectionIds.length:[o]){ce(e).updateMathJaxInfo(s)}break;case A:const c=u.split(/([\r\n]+)/g).filter((e=>!e.match(/([\r\n]+)/g))).map((e=>e.trim())).filter(Boolean);if(I){const t=i(e),o=x[0],n=t.findComponentById(o),r=n.parent(),a=n.getIndexInParent(),s=n.type();x.forEach((e=>ne(e)));const d=c.shift(),u=(0,l.default)();r.addChildTopic(r.createTopic({id:u,title:d}),{at:a,type:s});const p=c.map((e=>({title:e,id:(0,l.default)()})));for(const{title:e,id:t}of p.reverse()){r.addChildTopic(r.createTopic({id:t,title:e}),{at:a+1,type:s})}}else{const t=(0,S.getTopicTextElementById)(o);if(!t)return;const[n,r]=(0,S.getSelectionRange)(t),a=(0,S.getTextElementContent)(t);if(c.length<=1){const e=(0,S.replaceRange)(a,n,r,u);de({topicId:o,title:e})}else{const t=a.slice(0,n)+c.shift();de({topicId:o,title:t});const s=c[c.length-1].length;c[c.length-1]+=a.slice(r);const d=c.map((e=>({title:e,id:(0,l.default)()}))),u=i(e).rootTopic();for(const{title:e,id:t}of d.reverse()){u.addChildTopic(u.createTopic({id:t,title:e}));pe({topicId:t,targetTopicId:o,refresh:!1})}setTimeout((()=>G.emit("focus-"+d.reverse().pop().id,s)),60)}}}setTimeout((()=>{G.commit("refreshSheet")}),50)},delete:se,duplicate:function(e=G.state.currentEditingTopicId){const t=Array.from(G.tidySelection());if(t.length>0)for(const e of t)le(e);else e&&le(e);G.commit("refreshSheet")},"outliner.delete":ne,"outliner.deleteWithDel":function(){return se({isDelKey:!0})},"outliner.getTopic":ce,"outliner.changeTopicTitle":de,"outliner.insertAsSubTopic":function({topicId:e,targetTopicId:t,refresh:o}){const n=ce(e),i=ce(t);if(!n||!i)return;n.parent().removeChildTopic({at:n.getIndexInParent(),type:n.type()}),i.addChildTopic(n,{type:Z.ATTACHED,at:0}),G.commit("setZippedStatus",{topicId:t,zipped:!1,canUndo:!1}),o&&G.commit("refreshSheet")},"outliner.insertEmptySubTopic":ue,"outliner.insertAfterTopic":pe,"outliner.insertBeforeTopic":function({topicId:e,targetTopicId:t,refresh:o}){const n=ce(e),i=ce(t);if(!n||!i)return;const r=i.parent();n.parent()&&n.parent().removeChildTopic({at:n.getIndexInParent(),type:n.type()});const a=i.getIndexInParent();r.addChildTopic(n,{type:i.type(),at:a}),G.commit("setZippedStatus",{topicId:r.getId(),zipped:!1,canUndo:!1}),o&&G.commit("refreshSheet")},"outliner.setRootTopic":he,"editor.showBranchOnly":()=>he({topicId:G.state.currentEditingTopicId}),"editor.exitBranchOnly":async()=>{const t=G.rootTopicId;await he({topicId:i(e).rootTopic().getId()}),await(0,h.sleep)(10),G.emit("focus-"+t),G.commit("addSelection",t)},"editor.toggleBranchOnly":()=>{he(G.rootTopicId!==i(e).rootTopic().getId()?{topicId:i(e).rootTopic().getId()}:{topicId:G.state.currentEditingTopicId})},"outliner.serRootTopicAsOriginal":()=>he({topicId:i(e).rootTopic().getId()}),"editor.showNotesEditor":function(e={}){const t=(e?e.topicId:null)||G.state.currentEditingTopicId||G.state.selectionIds[0],o=e?e.content:null;o&&o.length>0&&fe({topicId:t,notes:{plain:{content:o}}});G.commit("refreshSheet"),G.commit("showTopicNotes",t),G.commit("clearSelection")},"outliner.saveNotes":fe,"editor.removeNote":me,"outliner.removeNotes":function({topicId:e,refresh:t}){const o=ce(e);if(!o)return;o.changeNote(null),G.commit("hideTopicNotes",e),t&&G.commit("refreshSheet")},"editor.removeLabel":ve,"editor.removeMarker":ge,"editor.keepTextOnly":function(){me(!1),ve(!1),Ae(!1),ge(!1),Te(!1);(Array.from(G.tidySelection()).length||G.state.currentEditingTopicId)&&G.commit("refreshSheet")},"editor.addLocalImage":async function(t=G.state.currentEditingTopicId){t=t.topicId||t,t=(0,s.isString)(t)?t:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0];const o=e.getters["l10n/T"],{filePaths:n,canceled:i}=await r.remote.dialog.showOpenDialog(r.remote.getCurrentWindow(),{buttonLabel:o("Insert"),filters:[{name:"All",extensions:["png","apng","jpg","jpeg","jpe","jif","jfif","jfi","webp","gif","svg","xbm","xbm","dib","ico"]},{name:"PNG",extensions:["png","apng"]},{name:"JPG",extensions:["jpg","jpeg","jpe","jif","jfif","jfi"]},{name:"WebP",extensions:["webp"]},{name:"GIF",extensions:["gif"]},{name:"SVG",extensions:["svg"]},{name:"XBM",extensions:["xbm"]},{name:"BMP",extensions:["xbm","dib"]},{name:"ICO",extensions:["ico"]}]});if(i||!n||!n.length)return;let a=n[0];f.default.existsSync(a)&&f.default.readFile(a).then((o=>{let n="resources/"+(0,l.default)()+d.default.extname(a),i="xap:"+n;e.state.wd.manifestWrapper.value["file-entries"][n]={},f.default.writeFile(d.default.join(e.state.wd.tempStorage,n),o).then((()=>{be({topicId:t,src:i})}))}))},"editor.changeImage":e=>{const t=G.state.currentEditingTopicId;if(G.state.selectionIds.length>0)for(const t of G.state.selectionIds)be({topicId:t,src:e});else t&&be({topicId:t,src:e})},"outliner.addLocalImage":be,"outliner.addTopicImage":be,"outliner.removeTopicImage":function(e){const t=ce(e);if(!t)return;t.removeImage(),G.commit("hideTopicImage",e)},"outliner.resizeTopicImage":async function({topicId:t,width:o,height:n}){const i=ce(t);if(!i||!i.getImageModel())return;const r=i.getImageModel(),{src:a}=r.toJSON();if(!o||!n){const t=await(0,S.readImageOriginalSize)(await(t=>e.dispatch("wd/loadXap",t))(a));o=t.width;const i=(n=t.height)/o;o<C.IMAGE_DEFAULT_SIZE_LIMIT.MIN?(o=C.IMAGE_DEFAULT_SIZE_LIMIT.MIN,n=o*i):o>C.IMAGE_DEFAULT_SIZE_LIMIT.MAX&&(o=C.IMAGE_DEFAULT_SIZE_LIMIT.MAX,n=o*i)}r.resize({width:o,height:n}),G.emit("resizeTopicImage-"+t)},"editor.removeStickerOrImageOrEquation":Ae,"outliner.saveAsImage":function(e=G.state.currentEditingTopicId){Ee(e,"saveAsImage-")},"outliner.updateTopicLabels":ye,"editor.showLabelEditor":Ce,"outliner.showTopicLabelsPopover":Ce,"editor.addMarker":ke,"editor.addMarkerOne":()=>ke("priority-1"),"editor.addMarkerTwo":()=>ke("priority-2"),"editor.addMarkerThree":()=>ke("priority-3"),"editor.addMarkerFour":()=>ke("priority-4"),"editor.addMarkerFive":()=>ke("priority-5"),"editor.addMarkerSix":()=>ke("priority-6"),"editor.addMarkerSeven":()=>ke("priority-7"),"editor.deleteMarker":function(e){const t=G.state.currentEditingTopicId;if(!ce(t))return;we({topicId:t,markerId:e})},"outliner.changeHyperlink":xe,"editor.showTopiclinkEditor":async function(t=G.state.currentEditingTopicId){t=t.topicId||t;const o=ce(t=(0,s.isString)(t)?t:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0]);if(!o)return;const n="xmind:#",i=o&&o.get("href");let r=!1,a=null;i&&i.startsWith(n)&&(a=i.substr(n.length),r=!0);let l=A.default.route(m.EDITOR_GET_SHEETS_DATA,(()=>JSON.stringify(e.state.editor.sbEditorWrapper.value.model.sheets)));try{const{result:o}=await A.default.fetch(m.WINDOW_OPEN,{name:"dialog-topiclink",parentId:window.id,wait:!0,query:{_sheetsString:JSON.stringify(e.state.editor.sbEditorWrapper.value.model.get("sheets")),hasTopicLink:r,xmindObjectId:a}});if(l&&(l(),l=null),o&&"set"===o.action){const e=n+o.topicId;xe({topicId:t,link:e}),o.twoWay&&xe({topicId:o.topicId,link:n+t})}else o&&"remove"===o.action&&xe({topicId:t,link:""})}catch(e){console.error(e)}},"editor.showHyperlinkEditor":function(e=G.state.currentEditingTopicId){e=e.topicId||e,e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0];if(!ce(e))return;G.emit("showHyperlinkEditor-"+e)},"outliner.removeHyperlink":function(e=G.state.currentEditingTopicId){e=e.topicId||e,xe({topicId:e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0],link:""})},"editor.removeLink":Te,"editor.addAttachmentOnNewTopic":async function(t=G.state.currentEditingTopicId){t=t.topicId||t;const o=ce(t=(0,s.isString)(t)?t:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0]);if(!o)return;const n=e.getters["l10n/T"],{filePaths:i,canceled:c}=await r.remote.dialog.showOpenDialog(r.remote.getCurrentWindow(),{buttonLabel:n("Insert")});if(c||!i||!i.length)return;let u=i[0];if(f.default.existsSync(u)){const n=f.default.statSync(u);if(n.size>20*Math.pow(1024,2)){const t=e.getters["l10n/T"];(0,E.showMessageBox)({type:"warning",title:"XMind",detail:t("File size cannot exceed 20MB."),message:t("Insert Attachment Failed"),buttons:[t("OK")],defaultId:0,cancelId:0,noLink:!0})}else{const n=await f.default.readFile(u),i=(0,l.default)(),r=d.default.extname(u),s="resources/"+i+r,c="xap:"+s;e.state.wd.manifestWrapper.value["file-entries"][s]={};const p=u.substr(u.lastIndexOf(d.default.sep)+1);await f.default.writeFile(d.default.join(e.state.wd.tempStorage,s),n);const h=ue({topicId:t,title:p,index:o.children("attached").length,refresh:!0});await a.default.nextTick(),xe({topicId:h,link:c})}}},"editor.addFileLink":e=>Ie(e,!0),"editor.addFolderLink":e=>Ie(e,!1),"outliner.saveAsAttachment":function(e=G.state.currentEditingTopicId){Ee(e,"saveAsAttachment-")},"outline.clickAttachment":_e,"outliner.clickAttachmentWithSaveAs":e=>_e(e,!0),"editor.addAudioOnNewTopic":function(){e.commit("editor/AUDIO_BAR_MODE",{audioBarMode:"audio_record",audioAutoplay:!1}),(0,T.trackEvent)({eventCategory:"WorkBench",eventAction:"addRecordAudioBar"})},"outliner.changeAudioNotes":Be,"outliner.removeAudioNotes":function t({topicId:o,refresh:r,undo:a}){const s=ce(o);if(!s)return;const l=s.getAudioNotes();if(!l)return;a=a||!0;const c=n(e),d=c.getComponentViewById(o);if(c.execAction(j,{targets:[d]}),a){i(e).getUndo().push({name:"removeAudioNotes",undo:()=>Be({topicId:o,audioNotesData:l,refresh:!0,undo:!1}),redo:()=>t({topicId:o,refresh:r,undo:!1})})}G.emit("changeAudioNotes-"+o),r&&G.commit("refreshSheet")},"outliner.saveAsAudioNote":function(e=G.state.currentEditingTopicId){Ee(e,"saveAsAudioNote-")},"editor.toggleSheetBar":function(){const t=e.state.editor;t&&e.commit("editor/SHEET_BAR_VISIBLE",{isSheetBarVisible:!t.isSheetBarVisible})},"editor.zoomIn":function(){let t=e.getters["editor/outlinerZoomScaleForActiveSheet"];if(t>=300)return;let o=(0,b.nextZoomScaleForZoomIn)(t);t!==o&&e.commit("editor/updateOutlinerSheetStatus",{id:e.state.editor.activeSheetId,zoomScale:o})},"editor.zoomOut":function(){let t=e.getters["editor/outlinerZoomScaleForActiveSheet"];if(t<=80)return;let o=(0,b.nextZoomScaleForZoomOut)(t);t!==o&&e.commit("editor/updateOutlinerSheetStatus",{id:e.state.editor.activeSheetId,zoomScale:o})},"editor.resetZoom":function(){e.commit("editor/updateOutlinerSheetStatus",{id:e.state.editor.activeSheetId,zoomScale:100})},"outliner.focusTopic":function(e){if(!e)return;G.emit("focus-"+e)},"editor.selectTopicById":async({componentId:t})=>{G.commit("clearSelection");const o=n(e),i=o.model.sheets.findIndex((({id:e})=>e===o.currentSheetId));let r=-1;for(let e=0;e<o.model.sheets.length;e++){if(o.model.sheets[e].findComponentById(t)){r=e;break}}const a=e=>{G.emit("focus-"+e),G.commit("addSelection",e)};r>=0&&i!==r?(G.once("sheetSwitched",(()=>a(t))),e.commit(`${v.SHARED}/updateSheetRendering`,{sheetRendering:!0,sheetRenderingStartAt:(new Date).getTime()}),await(0,h.sleep)(100),o.switchTo(r)):a(t)},"outliner.addTopicSelection":e=>G.commit("addSelection",e),"outliner.removeTopicSelection":e=>G.commit("removeSelection",e),"outliner.clearSelection":e=>G.commit("clearSelection"),"outliner.resizeTopicEquation":function({topicId:t,width:o}){const i=n(e);if(!i)return;const r=i.getComponentViewById(t);if(!r)return;i.execAction(z,{targets:[r],newWidth:o,prue:!0}),G.emit("resizeTopicEquation-"+t)},"outliner.changeTopicEquation":function({topicId:t,mathJaxText:o}){const i=n(e);if(!i||!o)return;const r=i.getComponentViewById(t);if(!r)return;i.execAction(V,{targets:[r],mathJaxText:o,prue:!0}),G.emit("addTopicEquation-"+t),G.commit("hideTopicImage",t)},"outliner.removeTopicEquation":Oe,"outliner.updateTopicEquationInfo":function({topicId:t,mathJaxInfo:o}){const i=n(e);if(!i||!o||!o.content)return;const r=i.getComponentViewById(t);if(!r)return;r.model.updateMathJaxInfo(o),G.emit("addTopicEquation-"+t),G.commit("hideTopicImage",t)},"editor.showEquationEditor":function({topicId:e}={}){const t=e||G.state.currentEditingTopicId;if(!t)return;G.emit("showEquationEditor-"+t)},"outliner.saveAsEquation":function(e=G.state.currentEditingTopicId){Ee(e,"saveAsEquation-")},"outliner.deleteTopic":function({topicId:e=G.state.currentEditingTopicId}={}){if(e===G.rootTopicId)return;if("TOPIC"===G.state.selectionType){const t=Array.from(G.tidySelection()).reverse();if(!t.length&&e&&t.push(e),t.length>0){const e=t.reverse()[0],o=G.fullFlattenedSheet.findIndex((({id:t})=>t===e));for(const e of t)ne(e);G.commit("clearSelection"),G.commit("refreshSheet",!0),a.default.nextTick((()=>{let e;e=o>=1?(0,S.getTopicTextElementById)(G.fullFlattenedSheet[o-1].id):(0,S.getTopicTextElementById)(G.rootTopic.getId()),e&&e.focus()}))}}else e&&ne({topicId:e})},"outliner.moveCaretCharacterToAboveSiblingTopic":function({topicId:e=G.state.currentEditingTopicId}={}){const t=G.fullFlattenedSheet.filter((e=>e.show));if((0,y.hasPrevTopicInSameDepth)(t,e)){const o=(0,y.getPrevTopicInSameDepth)(t,e).id;if(!o)return;const n=(0,S.getTopicTextElementById)(o);if(!n)return;if((0,S.scrollToElement)(n),n.childNodes.length)(0,S.setCaretCharacterOffsetWithIn)(n,(0,S.getTextElementContent)(n).length);else{const e=document.createRange(),t=window.getSelection();e.setStart(n,0),e.setEnd(n,0),t.removeAllRanges(),t.addRange(e)}}},"outliner.moveCaretCharacterToBelowSiblingTopic":function({topicId:e=G.state.currentEditingTopicId}={}){const t=G.fullFlattenedSheet.filter((e=>e.show));if((0,y.hasNextTopicInSameDepth)(t,e)){const o=(0,y.getNextTopicInSameDepth)(t,e).id;if(!o)return;const n=(0,S.getTopicTextElementById)(o);if(!n)return;if((0,S.scrollToElement)(n),n.childNodes.length)(0,S.setCaretCharacterOffsetWithIn)(n,(0,S.getTextElementContent)(n).length);else{const e=document.createRange(),t=window.getSelection();e.setStart(n,0),e.setEnd(n,0),t.removeAllRanges(),t.addRange(e)}}},"outliner.moveCaretCharacterToBeginning":function({topicId:e=G.state.currentEditingTopicId}={}){const t=(0,S.getTopicTextElementById)(e);if(!t)return;(0,S.setCaretCharacterOffsetWithIn)(t,0)},"outliner.moveCaretCharacterToEnd":function({topicId:e=G.state.currentEditingTopicId}={}){const t=(0,S.getTopicTextElementById)(e);if(!t)return;(0,S.setCaretCharacterOffsetWithIn)(t,(0,S.getTextElementContent)(t).length)},"editor.enterLineBreak":async function(){document.execCommand("insertText",!1,"\n")},"editor.toggleBranchLevelOne":()=>Me(1),"editor.toggleBranchLevelTwo":()=>Me(2),"editor.toggleBranchLevelThree":()=>Me(3),"editor.toggleBranchLevelFour":()=>Me(4),"editor.toggleBranchLevelFive":()=>Me(5),"editor.toggleBranchLevelSix":()=>Me(6),"editor.toggleBranchLevelSeven":()=>Me(7),"editor.toggleBranchLevelEight":()=>Me(8),"editor.toggleBranchLevelNine":()=>Me(9)};return Object.keys(u).filter((e=>"outliner.changeTopicTitle"!==e&&"delete"!==e&&"outliner.saveNotes"!==e&&"paste"!==e&&"outliner.focusTopic"!==e)).concat(["workbench.mapMode"]).forEach((t=>{e.appendBeforeHandler(t,(async()=>{if(e.state[v.SHARED].editorMode===g.EDITOR_MODE_SNOWBRUSH)return;if(e.state[v.SHARED].contexts["focus.outlinerNotes"]&&"undo"!==t&&"redo"!==t){const e=G.state.currentEditingTopicId;G.emit("saveTopicNotes-"+e),await new Promise((t=>G.once("savedTopicNotes-"+e,(()=>{t()}))))}const o=G.state.currentEditingTopicId;if(!o)return;const n=ce(o);if(!n)return;const i=(0,S.getTopicTextElementById)(o);if(!i)return;let r=(0,S.getTextElementContent)(i);r!==n.getTitle()&&(de({topicId:o,title:r}),await a.default.nextTick())}))})),u;async function _(t){const o=n(e),r=e.getters["l10n/T"],s=o.getCurrentSheetEditor(),l=s.model.id;if(!t||Array.isArray(t)){const e=s.model.theme()||null,n=e&&e.getColorThemeId(),i=e&&e.getSkeletonThemeId(),a=await(0,w.getSheetTemplate)({colorTheme:n,skeleton:i,$T:(...e)=>r(...e)});if(!a)return;const l=JSON.parse(JSON.stringify(a));n||i||(l.theme=e?e.toJSON():{});const c=o.model.sheets.length;t={sheetId:l.id,sheetData:l,options:{title:r("Map $1",c),at:c}}}let{sheetId:c,sheetData:d,options:u}=t,{title:p,at:h}=u||{};const f=x.default.cloneSheet(d);(0,T.trackEvent)({eventCategory:"Command",eventAction:"addSheet"}),h=h||o.model.sheets.length,p=p||r("Map $1",h),f.title=p,o.execAction(L,{sheetId:f.id,sheetData:f,options:{title:p,at:h}}),await a.default.nextTick(),o.switchTo(h);i(e).getUndo().push({name:"addNewSheet",undo:async()=>{o.execAction(R,{sheetId:f.id});const e=o.model.sheets.findIndex((e=>e.id===l));await a.default.nextTick(),o.switchTo(e)},redo:()=>{_(t)}})}function B(t){t=t.sheetId||t;const o=n(e),r=o.model.sheets,a=o.getCurrentSheetEditor().model.id,s=r.find((e=>e.id===t));if(!s)return;const l=s.toJSON(),c=r.findIndex((e=>e.id===t));o.execAction(R,{sheetId:t}),a===t&&o.switchTo(c-1);i(e).getUndo().push({name:"removeSheet",undo:()=>{_({sheetId:l.id,sheetData:l,options:{title:l.title,at:c}})},redo:()=>{B(t)}})}function O(e,t,o=""){let n=o;if(""===n){const o=(0,y.getPrevSiblingTopic)(e,t);if(!o)return;n=o.id}if(e.findIndex((e=>e.id===t))<=0)return;const i=ce(t);if(!i)return;const r=ce(n);if(!r)return;return i.parent().removeChildTopic({at:i.getIndexInParent(),type:i.type()}),r.addChildTopic(i),G.zipStatus.indexOf(n)>=0&&G.commit("setZippedStatus",{topicId:n,zipped:!1}),n}function N(e=G.state.currentEditingTopicId){const t=G.fullFlattenedSheet,o=Array.from(G.tidySelection());if(o.length>0){let e="";for(const n of o)if(e=O(t,n,e),!e)break;G.emit("focus-"+o[0])}else if(e){e=e.topicId||e,e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0];const o=(0,S.getTopicTextElementById)(e),n=o?(0,S.getCaretCharacterOffsetWithin)(o):0;O(t,e),setTimeout((()=>{o?(0,S.setCaretCharacterOffsetWithIn)(o,n):G.emit("focus-"+e)}),100)}G.commit("refreshSheet")}function D(t){const o=ce(t);if(!o)return;n(e).getCurrentSheetEditor().model;const i=G.rootTopicId;if(t===i||o.parent().getId()===i)return;let r=!1,a=o.parent();do{r="detached"===a.type(),a=a.parent()}while(a.getId()!==i);const s=o.parent(),l=s.parent(),c=s.getIndexInParent()+1;r&&l.getId()!==i&&(r=!1),s.removeChildTopic({at:o.getIndexInParent(),type:o.type()}),l.addChildTopic(o,{type:r?"detached":"attached",at:c});const d=l.getId();G.zipStatus.indexOf(d)>=0&&G.commit("setZippedStatus",{topicId:d,zipped:!1})}async function P(e=G.state.currentEditingTopicId){const t=Array.from(G.tidySelection());if(t.length>0){for(const e of t.reverse())D(e);e=t[0]}else e&&(e=e.topicId||e,D(e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0]));const o=(0,S.getTopicTextElementById)(e),n=o?(0,S.getCaretCharacterOffsetWithin)(o):-1;G.commit("refreshSheet"),await a.default.nextTick(),G.emit("focus-"+e,n)}function X(){const e=G.fullFlattenedSheet;for(const t of e)G.commit("addSelection",t.id)}function K(e=G.state.currentEditingTopicId){if(!ce(e))return;const t=G.fullFlattenedSheet;(0,y.hasChildTopics)(t,e)&&G.commit("setZippedStatus",{topicId:e,zipped:!0})}function J(e=G.state.currentEditingTopicId){if(!ce(e))return;const t=G.fullFlattenedSheet;(0,y.hasChildTopics)(t,e)&&G.commit("setZippedStatus",{topicId:e,zipped:!1})}function Q(e,t="fold"){"fold"===t?K(e):J(e)}function ee(){G.commit("setSelectionType","TOPIC"),a.default.nextTick((()=>{const{exportPdfDialog:t}=o(5289);t(e)}))}function te(o=G.state.currentEditingTopicId){if(e.state[v.SHARED].contexts["focus.input"])return document.execCommand("copy"),void i(e).getUndo().add({undo:()=>document.execCommand("undo"),redo:()=>document.execCommand("redo")});t.ready||t.init(e);let n=null;switch(G.state.selectionType){case"TOPIC":const e=G.tidySelection();if(e.length>0){const o=e.map((e=>ce(e)));return t.writeTopicToClipboard(o),e}if(o){o=o.topicId||o,o=(0,s.isString)(o)?o:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0];const e=(0,S.getTopicTextElementById)(o);if(!e)return!0;if((0,S.getSelectionLength)(e)>0)return t.clearClipboardData(),document.execCommand("copy");if(n=ce(o),!n)return;return t.writeTopicToClipboard([n]),[o]}break;case"IMAGE":if(!G.state.currentEditingTopicId)return!0;if(n=ce(G.state.currentEditingTopicId),!n)return!0;const i=n.getImageModel();return!i||(t.writeImagesToClipboard([i.toJSON()]),[n.getId()]);case"MARKER":if(!G.state.currentEditingTopicId)return!0;if(n=ce(G.state.currentEditingTopicId),!n)return!0;const r=[G.state.selectedItemInfo];return t.writeMarkersToClipboard(r),{topicIds:[n.getId()],markerIds:r};case"LABEL":break;case"EQUATION":if(!G.state.currentEditingTopicId)return!0;n=ce(G.state.currentEditingTopicId);const a=n.getImageData(),l=n.getMathJaxInfo();return!n||(t.writeEquationsToClipboard([l],[a]),[n.getId()])}return!0}async function oe(e,o){const n=ce(o);if(!n)return;switch(await t.getClipboardDataType()){case"branch":const t=e.map((function e(t){if(t.id=(0,l.default)(),t.children&&Object.keys(t.children).length>0)for(const o of Object.keys(t.children))t.children[o]=t.children[o].map(e);return t})),i=(n.parent(),n.children("attached").length);let r=t[t.length-1],a=r.id,s=r.title.length,c=r.children&&Object.keys(r.children).length>0;for(;c;){const e=r.children.attached;r=e[e.length-1],a=r.id,s=r.title.length,c=r.children&&Object.keys(r.children).length>0}for(const e of t.reverse())n.addChildTopic(n.createTopic(e),{type:"attached",at:i});setTimeout(((e,t)=>G.emit("focus-"+e,t)),50,a,s);break;case"image":for(const t of e)be(M({topicId:o},t));break;case"marker":for(const t of e)Se({topicId:o,markerId:t})}}function ne(e){let t=!1;const o=ce(e=e.topicId?(t=!0,e.topicId):e);o&&(o.parent().removeChildTopic({at:o.getIndexInParent(),type:o.type()}),t&&G.commit("refreshSheet",!1),G.commit("clearSelection"))}function ie(e,t,o){const n=e.slice(0,o).match(/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*$/);if(!n)return;let i=n[0];return"()[]{}+-.*?^$|\\".indexOf(i)>=0&&(i="\\"+i),e.slice(0,o).replace(new RegExp(i+"$"),"")+e.slice(o)}function re(e,t,o){const n=e.slice(o).match(/^\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/);if(!n)return;let i=n[0];return"()[]{}+-.*?^$|\\".indexOf(i)>=0&&(i="\\"+i),e.slice(0,t)+e.slice(o).replace(new RegExp("^"+i),"")}function ae(t){return function(o){const n=(0,S.getTopicTextElementById)(o.getId()),[r,a]=(0,S.getSelectionRange)(n),s=o.get("title");let l=s;l=r===a?t(s,r,a):(0,S.replaceRange)(s,r,a,""),de({topicId:o.getId(),title:l,focus:!0,silent:!1});i(e).getUndo().push({name:"backspace",undo:()=>{de({topicId:o.getId(),title:s,focus:!0,silent:!1})},redo:()=>{de({topicId:o.getId(),title:l,focus:!0,silent:!1})}})}}function se({isDelKey:t=!1,topicId:o=G.state.currentEditingTopicId,skipBackspace:n=!1}={}){const i=ae(t?re:ie);o=o.topicId||o;const r=ce(o=(0,s.isString)(o)?o:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0]);if(!n&&e.state[v.SHARED].contexts["focus.input"])return i(r);switch(G.state.selectionType){case"TOPIC":case"":const e=Array.from(G.tidySelection()).reverse();if(e.length>0){for(const t of e)ne(t);G.commit("clearSelection");const t=e.reverse()[0],o=G.fullFlattenedSheet.findIndex((({id:e})=>e===t));a.default.nextTick((()=>{let e;e=o>=1?(0,S.getTopicTextElementById)(G.fullFlattenedSheet[o-1].id):(0,S.getTopicTextElementById)(G.rootTopic.getId()),e&&e.focus()}))}else if(o){if(!r)return;const e=(0,S.getTopicTextElementById)(r.getId());if(!e)return;const n=(0,S.getCaretCharacterOffsetWithin)(e),a=(0,S.getTextElementContent)(e);if(t){const e=(0,S.getTopicTextElementById)(r.getId()),[t,o]=(0,S.getSelectionRange)(e);if(t===o&&a.length===n)return;if(0===n)return i(r)}if(a.length>0&&n>0)return i(r);const s=r.getMarkersData(),l=s.length>0;if(0===n&&l)return we({topicId:o,markerId:s[s.length-1].toJSON().markerId});const c=r.getId()!==G.rootTopicId?r.getIndexInParent():-1;if(0===c){if(r.parent().getId()===G.originalRootTopicId&&(0,y.hasNextSibling)(G.fullFlattenedSheet))return i(r);if(a.length<=0){const e=r.parent().getId();return r.parent().removeChildTopic({at:r.getIndexInParent(),type:r.type()}),G.commit("refreshSheet"),void setTimeout((()=>{const t=(0,S.getTopicTextElementById)(e);t&&(0,S.setCaretCharacterOffsetWithIn)(t,(0,S.getTextElementContent)(t).length)}),100)}return}if(-1===c){if(0===n)return;return i(r)}const d=r.parent().children(r.type())[c-1];if(d.children(d.type()).length>0&&(a.length>0||r.children(r.type()).length>0))return;if(d.children(d.type()).length>0&&a.length<=0&&r.children(r.type()).length<=0){const e=G.fullFlattenedSheet[G.fullFlattenedSheet.findIndex((({id:e})=>e===o))-1].id;return ne(o),G.commit("refreshSheet"),void G.emit("focus-"+e)}const u=(0,S.getTextElementContent)((0,S.getTopicTextElementById)(r.getId()));u!==r.getTitle()&&de({topicId:r.getId(),title:u});const p=d.getTitle()+r.getTitle(),h=d.getTitle().length;de({topicId:d.getId(),title:p}),setTimeout((()=>{const e=(0,S.getTopicTextElementById)(d.getId());e&&((0,S.getTextElementContent)(e).length>=h&&0!==h?(0,S.setCaretCharacterOffsetWithIn)(e,h):e.focus())}),100);const f=r.children(r.type());let m=-1;for(const e of f)d.addChildTopic(d.createTopic(e.toJSON()),{type:e.type(),at:++m});r.parent().removeChildTopic({at:r.getIndexInParent(),type:r.type()})}break;case"IMAGE":if(!r)return;r.removeImage(),G.commit("hideTopicImage",o);break;case"HYPERLINK":xe({topicId:o,link:""});break;case"LABEL":const n=G.state.selectedItemInfo;if(!r)return;const s=r.getLabel().split(",");ye({topicId:o,labels:s.filter((e=>e.trim()!==n))});break;case"MARKER":const l=G.state.selectedItemInfo;if(!r)return;we({topicId:o,markerId:l});break;case"EQUATION":Oe({topicId:o})}G.commit("setSelectionType","TOPIC"),G.commit("refreshSheet")}function le(e){const t=ce(e);if(!t)return;const o=t.parent(),n=t.getIndexInParent()+1,i=function e(t){if(t.id=(0,l.default)(),t.children&&Object.keys(t.children).length>0)for(const o of Object.keys(t.children))t.children[o]=t.children[o].map(e);return t}(t.toJSON());o.addChildTopic(o.createTopic(i),{type:t.type(),at:n})}function ce(t){return i(e).findComponentById(t)}function de({topicId:e,title:t,focus:o,silent:n}){const i=ce(e);i&&(n=!(0,p.isUndefined)(n)&&n,o=!!(0,p.isUndefined)(o)||o,i.changeTitle(t),n||G.emit("changeTopicTitle-"+e,t,o))}function ue({topicId:e,newTopicId:t,title:o,index:n,type:i,refresh:r}){o=o||"";const s=ce(e);if(!s)return;n=n||0,i="root"!==(i=i||s.type())?i:"attached",t=t||(0,l.default)();const c=s.createTopic({id:t,title:o});return s.addChildTopic(c,{type:i,at:n}),r&&(G.commit("refreshSheet"),a.default.nextTick((()=>{const e=(0,S.getTopicTextElementById)(c.getId());e&&((0,S.scrollToElement)(e),e.focus())}))),t}function pe({topicId:e,targetTopicId:t,refresh:o}){const n=ce(e),i=ce(t);if(!n||!i)return;const r=i.parent();if(n.parent().removeChildTopic({at:n.getIndexInParent(),type:n.type()}),i.isRootTopic())i.addChildTopic(n,{type:n.type(),at:0});else{const e=i.getIndexInParent()+1;r.addChildTopic(n,{type:i.type(),at:e}),G.commit("setZippedStatus",{topicId:r.getId(),zipped:!1,canUndo:!1})}o&&G.commit("refreshSheet")}function he({topicId:e}){const t=ce(e);t&&(G.commit("setRootTopic",t),G.commit("refreshSheet"),G.commit("clearSelection"))}function fe(e={}){const t=(e?e.topicId:null)||G.state.currentEditingTopicId||G.state.selectionIds[0],{notes:o,refresh:n}=e||{},i=ce(t);i&&(i.changeNote(o),n&&G.commit("refreshSheet"))}function me(e=!0){const t=Array.from(G.tidySelection());if(!t.length){const e=G.state.currentEditingTopicId;if(!e)return;t.push(e)}t.forEach((e=>{const t=ce(e);t&&(t.changeNote(null),G.commit("hideTopicNotes",e))})),t.length&&e&&G.commit("refreshSheet")}function ge(e=!0){const t=Array.from(G.tidySelection());if(!t.length){const e=G.state.currentEditingTopicId;if(!e)return;t.push(e)}t.forEach((e=>{const t=ce(e);if(!t)return;t.getMarkersData().map((e=>e.get("markerId"))).forEach((e=>t.removeMarker({markerId:e}))),G.emit("removeMarker-"+e)})),t.length&&e&&G.commit("refreshSheet")}function ve(e=!0){const t=Array.from(G.tidySelection());if(!t.length){const e=G.state.currentEditingTopicId;if(!e)return;t.push(e)}t.forEach((e=>{const t=ce(e);t&&t.changeLabel("")})),t.length&&e&&G.commit("refreshSheet")}function be({topicId:t,src:o,width:n,height:r},a=!0){const s=ce(t);if(!s)return;const l=s.getImageModel();i(e).getUndo();l&&s.removeImage(),s.addImage({type:"image",src:o,width:n,height:r}),G.commit("hideTopicEquation",t),G.commit("showTopicImage",t),G.emit("addTopicImage-"+t)}function Ae(e=!0){const t=Array.from(G.tidySelection());if(!t.length){const e=G.state.currentEditingTopicId;if(!e)return;t.push(e)}t.forEach((e=>{const t=ce(e);t&&(t._imageModel&&(t.removeImage(),G.commit("hideTopicImage",e)),Oe({topicId:e}))})),t.length&&e&&G.commit("refreshSheet")}function Ee(e,t){e=e.topicId||e;ce(e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0])&&G.emit(t+e)}function Te(t=!0){const o=n(e),i=Array.from(G.tidySelection());if(!i.length){const e=G.state.currentEditingTopicId;if(!e)return;i.push(e)}i.forEach((e=>{if(!ce(e))return;const t=o.getComponentViewById(e);o.execAction($,{link:"",targets:[t]}),G.emit("updateTopicHyperlink-"+e)})),i.length&&t&&G.commit("refreshSheet")}function ye({topicId:e,labels:t}){const o=ce(e);o&&(o.changeLabel(t.join(",")),G.emit("updateTopicLabels-"+e,t))}function Ce(e=G.state.currentEditingTopicId){e=e.topicId||e,e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0],G.emit("showTopicLabelsPopover-"+e)}function Se({topicId:t,markerId:o}){const i=n(e),r=i.getComponentViewById(t);i.execAction(F,{targets:[r],markerId:o}),G.emit("changeMarker-"+t)}function ke(e){const t=G.state.currentEditingTopicId;if(G.state.selectionIds.length>0)for(const t of G.state.selectionIds)Se({topicId:t,markerId:e});else if(t)return Se({topicId:t,markerId:e})}function we({topicId:t,markerId:o}){const i=n(e),r=i.getComponentViewById(t);i.execAction(W,{targets:[r],markerId:o}),G.emit("removeMarker-"+t)}async function xe({topicId:t,link:o}){const i=n(e),r=i.getComponentViewById(t);i.execAction($,{link:o,targets:[r]}),await a.default.nextTick(),G.emit("updateTopicHyperlink-"+t)}async function Ie(t=G.state.currentEditingTopicId,o){t=t.topicId||t;if(!ce(t=(0,s.isString)(t)?t:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0]))return;const n=e.getters["l10n/T"],i=o?["openFile"]:["openDirectory"],{filePaths:a,bookmarks:l,canceled:c}=await r.remote.dialog.showOpenDialog(r.remote.getCurrentWindow(),{properties:i,buttonLabel:n("Insert"),securityScopedBookmarks:!0});if(c||!a||!a.length)return;const d=a[0];if(f.default.existsSync(d)){if(l&&l.length===a.length)for(let e=0;e<a.length;e++){const t=a[e],o=l[e];t&&o&&await fs.bindBookmark({fp:t,bookmark:o})}xe({topicId:t,link:"file://"+d})}}function _e(e=G.state.currentEditingTopicId,t=!1){e=e.topicId||e;ce(e=(0,s.isString)(e)?e:q.state.targetTopicId||G.state.currentEditingTopicId||G.tidySelection()[0])&&G.emit("clickAttachment-"+e,t)}function Be({topicId:t,audioNotesData:o,refresh:r,undo:a}){const s=ce(t);if(!s)return;const l=s.getAudioNotes();a=a||!0;const c=n(e),d=c.getComponentViewById(t);if(c.execAction(U,{targets:[d],audioNotesData:o}),a){i(e).getUndo().push({name:"changeAudioNotes",undo:()=>Be({topicId:t,audioNotesData:l,refresh:!0,undo:!1}),redo:()=>Be({topicId:t,audioNotesData:o,refresh:r,undo:!1})})}G.emit("changeAudioNotes-"+t),r&&G.commit("refreshSheet")}function Oe({topicId:t}){const o=n(e);if(!o)return;const i=o.getComponentViewById(t);if(!i)return;const r=i&&i.topicView;if(!r)return;const a=r.mathJaxView;a&&(o.execAction(Y,{targets:[a],prue:!0}),G.emit("hideTopicEquation-"+t))}function Me(e){if(Array.isArray(G.state.selectionIds)&&G.state.selectionIds.length>1)return;const t=G.tidySelection();if(t.length||t.push(G.state.currentEditingTopicId),!t.length)return;const o=G.fullFlattenedSheet.filter((e=>t.includes(e.id)));o.length>1||o.forEach((t=>{const{fullFlattenedSheet:o,zipStatus:n}=G,i=(0,y.getAllChildren)(o,t.id);let r=i.filter((o=>o.depth-t.depth===e));r=r.concat(i.filter((o=>!i.find((e=>e.parent===o.id))&&o.depth-t.depth<e)));const a=r.every((e=>n.find((t=>t===e.id))));for(const e of r){if(!e.show){const t=[];let o=e.parent;for(;o;){const e=i.find((e=>e.id===o));if(!e)break;n.find((e=>e===o))&&t.push(o),o=e.parent||null}t.reverse().forEach((e=>{Q(e,"unfold")}))}a||Q(e.id,"fold")}}))}}},75099:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(30632),r=n(o(43528));t.default=e=>{const t=`editor/${window.editorId}/mindmap`,o=(0,i.evaluateSnowbrushActionFn)(e),n=[];return Object.keys(r.default).forEach((a=>{const s=r.default[a],l=e.state.editor.sbEditorCreated&&o(a,"!snowbrush.inEditTitleMode");!l&&s.deactivatedWhenDisabled||n.push({id:a,enabled:l,provider:t,enabledFn:e=>{const t=o(a);return e?(0,i.evaluateEnabledStatePriorityFn)(t):t}})})),n}},8045:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(43528)),r=n(o(61027));t.default=e=>{let t={};return Object.keys(i.default).forEach((o=>{t[o]=t=>{const n=e.state.editor.sbEditorWrapper.value;if(!n)return;let a,s=i.default[o];const l=n.getCurrentSheetEditor();a=l&&l.getModule(r.default.constant.MODULE_NAME.SELECTION).getSelections(),n.execAction.apply(n,[s.actionId,Object.assign({},t,s.args,{targets:a})])}})),t}},30632:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateEnabledStatePriorityFn=t.evaluateFn=t.evaluateSnowbrushActionFn=void 0;var i=o(67487),r=o(90336),a=n(o(43528));t.evaluateSnowbrushActionFn=e=>{const t=s(e);return(e,o)=>{let n=a.default[e];if(n){let e=n.expr;return e=e?`(${e})&selection`:e,o&&(e=e?`(${e})&(${o})`:o),t(e)}return!1}};const s=e=>(t,o)=>(0,i.evaluate)({contexts:e.getters[`${r.SHARED}/aggregatedContexts`],expr:t,testFn:o});t.evaluateFn=s;const l=i.evaluateEnabledStatePriority;t.evaluateEnabledStatePriorityFn=l},72094:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(99492),r=n(o(24678)),a=n(o(84947)),s=n(o(55616)),l=n(o(94294)),c=n(o(52982)),d=n(o(59756)),u=n(o(8045)),p=n(o(11088));t.default=(e,t)=>{const o=`editor/${window.editorId}`,n=`editor/${window.editorId}/outliner`,h=`editor/${window.editorId}/mindmap`,f=`editor/${window.editorId}/mindmap/snowbrush`,m=`editor/${window.editorId}/mindmap/beginnerMode`,g=`editor/${window.editorId}/mindmap/editTitleMode`,v=`editor/${window.editorId}/popover`,b=`editor/${window.editorId}/mapShot`,A={[o]:(0,a.default)(e),[h]:(0,s.default)(e),[n]:(0,l.default)(e),[f]:(0,u.default)(e),[m]:(0,d.default)(e),[g]:(0,c.default)(e),[v]:[],[b]:(0,p.default)(e)},E=[];return Object.keys(A).forEach((t=>{E.push(r.default.route((0,i.COMMAND_HANDLE_WITH_PROVIDER)(t),(({commandId:t,handlerArgs:o})=>e.doHandleCommand(t,o))))})),e.watch((()=>t()),(t=>{Object.keys(t).forEach((t=>{t in A||(A[t]=[],E.push(r.default.route((0,i.COMMAND_HANDLE_WITH_PROVIDER)(t),(({commandId:t,handlerArgs:o})=>e.doHandleCommand(t,o)))))}))})),e.watch((()=>window.isBeingDestroyed),(e=>{e&&E.forEach((e=>e()))}),{sync:!0}),A}},28700:(e,t,o)=>{"use strict";var n=o(95318);t.Z=void 0;var i=n(o(59713)),r=n(o(20144)),a=o(99492),s=o(90336),l=n(o(24678)),c=n(o(81946)),d=n(o(72094)),u=o(30632);function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e,t){const o={};return Object.keys(e).concat(Object.keys(t)).forEach((n=>{o[n]=Object.assign({},e[n],t[n])})),o}t.Z=()=>e=>{const t=r.default.observable({__changed_trigger__:1}),o=r.default.observable({__changed_trigger__:1});e.registerCommands=e=>{Array.isArray(e)&&e.forEach((e=>{const n=e.id,i=e.provider,r=e.handler,a=!(r||m[i]&&m[i][n]);n&&i&&!a&&((e.enabledExpr||e.enabledFn)&&(t[i]=t[i]||{},t[i][n]=e),r&&(o[i]=o[i]||{},o[i][n]=r,m=h(f,o)),t.__changed_trigger__=t.__changed_trigger__+1,o.__changed_trigger__=o.__changed_trigger__+1)}))},e.unregisterCommands=e=>{Array.isArray(e)&&(e.forEach((({id:e,provider:n})=>{n in t&&delete t[n][e],n in o&&delete o[n][e]})),m=h(f,o),t.__changed_trigger__=t.__changed_trigger__+1,o.__changed_trigger__=o.__changed_trigger__+1)};const n=(0,u.evaluateFn)(e);(0,c.default)(e,(()=>{const e={__changed_trigger__:t.__changed_trigger__};return Object.keys(t).forEach((o=>{const i=t[o];e[o]=[],Object.keys(i).forEach((t=>{const r=i[t],a={id:r.id,provider:r.provider,enabled:n(r.enabledExpr,r.enabledFn)};e[o].push(a)}))})),e}));const f=(0,d.default)(e,(()=>{const e=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},o);return delete e.__changed_trigger__,e}));let m=f;e.doHandleCommand=(t,o)=>{const n=e.getters[`${s.SHARED}/commandById`](t);let i=o&&o.provider||n&&n.provider;if(!(i in m))return l.default.fetch(a.COMMAND_HANDLE_WITH_COMPUTED_PROVIDER,{commandId:t,handlerArgs:o}),"interruption";{const e=m[i][t];if(!e)throw new Error(`Command (${t}) can't be handled by command provider (${i})`);n&&("function"==typeof n.enabledFn?n.enabledFn(!0):n.enabled)&&e(o)}}}},47806:(e,t,o)=>{"use strict";var n=o(95318);t.Z=void 0;var i=o(90336),r=n(o(17971));t.Z=()=>e=>{e.watch((()=>e.state.editor.sbEditorCreated),(t=>{if(!t)return;let o=e.state.editor.sbEditorWrapper.value;(0,r.default)(o,e),"true"===new URLSearchParams(window.location.search).get("isDirty")&&e.dispatch("wd/setDirty",!0)}),{sync:!0}),e.watch((()=>e.state.editor.isBeginnerModeVisible),(t=>{e.dispatch(`${i.SHARED}/updateContexts`,{"editor.inBeginnerMode":t})})),e.watch((()=>e.getters[`${i.SHARED}/aggregatedContexts`]["snowbrush.inBranchOnly"]),(t=>{e.commit("editor/BRANCH_ONLY_MODE",{isBranchOnlyMode:t})}))}},40528:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(90336);t.default=()=>e=>{e.watch((()=>e.state.wd.title),(t=>{e.commit(`${n.SHARED}/setTitle`,{title:t})})),e.watch((()=>e.state.wd.isDirty),(t=>{e.commit(`${n.SHARED}/setDirty`,{isDirty:t})})),e.watch((()=>e.state.wd.saving),(t=>{e.commit(`${n.SHARED}/setSaving`,{saving:t})})),e.watch((()=>e.state.wd.openEvent),(t=>{"postopen"===t&&e.watch(((e,t)=>t[`${n.EDITOR_OWNERSHIP}/editorToFrame`][window.editorId]),(t=>{t&&e.dispatch("wd/updateMemento",{forceUpdate:!1})}),{immediate:!0})})),e.watch((()=>e.state[n.SHARED].targetTheme),(t=>{if(t&&e.execSnowbrushAction){const o=t.themeData,n=t.skeletonThemeData,i=t.colorThemeData;i&&i.theme.id&&e.commit("theme/appendRecentlyUsedColorTheme",i.theme.id),e.execSnowbrushAction({commandId:"editor.changeTheme",args:{themeData:o,skeletonThemeData:n,colorThemeData:i,options:{toFixUserStyle:!0}}})}}))}},6194:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(20144)),r=o(36414),a=o(90336);const s="focusContextsGroup",l="focusedElementTag",c="focusTrigger",d="focusNoEffect",u="cannotGetFocusByMouse";t.default=()=>e=>{let t=!1,o=!0;function n(){let t=e.state.focus.lastFocusedElementTag;const o=document.querySelector(`[focusedElementTag="${t}"]`);return!document.activeElement||document.activeElement===document.body||document.activeElement.getAttribute(c)===u||!document.contains(o)}document.body.setAttribute("tabindex","-1"),document.addEventListener("focus",(i=>{if(!i.target||!i.target.getAttribute(d)){if(o=!1,t){let t=(0,r.UUID)();i.target.setAttribute(l,t),e.commit("focus/updateLastFocusedElementTag",t)}else{if(i.target&&i.target.getAttribute(c)===u||i.target===document.body)setTimeout((()=>{const t=e.state.focus.lastFocusedElementTag,o=document.querySelector(`[focusedElementTag="${t}"]`);o&&o.focus({preventScroll:!0}),n()&&e.commit("focus/updateLastFocusedElementTag",null)}),10);else{let t=(0,r.UUID)();i.target.setAttribute(l,t),e.commit("focus/updateLastFocusedElementTag",t)}}for(let e of i.path){if(e===document.body)break;const t=e&&e.updateFocusContextsFn;if(t&&t(!0),e&&e.getAttribute(s))break}}}),!0),document.addEventListener("blur",(i=>{if(i.target&&i.target.getAttribute(d))return;o=!0;let r=e.state.focus.lastFocusedElementTag;const a=document.querySelector(`[focusedElementTag="${r}"]`);if(document.hasFocus()||document.activeElement!==a){for(let e of i.path){if(e===document.body)break;const t=e&&e.updateFocusContextsFn;if(t&&t(!1),e&&e.getAttribute(s))break}t||setTimeout((()=>{if(o){const t=e.state.focus.lastFocusedElementTag,o=document.querySelector(`[focusedElementTag="${t}"]`);o&&o.focus({preventScroll:!0}),n()&&e.commit("focus/updateLastFocusedElementTag",null)}}),10)}}),!0),document.addEventListener("keydown",(e=>{t=9===e.keyCode}),!0),document.addEventListener("mousedown",(()=>{t=!1}),!0),document.addEventListener("keyup",(()=>{t=!1}),!0),i.default.directive("focus-contexts",{bind(t,o){let n=o.value,i=o.arg;"group"===i?t.setAttribute(s,(0,r.UUID)()):"no"===i?t.setAttribute(c,u):"no-effect"===i&&t.setAttribute(d,!0),n&&Array.isArray(n)&&(t.updateFocusContextsFn=t=>{const o={};n.forEach((e=>{o[e]=!!t})),e.dispatch(`${a.SHARED}/updateContexts`,o)})}})}},93262:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=()=>e=>{e.watch((()=>e.state.workbench.workbenchContentToShow),(t=>{if(!t)return;const n=o(28700).Z,i=o(47806).Z,r=o(90608).Z,a=o(74282).Z;i()(e),n()(e),r()(e),a()(e)}))}},76966:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(90336);function i(e){const t=e.state.notification.tempEvents,o=Object.keys(t);return 0!==o.length&&(function(e){if(e.state.windows.focusedWinStoreModuleName!==`window-${window.id}`)return!1;if(e.state[n.SHARED].zenMode||e.state.editor.isBeginnerModeVisible)return!1;return!0}(e)&&setTimeout((()=>{!function(e,t){e.commit("notification/setCurrentPromotion",t)}(e,t[o[0]])}),5e3),!0)}t.default=()=>e=>{const t=e.watch((()=>e.state.notification.status),(o=>{o&&(i(e)||t())}));e.watch((()=>e.state.notification.currentPromotion),((t,o)=>{o||(o={}),t||(e.commit("notification/updateNotificationStatus",!0),e.commit("notification/shiftTempEvent",{eventId:o.id}))})),window.addEventListener("focus",(()=>{e.state.notification.status&&i(e)}))}},90608:(e,t,o)=>{"use strict";var n=o(95318);t.Z=void 0;var i=n(o(43528)),r=n(o(85622)),a=o(58933),s=n(o(61027)),l=n(o(45518)),c=o(95287),d=n(o(41698)),u=o(53305),p=o(36414),h=n(o(2286)),f=o(90336),m=o(6921),g=n(o(24678)),v=o(99492);const b=(0,d.default)("snowbrush:config"),{CONFIG:A,INFO_ITEM_STYLE_TYPE:E,PLATFORMS:T,LANGS:y,VIEW_TYPE:C}=s.default.constant;t.Z=()=>e=>{e.execSnowbrushAction=t=>{let o=e.state.editor.sbEditorWrapper.value;if(!o)return;if(!t.commandId&&!t.actionId)return void 0;let n={actionId:t.actionId,args:t.args};t.commandId&&Object.assign(n,i.default[t.commandId]),o.execAction.apply(o,[n.actionId,n.args])},function(){let t=(0,m.getResourceBasePath)();t="file://"+t;let o=e.getters["preferences/language"],n=e.getters["preferences/cjkFontFamily"];const i={};s.default.config({[A.NO_LISTEN_RESIZE]:!0,[A.URL_PREFIX]:t,[A.LANGUAGE]:Object.values(y).some((e=>e===o))?o:y.EN_US,xapResourcePrefix:r.default.join(t,"images/"),[A.XAP_LOADER]:function(t){return e.dispatch("wd/loadXap",t)},[A.XAP_GENERATOR]:function(t){if(t.isNewFile&&t.data&&t.data.byteLength>20*Math.pow(1024,2)){const t=e.getters["l10n/T"];return(0,c.showMessageBox)({type:"warning",title:"XMind",detail:t("File size cannot exceed 20MB."),message:t("Insert Attachment Failed"),buttons:[t("OK")],defaultId:0,cancelId:0,noLink:!0}),Promise.reject()}return e.dispatch("wd/generateXap",t)},[A.INFO_ITEM_STYLE]:E.FASHION,[A.NO_ANIMATION]:!0,[A.NO_KEYBIND]:!0,[A.DEFERED_TIME]:50,[A.MAX_SCALE]:500,[A.MIN_SCALE]:20,[A.CLIPBOARD_READER]:function(e){return new Promise((t=>"text/html"==e?a.clipboard.availableFormats().includes(e)?t(a.clipboard.readHTML()):t(null):"image/*"==e?async function(){const e=a.clipboard.readImage();if(!e.isEmpty())return{type:"png",encode:"ArrayBuffer",content:e.toPNG().buffer};if("win32"===process.platform){const e=await async function(){let e=a.clipboard.readBuffer("FileNameW").toString("ucs2");e=decodeURIComponent(e.replace(new RegExp(String.fromCharCode(0),"g"),""));const t=l.default.lookup(r.default.extname(e).substring(1));if(!t.startsWith("image/"))return null;const o=t.substr("image/".length);let n;try{n=await h.default.readFile(e)}catch(e){return b.error((0,p.normalizeError)(e)),null}return{type:o,data:n}}();return e?{type:e.type,encode:"Buffer",content:e.data}:null}return null}().then((e=>t(e))):"text/plain"==e?t(a.clipboard.readText(e)):void 0))},[A.CLIPBOARD_WRITER]:function(t){const o=t["text/x-type"];if(o===C.MATH_JAX){const o=t["text/x-other-object-json"]&&t["text/x-other-object-json"].imageDataList&&t["text/x-other-object-json"].imageDataList[0];o&&e.dispatch("wd/loadXap",o.src).then((e=>{const o=e.replace(/^file:\/\//,"");a.clipboard.write({text:t["text/plain"],image:a.nativeImage.createFromPath(o)})}))}else if(o===C.IMAGE){const o=t["text/x-array-json"]&&t["text/x-array-json"][0];o&&e.dispatch("wd/loadXap",o.src).then((e=>{const o=e.replace(/^file:\/\//,"");a.clipboard.write({text:t["text/plain"],image:a.nativeImage.createFromPath(o)})}))}else a.clipboard.writeText(t["text/plain"]);return!0},[A.CJK_FONT_FAMILY]:n,[A.FONT_URL_PREFIX]:(0,m.getAppPath)(),[A.PLATFORM]:T.VANA,[A.LOGGER]:(0,d.default)("snowbrush"),[A.HIDE_COLLAPSE_BTN]:!1,[A.NO_TOPIC_CUSTOM_WIDTH_BTN]:!1,[A.FONT_FACE_GENERATOR]:async e=>{if(i[e])return i[e];const t=JSON.parse(await(0,u.load)("static/fonts/fonts.json"))[e],o=[];if(t)for(const n of t){const t=`data:font/ttf;base64,${(await(0,u.load)("static/fonts/"+n.src)).toString("base64")}`;o.push(`@font-face {\n              font-family: "${e}";\n              src: url("${t}");\n              font-weight: ${n.weight};\n              font-style: ${n.italic?"italic":"normal"};\n              font-display: swap;\n            }\n`)}return i[e]=o,o},[A.LIMITED_OPERATION_HANDLER]:async function(e){return await g.default.fetch(v.FEATURE_TRIAL_REQUEST,e)},[A.APPEARANCE_GETTER]:function(){let t="#FFFFFF";"dark"===e.getters["preferences/appearance"]&&(t="#1D1F20");const o=e.state[f.SHARED].zenMode,n=e.state[f.SHARED].zenModeNightMode;return o&&n&&(t="#1D1F21"),{backgroundColor:t}},[A.NO_HANDLE_EDIT_RECEIVER_BLUR]:function(){return!a.remote.getCurrentWebContents().isFocused()}}),e.watch(((e,t)=>t["preferences/language"]),(e=>{s.default.config({[A.LANGUAGE]:Object.values(y).some((t=>t===e))?e:y.EN_US})})),e.watch(((e,t)=>t["preferences/cjkFontFamily"]),(e=>{s.default.config(A.CJK_FONT_FAMILY,e||null)}))}()}},36019:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectionsClassifiedTopicType=k,t.getThemeStyle=w,t.getClassDataById=x,t.isSameSelectionStyles=function(e){const t=e.state.editor.sbEditorWrapper.value,o=t.getSelections().reduce(((t,o)=>{const n=o.model.getId();return t[n]=x(e,n),t}),{}),n=Object.values(o);if(n.length<1)return!1;if(1===n.length)return null!==n[0];if(!n.every(Boolean))return!1;const i=(e,t,o)=>!e.some((e=>t&&o&&t[e]!==o[e]));let r=!0;const a=Object.keys(n[0]);for(let e=1;e<n.length;++e){const t=Object.keys(n[e]);if(a.length!=t.length){r=!1;break}if(!i(a,n[0],n[e])){r=!1;break}}return r},t.isSameSelectionType=function(e){const t=k(e),o=Object.entries(t).filter((([e,t])=>0!==t.length)).map((([e])=>e));return 1===[...new Set(o)].length},t.getUniqueSelectionLevels=I,t.isSameSelectionLevels=function(e){return 1===I(e).length},t.isSelectionAreSubTopics=function(e){const t=e.state.editor.sbEditorWrapper.value,o=t.getSelections(),n=o.map((e=>{const o=e.model.getId(),n=t.getComponentViewById(o);return!(!n||!n.model)&&n.model.type()})).filter(Boolean),i=o.map((e=>{const o=e.model.getId(),n=t.getComponentViewById(o);return!(!n||!n.getLayer)&&n.model.getLayer()})).filter(Boolean);return!(!n.length||!i.length)&&(n.every((e=>e===a.ATTACHED))&&i.every((e=>e>2)))},t.getUniqueComputedSelectionClassLists=function(e){const t=e.state.editor.sbEditorWrapper.value,o=t.getSelections(),n=[];return o.forEach((e=>{const o=e.model.getId(),r=t.getComponentViewById(o),a=i.default.utils.styleManager.getClassList(r),s=i.default.utils.styleManager.getSuggestedClassName(r);n.push(a.length?a[0]:s)})),[...new Set(n)]},t.isSelectionHasQuickStyleClass=function(e){const t=e.state.editor.sbEditorWrapper.value,o=t.getSelections(),n=[];o.forEach((e=>{const o=e.model.getId(),r=t.getComponentViewById(o),a=i.default.utils.styleManager.getClassList(r);r&&a.length&&n.push(a)}));const r=[...new Set(n.reduce(((e,t)=>e.concat(t)),[]))];return S.some((e=>r.includes(e)))},t.getComputedStylesById=_,t.getTopicIdsByThemeClassNames=B,t.handleUpdatePresetQuickStyle=function(e,t){const o=e.state.editor.sbEditorWrapper.value,n=o.getSelections();if(!n.length)return;const i=_(e,n[0].model.getId());if(!i)return;[{commandId:"editor.updateClassIntoTheme",args:{className:t,toBeRemovedClassName:null,classData:{properties:i,type:"topic"},targets:n}},{commandId:"editor.setStyleObject",args:{styleObj:null,prue:!0,targets:B(e,[t],[]).map(o.getComponentViewById.bind(o)).filter(Boolean)}}].forEach((t=>{e.execSnowbrushAction(t)}))},t.handleUpdateToAllLevels=function(e,t){const o=e.state.editor.sbEditorWrapper.value,n=o.getSelections();if(!n.length)return;const r=_(e,n[0].model.getId()),a=B(e,[t],[]),s=a.map(o.getComponentViewById.bind(o)).filter(Boolean),l=[];for(const e of a){const t=o.getComponentViewById(e);l.push(i.default.utils.styleManager.getSuggestedClassName(t))}[...new Set(l)].forEach((t=>{e.execSnowbrushAction({commandId:"editor.removeClass",args:{className:t,prue:!0,targets:s}})})),e.execSnowbrushAction({commandId:"editor.removeClassFromTheme",args:{classNames:l,prue:!0,targets:s}}),e.execSnowbrushAction({commandId:"editor.updateClassIntoTheme",args:{className:t,classData:{properties:r,type:"topic"},targets:n}}),e.execSnowbrushAction({commandId:"editor.setStyleObject",args:{styleObj:null,prue:!0,targets:B(e,[t],S).map(o.getComponentViewById.bind(o)).filter(Boolean)}})},t.getTopicIdsByLevel=O,t.handleUpdateToSameLevels=function(e,t,o){const n=e.state.editor.sbEditorWrapper.value,r=n.getSelections();if(!r.length)return;const a=_(e,r[0].model.getId());e.execSnowbrushAction({commandId:"editor.updateClassIntoTheme",args:{className:`level${t}`,classData:{properties:a,type:"topic"},targets:r}});const s=O(e,t).filter((e=>{const t=n.getComponentViewById(e),o=i.default.utils.styleManager.getClassList(t);return!o.length||o.every((e=>!S.includes(e)))})).map(n.getComponentViewById.bind(n)).filter(Boolean);e.execSnowbrushAction({commandId:"editor.removeClass",args:{className:o,prue:!0,targets:s}}),e.execSnowbrushAction({commandId:"editor.setStyleObject",args:{styleObj:null,targets:s}})};var i=n(o(61027));const{VIEW_TYPE:r,TOPIC_TYPE:a}=i.default.constant,{FONT_FAMILY:s,FONT_STYLE:l,FONT_WEIGHT:c,FONT_SIZE:d,TEXT_COLOR:u,TEXT_ALIGN:p,TEXT_TRANSFORM:h,TEXT_DECORATION:f,SHAPE_CLASS:m,LINE_CLASS:g,LINE_WIDTH:v,LINE_COLOR:b,BORDER_LINE_WIDTH:A,BORDER_LINE_COLOR:E,FILL_COLOR:T}=i.default.constant.STYLE_KEYS,y=[s,d,l,c,f,u,p,h],C=[m,g,v,b,A,E,T],S=["importantTopic","minorTopic","expiredTopic","normal"];function k(e){const t=e.state.editor.sbEditorWrapper.value,o=t.getSelections(),n={map:[],centralTopic:[],subTopic:[],mainTopic:[],summaryTopic:[],calloutTopic:[],boundary:[],floatingTopic:[],relationship:[]};for(const e of o){const{type:o}=e,i=e.model.getId();switch(!0){case o===r.BRANCH&&e.model.parent()&&e.model.parent().isRootTopic&&e.model.parent().isRootTopic()&&e.isAttachedBranch():n.mainTopic.push(i);break;case!(o!==r.BRANCH||e.isCentralBranch()||e.isDetachedBranch()||e.isSummaryBranch()||e.isCalloutBranch()):n.subTopic.push(i);break;case o===r.BRANCH&&e.isCentralBranch():n.centralTopic.push(i);break;case o===r.BRANCH&&e.isDetachedBranch():n.floatingTopic.push(i);break;case o===r.BRANCH&&e.isSummaryBranch():n.summaryTopic.push(i);break;case o===r.BRANCH&&e.isCalloutBranch():n.calloutTopic.push(i);break;case o===r.BOUNDARY:n.boundary.push(i);break;case o===r.RELATIONSHIP:n.relationship.push(i);break;default:n.map.push(t.getCurrentSheetEditor().model.getId())}}return n}function w(e,t,o){const n=e.state.editor.sbEditorWrapper.value.getCurrentSheetEditor();if(!n||!n.model||!n.model.theme)return null;const i=n.model.theme();return i&&i.getStyleValue?i.getStyleValue(t,o):null}function x(e,t){const o=e.state.editor.sbEditorWrapper.value,n=o.getSelections(),r=[];for(const e of n){const t=e.model.getId(),n=o.getComponentViewById(t),a=i.default.utils.styleManager.getClassList(n);n&&a.length&&r.push(a)}const a=r.length&&r[0].length?r[0][0]:i.default.utils.styleManager.getSuggestedClassName(o.getComponentViewById(t));if(!a)return;let s=!1;const l={};for(const n of C.concat(y)){const r=w(e,a,n);r&&(l[n]=r);const c=i.default.utils.styleManager.getUserStyleValue(o.getComponentViewById(t),n),d=i.default.utils.styleManager.getStyleValue(o.getComponentViewById(t),n,{ignoreUser:!0});c&&c!=d&&(l[n]=c,s=!0)}return s?l:null}function I(e){const t=e.state.editor.sbEditorWrapper.value,o=t.getSelections().map((e=>{const o=e.model.getId(),n=t.getComponentViewById(o);return!(!n||!n.getLayer)&&n.model.getLayer()})).filter(Boolean);return[...new Set(o)]}function _(e,t){const o=e.state.editor.sbEditorWrapper.value,n=[s,d,l,c,f,u,p,h],r=[m,g,v,b,A,E,T];function a(e,t){const n=o.getCurrentSheetEditor().model.theme();return n&&n.getStyleValue?n.getStyleValue(e,t):null}const y=o.getComponentViewById(t),C=i.default.utils.styleManager.getClassList(y),S=i.default.utils.styleManager.getSuggestedClassName(y),k=C.length?C[0]:S;if(!k)return;let w=!1;const x={};for(let e of r.concat(n)){const t=a(k,e);t&&(x[e]=t);const o=i.default.utils.styleManager.getUserStyleValue(y,e),n=i.default.utils.styleManager.getStyleValue(y,e,{ignoreUser:!0});o&&o!=n&&(x[e]=o,w=!0)}return w?x:null}function B(e,t,o){const n=e.state.editor.sbEditorWrapper.value,r=n.getCurrentSheetEditor().getSheetView().centralBranchView.model.getId(),a=n.getComponentViewById(r),s=[];for(const e of a.getDescendantBranchesByType()){const n=[i.default.utils.styleManager.getClassName(e),i.default.utils.styleManager.getSuggestedClassName(e),...i.default.utils.styleManager.getClassList(e)];n.some((e=>t.includes(e)))&&n.every((e=>!o.includes(e)))&&s.push(e.model.getId())}return s}function O(e,t){const o=e.state.editor.sbEditorWrapper.value;if(!o.getSelections().length)return;const n=o.getCurrentSheetEditor().getSheetView().centralBranchView.model.getId(),i=o.getComponentViewById(n);if(!i)return;const r=[];for(const e of i.getDescendantBranchesByType())e.getLayer()===t&&r.push(e.model.getId());return r}},24092:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatform=function(){return process.platform},t.getOSInfo=function(){return{platform:i.default.platform(),arch:i.default.arch(),release:i.default.release()}},t.openExternal=function(e){r.remote.shell.openExternal(e).catch((e=>{s.default.fetch(a.WINDOW_OPEN,{name:"dialog-problem",payload:{name:"OpenError",message:e.message||e,stack:e.stack,code:"OPEN_LINK"}})}))},t.copyToClipboard=function(e){r.clipboard.writeText(e)};var i=n(o(12087)),r=o(58933),a=o(99492),s=n(o(24678))},64051:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(20144)),r=o(90336),a=o(36414),s=o(83450),l={namespaced:!0,state:{fontsLoaded:!1,activeSheetId:null,sheetStatuses:{},outlinerSheetStatuses:{},isVisible:!1,suggestedName:null,sbEditorCreated:!1,sbEditorReady:!1,selectionObs:null,sheetContentChangedTrigger:null,sheetTitleChangedTrigger:null,sheetSwitchedTrigger:null,isSelectionATopicOrCalloutOrSummary:!1,infoItemMode:"card",isSheetBarVisible:!0,minimapEnable:!1,labelTip:{},isBeginnerModeVisible:!1,isTooltipsVisible:!1,isBeginnerDialogVisible:!1,sheetScaledTrigger:null,sheetsScaled:{},audioBarMode:null,audioAutoplay:!1,audioRecording:!1,inputMethodInputting:!1,isTopicCountLabelVisible:!1,isBranchOnlyMode:!1,isAllowInsertHyperLink:!0,isAllowInsertAttachment:!0,isAllowInsertAudioNotes:!0,isAllowInsertEquation:!0,isAllowInsertLocalImage:!0,hasExtend:!0,themeChanged:null,structureClassChangedTrigger:null,ignoreResizeEditor:!1,sbEditorWrapper:(0,a.wrapper)(null)},getters:{isMinimapShow:(e,t,o,n)=>!!n[`${r.SHARED}/isNormalMode`]&&e.minimapEnable,currentEditor:e=>e,isSheetEditorAvailable:e=>t=>{const o=e.sheetStatuses[t];return o&&o.inited},zoomScaleForActiveSheet:e=>{const t=e.sheetStatuses[e.activeSheetId]||{};return t.suggestedZoomScale||e.sheetStatuses.suggestedDefaultZoomScale||t.zoomScale},outlinerZoomScaleForActiveSheet:e=>(e.outlinerSheetStatuses[e.activeSheetId]||{zoomScale:100}).zoomScale,isActiveSheetFitMap:e=>Boolean((e.sheetStatuses[e.activeSheetId]||{}).isFitMap)},mutations:{markFontsLoaded:e=>{e.fontsLoaded=!0},updateSheetStatus:(e,{id:t,inited:o,suggestedZoomScale:n,zoomScale:r=null})=>{t in e.sheetStatuses||i.default.set(e.sheetStatuses,t,{}),o&&i.default.set(e.sheetStatuses[t],"inited",o),null!==r&&i.default.set(e.sheetStatuses[t],e.sheetStatuses.suggestedDefaultZoomScale?"suggestedZoomScale":"zoomScale",r),void 0!==n&&(i.default.set(e.sheetStatuses[t],"suggestedZoomScale",n),i.default.set(e.sheetStatuses,"suggestedDefaultZoomScale",n))},updateOutlinerSheetStatus:(e,{id:t,zoomScale:o=null})=>{t in e.outlinerSheetStatuses||i.default.set(e.outlinerSheetStatuses,t,{zoomScale:100}),null!==o&&i.default.set(e.outlinerSheetStatuses[t],"zoomScale",o)},updateSheetContentChanged:e=>{e.sheetContentChangedTrigger={}},updateThemeChanged:e=>{e.themeChanged=(0,a.UUID)()},toggleInputMethodInputting:(e,t)=>{e.inputMethodInputting=t},SB_CREATED(e){e.sbEditorCreated=!0},VISIBLE(e,t){e.isVisible=t.isVisible},SELECTION_CHANGED(e,{selections:t}){e.selections=t,e.selectionObs={},e.isSelectionATopicOrCalloutOrSummary=t&&1==t.length&&!!t[0].model},SE_BRANCH_COLLAPSE_TOGGLE(e,{hasExtend:t}){e.hasExtend=t},SHEET_TITLE_CHANGE(e,t){e.sheetTitleChangedTrigger={},e.newSheetTitle=t},SHEET_ADDED(){},SHEET_REMOVED(){},SHEET_SWITCHED(e,{id:t}){e.sbEditorReady=!0,e.activeSheetId=t,e.sheetSwitchedTrigger={}},INFO_ITEM_MODE_CHANGED(e,t){e.infoItemMode=t},SHEET_BAR_VISIBLE(e,t){e.isSheetBarVisible=t.isSheetBarVisible},UPDATE_MINIMAP_ENABLE_STATE(e,t){e.minimapEnable=t.minimapEnable},AUDIO_BAR_MODE(e,t){e.audioBarMode=t.audioBarMode,e.audioFilePath=t.audioFilePath,e.audioAutoplay=t.audioAutoplay},AUDIO_RECORDING(e,t){e.audioRecording=t.audioRecording},TOPIC_COUNT_LABEL_VISIBLE(e,t){e.isTopicCountLabelVisible=t.isTopicCountLabelVisible},UPDATE_LABEL_TIP(e,t){e.labelTip=t.labelTip},SUGGESTED_NAME(e,t){e.suggestedName=t.suggestedName},UPDATE_BEGINNERDIALOG_VISIBLE(e,t){e.isBeginnerDialogVisible=t.isBeginnerDialogVisible,t.isBeginnerDialogVisible&&(e.trackBeginnerTimeStart=Date.now())},UPDATE_BEGINNERTOOLTIPS_VISIBLE(e,t){e.isTooltipsVisible=t.isTooltipsVisible,t.isTooltipsVisible&&(0,s.trackEvent)({eventCategory:"Tutorial",eventAction:"startTips"})},UPDATE_BEGINNERMODE_VISIBLE(e,t){if(e.isBeginnerModeVisible=t.isBeginnerModeVisible,!t.isBeginnerModeVisible){let t=Date.now()-e.trackBeginnerTimeStart;e.trackBeginnerTimeStart=null,(0,s.trackEvent)({eventCategory:"Tutorial",eventAction:"durationBeginnerMode",eventValue:t})}},SHEET_SCALE_CHANGED(e,t){e.sheetScaledTrigger={},t.sheetId&&!e.sheetsScaled[t.sheetId]&&(e.sheetsScaled[t.sheetId]=!0)},SELECTED_MARKER_VIEW(e,t){e.selectedMarkerView=t.markerView},BRANCH_ONLY_MODE(e,t){e.isBranchOnlyMode=t.isBranchOnlyMode},STRUCTURE_CLASS_CHANGED(e){e.structureClassChangedTrigger={}},updateAllowInsertHyperLink(e,t){e.isAllowInsertHyperLink=t},updateAllowInsertAudioNotes(e,t){e.isAllowInsertAudioNotes=t},updateAllowInsertAttachment(e,t){e.isAllowInsertAttachment=t},updateAllowInsertEquation(e,t){e.isAllowInsertEquation=t},updateAllowInsertLocalImage(e,t){e.isAllowInsertLocalImage=t},updateIgnoreResizeEditor(e,t){e.ignoreResizeEditor=t}}};t.default=l},52541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={namespaced:!0,state:{isBranchOnlyMode:!1},getters:{},mutations:{MOUNTED(e){},SHOW_BRANCH_ONLY(e){e.isBranchOnlyMode=!0},SHOW_FULL_MAP(e){e.isBranchOnlyMode=!1}}};t.default=o},96207:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const o=[{key:"editor.addSubTopic"},{key:"editor.addTopic"},{key:"editor.showEditBox"}];var n={namespaced:!0,state:{step:0,actionMode:!0},mutations:{NEXT(e){e.step++},STEP(e,t){e.step=t},CHANGE_MODE(e,t){e.actionMode=t}},getters:{tutoriallist:(e,t,n,i)=>[{key:i["keybindings/keybindingByCommandId"](o[0].key)},{key:i["keybindings/keybindingByCommandId"](o[1].key)},{key:i["keybindings/keybindingByCommandId"](o[2].key)}],currentKey(e,t,n,i){let r=e.step>2?2:e.step;return i["keybindings/keybindingByCommandId"](o[r].key)}},actions:{next({state:e,commit:t}){e.step!==o.length&&(e.step!==o.length-1?(t("CHANGE_MODE",!1),setTimeout((()=>{t("NEXT"),t("CHANGE_MODE",!0)}),1100)):t("NEXT"))}}};t.default=n},1750:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(96486)),r=o(90336),a={namespaced:!0,state:{ready:!1,workbenchContentToShow:!1,documentId:null,popup:{id:null},isTopbarTextVisible:!0,isStatusBarVisible:!1,isZenDarkTheme:!1,isHyperlinkEditorVisible:!1,isLabelEditorVisible:!1,isEquationEditorVisible:!1,isFullscreen:!1,currentVisiblePopover:"",nativeColorPickerOptions:{commandId:"",styleKey:"",isSummaryModel:!1,origin:""},isLeftbarVisible:!1,leftBarPanelTab:o(48932).LEFT_BAR_PANEL_TAB_TOPIC,leftBarPanelSuggestSelectionUpdateTrigger:0,leftBarPanelSuggestSelection:{type:null,id:null}},getters:{isTopbarVisible:(e,t,o)=>!o[r.SHARED].zenMode,isLeftbarVisible:e=>e.isLeftbarVisible},mutations:{ready(e){e.ready=!0},workbenchContentToShow(e){e.workbenchContentToShow=!0},TOGGLE_POPUP:i.default.throttle((function(e,{id:t,dom:o}){e.popup.id===t?(e.popup.id=null,e.popup.dom=null):(e.popup.id=t,e.popup.dom=o)}),100,{trailing:!1}),UPDATE_LEFTBAR_STATE(e,{visible:t,tab:o=null,suggestSelection:n=null}){"boolean"==typeof t&&(e.isLeftbarVisible=t),o&&(e.leftBarPanelTab=o),n&&(e.leftBarPanelSuggestSelection=n,e.leftBarPanelSuggestSelectionUpdateTrigger+=1)},UPDATE_ZEN_DARK_THEME_STATE(e,t){e.isZenDarkTheme=t.isZenDarkTheme},TOGGLE_TOPBAR_TEXT(e,t){e.isTopbarTextVisible=t.isTopbarTextVisible},TOGGLE_STATUS_BAR(e,t){e.isStatusBarVisible=t.isStatusBarVisible},HYPERLINK_EDITOR_VISIBLE(e,t){e.isHyperlinkEditorVisible=t.isHyperlinkEditorVisible},LABEL_EDITOR_VISIBLE(e,t){e.isLabelEditorVisible=t.isLabelEditorVisible},EQUATION_EDITOR_VISIBLE(e,t){e.isEquationEditorVisible=t.isEquationEditorVisible},POPOVER_VISIBLE(e,t){e.currentVisiblePopover=t.name},TOGGLE_NOTES_BUTTON(){},UPDATE_COMMAND_ID_FOR_NATIVE_COLOR_PICKER(e,t){e.nativeColorPickerOptions=t.nativeColorPickerOptions}}};t.default=a},13976:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(36414);var i=new class{constructor(){this.summaries=[]}cloneBranch(e,t){let o=Object.assign({},t);const n={branch:o,theme:e.theme,relationships:[]};let i={};return this.summaries=[],this.cloneTopic(o,i),this.summaries.length>0&&this.cloneSummaries(this.summaries,i),e.relationships&&e.relationships.length&&this.cloneRelationships(e.relationships,i,n),n}cloneTopic(e,t){let o=(0,n.UUID)();if(t[e.id]=o,e.id=o,e.summaries&&(this.summaries=this.summaries.concat(e.summaries)),e.boundaries)for(let t of e.boundaries)t.id=(0,n.UUID)();let i=e.children;if(i){if(i.attached)for(let e of i.attached)this.cloneTopic(e,t);if(i.detached)for(let e of i.detached)this.cloneTopic(e,t);if(i.summary)for(let e of i.summary)this.cloneTopic(e,t);if(i.callout)for(let e of i.callout)this.cloneTopic(e,t)}}cloneSummaries(e,t){for(let o of e)o.id=(0,n.UUID)(),o.topicId=t[o.topicId]}cloneRelationships(e,t,o){for(let i of e)i.id=(0,n.UUID)(),t[i.end1Id]&&t[i.end2Id]&&(i.end1Id=t[i.end1Id],i.end2Id=t[i.end2Id],o.relationships.push(i))}};t.default=i},24949:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onEM=function(e,t){const o=n.remote.getCurrentWindow().id;o&&r.on(o,e,t)},t.offEM=function(e,t){const o=n.remote.getCurrentWindow().id;o&&r.off(o,e,t)},t.tvud=t.vud=t.localizer=t.eventManager=t.workspace=void 0;var n=o(58933);const i=n.remote.app.vud;t.vud=i;const r=n.remote.app.eventManager;t.eventManager=r;const a=n.remote.app.tvud;t.tvud=a;const s=n.remote.app.workspace;t.workspace=s;t.localizer={localize:e=>e}},90093:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(75644));const r=(0,n(o(41698)).default)("mp3recorder"),a=0,s=1,l=2;var c=class{constructor(e,t){t=t||{},this.sampleRate=t.sampleRate||44100,this.bufferSize=t.bufferSize||4096,this.kbps=t.kbps||128,this._mp3Data=[],this._stream=e,this.state=a,this.isEmpty=!0,this.data=null}start(){if(this.state!==a)return;this.state=s;let e=new(window.AudioContext||window.webkitAudioContext);this._context=e;let t=e.createMediaStreamSource(this._stream);this.audioInput=t,this.encoder=new i.default.Mp3Encoder(1,e.sampleRate,this.kbps||128);let o=e.createScriptProcessor(this.bufferSize,1,1);o.onaudioprocess=e=>{if(this.state===s){let t=e.inputBuffer.getChannelData(0);t.filter((e=>0!==e)).length>0&&(this.isEmpty=!1);for(let e=0;e<t.length;e+=1152){let o=Math.min(t.length-e,1152),n=new ArrayBuffer(2*o),i=new DataView(n),r=0,a=0,s=0;for(;s<o;++s,r+=2)a=Math.max(-1,Math.min(1,t[e+s])),i.setInt16(r,a<0?32768*a:32767*a,!0);let l=this.encoder.encodeBuffer(new Int16Array(i.buffer));l.length>0&&this._mp3Data.push(l)}}},t.connect(o),o.connect(e.destination)}pause(){this.state===s&&(this.state=l)}resume(){this.state===l&&(this.state=s)}stop(){if(this.state===a)return;this.state=a;let e=this.encoder.flush();e.length>0&&this._mp3Data.push(new Int8Array(e)),this.data=new Blob(this._mp3Data,{type:"audio/mp3"}),this.audioInput.disconnect(),this.audioInput=null;try{let e=this._stream.getAudioTracks();for(let t of e)t.stop();this._stream=null}catch(e){r.warn("Error while stopping mp3 recording:",e)}this._context.close(),this._context=null}};t.default=c},42365:(e,t,o)=>{"use strict";var n=o(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o(85622)),r=n(o(2286)),a=o(6921);var s=new class{constructor(){}storeResources(e,t,o){if(this.clearResources(t),this.getResourcesPathFromContent(e),!this.resourcesPath||!this.resourcesPath.length)return Promise.resolve();let n=this.getTypedResourceStoreFolder(t);return r.default.ensureDirSync(n),Promise.all(this.resourcesPath.map((e=>{let t=i.default.join(o,"resources",e);if(r.default.existsSync(t))return r.default.readFile(t).then((t=>r.default.writeFile(i.default.join(n,e),t)))})))}clearResources(e){this.resourcesPath=[];const t=this.getTypedResourceStoreFolder(e);r.default.existsSync(t)&&r.default.emptyDirSync(t)}pasteResources(e,t,o,n={}){if(this.getResourcesPathFromContent(e,!0,t),!this.resourcesPath||!this.resourcesPath.length)return Promise.resolve();let a=this.getTypedResourceStoreFolder(t);return r.default.existsSync(a)?Promise.all(this.resourcesPath.map((e=>{let t=i.default.join(a,e),s=`resources/${e}`;if(r.default.existsSync(t)&&!n["file-entries"][s])return r.default.readFile(t).then((t=>(n["file-entries"][s]={},r.default.writeFile(i.default.join(o,"resources",e),t))))}))):Promise.resolve()}getTypedResourceStoreFolder(e){return i.default.join((0,a.getAppDataPath)(),".resource_store",e)}getResourcesPathFromContent(e,t,o){this.resourcesPath=[];let n=(e,l,c)=>{if(a(c)||s(c))for(let e in c)n(c,e,c[e]);else if("string"==typeof c&&c.startsWith("xap:resources/")){let n=c.replace("xap:resources/","");if(t){let t=this.getTypedResourceStoreFolder(o);r.default.existsSync(i.default.join(t,n))?this.resourcesPath.push(n):delete e[l]}else this.resourcesPath.push(n)}},a=e=>Array.isArray(e)||"[object Array]"===toString.call(e),s=e=>"[object Object]"===toString.call(e);for(let t in e)n(e,t,e[t])}};t.default=s},99636:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(36414);var i=new class{constructor(){this.summaries=[]}cloneSheet(e){const t=Object.assign(e);t.id=(0,n.UUID)();const o={};return this.summaries=[],this.cloneTopic(t.rootTopic,o),this.summaries.length>0&&this.cloneSummaries(this.summaries,o),t.relationships&&t.relationships.length&&this.cloneRelationships(t.relationships,o),t}cloneTopic(e,t){let o=(0,n.UUID)();if(t[e.id]=o,e.id=o,e.summaries&&(this.summaries=this.summaries.concat(e.summaries)),e.boundaries)for(let o of e.boundaries){let e=(0,n.UUID)();t[o.id]=e,o.id=e}let i=e.children;if(i){if(i.attached)for(let e of i.attached)this.cloneTopic(e,t);if(i.detached)for(let e of i.detached)this.cloneTopic(e,t);if(i.summary)for(let e of i.summary)this.cloneTopic(e,t);if(i.callout)for(let e of i.callout)this.cloneTopic(e,t)}}cloneSummaries(e,t){for(let o of e)o.id=(0,n.UUID)(),o.topicId=t[o.topicId]}cloneRelationships(e,t){for(let o of e)o.id=(0,n.UUID)(),o.end1Id=t[o.end1Id],o.end2Id=t[o.end2Id]}};t.default=i},11771:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(24949);var i=new class{constructor(){}getData(e){let t=n.tvud.getModule("xclipboard");return t&&t.get(e)}setData(e,t){let o=n.tvud.getModule("xclipboard");o&&o.set(e,t)}};t.default=i},2002:e=>{e.exports={}},28702:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>f});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r),s=o(61667),l=o.n(s),c=o(31471),d=o(9073),u=a()(i()),p=l()(c.Z),h=l()(d.Z);u.push([e.id,"\n@media only screen and (max-width: 900px) {\n.topic.main-topic .topic-inner[data-v-06710286]::before {\n    display: none;\n}\n}\n.topic[data-v-06710286] {\n  max-width: 650px;\n  width: 100%;\n  box-sizing: border-box;\n  margin: 0 auto;\n  position: relative;\n  clear: both;\n  background-image: url("+p+");\n  background-size: 22px;\n}\n.topic.animate[data-v-06710286] {\n  transition: all 0.5s;\n}\n.topic.animate .topic-wrap-slot[data-v-06710286] {\n  transition: all 0.5s;\n}\n.topic.animate .topic-inner[data-v-06710286] {\n  transition: all 0.5s;\n}\n.topic.animate .topic-dot[data-v-06710286] {\n  transition: all 0.5s;\n}\n.topic.dragging[data-v-06710286] {\n  opacity: 0.5;\n}\n.topic.dragging .dragging[data-v-06710286] {\n  opacity: 1;\n}\n.topic.main-topic .topic-inner-text[data-v-06710286] {\n  font-size: 18px;\n  font-weight: bold;\n  line-height: 22px;\n}\n@media print {\n.topic.main-topic .topic-inner[data-v-06710286]::before {\n    display: none;\n}\n}\n.topic-outter-wrap[data-v-06710286] {\n  overflow: visible;\n  position: relative;\n  page-break-inside: avoid;\n  padding-left: 20px;\n  margin-left: -20px;\n  margin-bottom: 4px;\n}\n.topic-outter-wrap.hide[data-v-06710286] {\n  display: none;\n}\n.topic-outter-wrap[data-v-06710286]:hover {\n  visibility: visible;\n}\n.topic-wrap .topic-inserts[data-v-06710286] {\n  margin-left: 22px;\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  min-height: 0;\n  background-color: #fff;\n}\n@media only screen {\n.topic[data-v-06710286]::before {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 0;\n    left: 0;\n    top: 0;\n    z-index: -1;\n    background-color: #fafafb;\n}\n.topic:focus-within .topic-inner[data-v-06710286],\n  .topic:focus-within .topic-inner-text[data-v-06710286],\n  .topic:focus-within .topic-dot[data-v-06710286],\n  .topic:focus-within .topic-dot[data-v-06710286]::before,\n  .topic:focus-within .topic-notes[data-v-06710286],\n  .topic:focus-within .topic-inserts[data-v-06710286],\n  .topic:focus-within .topic-markers[data-v-06710286],\n  .topic[data-v-06710286]:focus-within {\n    background-color: #fafafb;\n}\n.topic:focus-within .topic-dot[data-v-06710286]::before {\n    box-shadow: 0px 23px #fafafb;\n}\n.topic:focus-within .topic-dot[data-v-06710286]:hover {\n    background: #f6f6f7;\n}\n.topic[data-v-06710286]:focus-within::before {\n    width: 100%;\n    box-shadow: -1740px 0px 0px #fafafb, -1280px 0px 0px #fafafb, -640px 0px 0px #fafafb, 640px 0px 0px #fafafb, 1280px 0px 0px #fafafb, 1740px 0px 0px #fafafb;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-wrap[data-v-06710286] {\n    background: #e1ebff;\n    border-radius: 3px;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-notes[data-v-06710286],\n  .topic-outter-wrap.selected:not(.dragging) .topic-inserts[data-v-06710286],\n  .topic-outter-wrap.selected:not(.dragging) .topic-markers[data-v-06710286] {\n    background: transparent;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-dot[data-v-06710286] {\n    border-color: #e1ebff;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-inner-text[data-v-06710286],\n  .topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-dot[data-v-06710286],\n  .topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-dot[data-v-06710286]::before {\n    background-color: transparent;\n    box-shadow: none;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-dot[data-v-06710286]:hover {\n    background: rgba(0, 0, 0, 0.05);\n}\n}\n.topic-inner[data-v-06710286] {\n  display: flex;\n  position: relative;\n  box-sizing: content-box;\n  min-height: 22px;\n  width: 100%;\n  word-break: break-all;\n  float: left;\n}\n.dragging .topic-inner[data-v-06710286],\n.dragging .topic-inner[data-v-06710286] {\n  background: #fff;\n}\n.topic-inner-text[data-v-06710286] {\n  color: #000000e6;\n  box-sizing: border-box;\n  display: inline-block;\n  font-size: 16px;\n  line-height: 1.4;\n  flex-grow: 1;\n  flex-shrink: 1;\n  outline: none;\n  cursor: text;\n  caret-color: #000000;\n  word-break: break-word;\n  white-space: pre-wrap;\n  background: #fff;\n  padding-right: 22px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  min-height: 30px;\n}\n.topic-inner-text.zipped[data-v-06710286]::after {\n  content: attr(child_count);\n  display: inline-block;\n  height: 18px;\n  min-width: 18px;\n  line-height: 18px;\n  font-size: 14px;\n  text-align: center;\n  background: rgba(0, 0, 0, 0.05);\n  box-sizing: border-box;\n  margin-left: 10px;\n  margin-top: 0.5px;\n  border-radius: 9px;\n  color: #000000b3;\n  padding: 0 4.5px;\n  font-weight: bold;\n}\n.topic-dot[data-v-06710286] {\n  flex-shrink: 0;\n  width: 18px;\n  height: 18px;\n  box-sizing: content-box;\n  margin: 6px 4px 0 2px;\n  border-radius: 2px;\n  display: block;\n  position: relative;\n  float: left;\n  cursor: move;\n  background: #fff;\n}\n.topic-dot[data-v-06710286]::before {\n  content: '';\n  position: absolute;\n  height: 5px;\n  width: 2px;\n  top: -5px;\n  left: 8px;\n  background: #fff;\n  box-shadow: 0px 23px #fff;\n}\n.topic-dot[data-v-06710286]::after {\n  content: '';\n  border: 2px solid #000;\n  width: 0;\n  height: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-radius: 0;\n  transform: translate(-50%, -50%);\n}\n.topic-dot[data-v-06710286]:hover {\n  background: #fafafb;\n}\n.topic-dot.has-child[data-v-06710286] {\n  cursor: pointer;\n}\n.topic-dot.has-child[data-v-06710286]::after {\n  -webkit-mask-image: url("+h+");\n  mask-image: url("+h+");\n  -webkit-mask-size: 10px;\n  mask-size: 10px;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: 0 0.5px;\n  mask-position: 0 0.5px;\n  background: #000000;\n  width: 10px;\n  height: 10px;\n  border: none;\n  transition: transform 0.2s;\n}\n.topic-dot.has-child.zipped[data-v-06710286]::after {\n  transform: translate(-50%, -50%) rotate(-90deg);\n}\n.show-limited-topics[data-v-06710286] {\n  display: inline-flex;\n  padding: 5px 12px;\n  background: #ff2d2d;\n  font-size: 13px;\n  line-height: 13px;\n  border-radius: 12px;\n  margin-left: 22px;\n  margin-top: 2px;\n  margin-bottom: 2px;\n  cursor: pointer;\n}\n.flex-line-break[data-v-06710286] {\n  width: 100%;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic.vue"],names:[],mappings:";AACA;AACA;IACI,aAAa;AACjB;AACA;AACA;EACE,gBAAgB;EAChB,WAAW;EACX,sBAAsB;EACtB,cAAc;EACd,kBAAkB;EAClB,WAAW;EACX,yDAAiD;EACjD,qBAAqB;AACvB;AACA;EACE,oBAAoB;AACtB;AACA;EACE,oBAAoB;AACtB;AACA;EACE,oBAAoB;AACtB;AACA;EACE,oBAAoB;AACtB;AACA;EACE,YAAY;AACd;AACA;EACE,UAAU;AACZ;AACA;EACE,eAAe;EACf,iBAAiB;EACjB,iBAAiB;AACnB;AACA;AACA;IACI,aAAa;AACjB;AACA;AACA;EACE,iBAAiB;EACjB,kBAAkB;EAClB,wBAAwB;EACxB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;AACpB;AACA;EACE,aAAa;AACf;AACA;EACE,mBAAmB;AACrB;AACA;EACE,iBAAiB;EACjB,aAAa;EACb,eAAe;EACf,WAAW;EACX,aAAa;EACb,sBAAsB;AACxB;AACA;AACA;IACI,WAAW;IACX,kBAAkB;IAClB,YAAY;IACZ,QAAQ;IACR,OAAO;IACP,MAAM;IACN,WAAW;IACX,yBAAyB;AAC7B;AACA;;;;;;;;IAQI,yBAAyB;AAC7B;AACA;IACI,4BAA4B;AAChC;AACA;IACI,mBAAmB;AACvB;AACA;IACI,WAAW;IACX,2JAA2J;AAC/J;AACA;IACI,mBAAmB;IACnB,kBAAkB;AACtB;AACA;;;IAGI,uBAAuB;AAC3B;AACA;IACI,qBAAqB;AACzB;AACA;;;IAGI,6BAA6B;IAC7B,gBAAgB;AACpB;AACA;IACI,+BAA+B;AACnC;AACA;AACA;EACE,aAAa;EACb,kBAAkB;EAClB,uBAAuB;EACvB,gBAAgB;EAChB,WAAW;EACX,qBAAqB;EACrB,WAAW;AACb;AACA;;EAEE,gBAAgB;AAClB;AACA;EACE,gBAAgB;EAChB,sBAAsB;EACtB,qBAAqB;EACrB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,cAAc;EACd,aAAa;EACb,YAAY;EACZ,oBAAoB;EACpB,sBAAsB;EACtB,qBAAqB;EACrB,gBAAgB;EAChB,mBAAmB;EACnB,gBAAgB;EAChB,mBAAmB;EACnB,gBAAgB;AAClB;AACA;EACE,0BAA0B;EAC1B,qBAAqB;EACrB,YAAY;EACZ,eAAe;EACf,iBAAiB;EACjB,eAAe;EACf,kBAAkB;EAClB,+BAA+B;EAC/B,sBAAsB;EACtB,iBAAiB;EACjB,iBAAiB;EACjB,kBAAkB;EAClB,gBAAgB;EAChB,gBAAgB;EAChB,iBAAiB;AACnB;AACA;EACE,cAAc;EACd,WAAW;EACX,YAAY;EACZ,uBAAuB;EACvB,qBAAqB;EACrB,kBAAkB;EAClB,cAAc;EACd,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,gBAAgB;AAClB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,UAAU;EACV,SAAS;EACT,SAAS;EACT,gBAAgB;EAChB,yBAAyB;AAC3B;AACA;EACE,WAAW;EACX,sBAAsB;EACtB,QAAQ;EACR,SAAS;EACT,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,gBAAgB;EAChB,gCAAgC;AAClC;AACA;EACE,mBAAmB;AACrB;AACA;EACE,eAAe;AACjB;AACA;EACE,2DAAiE;EACjE,mDAAyD;EACzD,uBAAuB;EACvB,eAAe;EACf,8BAA8B;EAC9B,sBAAsB;EACtB,8BAA8B;EAC9B,sBAAsB;EACtB,mBAAmB;EACnB,WAAW;EACX,YAAY;EACZ,YAAY;EACZ,0BAA0B;AAC5B;AACA;EACE,+CAA+C;AACjD;AACA;EACE,oBAAoB;EACpB,iBAAiB;EACjB,mBAAmB;EACnB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,iBAAiB;EACjB,eAAe;EACf,kBAAkB;EAClB,eAAe;AACjB;AACA;EACE,WAAW;AACb",sourcesContent:["\n@media only screen and (max-width: 900px) {\n.topic.main-topic .topic-inner[data-v-06710286]::before {\n    display: none;\n}\n}\n.topic[data-v-06710286] {\n  max-width: 650px;\n  width: 100%;\n  box-sizing: border-box;\n  margin: 0 auto;\n  position: relative;\n  clear: both;\n  background-image: url('../assets/icons/dash.svg');\n  background-size: 22px;\n}\n.topic.animate[data-v-06710286] {\n  transition: all 0.5s;\n}\n.topic.animate .topic-wrap-slot[data-v-06710286] {\n  transition: all 0.5s;\n}\n.topic.animate .topic-inner[data-v-06710286] {\n  transition: all 0.5s;\n}\n.topic.animate .topic-dot[data-v-06710286] {\n  transition: all 0.5s;\n}\n.topic.dragging[data-v-06710286] {\n  opacity: 0.5;\n}\n.topic.dragging .dragging[data-v-06710286] {\n  opacity: 1;\n}\n.topic.main-topic .topic-inner-text[data-v-06710286] {\n  font-size: 18px;\n  font-weight: bold;\n  line-height: 22px;\n}\n@media print {\n.topic.main-topic .topic-inner[data-v-06710286]::before {\n    display: none;\n}\n}\n.topic-outter-wrap[data-v-06710286] {\n  overflow: visible;\n  position: relative;\n  page-break-inside: avoid;\n  padding-left: 20px;\n  margin-left: -20px;\n  margin-bottom: 4px;\n}\n.topic-outter-wrap.hide[data-v-06710286] {\n  display: none;\n}\n.topic-outter-wrap[data-v-06710286]:hover {\n  visibility: visible;\n}\n.topic-wrap .topic-inserts[data-v-06710286] {\n  margin-left: 22px;\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  min-height: 0;\n  background-color: #fff;\n}\n@media only screen {\n.topic[data-v-06710286]::before {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 0;\n    left: 0;\n    top: 0;\n    z-index: -1;\n    background-color: #fafafb;\n}\n.topic:focus-within .topic-inner[data-v-06710286],\n  .topic:focus-within .topic-inner-text[data-v-06710286],\n  .topic:focus-within .topic-dot[data-v-06710286],\n  .topic:focus-within .topic-dot[data-v-06710286]::before,\n  .topic:focus-within .topic-notes[data-v-06710286],\n  .topic:focus-within .topic-inserts[data-v-06710286],\n  .topic:focus-within .topic-markers[data-v-06710286],\n  .topic[data-v-06710286]:focus-within {\n    background-color: #fafafb;\n}\n.topic:focus-within .topic-dot[data-v-06710286]::before {\n    box-shadow: 0px 23px #fafafb;\n}\n.topic:focus-within .topic-dot[data-v-06710286]:hover {\n    background: #f6f6f7;\n}\n.topic[data-v-06710286]:focus-within::before {\n    width: 100%;\n    box-shadow: -1740px 0px 0px #fafafb, -1280px 0px 0px #fafafb, -640px 0px 0px #fafafb, 640px 0px 0px #fafafb, 1280px 0px 0px #fafafb, 1740px 0px 0px #fafafb;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-wrap[data-v-06710286] {\n    background: #e1ebff;\n    border-radius: 3px;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-notes[data-v-06710286],\n  .topic-outter-wrap.selected:not(.dragging) .topic-inserts[data-v-06710286],\n  .topic-outter-wrap.selected:not(.dragging) .topic-markers[data-v-06710286] {\n    background: transparent;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-dot[data-v-06710286] {\n    border-color: #e1ebff;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-inner-text[data-v-06710286],\n  .topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-dot[data-v-06710286],\n  .topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-dot[data-v-06710286]::before {\n    background-color: transparent;\n    box-shadow: none;\n}\n.topic-outter-wrap.selected:not(.dragging) .topic-wrap-slot .topic-dot[data-v-06710286]:hover {\n    background: rgba(0, 0, 0, 0.05);\n}\n}\n.topic-inner[data-v-06710286] {\n  display: flex;\n  position: relative;\n  box-sizing: content-box;\n  min-height: 22px;\n  width: 100%;\n  word-break: break-all;\n  float: left;\n}\n.dragging .topic-inner[data-v-06710286],\n.dragging .topic-inner[data-v-06710286] {\n  background: #fff;\n}\n.topic-inner-text[data-v-06710286] {\n  color: #000000e6;\n  box-sizing: border-box;\n  display: inline-block;\n  font-size: 16px;\n  line-height: 1.4;\n  flex-grow: 1;\n  flex-shrink: 1;\n  outline: none;\n  cursor: text;\n  caret-color: #000000;\n  word-break: break-word;\n  white-space: pre-wrap;\n  background: #fff;\n  padding-right: 22px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  min-height: 30px;\n}\n.topic-inner-text.zipped[data-v-06710286]::after {\n  content: attr(child_count);\n  display: inline-block;\n  height: 18px;\n  min-width: 18px;\n  line-height: 18px;\n  font-size: 14px;\n  text-align: center;\n  background: rgba(0, 0, 0, 0.05);\n  box-sizing: border-box;\n  margin-left: 10px;\n  margin-top: 0.5px;\n  border-radius: 9px;\n  color: #000000b3;\n  padding: 0 4.5px;\n  font-weight: bold;\n}\n.topic-dot[data-v-06710286] {\n  flex-shrink: 0;\n  width: 18px;\n  height: 18px;\n  box-sizing: content-box;\n  margin: 6px 4px 0 2px;\n  border-radius: 2px;\n  display: block;\n  position: relative;\n  float: left;\n  cursor: move;\n  background: #fff;\n}\n.topic-dot[data-v-06710286]::before {\n  content: '';\n  position: absolute;\n  height: 5px;\n  width: 2px;\n  top: -5px;\n  left: 8px;\n  background: #fff;\n  box-shadow: 0px 23px #fff;\n}\n.topic-dot[data-v-06710286]::after {\n  content: '';\n  border: 2px solid #000;\n  width: 0;\n  height: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  border-radius: 0;\n  transform: translate(-50%, -50%);\n}\n.topic-dot[data-v-06710286]:hover {\n  background: #fafafb;\n}\n.topic-dot.has-child[data-v-06710286] {\n  cursor: pointer;\n}\n.topic-dot.has-child[data-v-06710286]::after {\n  -webkit-mask-image: url('../assets/icons/fold_triangle_icon.svg');\n  mask-image: url('../assets/icons/fold_triangle_icon.svg');\n  -webkit-mask-size: 10px;\n  mask-size: 10px;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: 0 0.5px;\n  mask-position: 0 0.5px;\n  background: #000000;\n  width: 10px;\n  height: 10px;\n  border: none;\n  transition: transform 0.2s;\n}\n.topic-dot.has-child.zipped[data-v-06710286]::after {\n  transform: translate(-50%, -50%) rotate(-90deg);\n}\n.show-limited-topics[data-v-06710286] {\n  display: inline-flex;\n  padding: 5px 12px;\n  background: #ff2d2d;\n  font-size: 13px;\n  line-height: 13px;\n  border-radius: 12px;\n  margin-left: 22px;\n  margin-top: 2px;\n  margin-bottom: 2px;\n  cursor: pointer;\n}\n.flex-line-break[data-v-06710286] {\n  width: 100%;\n}\n"],sourceRoot:""}]);const f=u},20425:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.topic-placeholder[data-v-07c0ebf1] {\n  display: none;\n  position: absolute;\n  right: 0;\n  height: 2px;\n  margin-left: 10px;\n  padding: 0;\n  width: 100%;\n  background: #ea4e4e;\n}\n.topic-placeholder.using[data-v-07c0ebf1] {\n  display: block;\n}\n.topic-placeholder[data-v-07c0ebf1]::before {\n  content: ' ';\n  position: absolute;\n  left: -2px;\n  top: -2px;\n  display: block;\n  height: 6px;\n  width: 6px;\n  background: #ea4e4e;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/placeholder-line.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,kBAAkB;EAClB,QAAQ;EACR,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,WAAW;EACX,mBAAmB;AACrB;AACA;EACE,cAAc;AAChB;AACA;EACE,YAAY;EACZ,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,cAAc;EACd,WAAW;EACX,UAAU;EACV,mBAAmB;AACrB",sourcesContent:["\n.topic-placeholder[data-v-07c0ebf1] {\n  display: none;\n  position: absolute;\n  right: 0;\n  height: 2px;\n  margin-left: 10px;\n  padding: 0;\n  width: 100%;\n  background: #ea4e4e;\n}\n.topic-placeholder.using[data-v-07c0ebf1] {\n  display: block;\n}\n.topic-placeholder[data-v-07c0ebf1]::before {\n  content: ' ';\n  position: absolute;\n  left: -2px;\n  top: -2px;\n  display: block;\n  height: 6px;\n  width: 6px;\n  background: #ea4e4e;\n}\n"],sourceRoot:""}]);const s=a},76559:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.uk-animation-duration-500ms[data-v-0900ed4b] {\n  animation-duration: 0.5s !important;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/map-shot/map-shot-v2.vue"],names:[],mappings:";AACA;EACE,mCAAmC;AACrC",sourcesContent:["\n.uk-animation-duration-500ms[data-v-0900ed4b] {\n  animation-duration: 0.5s !important;\n}\n"],sourceRoot:""}]);const s=a},82021:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.pitch-mode-preview-container[data-v-0e24c072] {\n  position: relative;\n  margin-top: 5px;\n  overflow: hidden;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 6px rgba(0, 0, 0, 0.1);\n}\n.pitch-mode-preview-slide[data-v-0e24c072] {\n  position: relative;\n  overflow: hidden;\n  transform: scale(1.01);\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/formatpanel/composed-components/slide-summary.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB,sEAAsE;AACxE;AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;AACxB",sourcesContent:["\n.pitch-mode-preview-container[data-v-0e24c072] {\n  position: relative;\n  margin-top: 5px;\n  overflow: hidden;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 6px rgba(0, 0, 0, 0.1);\n}\n.pitch-mode-preview-slide[data-v-0e24c072] {\n  position: relative;\n  overflow: hidden;\n  transform: scale(1.01);\n}\n"],sourceRoot:""}]);const s=a},62186:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.lm-select-icon[data-v-0f1eaa66] {\n  visibility: hidden;\n}\n.lm-view-item[data-v-0f1eaa66]:focus {\n  background-color: transparent;\n}\n.lm-view-item:hover .lm-select-icon[data-v-0f1eaa66] {\n  visibility: visible;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/leftbar/navigation-panel/tag-view.vue"],names:[],mappings:";AACA;EACE,kBAAkB;AACpB;AACA;EACE,6BAA6B;AAC/B;AACA;EACE,mBAAmB;AACrB",sourcesContent:["\n.lm-select-icon[data-v-0f1eaa66] {\n  visibility: hidden;\n}\n.lm-view-item[data-v-0f1eaa66]:focus {\n  background-color: transparent;\n}\n.lm-view-item:hover .lm-select-icon[data-v-0f1eaa66] {\n  visibility: visible;\n}\n"],sourceRoot:""}]);const s=a},54823:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>p});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r),s=o(61667),l=o.n(s),c=o(13275),d=a()(i()),u=l()(c.Z);d.push([e.id,"\n.topic-image[data-v-0f2a22c3] {\n  clear: both;\n  position: relative;\n  box-sizing: content-box;\n  margin-bottom: 4px;\n  border-width: 1.5px;\n  border-style: solid;\n  border-color: transparent;\n  max-width: 650px;\n  min-width: 64px;\n  padding: 3.5px;\n}\n.topic-image[data-v-0f2a22c3] :global(img) {\n  width: 100%;\n  height: 100%;\n  outline: none;\n}\n.topic-image.dragging[data-v-0f2a22c3] {\n  opacity: 0.6;\n}\n.topic-image.focused[data-v-0f2a22c3] {\n  border-color: #057bff;\n}\n.topic-image.focused .topic-image-handle[data-v-0f2a22c3] {\n  display: block;\n}\n.topic-image .topic-image-handle[data-v-0f2a22c3] {\n  display: none;\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  z-index: 10;\n  right: -9px;\n  bottom: -9px;\n  cursor: pointer;\n  background-image: url("+u+");\n  background-size: 20px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-image.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,kBAAkB;EAClB,uBAAuB;EACvB,kBAAkB;EAClB,mBAAmB;EACnB,mBAAmB;EACnB,yBAAyB;EACzB,gBAAgB;EAChB,eAAe;EACf,cAAc;AAChB;AACA;EACE,WAAW;EACX,YAAY;EACZ,aAAa;AACf;AACA;EACE,YAAY;AACd;AACA;EACE,qBAAqB;AACvB;AACA;EACE,cAAc;AAChB;AACA;EACE,aAAa;EACb,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,WAAW;EACX,WAAW;EACX,YAAY;EACZ,eAAe;EACf,yDAAsD;EACtD,qBAAqB;EACrB,4BAA4B;EAC5B,2BAA2B;AAC7B",sourcesContent:["\n.topic-image[data-v-0f2a22c3] {\n  clear: both;\n  position: relative;\n  box-sizing: content-box;\n  margin-bottom: 4px;\n  border-width: 1.5px;\n  border-style: solid;\n  border-color: transparent;\n  max-width: 650px;\n  min-width: 64px;\n  padding: 3.5px;\n}\n.topic-image[data-v-0f2a22c3] :global(img) {\n  width: 100%;\n  height: 100%;\n  outline: none;\n}\n.topic-image.dragging[data-v-0f2a22c3] {\n  opacity: 0.6;\n}\n.topic-image.focused[data-v-0f2a22c3] {\n  border-color: #057bff;\n}\n.topic-image.focused .topic-image-handle[data-v-0f2a22c3] {\n  display: block;\n}\n.topic-image .topic-image-handle[data-v-0f2a22c3] {\n  display: none;\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  z-index: 10;\n  right: -9px;\n  bottom: -9px;\n  cursor: pointer;\n  background-image: url('../assets/icons/drag_ctrl.svg');\n  background-size: 20px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n"],sourceRoot:""}]);const p=d},98549:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.popover-content[data-v-10de23d4] {\n  padding: 15px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n.popover-content h4[data-v-10de23d4] {\n  /*color: inherit !important;*/\n  margin: 0;\n  margin-bottom: 12px;\n}\n.popover-content .labels-content[data-v-10de23d4] {\n  width: 100%;\n  min-height: 90px;\n  font-size: 13px;\n  font-family: inherit;\n  background: inherit;\n  color: inherit;\n  outline: none;\n  border: none;\n  resize: none;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-labels-editor.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,kBAAkB;EAClB,MAAM;EACN,QAAQ;EACR,SAAS;EACT,OAAO;EACP,WAAW;EACX,YAAY;EACZ,sBAAsB;AACxB;AACA;EACE,6BAA6B;EAC7B,SAAS;EACT,mBAAmB;AACrB;AACA;EACE,WAAW;EACX,gBAAgB;EAChB,eAAe;EACf,oBAAoB;EACpB,mBAAmB;EACnB,cAAc;EACd,aAAa;EACb,YAAY;EACZ,YAAY;AACd",sourcesContent:["\n.popover-content[data-v-10de23d4] {\n  padding: 15px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n.popover-content h4[data-v-10de23d4] {\n  /*color: inherit !important;*/\n  margin: 0;\n  margin-bottom: 12px;\n}\n.popover-content .labels-content[data-v-10de23d4] {\n  width: 100%;\n  min-height: 90px;\n  font-size: 13px;\n  font-family: inherit;\n  background: inherit;\n  color: inherit;\n  outline: none;\n  border: none;\n  resize: none;\n}\n"],sourceRoot:""}]);const s=a},34124:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.drag-bar[data-v-12dffc0b] {\n  height: 100%;\n  width: 3px;\n  z-index: 2;\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  right: -1px;\n  cursor: ew-resize;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/dragbar.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,UAAU;EACV,UAAU;EACV,UAAU;EACV,kBAAkB;EAClB,MAAM;EACN,WAAW;EACX,iBAAiB;AACnB",sourcesContent:["\n.drag-bar[data-v-12dffc0b] {\n  height: 100%;\n  width: 3px;\n  z-index: 2;\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  right: -1px;\n  cursor: ew-resize;\n}\n"],sourceRoot:""}]);const s=a},70291:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.topic-markers[data-v-1a2f9edc] {\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  background: #fff;\n}\n.topic-marker[data-v-1a2f9edc] {\n  float: left;\n  margin: 0 2px 0 0;\n  border-radius: 2px;\n  border: 1px solid transparent;\n}\n.topic-marker[data-v-1a2f9edc]:hover {\n  border-color: #2ebdff;\n}\n.topic-marker-item[data-v-1a2f9edc] {\n  display: inline-block;\n  vertical-align: top;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-markers.vue"],names:[],mappings:";AACA;EACE,cAAc;EACd,aAAa;EACb,mBAAmB;EACnB,gBAAgB;AAClB;AACA;EACE,WAAW;EACX,iBAAiB;EACjB,kBAAkB;EAClB,6BAA6B;AAC/B;AACA;EACE,qBAAqB;AACvB;AACA;EACE,qBAAqB;EACrB,mBAAmB;AACrB",sourcesContent:["\n.topic-markers[data-v-1a2f9edc] {\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  background: #fff;\n}\n.topic-marker[data-v-1a2f9edc] {\n  float: left;\n  margin: 0 2px 0 0;\n  border-radius: 2px;\n  border: 1px solid transparent;\n}\n.topic-marker[data-v-1a2f9edc]:hover {\n  border-color: #2ebdff;\n}\n.topic-marker-item[data-v-1a2f9edc] {\n  display: inline-block;\n  vertical-align: top;\n}\n"],sourceRoot:""}]);const s=a},46375:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},22782:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},93400:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},79564:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},59904:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>p});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r),s=o(61667),l=o.n(s),c=o(75892),d=a()(i()),u=l()(c.Z);d.push([e.id,"\n.topic-audio-notes[data-v-1eb270cc] {\n  display: inline-flex;\n  cursor: pointer;\n  height: 24px;\n  padding: 0 12px;\n  border-radius: 12px;\n  background: rgba(0, 0, 0, 0.04);\n  margin-bottom: 4px;\n  color: rgba(0, 0, 0, 0.7);\n  font-size: 14px;\n  line-height: 24px;\n  transition: all 0.2s;\n}\n.topic-audio-notes[data-v-1eb270cc]::before {\n  content: ' ';\n  width: 16px;\n  height: 24px;\n  flex-shrink: 0;\n  margin-right: 4px;\n  box-sizing: border-box;\n  transition: all 0.2s;\n  background-color: rgba(0, 0, 0, 0.7);\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n  -webkit-mask-image: url("+u+");\n  mask-image: url("+u+");\n}\n.topic-audio-notes[data-v-1eb270cc]:hover {\n  color: #0515ff;\n  background: rgba(0, 0, 0, 0.08);\n}\n.topic-audio-notes[data-v-1eb270cc]:hover::before {\n  background-color: #0515ff;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-audio-notes.vue"],names:[],mappings:";AACA;EACE,oBAAoB;EACpB,eAAe;EACf,YAAY;EACZ,eAAe;EACf,mBAAmB;EACnB,+BAA+B;EAC/B,kBAAkB;EAClB,yBAAyB;EACzB,eAAe;EACf,iBAAiB;EACjB,oBAAoB;AACtB;AACA;EACE,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,cAAc;EACd,iBAAiB;EACjB,sBAAsB;EACtB,oBAAoB;EACpB,oCAAoC;EACpC,8BAA8B;EAC9B,sBAAsB;EACtB,6BAA6B;EAC7B,qBAAqB;EACrB,2DAAwD;EACxD,mDAAgD;AAClD;AACA;EACE,cAAc;EACd,+BAA+B;AACjC;AACA;EACE,yBAAyB;AAC3B",sourcesContent:["\n.topic-audio-notes[data-v-1eb270cc] {\n  display: inline-flex;\n  cursor: pointer;\n  height: 24px;\n  padding: 0 12px;\n  border-radius: 12px;\n  background: rgba(0, 0, 0, 0.04);\n  margin-bottom: 4px;\n  color: rgba(0, 0, 0, 0.7);\n  font-size: 14px;\n  line-height: 24px;\n  transition: all 0.2s;\n}\n.topic-audio-notes[data-v-1eb270cc]::before {\n  content: ' ';\n  width: 16px;\n  height: 24px;\n  flex-shrink: 0;\n  margin-right: 4px;\n  box-sizing: border-box;\n  transition: all 0.2s;\n  background-color: rgba(0, 0, 0, 0.7);\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n  -webkit-mask-image: url('../assets/icons/audionote.svg');\n  mask-image: url('../assets/icons/audionote.svg');\n}\n.topic-audio-notes[data-v-1eb270cc]:hover {\n  color: #0515ff;\n  background: rgba(0, 0, 0, 0.08);\n}\n.topic-audio-notes[data-v-1eb270cc]:hover::before {\n  background-color: #0515ff;\n}\n"],sourceRoot:""}]);const p=d},13788:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.sheet-rendering-mask[data-v-272482a8] {\n  z-index: 99;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.fixed-bar[data-v-272482a8] {\n  height: 100%;\n  z-index: 1020;\n}\n.opacity-1[data-v-272482a8] {\n  opacity: 1 !important;\n}\n.slide-animation[data-v-272482a8] {\n  animation-duration: 0.3s;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/workbench.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;AACA;EACE,YAAY;EACZ,aAAa;AACf;AACA;EACE,qBAAqB;AACvB;AACA;EACE,wBAAwB;AAC1B",sourcesContent:["\n.sheet-rendering-mask[data-v-272482a8] {\n  z-index: 99;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.fixed-bar[data-v-272482a8] {\n  height: 100%;\n  z-index: 1020;\n}\n.opacity-1[data-v-272482a8] {\n  opacity: 1 !important;\n}\n.slide-animation[data-v-272482a8] {\n  animation-duration: 0.3s;\n}\n"],sourceRoot:""}]);const s=a},76156:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.statusbar-divider-vertical[data-v-2aab1017] {\n  margin: 0 1px;\n  width: 1px;\n  height: 11px;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/bottombar/statusbar.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,UAAU;EACV,YAAY;AACd",sourcesContent:["\n.statusbar-divider-vertical[data-v-2aab1017] {\n  margin: 0 1px;\n  width: 1px;\n  height: 11px;\n}\n"],sourceRoot:""}]);const s=a},26748:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.map-shot-border[data-v-2c76ef59],\n.map-shot-frame[data-v-2c76ef59],\n[class*='map-shot-handler'][data-v-2c76ef59] {\n  border: 2px solid #5499f5;\n}\n.map-shot-frame.map-shot-frame-taking-shot[data-v-2c76ef59] {\n  border-color: transparent;\n}\n.map-shot-frame.map-shot-frame-taking-shot [class*='map-shot-handler'][data-v-2c76ef59] {\n  display: none;\n}\n.map-shot-frame-display-size[data-v-2c76ef59] {\n  color: #fff;\n  font-size: 13px;\n  position: absolute;\n  left: 0;\n  line-height: 1em;\n  bottom: calc(100% + 8px);\n  white-space: nowrap;\n}\n[class*='map-shot-handler'][data-v-2c76ef59] {\n  position: absolute;\n  background-color: #fff;\n  width: 6px;\n  height: 6px;\n}\n.map-shot-handler-right[data-v-2c76ef59] {\n  right: -6px;\n  top: calc((100% - 10px) / 2);\n  cursor: ew-resize;\n}\n.map-shot-handler-left[data-v-2c76ef59] {\n  left: -6px;\n  top: calc((100% - 10px) / 2);\n  cursor: ew-resize;\n}\n.map-shot-handler-bottom[data-v-2c76ef59] {\n  bottom: -6px;\n  left: calc((100% - 10px) / 2);\n  cursor: ns-resize;\n}\n.map-shot-handler-top[data-v-2c76ef59] {\n  top: -6px;\n  left: calc((100% - 10px) / 2);\n  cursor: ns-resize;\n}\n.map-shot-handler-right-bottom[data-v-2c76ef59] {\n  right: -6px;\n  bottom: -6px;\n  cursor: nwse-resize;\n}\n.map-shot-handler-right-top[data-v-2c76ef59] {\n  right: -6px;\n  top: -6px;\n  cursor: nesw-resize;\n}\n.map-shot-handler-left-bottom[data-v-2c76ef59] {\n  left: -6px;\n  bottom: -6px;\n  cursor: nesw-resize;\n}\n.map-shot-handler-left-top[data-v-2c76ef59] {\n  left: -6px;\n  top: -6px;\n  cursor: nwse-resize;\n}\n#tool-bar[data-v-2c76ef59] {\n  position: absolute;\n  display: flex;\n}\n#tool-bar .btn[data-v-2c76ef59] {\n  height: 28px;\n  white-space: nowrap;\n}\n#tool-bar .btn-icon[data-v-2c76ef59] {\n  width: 42px;\n  line-height: 25px;\n}\n#tool-bar .btn-segment[data-v-2c76ef59] {\n  padding-left: 8px;\n  padding-right: 23px;\n  background-position: right 8px top 50%;\n}\n.folder[data-v-2c76ef59] {\n  background: #ffffff;\n  transition-timing-function: ease-in;\n  transition: 0.2s;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/map-shot/map-shot-frame.vue"],names:[],mappings:";AACA;;;EAGE,yBAAyB;AAC3B;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,aAAa;AACf;AACA;EACE,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,OAAO;EACP,gBAAgB;EAChB,wBAAwB;EACxB,mBAAmB;AACrB;AACA;EACE,kBAAkB;EAClB,sBAAsB;EACtB,UAAU;EACV,WAAW;AACb;AACA;EACE,WAAW;EACX,4BAA4B;EAC5B,iBAAiB;AACnB;AACA;EACE,UAAU;EACV,4BAA4B;EAC5B,iBAAiB;AACnB;AACA;EACE,YAAY;EACZ,6BAA6B;EAC7B,iBAAiB;AACnB;AACA;EACE,SAAS;EACT,6BAA6B;EAC7B,iBAAiB;AACnB;AACA;EACE,WAAW;EACX,YAAY;EACZ,mBAAmB;AACrB;AACA;EACE,WAAW;EACX,SAAS;EACT,mBAAmB;AACrB;AACA;EACE,UAAU;EACV,YAAY;EACZ,mBAAmB;AACrB;AACA;EACE,UAAU;EACV,SAAS;EACT,mBAAmB;AACrB;AACA;EACE,kBAAkB;EAClB,aAAa;AACf;AACA;EACE,YAAY;EACZ,mBAAmB;AACrB;AACA;EACE,WAAW;EACX,iBAAiB;AACnB;AACA;EACE,iBAAiB;EACjB,mBAAmB;EACnB,sCAAsC;AACxC;AACA;EACE,mBAAmB;EACnB,mCAAmC;EACnC,gBAAgB;AAClB",sourcesContent:["\n.map-shot-border[data-v-2c76ef59],\n.map-shot-frame[data-v-2c76ef59],\n[class*='map-shot-handler'][data-v-2c76ef59] {\n  border: 2px solid #5499f5;\n}\n.map-shot-frame.map-shot-frame-taking-shot[data-v-2c76ef59] {\n  border-color: transparent;\n}\n.map-shot-frame.map-shot-frame-taking-shot [class*='map-shot-handler'][data-v-2c76ef59] {\n  display: none;\n}\n.map-shot-frame-display-size[data-v-2c76ef59] {\n  color: #fff;\n  font-size: 13px;\n  position: absolute;\n  left: 0;\n  line-height: 1em;\n  bottom: calc(100% + 8px);\n  white-space: nowrap;\n}\n[class*='map-shot-handler'][data-v-2c76ef59] {\n  position: absolute;\n  background-color: #fff;\n  width: 6px;\n  height: 6px;\n}\n.map-shot-handler-right[data-v-2c76ef59] {\n  right: -6px;\n  top: calc((100% - 10px) / 2);\n  cursor: ew-resize;\n}\n.map-shot-handler-left[data-v-2c76ef59] {\n  left: -6px;\n  top: calc((100% - 10px) / 2);\n  cursor: ew-resize;\n}\n.map-shot-handler-bottom[data-v-2c76ef59] {\n  bottom: -6px;\n  left: calc((100% - 10px) / 2);\n  cursor: ns-resize;\n}\n.map-shot-handler-top[data-v-2c76ef59] {\n  top: -6px;\n  left: calc((100% - 10px) / 2);\n  cursor: ns-resize;\n}\n.map-shot-handler-right-bottom[data-v-2c76ef59] {\n  right: -6px;\n  bottom: -6px;\n  cursor: nwse-resize;\n}\n.map-shot-handler-right-top[data-v-2c76ef59] {\n  right: -6px;\n  top: -6px;\n  cursor: nesw-resize;\n}\n.map-shot-handler-left-bottom[data-v-2c76ef59] {\n  left: -6px;\n  bottom: -6px;\n  cursor: nesw-resize;\n}\n.map-shot-handler-left-top[data-v-2c76ef59] {\n  left: -6px;\n  top: -6px;\n  cursor: nwse-resize;\n}\n#tool-bar[data-v-2c76ef59] {\n  position: absolute;\n  display: flex;\n}\n#tool-bar .btn[data-v-2c76ef59] {\n  height: 28px;\n  white-space: nowrap;\n}\n#tool-bar .btn-icon[data-v-2c76ef59] {\n  width: 42px;\n  line-height: 25px;\n}\n#tool-bar .btn-segment[data-v-2c76ef59] {\n  padding-left: 8px;\n  padding-right: 23px;\n  background-position: right 8px top 50%;\n}\n.folder[data-v-2c76ef59] {\n  background: #ffffff;\n  transition-timing-function: ease-in;\n  transition: 0.2s;\n}\n"],sourceRoot:""}]);const s=a},6972:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.uk-textarea[data-v-3100b58a] {\n  height: 134px;\n  background-color: transparent;\n  border: none;\n  font-family: SF Mono, Monaco, Consolas, Menlo, monospace;\n}\n.uk-textarea[data-v-3100b58a]:focus {\n  background-color: transparent;\n}\n.preview-container[data-v-3100b58a] {\n  box-sizing: border-box;\n  margin-top: 10px;\n  height: 76px;\n  padding: 6px;\n  width: 100%;\n}\n.equation-help[data-v-3100b58a] {\n  opacity: 0.3;\n}\n.equation-help[data-v-3100b58a]:hover {\n  opacity: 0.6;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-equation-editor.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,6BAA6B;EAC7B,YAAY;EACZ,wDAAwD;AAC1D;AACA;EACE,6BAA6B;AAC/B;AACA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,YAAY;EACZ,YAAY;EACZ,WAAW;AACb;AACA;EACE,YAAY;AACd;AACA;EACE,YAAY;AACd",sourcesContent:["\n.uk-textarea[data-v-3100b58a] {\n  height: 134px;\n  background-color: transparent;\n  border: none;\n  font-family: SF Mono, Monaco, Consolas, Menlo, monospace;\n}\n.uk-textarea[data-v-3100b58a]:focus {\n  background-color: transparent;\n}\n.preview-container[data-v-3100b58a] {\n  box-sizing: border-box;\n  margin-top: 10px;\n  height: 76px;\n  padding: 6px;\n  width: 100%;\n}\n.equation-help[data-v-3100b58a] {\n  opacity: 0.3;\n}\n.equation-help[data-v-3100b58a]:hover {\n  opacity: 0.6;\n}\n"],sourceRoot:""}]);const s=a},1881:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.tooltiptext-headline[data-v-3e0aeb9a] {\n  color: #ffffff;\n}\n.tooltiptext-content[data-v-3e0aeb9a] {\n  margin: 10px 0 0 0 !important;\n}\n.center[data-v-3e0aeb9a] {\n  text-align: center;\n  margin: 8px;\n}\n.hideTopbarText[data-v-3e0aeb9a] {\n  top: 120% !important;\n}\n.tooltiptext1[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 216px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 16px;\n  position: absolute;\n  z-index: 100;\n  top: 150%;\n  margin-left: 90px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext1[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: -100px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n.tooltiptext2[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 216px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 16px;\n  position: absolute;\n  z-index: 100;\n  top: 150%;\n  margin-left: 25px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext2[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: -10px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n.tooltiptext3[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 216px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 16px;\n  position: absolute;\n  z-index: 100;\n  top: 150%;\n  margin-left: -80px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext3[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: 70px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n.tooltiptext4[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 216px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 16px;\n  position: absolute;\n  z-index: 100;\n  top: 150%;\n  margin-left: -86px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext4[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: 76px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n.tooltiptext5[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 115px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 0px;\n  position: absolute;\n  z-index: 100;\n  top: 100%;\n  margin-left: -41px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext5[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: -10px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/elements/tooltips.vue"],names:[],mappings:";AACA;EACE,cAAc;AAChB;AACA;EACE,6BAA6B;AAC/B;AACA;EACE,kBAAkB;EAClB,WAAW;AACb;AACA;EACE,oBAAoB;AACtB;AACA;EACE,gBAAgB;EAChB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,yBAAyB;EACzB,WAAW;EACX,kBAAkB;EAClB,aAAa;EACb,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,iBAAiB;EACjB,2CAA2C;EAC3C,oCAAoC;EACpC,eAAe;EACf,iBAAiB;AACnB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,mBAAmB;EACnB,kBAAkB;EAClB,mBAAmB;EACnB,yDAAyD;AAC3D;AACA;EACE,gBAAgB;EAChB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,yBAAyB;EACzB,WAAW;EACX,kBAAkB;EAClB,aAAa;EACb,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,iBAAiB;EACjB,2CAA2C;EAC3C,oCAAoC;EACpC,eAAe;EACf,iBAAiB;AACnB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,kBAAkB;EAClB,kBAAkB;EAClB,mBAAmB;EACnB,yDAAyD;AAC3D;AACA;EACE,gBAAgB;EAChB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,yBAAyB;EACzB,WAAW;EACX,kBAAkB;EAClB,aAAa;EACb,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,kBAAkB;EAClB,2CAA2C;EAC3C,oCAAoC;EACpC,eAAe;EACf,iBAAiB;AACnB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,yDAAyD;AAC3D;AACA;EACE,gBAAgB;EAChB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,yBAAyB;EACzB,WAAW;EACX,kBAAkB;EAClB,aAAa;EACb,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,kBAAkB;EAClB,2CAA2C;EAC3C,oCAAoC;EACpC,eAAe;EACf,iBAAiB;AACnB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,yDAAyD;AAC3D;AACA;EACE,gBAAgB;EAChB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,yBAAyB;EACzB,WAAW;EACX,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,kBAAkB;EAClB,2CAA2C;EAC3C,oCAAoC;EACpC,eAAe;EACf,iBAAiB;AACnB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,YAAY;EACZ,SAAS;EACT,kBAAkB;EAClB,kBAAkB;EAClB,mBAAmB;EACnB,yDAAyD;AAC3D",sourcesContent:["\n.tooltiptext-headline[data-v-3e0aeb9a] {\n  color: #ffffff;\n}\n.tooltiptext-content[data-v-3e0aeb9a] {\n  margin: 10px 0 0 0 !important;\n}\n.center[data-v-3e0aeb9a] {\n  text-align: center;\n  margin: 8px;\n}\n.hideTopbarText[data-v-3e0aeb9a] {\n  top: 120% !important;\n}\n.tooltiptext1[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 216px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 16px;\n  position: absolute;\n  z-index: 100;\n  top: 150%;\n  margin-left: 90px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext1[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: -100px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n.tooltiptext2[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 216px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 16px;\n  position: absolute;\n  z-index: 100;\n  top: 150%;\n  margin-left: 25px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext2[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: -10px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n.tooltiptext3[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 216px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 16px;\n  position: absolute;\n  z-index: 100;\n  top: 150%;\n  margin-left: -80px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext3[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: 70px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n.tooltiptext4[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 216px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 16px;\n  position: absolute;\n  z-index: 100;\n  top: 150%;\n  margin-left: -86px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext4[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: 76px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n.tooltiptext5[data-v-3e0aeb9a] {\n  font-weight: 200;\n  font-size: 13px;\n  line-height: 1.2;\n  width: 115px;\n  background-color: #ffaa5d;\n  color: #fff;\n  border-radius: 4px;\n  padding: 0px;\n  position: absolute;\n  z-index: 100;\n  top: 100%;\n  margin-left: -41px;\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 3, 0.25);\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  cursor: default;\n  user-select: none;\n}\n.tooltiptext5[data-v-3e0aeb9a]::after {\n  content: '';\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  margin-left: -10px;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent transparent #ffaa5d transparent;\n}\n"],sourceRoot:""}]);const s=a},59614:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},59398:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.pitch-mode-preview-container[data-v-432f1eac] {\n  position: relative;\n  margin-top: 5px;\n  overflow: hidden;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 6px rgba(0, 0, 0, 0.1);\n}\n.pitch-mode-preview-slide[data-v-432f1eac] {\n  position: relative;\n  overflow: hidden;\n  transform: scale(1.01);\n}\n.uk-format-panel-sub-section-heading[data-v-432f1eac] {\n  margin-top: 0;\n  display: block;\n  margin-bottom: 0;\n}\n.uk-button-segment-group[data-v-432f1eac] {\n  margin-top: 12px;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/formatpanel/composed-components/slide-topic.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB,sEAAsE;AACxE;AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;AACxB;AACA;EACE,aAAa;EACb,cAAc;EACd,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB",sourcesContent:["\n.pitch-mode-preview-container[data-v-432f1eac] {\n  position: relative;\n  margin-top: 5px;\n  overflow: hidden;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 6px rgba(0, 0, 0, 0.1);\n}\n.pitch-mode-preview-slide[data-v-432f1eac] {\n  position: relative;\n  overflow: hidden;\n  transform: scale(1.01);\n}\n.uk-format-panel-sub-section-heading[data-v-432f1eac] {\n  margin-top: 0;\n  display: block;\n  margin-bottom: 0;\n}\n.uk-button-segment-group[data-v-432f1eac] {\n  margin-top: 12px;\n}\n"],sourceRoot:""}]);const s=a},63054:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\ndiv.mask[data-v-4462a29d] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  background-color: rgba(50, 50, 50, 0.9);\n}\ndiv.mask img[data-v-4462a29d] {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  right: 8px;\n  bottom: 4px;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/pitchmode/view/slide-preview.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,MAAM;EACN,OAAO;EACP,UAAU;EACV,uCAAuC;AACzC;AACA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,UAAU;EACV,WAAW;AACb",sourcesContent:["\ndiv.mask[data-v-4462a29d] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  background-color: rgba(50, 50, 50, 0.9);\n}\ndiv.mask img[data-v-4462a29d] {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  right: 8px;\n  bottom: 4px;\n}\n"],sourceRoot:""}]);const s=a},75025:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n#map-shot-modal[data-v-47a1db8c] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n#map-shot-modal-container[data-v-47a1db8c] {\n  height: 100%;\n  width: 100%;\n  position: fixed;\n  z-index: 1030;\n}\n@keyframes springish-data-v-47a1db8c {\n0.00% {\n    transform: scale(0.9);\n    opacity: 0.3;\n}\n40% {\n    transform: scale(1.1106);\n    opacity: 1;\n}\n80% {\n    transform: scale(0.9591);\n    opacity: 1;\n}\n100.00% {\n    transform: scale(1);\n    opacity: 1;\n}\n}\n.springish[data-v-47a1db8c] {\n  animation: springish-data-v-47a1db8c;\n  animation-duration: 0.5s;\n  animation-timing-function: cubic-bezier(0.445, 0.05, 0.55, 0.95);\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/map-shot/map-shot-modal.vue"],names:[],mappings:";AACA;EACE,2BAA2B;EAC3B,yBAAyB;EACzB,wBAAwB;EACxB,sBAAsB;EACtB,qBAAqB;EACrB,iBAAiB;AACnB;AACA;EACE,YAAY;EACZ,WAAW;EACX,eAAe;EACf,aAAa;AACf;AACA;AACA;IACI,qBAAqB;IACrB,YAAY;AAChB;AACA;IACI,wBAAwB;IACxB,UAAU;AACd;AACA;IACI,wBAAwB;IACxB,UAAU;AACd;AACA;IACI,mBAAmB;IACnB,UAAU;AACd;AACA;AACA;EACE,oCAAoC;EACpC,wBAAwB;EACxB,gEAAgE;AAClE",sourcesContent:["\n#map-shot-modal[data-v-47a1db8c] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n#map-shot-modal-container[data-v-47a1db8c] {\n  height: 100%;\n  width: 100%;\n  position: fixed;\n  z-index: 1030;\n}\n@keyframes springish-data-v-47a1db8c {\n0.00% {\n    transform: scale(0.9);\n    opacity: 0.3;\n}\n40% {\n    transform: scale(1.1106);\n    opacity: 1;\n}\n80% {\n    transform: scale(0.9591);\n    opacity: 1;\n}\n100.00% {\n    transform: scale(1);\n    opacity: 1;\n}\n}\n.springish[data-v-47a1db8c] {\n  animation: springish-data-v-47a1db8c;\n  animation-duration: 0.5s;\n  animation-timing-function: cubic-bezier(0.445, 0.05, 0.55, 0.95);\n}\n"],sourceRoot:""}]);const s=a},51131:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.pitch-mode-preview-container[data-v-4cccd2d6] {\n  position: relative;\n  margin-top: 5px;\n  overflow: hidden;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 6px rgba(0, 0, 0, 0.1);\n}\n.pitch-mode-preview-slide[data-v-4cccd2d6] {\n  position: relative;\n  overflow: hidden;\n  transform: scale(1.01);\n}\n.uk-format-panel-sub-section-heading[data-v-4cccd2d6] {\n  margin-top: 12px;\n  display: block;\n  margin-bottom: 8px;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/formatpanel/composed-components/slide-list.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB,sEAAsE;AACxE;AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;AACxB;AACA;EACE,gBAAgB;EAChB,cAAc;EACd,kBAAkB;AACpB",sourcesContent:["\n.pitch-mode-preview-container[data-v-4cccd2d6] {\n  position: relative;\n  margin-top: 5px;\n  overflow: hidden;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 6px rgba(0, 0, 0, 0.1);\n}\n.pitch-mode-preview-slide[data-v-4cccd2d6] {\n  position: relative;\n  overflow: hidden;\n  transform: scale(1.01);\n}\n.uk-format-panel-sub-section-heading[data-v-4cccd2d6] {\n  margin-top: 12px;\n  display: block;\n  margin-bottom: 8px;\n}\n"],sourceRoot:""}]);const s=a},59587:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},74383:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.vana-outliner[data-v-52aab939] {\n  position: relative;\n  min-height: calc(100vh - 20px);\n  width: 650px;\n  margin: 0 auto;\n  padding-bottom: 100px;\n  list-style: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  outline: none;\n  display: flex;\n  flex-direction: column;\n  transform-origin: calc(50% - 390px) top;\n}\n@media print {\n.vana-outliner[data-v-52aab939] {\n    width: 650px;\n    padding-bottom: 0;\n    transform: scale(1) !important;\n}\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/outliner.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,8BAA8B;EAC9B,YAAY;EACZ,cAAc;EACd,qBAAqB;EACrB,gBAAgB;EAChB,yBAAyB;EACzB,sBAAsB;EACtB,iBAAiB;EACjB,aAAa;EACb,aAAa;EACb,sBAAsB;EACtB,uCAAuC;AACzC;AACA;AACA;IACI,YAAY;IACZ,iBAAiB;IACjB,8BAA8B;AAClC;AACA",sourcesContent:["\n.vana-outliner[data-v-52aab939] {\n  position: relative;\n  min-height: calc(100vh - 20px);\n  width: 650px;\n  margin: 0 auto;\n  padding-bottom: 100px;\n  list-style: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  outline: none;\n  display: flex;\n  flex-direction: column;\n  transform-origin: calc(50% - 390px) top;\n}\n@media print {\n.vana-outliner[data-v-52aab939] {\n    width: 650px;\n    padding-bottom: 0;\n    transform: scale(1) !important;\n}\n}\n"],sourceRoot:""}]);const s=a},22265:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.topic-labels[data-v-600a64b6] {\n  overflow: hidden;\n  margin-bottom: 4px;\n  margin-right: 2px;\n}\n.topic-labels.show[data-v-600a64b6] {\n  display: inline-block;\n}\n.topic-label[data-v-600a64b6] {\n  color: black;\n  display: inline-block;\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  background-color: rgba(255, 255, 255, 0.7);\n  border-radius: 11px;\n  padding: 2px 8px;\n  margin-right: 8px;\n  min-width: 26px;\n  max-width: 124px;\n  font-size: 12px;\n  line-height: 16px;\n  text-align: center;\n  cursor: default;\n}\n.topic-label[data-v-600a64b6]:hover {\n  border-color: rgba(0, 0, 0, 0.5);\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-labels.vue"],names:[],mappings:";AACA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,iBAAiB;AACnB;AACA;EACE,qBAAqB;AACvB;AACA;EACE,YAAY;EACZ,qBAAqB;EACrB,oCAAoC;EACpC,0CAA0C;EAC1C,mBAAmB;EACnB,gBAAgB;EAChB,iBAAiB;EACjB,eAAe;EACf,gBAAgB;EAChB,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,eAAe;AACjB;AACA;EACE,gCAAgC;AAClC",sourcesContent:["\n.topic-labels[data-v-600a64b6] {\n  overflow: hidden;\n  margin-bottom: 4px;\n  margin-right: 2px;\n}\n.topic-labels.show[data-v-600a64b6] {\n  display: inline-block;\n}\n.topic-label[data-v-600a64b6] {\n  color: black;\n  display: inline-block;\n  border: solid 1px rgba(0, 0, 0, 0.1);\n  background-color: rgba(255, 255, 255, 0.7);\n  border-radius: 11px;\n  padding: 2px 8px;\n  margin-right: 8px;\n  min-width: 26px;\n  max-width: 124px;\n  font-size: 12px;\n  line-height: 16px;\n  text-align: center;\n  cursor: default;\n}\n.topic-label[data-v-600a64b6]:hover {\n  border-color: rgba(0, 0, 0, 0.5);\n}\n"],sourceRoot:""}]);const s=a},66731:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>b});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r),s=o(61667),l=o.n(s),c=o(52836),d=o(65795),u=o(10882),p=o(33779),h=a()(i()),f=l()(c.Z),m=l()(d.Z),g=l()(u.Z),v=l()(p.Z);h.push([e.id,"\n.topic-hyperlink-wrap[data-v-60420914] {\n  display: inline-flex;\n  float: left;\n  margin-bottom: 4px;\n}\n.topic-hyperlink[data-v-60420914] {\n  display: inline-flex;\n  cursor: pointer;\n  height: 24px;\n  padding: 0 12px;\n  border-radius: 12px;\n  background: rgba(0, 0, 0, 0.04);\n  color: rgba(0, 0, 0, 0.7);\n  font-size: 14px;\n  line-height: 24px;\n  transition: all 0.2s;\n}\n.topic-hyperlink.is-hyperlink[data-v-60420914] {\n  text-decoration: underline;\n}\n.topic-hyperlink[data-v-60420914]::before {\n  content: ' ';\n  width: 16px;\n  height: 24px;\n  flex-shrink: 0;\n  margin-right: 4px;\n  box-sizing: border-box;\n  transition: all 0.2s;\n  background-color: rgba(0, 0, 0, 0.7);\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n  -webkit-mask-image: url("+f+");\n  mask-image: url("+f+");\n}\n.topic-hyperlink span[data-v-60420914] {\n  max-width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.topic-hyperlink[data-v-60420914]:hover {\n  color: #0515ff;\n  background: rgba(0, 0, 0, 0.08);\n  text-decoration: underline;\n}\n.topic-hyperlink[data-v-60420914]:hover::before {\n  background-color: #0515ff;\n}\n.topic-hyperlink.is-topiclink[data-v-60420914]::before {\n  -webkit-mask-image: url("+m+");\n  mask-image: url("+m+");\n}\n.topic-hyperlink.is-hyperlink[data-v-60420914]::before {\n  -webkit-mask-image: url("+f+");\n  mask-image: url("+f+");\n}\n.topic-hyperlink.is-attachment[data-v-60420914]::before {\n  -webkit-mask-image: url("+g+");\n  mask-image: url("+g+");\n}\n.topic-hyperlink.is-filelink[data-v-60420914]::before {\n  -webkit-mask-image: url("+v+") !important;\n  mask-image: url("+v+") !important;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-hyperlink.vue"],names:[],mappings:";AACA;EACE,oBAAoB;EACpB,WAAW;EACX,kBAAkB;AACpB;AACA;EACE,oBAAoB;EACpB,eAAe;EACf,YAAY;EACZ,eAAe;EACf,mBAAmB;EACnB,+BAA+B;EAC/B,yBAAyB;EACzB,eAAe;EACf,iBAAiB;EACjB,oBAAoB;AACtB;AACA;EACE,0BAA0B;AAC5B;AACA;EACE,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,cAAc;EACd,iBAAiB;EACjB,sBAAsB;EACtB,oBAAoB;EACpB,oCAAoC;EACpC,8BAA8B;EAC9B,sBAAsB;EACtB,6BAA6B;EAC7B,qBAAqB;EACrB,2DAAwD;EACxD,mDAAgD;AAClD;AACA;EACE,gBAAgB;EAChB,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;AACrB;AACA;EACE,cAAc;EACd,+BAA+B;EAC/B,0BAA0B;AAC5B;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,2DAAyD;EACzD,mDAAiD;AACnD;AACA;EACE,2DAAwD;EACxD,mDAAgD;AAClD;AACA;EACE,2DAAyD;EACzD,mDAAiD;AACnD;AACA;EACE,sEAAkE;EAClE,8DAA0D;AAC5D",sourcesContent:["\n.topic-hyperlink-wrap[data-v-60420914] {\n  display: inline-flex;\n  float: left;\n  margin-bottom: 4px;\n}\n.topic-hyperlink[data-v-60420914] {\n  display: inline-flex;\n  cursor: pointer;\n  height: 24px;\n  padding: 0 12px;\n  border-radius: 12px;\n  background: rgba(0, 0, 0, 0.04);\n  color: rgba(0, 0, 0, 0.7);\n  font-size: 14px;\n  line-height: 24px;\n  transition: all 0.2s;\n}\n.topic-hyperlink.is-hyperlink[data-v-60420914] {\n  text-decoration: underline;\n}\n.topic-hyperlink[data-v-60420914]::before {\n  content: ' ';\n  width: 16px;\n  height: 24px;\n  flex-shrink: 0;\n  margin-right: 4px;\n  box-sizing: border-box;\n  transition: all 0.2s;\n  background-color: rgba(0, 0, 0, 0.7);\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n  -webkit-mask-image: url('../assets/icons/hyperlink.svg');\n  mask-image: url('../assets/icons/hyperlink.svg');\n}\n.topic-hyperlink span[data-v-60420914] {\n  max-width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.topic-hyperlink[data-v-60420914]:hover {\n  color: #0515ff;\n  background: rgba(0, 0, 0, 0.08);\n  text-decoration: underline;\n}\n.topic-hyperlink[data-v-60420914]:hover::before {\n  background-color: #0515ff;\n}\n.topic-hyperlink.is-topiclink[data-v-60420914]::before {\n  -webkit-mask-image: url('../assets/icons/topic-link.svg');\n  mask-image: url('../assets/icons/topic-link.svg');\n}\n.topic-hyperlink.is-hyperlink[data-v-60420914]::before {\n  -webkit-mask-image: url('../assets/icons/hyperlink.svg');\n  mask-image: url('../assets/icons/hyperlink.svg');\n}\n.topic-hyperlink.is-attachment[data-v-60420914]::before {\n  -webkit-mask-image: url('../assets/icons/attachment.svg');\n  mask-image: url('../assets/icons/attachment.svg');\n}\n.topic-hyperlink.is-filelink[data-v-60420914]::before {\n  -webkit-mask-image: url('../assets/icons/filelink.svg') !important;\n  mask-image: url('../assets/icons/filelink.svg') !important;\n}\n"],sourceRoot:""}]);const b=h},34848:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>p});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r),s=o(61667),l=o.n(s),c=o(13275),d=a()(i()),u=l()(c.Z);d.push([e.id,"\n.topic-equation[data-v-693dc2b8] {\n  clear: both;\n  position: relative;\n  box-sizing: content-box;\n  margin-bottom: 5px;\n  border-width: 1.5px;\n  border-style: solid;\n  border-color: transparent;\n  max-width: 650px;\n  padding: 3.5px;\n  line-height: 0;\n}\n.topic-equation[data-v-693dc2b8] :global(svg) {\n  width: 100%;\n  height: 100%;\n  outline: none;\n}\n.topic-equation.dragging[data-v-693dc2b8] {\n  opacity: 0.6;\n}\n.topic-equation.focused[data-v-693dc2b8] {\n  border-color: #057bff;\n}\n.topic-equation.focused .topic-equation-handle[data-v-693dc2b8] {\n  display: block;\n}\n.topic-equation .topic-equation-handle[data-v-693dc2b8] {\n  display: none;\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  z-index: 10;\n  right: -9px;\n  bottom: -9px;\n  cursor: pointer;\n  background-image: url("+u+");\n  background-size: 20px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n@media print {\n.vana-outliner.dark .topic-equation[data-v-693dc2b8] {\n    fill: black !important;\n}\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-equation.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,kBAAkB;EAClB,uBAAuB;EACvB,kBAAkB;EAClB,mBAAmB;EACnB,mBAAmB;EACnB,yBAAyB;EACzB,gBAAgB;EAChB,cAAc;EACd,cAAc;AAChB;AACA;EACE,WAAW;EACX,YAAY;EACZ,aAAa;AACf;AACA;EACE,YAAY;AACd;AACA;EACE,qBAAqB;AACvB;AACA;EACE,cAAc;AAChB;AACA;EACE,aAAa;EACb,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,WAAW;EACX,WAAW;EACX,YAAY;EACZ,eAAe;EACf,yDAAsD;EACtD,qBAAqB;EACrB,4BAA4B;EAC5B,2BAA2B;AAC7B;AACA;AACA;IACI,sBAAsB;AAC1B;AACA",sourcesContent:["\n.topic-equation[data-v-693dc2b8] {\n  clear: both;\n  position: relative;\n  box-sizing: content-box;\n  margin-bottom: 5px;\n  border-width: 1.5px;\n  border-style: solid;\n  border-color: transparent;\n  max-width: 650px;\n  padding: 3.5px;\n  line-height: 0;\n}\n.topic-equation[data-v-693dc2b8] :global(svg) {\n  width: 100%;\n  height: 100%;\n  outline: none;\n}\n.topic-equation.dragging[data-v-693dc2b8] {\n  opacity: 0.6;\n}\n.topic-equation.focused[data-v-693dc2b8] {\n  border-color: #057bff;\n}\n.topic-equation.focused .topic-equation-handle[data-v-693dc2b8] {\n  display: block;\n}\n.topic-equation .topic-equation-handle[data-v-693dc2b8] {\n  display: none;\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  z-index: 10;\n  right: -9px;\n  bottom: -9px;\n  cursor: pointer;\n  background-image: url('../assets/icons/drag_ctrl.svg');\n  background-size: 20px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n@media print {\n.vana-outliner.dark .topic-equation[data-v-693dc2b8] {\n    fill: black !important;\n}\n}\n"],sourceRoot:""}]);const p=d},76591:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.audio-btn[data-v-84e50384] {\n  width: 40px;\n  height: 40px;\n  background: unset;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/audiobar.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;AACnB",sourcesContent:["\n.audio-btn[data-v-84e50384] {\n  width: 40px;\n  height: 40px;\n  background: unset;\n}\n"],sourceRoot:""}]);const s=a},60037:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.zen-mode-bar .zen-mode-show-full-content[data-v-882a0a52] {\n  left: 30px;\n  top: 30px;\n}\n.zen-mode-bar .zen-mode-show-full-content > button[data-v-882a0a52] {\n  padding-left: 12px;\n  padding-right: 12px;\n}\n@keyframes TopBarEnterAnimate-data-v-882a0a52 {\n0% {\n    opacity: 1;\n}\n85% {\n    opacity: 1;\n}\n100% {\n    opacity: 0.15;\n}\n}\n.zen-mode-bar .zen-mode-top-bar[data-v-882a0a52] {\n  margin-right: 30px;\n  margin-top: 30px;\n  height: 26px;\n  transition: 0.5s ease;\n  opacity: 0.15;\n  animation: TopBarEnterAnimate-data-v-882a0a52 3.5s ease-out;\n}\n.zen-mode-bar .zen-mode-top-bar[data-v-882a0a52]:hover {\n  opacity: 1;\n}\n.zen-mode-bar .zen-mode-left-bar[data-v-882a0a52] {\n  width: 264px;\n  height: calc(100% - 96px);\n  top: 64px;\n  left: 30px;\n}\n.zen-mode-bar .zen-mode-right-bar[data-v-882a0a52] {\n  width: 264px;\n  top: 64px;\n  height: calc(100% - 96px);\n  right: 30px;\n}\n.zen-mode-bar .zen-mode-bottom-bar[data-v-882a0a52] {\n  height: 26px;\n  bottom: 30px;\n  animation: BottomBarResetZIndex-data-v-882a0a52 0.5s linear forwards;\n}\n@keyframes BottomBarResetZIndex-data-v-882a0a52 {\n0% {\n    z-index: 1;\n}\n99% {\n    z-index: 1;\n}\n100% {\n    z-index: -1;\n}\n}\n.zen-mode-bar .zen-mode-bottom-bar > div[data-v-882a0a52] {\n  opacity: 0;\n  transition: 0.5s ease;\n  transform: translateY(56px);\n}\n.zen-mode-bar .zen-mode-bottom-bar.is-active[data-v-882a0a52],\n.zen-mode-bar .zen-mode-bottom-bar[data-v-882a0a52]:hover {\n  z-index: 1;\n  animation: none;\n}\n.zen-mode-bar .zen-mode-bottom-bar.is-active > div[data-v-882a0a52],\n.zen-mode-bar .zen-mode-bottom-bar:hover > div[data-v-882a0a52] {\n  opacity: 1;\n  transform: translateY(0);\n}\n.slide-fade-right-enter-active[data-v-882a0a52],\n.slide-fade-right-leave-active[data-v-882a0a52] {\n  transition: 0.5s ease;\n}\n.slide-fade-right-enter[data-v-882a0a52],\n.slide-fade-right-leave-to[data-v-882a0a52] {\n  transform: translateX(30px);\n  opacity: 0;\n}\n.slide-fade-left-enter-active[data-v-882a0a52],\n.slide-fade-left-leave-active[data-v-882a0a52] {\n  transition: 0.5s ease;\n}\n.slide-fade-left-enter[data-v-882a0a52],\n.slide-fade-left-leave-to[data-v-882a0a52] {\n  transform: translateX(-30px);\n  opacity: 0;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/zenmodebar.vue"],names:[],mappings:";AACA;EACE,UAAU;EACV,SAAS;AACX;AACA;EACE,kBAAkB;EAClB,mBAAmB;AACrB;AACA;AACA;IACI,UAAU;AACd;AACA;IACI,UAAU;AACd;AACA;IACI,aAAa;AACjB;AACA;AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;EACZ,qBAAqB;EACrB,aAAa;EACb,2DAA2D;AAC7D;AACA;EACE,UAAU;AACZ;AACA;EACE,YAAY;EACZ,yBAAyB;EACzB,SAAS;EACT,UAAU;AACZ;AACA;EACE,YAAY;EACZ,SAAS;EACT,yBAAyB;EACzB,WAAW;AACb;AACA;EACE,YAAY;EACZ,YAAY;EACZ,oEAAoE;AACtE;AACA;AACA;IACI,UAAU;AACd;AACA;IACI,UAAU;AACd;AACA;IACI,WAAW;AACf;AACA;AACA;EACE,UAAU;EACV,qBAAqB;EACrB,2BAA2B;AAC7B;AACA;;EAEE,UAAU;EACV,eAAe;AACjB;AACA;;EAEE,UAAU;EACV,wBAAwB;AAC1B;AACA;;EAEE,qBAAqB;AACvB;AACA;;EAEE,2BAA2B;EAC3B,UAAU;AACZ;AACA;;EAEE,qBAAqB;AACvB;AACA;;EAEE,4BAA4B;EAC5B,UAAU;AACZ",sourcesContent:["\n.zen-mode-bar .zen-mode-show-full-content[data-v-882a0a52] {\n  left: 30px;\n  top: 30px;\n}\n.zen-mode-bar .zen-mode-show-full-content > button[data-v-882a0a52] {\n  padding-left: 12px;\n  padding-right: 12px;\n}\n@keyframes TopBarEnterAnimate-data-v-882a0a52 {\n0% {\n    opacity: 1;\n}\n85% {\n    opacity: 1;\n}\n100% {\n    opacity: 0.15;\n}\n}\n.zen-mode-bar .zen-mode-top-bar[data-v-882a0a52] {\n  margin-right: 30px;\n  margin-top: 30px;\n  height: 26px;\n  transition: 0.5s ease;\n  opacity: 0.15;\n  animation: TopBarEnterAnimate-data-v-882a0a52 3.5s ease-out;\n}\n.zen-mode-bar .zen-mode-top-bar[data-v-882a0a52]:hover {\n  opacity: 1;\n}\n.zen-mode-bar .zen-mode-left-bar[data-v-882a0a52] {\n  width: 264px;\n  height: calc(100% - 96px);\n  top: 64px;\n  left: 30px;\n}\n.zen-mode-bar .zen-mode-right-bar[data-v-882a0a52] {\n  width: 264px;\n  top: 64px;\n  height: calc(100% - 96px);\n  right: 30px;\n}\n.zen-mode-bar .zen-mode-bottom-bar[data-v-882a0a52] {\n  height: 26px;\n  bottom: 30px;\n  animation: BottomBarResetZIndex-data-v-882a0a52 0.5s linear forwards;\n}\n@keyframes BottomBarResetZIndex-data-v-882a0a52 {\n0% {\n    z-index: 1;\n}\n99% {\n    z-index: 1;\n}\n100% {\n    z-index: -1;\n}\n}\n.zen-mode-bar .zen-mode-bottom-bar > div[data-v-882a0a52] {\n  opacity: 0;\n  transition: 0.5s ease;\n  transform: translateY(56px);\n}\n.zen-mode-bar .zen-mode-bottom-bar.is-active[data-v-882a0a52],\n.zen-mode-bar .zen-mode-bottom-bar[data-v-882a0a52]:hover {\n  z-index: 1;\n  animation: none;\n}\n.zen-mode-bar .zen-mode-bottom-bar.is-active > div[data-v-882a0a52],\n.zen-mode-bar .zen-mode-bottom-bar:hover > div[data-v-882a0a52] {\n  opacity: 1;\n  transform: translateY(0);\n}\n.slide-fade-right-enter-active[data-v-882a0a52],\n.slide-fade-right-leave-active[data-v-882a0a52] {\n  transition: 0.5s ease;\n}\n.slide-fade-right-enter[data-v-882a0a52],\n.slide-fade-right-leave-to[data-v-882a0a52] {\n  transform: translateX(30px);\n  opacity: 0;\n}\n.slide-fade-left-enter-active[data-v-882a0a52],\n.slide-fade-left-leave-active[data-v-882a0a52] {\n  transition: 0.5s ease;\n}\n.slide-fade-left-enter[data-v-882a0a52],\n.slide-fade-left-leave-to[data-v-882a0a52] {\n  transform: translateX(-30px);\n  opacity: 0;\n}\n"],sourceRoot:""}]);const s=a},11252:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},36227:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.uk-textarea[data-v-a0b24b74] {\n  height: 134px;\n  background-color: transparent;\n  border: none;\n  font-family: SF Mono, Monaco, Consolas, Menlo, monospace;\n}\n.uk-textarea[data-v-a0b24b74]:focus {\n  background-color: transparent;\n}\n.preview-container[data-v-a0b24b74] {\n  box-sizing: border-box;\n  margin-top: 10px;\n  height: 76px;\n  padding: 6px;\n  width: 100%;\n}\n.equation-help[data-v-a0b24b74] {\n  opacity: 0.3;\n}\n.equation-help[data-v-a0b24b74]:hover {\n  opacity: 0.6;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/equation-editor.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,6BAA6B;EAC7B,YAAY;EACZ,wDAAwD;AAC1D;AACA;EACE,6BAA6B;AAC/B;AACA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,YAAY;EACZ,YAAY;EACZ,WAAW;AACb;AACA;EACE,YAAY;AACd;AACA;EACE,YAAY;AACd",sourcesContent:["\n.uk-textarea[data-v-a0b24b74] {\n  height: 134px;\n  background-color: transparent;\n  border: none;\n  font-family: SF Mono, Monaco, Consolas, Menlo, monospace;\n}\n.uk-textarea[data-v-a0b24b74]:focus {\n  background-color: transparent;\n}\n.preview-container[data-v-a0b24b74] {\n  box-sizing: border-box;\n  margin-top: 10px;\n  height: 76px;\n  padding: 6px;\n  width: 100%;\n}\n.equation-help[data-v-a0b24b74] {\n  opacity: 0.3;\n}\n.equation-help[data-v-a0b24b74]:hover {\n  opacity: 0.6;\n}\n"],sourceRoot:""}]);const s=a},51888:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n@keyframes PanelBackgoundAnimation-data-v-b9764ef4 {\n0% {\n    opacity: 0;\n    transform: scaleY(0.1);\n}\n20% {\n    opacity: 1;\n}\n100% {\n    transform: scaleY(1);\n}\n}\n@keyframes PanelContentAnimation-data-v-b9764ef4 {\n0% {\n    transform: scale(0.5);\n    opacity: 0;\n}\n100% {\n    opacity: 1;\n    transform: scale(1);\n}\n}\n.background-animated[data-v-b9764ef4] {\n  animation: PanelBackgoundAnimation-data-v-b9764ef4 forwards 100ms ease;\n}\n.content-animated[data-v-b9764ef4] {\n  visibility: visible;\n  animation: PanelContentAnimation-data-v-b9764ef4 forwards 75ms ease;\n  animation-delay: 40ms;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/formatpanel/right-bar.vue"],names:[],mappings:";AACA;AACA;IACI,UAAU;IACV,sBAAsB;AAC1B;AACA;IACI,UAAU;AACd;AACA;IACI,oBAAoB;AACxB;AACA;AACA;AACA;IACI,qBAAqB;IACrB,UAAU;AACd;AACA;IACI,UAAU;IACV,mBAAmB;AACvB;AACA;AACA;EACE,sEAAsE;AACxE;AACA;EACE,mBAAmB;EACnB,mEAAmE;EACnE,qBAAqB;AACvB",sourcesContent:["\n@keyframes PanelBackgoundAnimation-data-v-b9764ef4 {\n0% {\n    opacity: 0;\n    transform: scaleY(0.1);\n}\n20% {\n    opacity: 1;\n}\n100% {\n    transform: scaleY(1);\n}\n}\n@keyframes PanelContentAnimation-data-v-b9764ef4 {\n0% {\n    transform: scale(0.5);\n    opacity: 0;\n}\n100% {\n    opacity: 1;\n    transform: scale(1);\n}\n}\n.background-animated[data-v-b9764ef4] {\n  animation: PanelBackgoundAnimation-data-v-b9764ef4 forwards 100ms ease;\n}\n.content-animated[data-v-b9764ef4] {\n  visibility: visible;\n  animation: PanelContentAnimation-data-v-b9764ef4 forwards 75ms ease;\n  animation-delay: 40ms;\n}\n"],sourceRoot:""}]);const s=a},51882:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.popover-content[data-v-b9802a30] {\n  padding: 15px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n.popover-content h4[data-v-b9802a30] {\n  /*color: inherit !important;*/\n  margin: 0;\n  margin-bottom: 12px;\n}\n.popover-content .hyperlink-content[data-v-b9802a30] {\n  width: 100%;\n  min-height: 90px;\n  font-size: 13px;\n  font-family: inherit;\n  background: inherit;\n  color: inherit;\n  outline: none;\n  border: none;\n  resize: none;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-hyperlink-editor.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,kBAAkB;EAClB,MAAM;EACN,QAAQ;EACR,SAAS;EACT,OAAO;EACP,WAAW;EACX,YAAY;EACZ,sBAAsB;AACxB;AACA;EACE,6BAA6B;EAC7B,SAAS;EACT,mBAAmB;AACrB;AACA;EACE,WAAW;EACX,gBAAgB;EAChB,eAAe;EACf,oBAAoB;EACpB,mBAAmB;EACnB,cAAc;EACd,aAAa;EACb,YAAY;EACZ,YAAY;AACd",sourcesContent:["\n.popover-content[data-v-b9802a30] {\n  padding: 15px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n.popover-content h4[data-v-b9802a30] {\n  /*color: inherit !important;*/\n  margin: 0;\n  margin-bottom: 12px;\n}\n.popover-content .hyperlink-content[data-v-b9802a30] {\n  width: 100%;\n  min-height: 90px;\n  font-size: 13px;\n  font-family: inherit;\n  background: inherit;\n  color: inherit;\n  outline: none;\n  border: none;\n  resize: none;\n}\n"],sourceRoot:""}]);const s=a},43781:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.root-topic[data-v-d9b75146] {\n  width: 100%;\n  max-width: 650px;\n  padding-left: 22px;\n  margin: 100px auto 24px auto;\n  position: relative;\n}\n.root-topic .topic-inner-text[data-v-d9b75146] {\n  font-size: 40px;\n  font-weight: bold;\n  min-height: 30px;\n  line-height: 48px;\n  flex-shrink: 1;\n  flex-grow: 1;\n  outline: none;\n  color: #000000;\n  display: block;\n  cursor: text;\n  width: 100%;\n  white-space: pre-wrap;\n}\n.root-topic .topic-inner-text.is-empty[data-v-d9b75146]::after {\n  content: attr(placeholder);\n  display: inline-block;\n  color: #949699;\n}\n.root-topic .topic-insert[data-v-d9b75146] {\n  position: relative;\n}\n.root-topic[data-v-d9b75146] :global(.topic-notes) {\n  margin-left: 0;\n}\n.root-topic[data-v-d9b75146] :global(.topic-image) {\n  margin: 0;\n}\n.root-topic[data-v-d9b75146] :global(.topic-labels) {\n  margin: 0;\n}\n@media only screen {\n.root-topic[data-v-d9b75146]::before {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 0;\n    left: 0;\n    top: 0;\n    z-index: -1;\n    background-color: #fafafb;\n}\n.root-topic:focus-within .topic-inner[data-v-d9b75146],\n  .root-topic:focus-within .topic-inner-text[data-v-d9b75146],\n  .root-topic:focus-within .topic-dot[data-v-d9b75146],\n  .root-topic:focus-within .topic-dot[data-v-d9b75146]::before,\n  .root-topic:focus-within .topic-notes[data-v-d9b75146],\n  .root-topic:focus-within .topic-inserts[data-v-d9b75146],\n  .root-topic:focus-within .topic-markers[data-v-d9b75146],\n  .root-topic[data-v-d9b75146]:focus-within {\n    background-color: #fafafb;\n}\n.root-topic:focus-within .topic-dot[data-v-d9b75146]::before {\n    box-shadow: 0px 23px #fafafb;\n}\n.root-topic:focus-within .topic-dot[data-v-d9b75146]:hover {\n    background: #f6f6f7;\n}\n.root-topic[data-v-d9b75146]:focus-within::before {\n    width: 100%;\n    box-shadow: -1740px 0px 0px #fafafb, -1280px 0px 0px #fafafb, -640px 0px 0px #fafafb, 640px 0px 0px #fafafb, 1280px 0px 0px #fafafb, 1740px 0px 0px #fafafb;\n}\n}\n@media print {\n.root-topic[data-v-d9b75146] {\n    margin-top: 0;\n}\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/root-topic.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,4BAA4B;EAC5B,kBAAkB;AACpB;AACA;EACE,eAAe;EACf,iBAAiB;EACjB,gBAAgB;EAChB,iBAAiB;EACjB,cAAc;EACd,YAAY;EACZ,aAAa;EACb,cAAc;EACd,cAAc;EACd,YAAY;EACZ,WAAW;EACX,qBAAqB;AACvB;AACA;EACE,0BAA0B;EAC1B,qBAAqB;EACrB,cAAc;AAChB;AACA;EACE,kBAAkB;AACpB;AACA;EACE,cAAc;AAChB;AACA;EACE,SAAS;AACX;AACA;EACE,SAAS;AACX;AACA;AACA;IACI,WAAW;IACX,kBAAkB;IAClB,YAAY;IACZ,QAAQ;IACR,OAAO;IACP,MAAM;IACN,WAAW;IACX,yBAAyB;AAC7B;AACA;;;;;;;;IAQI,yBAAyB;AAC7B;AACA;IACI,4BAA4B;AAChC;AACA;IACI,mBAAmB;AACvB;AACA;IACI,WAAW;IACX,2JAA2J;AAC/J;AACA;AACA;AACA;IACI,aAAa;AACjB;AACA",sourcesContent:["\n.root-topic[data-v-d9b75146] {\n  width: 100%;\n  max-width: 650px;\n  padding-left: 22px;\n  margin: 100px auto 24px auto;\n  position: relative;\n}\n.root-topic .topic-inner-text[data-v-d9b75146] {\n  font-size: 40px;\n  font-weight: bold;\n  min-height: 30px;\n  line-height: 48px;\n  flex-shrink: 1;\n  flex-grow: 1;\n  outline: none;\n  color: #000000;\n  display: block;\n  cursor: text;\n  width: 100%;\n  white-space: pre-wrap;\n}\n.root-topic .topic-inner-text.is-empty[data-v-d9b75146]::after {\n  content: attr(placeholder);\n  display: inline-block;\n  color: #949699;\n}\n.root-topic .topic-insert[data-v-d9b75146] {\n  position: relative;\n}\n.root-topic[data-v-d9b75146] :global(.topic-notes) {\n  margin-left: 0;\n}\n.root-topic[data-v-d9b75146] :global(.topic-image) {\n  margin: 0;\n}\n.root-topic[data-v-d9b75146] :global(.topic-labels) {\n  margin: 0;\n}\n@media only screen {\n.root-topic[data-v-d9b75146]::before {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 0;\n    left: 0;\n    top: 0;\n    z-index: -1;\n    background-color: #fafafb;\n}\n.root-topic:focus-within .topic-inner[data-v-d9b75146],\n  .root-topic:focus-within .topic-inner-text[data-v-d9b75146],\n  .root-topic:focus-within .topic-dot[data-v-d9b75146],\n  .root-topic:focus-within .topic-dot[data-v-d9b75146]::before,\n  .root-topic:focus-within .topic-notes[data-v-d9b75146],\n  .root-topic:focus-within .topic-inserts[data-v-d9b75146],\n  .root-topic:focus-within .topic-markers[data-v-d9b75146],\n  .root-topic[data-v-d9b75146]:focus-within {\n    background-color: #fafafb;\n}\n.root-topic:focus-within .topic-dot[data-v-d9b75146]::before {\n    box-shadow: 0px 23px #fafafb;\n}\n.root-topic:focus-within .topic-dot[data-v-d9b75146]:hover {\n    background: #f6f6f7;\n}\n.root-topic[data-v-d9b75146]:focus-within::before {\n    width: 100%;\n    box-shadow: -1740px 0px 0px #fafafb, -1280px 0px 0px #fafafb, -640px 0px 0px #fafafb, 640px 0px 0px #fafafb, 1280px 0px 0px #fafafb, 1740px 0px 0px #fafafb;\n}\n}\n@media print {\n.root-topic[data-v-d9b75146] {\n    margin-top: 0;\n}\n}\n"],sourceRoot:""}]);const s=a},93063:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.sheet-rendering-wrapper[data-v-e15bd346] {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.sheet-rendering-mask[data-v-e15bd346] {\n  z-index: 99;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.status-bar[data-v-e15bd346] {\n  z-index: 99;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/editor/index.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;AACpB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;AACA;EACE,WAAW;AACb",sourcesContent:["\n.sheet-rendering-wrapper[data-v-e15bd346] {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.sheet-rendering-mask[data-v-e15bd346] {\n  z-index: 99;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.status-bar[data-v-e15bd346] {\n  z-index: 99;\n}\n"],sourceRoot:""}]);const s=a},25727:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.custom-spinner[data-v-e41379a2] {\n  margin: 0 auto;\n  border-radius: 50%;\n  transform: translateZ(0);\n  width: 48px;\n  height: 48px;\n  box-shadow: inset 0 0 0 2px #949699;\n}\n.custom-spinner[data-v-e41379a2]:before,\n.custom-spinner[data-v-e41379a2]:after {\n  position: absolute;\n  content: '';\n  width: 25px;\n  height: 50px;\n  background: #fff;\n}\n.custom-spinner[data-v-e41379a2]:before {\n  top: -1px;\n  left: -1px;\n  border-radius: 50px 0 0 50px;\n  transform-origin: 25px 25px;\n  animation: spinner-data-v-e41379a2 1s infinite ease 0.25s;\n}\n.custom-spinner[data-v-e41379a2]:after {\n  border-radius: 50%;\n  border-radius: 0 50px 50px 0;\n  top: -1px;\n  left: 25px;\n  transform-origin: 0px 25px;\n  animation: spinner-data-v-e41379a2 1s infinite ease;\n}\n.dark.custom-spinner[data-v-e41379a2] {\n  box-shadow: inset 0 0 0 2px #a2a4a6;\n}\n.dark.custom-spinner[data-v-e41379a2]:before,\n.dark.custom-spinner[data-v-e41379a2]:after {\n  background: #1d1f20;\n}\n@keyframes spinner-data-v-e41379a2 {\n0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n}\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/elements/spinner.vue"],names:[],mappings:";AACA;EACE,cAAc;EACd,kBAAkB;EAClB,wBAAwB;EACxB,WAAW;EACX,YAAY;EACZ,mCAAmC;AACrC;AACA;;EAEE,kBAAkB;EAClB,WAAW;EACX,WAAW;EACX,YAAY;EACZ,gBAAgB;AAClB;AACA;EACE,SAAS;EACT,UAAU;EACV,4BAA4B;EAC5B,2BAA2B;EAC3B,yDAAyD;AAC3D;AACA;EACE,kBAAkB;EAClB,4BAA4B;EAC5B,SAAS;EACT,UAAU;EACV,0BAA0B;EAC1B,mDAAmD;AACrD;AACA;EACE,mCAAmC;AACrC;AACA;;EAEE,mBAAmB;AACrB;AACA;AACA;IACI,+BAA+B;IAC/B,uBAAuB;AAC3B;AACA;IACI,iCAAiC;IACjC,yBAAyB;AAC7B;AACA",sourcesContent:["\n.custom-spinner[data-v-e41379a2] {\n  margin: 0 auto;\n  border-radius: 50%;\n  transform: translateZ(0);\n  width: 48px;\n  height: 48px;\n  box-shadow: inset 0 0 0 2px #949699;\n}\n.custom-spinner[data-v-e41379a2]:before,\n.custom-spinner[data-v-e41379a2]:after {\n  position: absolute;\n  content: '';\n  width: 25px;\n  height: 50px;\n  background: #fff;\n}\n.custom-spinner[data-v-e41379a2]:before {\n  top: -1px;\n  left: -1px;\n  border-radius: 50px 0 0 50px;\n  transform-origin: 25px 25px;\n  animation: spinner-data-v-e41379a2 1s infinite ease 0.25s;\n}\n.custom-spinner[data-v-e41379a2]:after {\n  border-radius: 50%;\n  border-radius: 0 50px 50px 0;\n  top: -1px;\n  left: 25px;\n  transform-origin: 0px 25px;\n  animation: spinner-data-v-e41379a2 1s infinite ease;\n}\n.dark.custom-spinner[data-v-e41379a2] {\n  box-shadow: inset 0 0 0 2px #a2a4a6;\n}\n.dark.custom-spinner[data-v-e41379a2]:before,\n.dark.custom-spinner[data-v-e41379a2]:after {\n  background: #1d1f20;\n}\n@keyframes spinner-data-v-e41379a2 {\n0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n}\n}\n"],sourceRoot:""}]);const s=a},60873:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.dark-theme[data-v-f2a53132] .notes-editor-frozen {\n  background-color: rgba(92, 190, 255, 0.5) !important;\n  color: #fafafb;\n  text-shadow: none;\n}\n.dark-theme[data-v-f2a53132] ::selection {\n  background-color: rgba(92, 190, 255, 0.5);\n}\n.default-theme[data-v-f2a53132] .notes-editor-frozen {\n  background-color: #90c9f9 !important;\n  color: #27292a;\n  text-shadow: none;\n}\n.link-input-box[data-v-f2a53132] {\n  width: 342px;\n}\n.link-input-box[data-v-f2a53132]:focus {\n  box-shadow: none;\n  border: 1px solid #0f66de;\n}\n.container-mask[data-v-f2a53132] {\n  position: absolute;\n  width: 100%;\n  height: 232px;\n  background: transparent;\n}\n.link-box[data-v-f2a53132] {\n  height: 26px;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/notes/notes-basic.vue"],names:[],mappings:";AACA;EACE,oDAAoD;EACpD,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,yCAAyC;AAC3C;AACA;EACE,oCAAoC;EACpC,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,YAAY;AACd;AACA;EACE,gBAAgB;EAChB,yBAAyB;AAC3B;AACA;EACE,kBAAkB;EAClB,WAAW;EACX,aAAa;EACb,uBAAuB;AACzB;AACA;EACE,YAAY;AACd",sourcesContent:["\n.dark-theme[data-v-f2a53132] .notes-editor-frozen {\n  background-color: rgba(92, 190, 255, 0.5) !important;\n  color: #fafafb;\n  text-shadow: none;\n}\n.dark-theme[data-v-f2a53132] ::selection {\n  background-color: rgba(92, 190, 255, 0.5);\n}\n.default-theme[data-v-f2a53132] .notes-editor-frozen {\n  background-color: #90c9f9 !important;\n  color: #27292a;\n  text-shadow: none;\n}\n.link-input-box[data-v-f2a53132] {\n  width: 342px;\n}\n.link-input-box[data-v-f2a53132]:focus {\n  box-shadow: none;\n  border: 1px solid #0f66de;\n}\n.container-mask[data-v-f2a53132] {\n  position: absolute;\n  width: 100%;\n  height: 232px;\n  background: transparent;\n}\n.link-box[data-v-f2a53132] {\n  height: 26px;\n}\n"],sourceRoot:""}]);const s=a},40586:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.uk-text-overflow-ellipsis {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.uk-text-line-clamp {\n  display: -webkit-box;\n  overflow: hidden;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/leftbar/navigation-panel/note-view.vue"],names:[],mappings:";AACA;EACE,gBAAgB;EAChB,uBAAuB;AACzB;AACA;EACE,oBAAoB;EACpB,gBAAgB;EAChB,qBAAqB;EACrB,4BAA4B;AAC9B",sourcesContent:["\n.uk-text-overflow-ellipsis {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.uk-text-line-clamp {\n  display: -webkit-box;\n  overflow: hidden;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n"],sourceRoot:""}]);const s=a},90140:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.outline-paper {\n  margin: 0 auto;\n  width: 100%;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outlinemode.vue"],names:[],mappings:";AACA;EACE,cAAc;EACd,WAAW;AACb",sourcesContent:["\n.outline-paper {\n  margin: 0 auto;\n  width: 100%;\n}\n"],sourceRoot:""}]);const s=a},55151:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>y});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r),s=o(61667),l=o.n(s),c=o(66391),d=o(60044),u=o(91407),p=o(88937),h=o(23026),f=o(46773),m=a()(i()),g=l()(c.Z),v=l()(d.Z),b=l()(u.Z),A=l()(p.Z),E=l()(h.Z),T=l()(f.Z);m.push([e.id,"\n.dark-theme /deep/ .notes-editor-frozen {\n  background-color: rgba(92, 190, 255, 0.5) !important;\n  color: #fafafb;\n  text-shadow: none;\n}\n.dark-theme ::selection {\n  background-color: rgba(92, 190, 255, 0.5);\n}\n.default-theme /deep/ .notes-editor-frozen {\n  background-color: #90c9f9 !important;\n  color: #27292a;\n  text-shadow: none;\n}\n.topic-notes {\n  margin-left: 24px;\n  clear: both;\n  position: relative;\n  background: #fff;\n  padding-bottom: 4px;\n}\n.topic-notes :global(.ql-container) {\n  outline: none;\n}\n.topic-notes :global(.ql-editor) {\n  padding: 4px 2px 4px 1rem;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.4);\n  caret-color: #000000;\n  tab-size: 2em;\n}\n.topic-notes :global(.ql-editor)::before {\n  color: rgba(0, 0, 0, 0.2);\n  font-style: normal;\n  left: 1.5rem;\n}\n.topic-notes :global(.ql-editor) :global(ul),\n.topic-notes :global(.ql-editor) :global(ol) {\n  padding-left: 0;\n}\n.topic-notes .topic-notes-container {\n  outline: none;\n  font-size: 16px;\n  color: rgba(0, 0, 0, 0.5);\n  line-height: 1.4;\n}\n.topic-notes .topic-notes-container trix-editor em,\n.topic-notes .topic-notes-container trix-editor strong,\n.topic-notes .topic-notes-container trix-editor u {\n  color: rgba(0, 0, 0, 0.5);\n}\n.topic-notes .topic-notes-toolbar {\n  display: flex;\n  position: absolute;\n  z-index: 999;\n  padding: 0px 13px;\n  background-color: white;\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n  border-radius: 4px;\n  top: -27px;\n}\n.topic-notes .topic-notes-toolbar button {\n  background-color: inherit;\n  color: inherit;\n  border: none;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n  position: relative;\n  width: 16px;\n  height: 16px;\n  box-sizing: content-box;\n  margin-right: 2px;\n  padding: 4px;\n  border-radius: 2px;\n}\n.topic-notes .topic-notes-toolbar button::before {\n  content: ' ';\n  width: 16px;\n  height: 16px;\n  margin: 4px;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: #000000;\n}\n.topic-notes .topic-notes-toolbar button:last-of-type {\n  margin-right: 0;\n}\n.topic-notes .topic-notes-toolbar button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.topic-notes .ol-b::before {\n  -webkit-mask-image: url("+g+");\n  mask-image: url("+g+");\n}\n.topic-notes .ol-i::before {\n  -webkit-mask-image: url("+v+");\n  mask-image: url("+v+");\n}\n.topic-notes .ol-u::before {\n  -webkit-mask-image: url("+b+");\n  mask-image: url("+b+");\n}\n.topic-notes .ol-ul::before {\n  -webkit-mask-image: url("+A+");\n  mask-image: url("+A+");\n}\n.topic-notes .ol-ol::before {\n  -webkit-mask-image: url("+E+");\n  mask-image: url("+E+");\n}\n.topic-notes .ol-link::before {\n  -webkit-mask-image: url("+T+");\n  mask-image: url("+T+");\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/outliner/components/topic-note.vue"],names:[],mappings:";AACA;EACE,oDAAoD;EACpD,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,yCAAyC;AAC3C;AACA;EACE,oCAAoC;EACpC,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,iBAAiB;EACjB,WAAW;EACX,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;AACrB;AACA;EACE,aAAa;AACf;AACA;EACE,yBAAyB;EACzB,eAAe;EACf,yBAAyB;EACzB,oBAAoB;EACpB,aAAa;AACf;AACA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,YAAY;AACd;AACA;;EAEE,eAAe;AACjB;AACA;EACE,aAAa;EACb,eAAe;EACf,yBAAyB;EACzB,gBAAgB;AAClB;AACA;;;EAGE,yBAAyB;AAC3B;AACA;EACE,aAAa;EACb,kBAAkB;EAClB,YAAY;EACZ,iBAAiB;EACjB,uBAAuB;EACvB,0CAA0C;EAC1C,kBAAkB;EAClB,UAAU;AACZ;AACA;EACE,yBAAyB;EACzB,cAAc;EACd,YAAY;EACZ,aAAa;EACb,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,uBAAuB;EACvB,iBAAiB;EACjB,YAAY;EACZ,kBAAkB;AACpB;AACA;EACE,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,WAAW;EACX,8BAA8B;EAC9B,sBAAsB;EACtB,6BAA6B;EAC7B,qBAAqB;EACrB,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,yBAAyB;AAC3B;AACA;EACE,eAAe;AACjB;AACA;EACE,qCAAqC;AACvC;AACA;EACE,2DAAyD;EACzD,mDAAiD;AACnD;AACA;EACE,2DAA2D;EAC3D,mDAAmD;AACrD;AACA;EACE,2DAA8D;EAC9D,mDAAsD;AACxD;AACA;EACE,2DAAyD;EACzD,mDAAiD;AACnD;AACA;EACE,2DAA2D;EAC3D,mDAAmD;AACrD;AACA;EACE,2DAAyD;EACzD,mDAAiD;AACnD",sourcesContent:["\n.dark-theme /deep/ .notes-editor-frozen {\n  background-color: rgba(92, 190, 255, 0.5) !important;\n  color: #fafafb;\n  text-shadow: none;\n}\n.dark-theme ::selection {\n  background-color: rgba(92, 190, 255, 0.5);\n}\n.default-theme /deep/ .notes-editor-frozen {\n  background-color: #90c9f9 !important;\n  color: #27292a;\n  text-shadow: none;\n}\n.topic-notes {\n  margin-left: 24px;\n  clear: both;\n  position: relative;\n  background: #fff;\n  padding-bottom: 4px;\n}\n.topic-notes :global(.ql-container) {\n  outline: none;\n}\n.topic-notes :global(.ql-editor) {\n  padding: 4px 2px 4px 1rem;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.4);\n  caret-color: #000000;\n  tab-size: 2em;\n}\n.topic-notes :global(.ql-editor)::before {\n  color: rgba(0, 0, 0, 0.2);\n  font-style: normal;\n  left: 1.5rem;\n}\n.topic-notes :global(.ql-editor) :global(ul),\n.topic-notes :global(.ql-editor) :global(ol) {\n  padding-left: 0;\n}\n.topic-notes .topic-notes-container {\n  outline: none;\n  font-size: 16px;\n  color: rgba(0, 0, 0, 0.5);\n  line-height: 1.4;\n}\n.topic-notes .topic-notes-container trix-editor em,\n.topic-notes .topic-notes-container trix-editor strong,\n.topic-notes .topic-notes-container trix-editor u {\n  color: rgba(0, 0, 0, 0.5);\n}\n.topic-notes .topic-notes-toolbar {\n  display: flex;\n  position: absolute;\n  z-index: 999;\n  padding: 0px 13px;\n  background-color: white;\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n  border-radius: 4px;\n  top: -27px;\n}\n.topic-notes .topic-notes-toolbar button {\n  background-color: inherit;\n  color: inherit;\n  border: none;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n  position: relative;\n  width: 16px;\n  height: 16px;\n  box-sizing: content-box;\n  margin-right: 2px;\n  padding: 4px;\n  border-radius: 2px;\n}\n.topic-notes .topic-notes-toolbar button::before {\n  content: ' ';\n  width: 16px;\n  height: 16px;\n  margin: 4px;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  mask-position: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: #000000;\n}\n.topic-notes .topic-notes-toolbar button:last-of-type {\n  margin-right: 0;\n}\n.topic-notes .topic-notes-toolbar button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.topic-notes .ol-b::before {\n  -webkit-mask-image: url('../assets/icons/notes/bold.svg');\n  mask-image: url('../assets/icons/notes/bold.svg');\n}\n.topic-notes .ol-i::before {\n  -webkit-mask-image: url('../assets/icons/notes/italic.svg');\n  mask-image: url('../assets/icons/notes/italic.svg');\n}\n.topic-notes .ol-u::before {\n  -webkit-mask-image: url('../assets/icons/notes/underline.svg');\n  mask-image: url('../assets/icons/notes/underline.svg');\n}\n.topic-notes .ol-ul::before {\n  -webkit-mask-image: url('../assets/icons/notes/list.svg');\n  mask-image: url('../assets/icons/notes/list.svg');\n}\n.topic-notes .ol-ol::before {\n  -webkit-mask-image: url('../assets/icons/notes/number.svg');\n  mask-image: url('../assets/icons/notes/number.svg');\n}\n.topic-notes .ol-link::before {\n  -webkit-mask-image: url('../assets/icons/notes/link.svg');\n  mask-image: url('../assets/icons/notes/link.svg');\n}\n"],sourceRoot:""}]);const y=m},35479:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94015),i=o.n(n),r=o(23645),a=o.n(r)()(i());a.push([e.id,"\n.promotion {\n  position: absolute;\n  z-index: 1021;\n  bottom: 0;\n  right: 0;\n  padding: 0;\n  cursor: default;\n  user-select: none;\n  transition-timing-function: linear;\n}\n.promotion-close {\n  position: absolute;\n  z-index: 1;\n  fill-opacity: 0.5;\n  padding: 5px;\n  opacity: var(--opacity);\n  width: 20px;\n  height: 20px;\n  right: 6px;\n  top: 12px;\n}\n.promotion-close:hover {\n  opacity: 1;\n}\n.promotion-close:before,\n.promotion-close:after {\n  position: absolute;\n  left: 9px;\n  content: ' ';\n  height: 11px;\n  width: 1px;\n  background-color: var(--close-color);\n}\n.promotion-close:before {\n  transform: rotate(45deg);\n}\n.promotion-close:after {\n  transform: rotate(-45deg);\n}\n.promotion.expand {\n  margin-bottom: 0 !important;\n}\n.promotion webview {\n  display: inline-flex;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/editor/patterns/promotion/promotion.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,aAAa;EACb,SAAS;EACT,QAAQ;EACR,UAAU;EACV,eAAe;EACf,iBAAiB;EACjB,kCAAkC;AACpC;AACA;EACE,kBAAkB;EAClB,UAAU;EACV,iBAAiB;EACjB,YAAY;EACZ,uBAAuB;EACvB,WAAW;EACX,YAAY;EACZ,UAAU;EACV,SAAS;AACX;AACA;EACE,UAAU;AACZ;AACA;;EAEE,kBAAkB;EAClB,SAAS;EACT,YAAY;EACZ,YAAY;EACZ,UAAU;EACV,oCAAoC;AACtC;AACA;EACE,wBAAwB;AAC1B;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,2BAA2B;AAC7B;AACA;EACE,oBAAoB;EACpB,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,WAAW;EACX,YAAY;AACd",sourcesContent:["\n.promotion {\n  position: absolute;\n  z-index: 1021;\n  bottom: 0;\n  right: 0;\n  padding: 0;\n  cursor: default;\n  user-select: none;\n  transition-timing-function: linear;\n}\n.promotion-close {\n  position: absolute;\n  z-index: 1;\n  fill-opacity: 0.5;\n  padding: 5px;\n  opacity: var(--opacity);\n  width: 20px;\n  height: 20px;\n  right: 6px;\n  top: 12px;\n}\n.promotion-close:hover {\n  opacity: 1;\n}\n.promotion-close:before,\n.promotion-close:after {\n  position: absolute;\n  left: 9px;\n  content: ' ';\n  height: 11px;\n  width: 1px;\n  background-color: var(--close-color);\n}\n.promotion-close:before {\n  transform: rotate(45deg);\n}\n.promotion-close:after {\n  transform: rotate(-45deg);\n}\n.promotion.expand {\n  margin-bottom: 0 !important;\n}\n.promotion webview {\n  display: inline-flex;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n}\n"],sourceRoot:""}]);const s=a},15399:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});var n=o(23645),i=o.n(n)()((function(e){return e[1]}));i.push([e.id,"/*!\n * Quill Editor v1.3.6\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n .ql-container {\n  box-sizing: border-box;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 13px;\n  height: 100%;\n  margin: 0px;\n  position: relative;\n}\n.ql-container.ql-disabled .ql-tooltip {\n  visibility: hidden;\n}\n.ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n  pointer-events: none;\n}\n.ql-clipboard {\n  left: -100000px;\n  height: 1px;\n  overflow-y: hidden;\n  position: absolute;\n  top: 50%;\n}\n.ql-clipboard p {\n  margin: 0;\n  padding: 0;\n}\n.ql-editor {\n  box-sizing: border-box;\n  line-height: 1.42;\n  height: 100%;\n  outline: none;\n  overflow-y: auto;\n  padding: 12px 15px;\n  tab-size: 4;\n  -moz-tab-size: 4;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.ql-editor > * {\n  cursor: text;\n}\n.ql-editor p,\n.ql-editor ol,\n.ql-editor ul,\n.ql-editor pre,\n.ql-editor blockquote,\n.ql-editor h1,\n.ql-editor h2,\n.ql-editor h3,\n.ql-editor h4,\n.ql-editor h5,\n.ql-editor h6 {\n  margin: 0;\n  padding: 0;\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol,\n.ql-editor ul {\n  padding-left: 1.5em;\n}\n.ql-editor ol > li,\n.ql-editor ul > li {\n  list-style-type: none;\n}\n.ql-editor ul > li::before {\n  content: '\\2022';\n}\n.ql-editor ul[data-checked=true],\n.ql-editor ul[data-checked=false] {\n  pointer-events: none;\n}\n.ql-editor ul[data-checked=true] > li *,\n.ql-editor ul[data-checked=false] > li * {\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before,\n.ql-editor ul[data-checked=false] > li::before {\n  color: #777;\n  cursor: pointer;\n  pointer-events: all;\n}\n.ql-editor ul[data-checked=true] > li::before {\n  content: '\\2611';\n}\n.ql-editor ul[data-checked=false] > li::before {\n  content: '\\2610';\n}\n.ql-editor li::before {\n  display: inline-block;\n  white-space: nowrap;\n  width: 1.2em;\n}\n.ql-editor li:not(.ql-direction-rtl)::before {\n  margin-left: -1.5em;\n  margin-right: 0.3em;\n  text-align: right;\n}\n.ql-editor li.ql-direction-rtl::before {\n  margin-left: 0.3em;\n  margin-right: -1.5em;\n}\n.ql-editor ol li:not(.ql-direction-rtl),\n.ql-editor ul li:not(.ql-direction-rtl) {\n  padding-left: 1.5em;\n}\n.ql-editor ol li.ql-direction-rtl,\n.ql-editor ul li.ql-direction-rtl {\n  padding-right: 1.5em;\n}\n.ql-editor ol li {\n  counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n  counter-increment: list-0;\n}\n.ql-editor ol li:before {\n  content: counter(list-0, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-increment: list-1;\n}\n.ql-editor ol li.ql-indent-1:before {\n  content: counter(list-1, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-1 {\n  counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-increment: list-2;\n}\n.ql-editor ol li.ql-indent-2:before {\n  content: counter(list-2, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-2 {\n  counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-increment: list-3;\n}\n.ql-editor ol li.ql-indent-3:before {\n  content: counter(list-3, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-3 {\n  counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-increment: list-4;\n}\n.ql-editor ol li.ql-indent-4:before {\n  content: counter(list-4, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-4 {\n  counter-reset: list-5 list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-increment: list-5;\n}\n.ql-editor ol li.ql-indent-5:before {\n  content: counter(list-5, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-5 {\n  counter-reset: list-6 list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-increment: list-6;\n}\n.ql-editor ol li.ql-indent-6:before {\n  content: counter(list-6, decimal) '. ';\n}\n.ql-editor ol li.ql-indent-6 {\n  counter-reset: list-7 list-8 list-9;\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-increment: list-7;\n}\n.ql-editor ol li.ql-indent-7:before {\n  content: counter(list-7, lower-alpha) '. ';\n}\n.ql-editor ol li.ql-indent-7 {\n  counter-reset: list-8 list-9;\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-increment: list-8;\n}\n.ql-editor ol li.ql-indent-8:before {\n  content: counter(list-8, lower-roman) '. ';\n}\n.ql-editor ol li.ql-indent-8 {\n  counter-reset: list-9;\n}\n.ql-editor ol li.ql-indent-9 {\n  counter-increment: list-9;\n}\n.ql-editor ol li.ql-indent-9:before {\n  content: counter(list-9, decimal) '. ';\n}\n.ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 3em;\n}\n.ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n  padding-left: 4.5em;\n}\n.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 3em;\n}\n.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n  padding-right: 4.5em;\n}\n.ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 6em;\n}\n.ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n  padding-left: 7.5em;\n}\n.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 6em;\n}\n.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n  padding-right: 7.5em;\n}\n.ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 9em;\n}\n.ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n  padding-left: 10.5em;\n}\n.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 9em;\n}\n.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n  padding-right: 10.5em;\n}\n.ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 12em;\n}\n.ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n  padding-left: 13.5em;\n}\n.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 12em;\n}\n.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n  padding-right: 13.5em;\n}\n.ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 15em;\n}\n.ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n  padding-left: 16.5em;\n}\n.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 15em;\n}\n.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n  padding-right: 16.5em;\n}\n.ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 18em;\n}\n.ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n  padding-left: 19.5em;\n}\n.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 18em;\n}\n.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n  padding-right: 19.5em;\n}\n.ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 21em;\n}\n.ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n  padding-left: 22.5em;\n}\n.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 21em;\n}\n.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n  padding-right: 22.5em;\n}\n.ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 24em;\n}\n.ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n  padding-left: 25.5em;\n}\n.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 24em;\n}\n.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n  padding-right: 25.5em;\n}\n.ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 27em;\n}\n.ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n  padding-left: 28.5em;\n}\n.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 27em;\n}\n.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n  padding-right: 28.5em;\n}\n.ql-editor .ql-video {\n  display: block;\n  max-width: 100%;\n}\n.ql-editor .ql-video.ql-align-center {\n  margin: 0 auto;\n}\n.ql-editor .ql-video.ql-align-right {\n  margin: 0 0 0 auto;\n}\n.ql-editor .ql-bg-black {\n  background-color: #000;\n}\n.ql-editor .ql-bg-red {\n  background-color: #e60000;\n}\n.ql-editor .ql-bg-orange {\n  background-color: #f90;\n}\n.ql-editor .ql-bg-yellow {\n  background-color: #ff0;\n}\n.ql-editor .ql-bg-green {\n  background-color: #008a00;\n}\n.ql-editor .ql-bg-blue {\n  background-color: #06c;\n}\n.ql-editor .ql-bg-purple {\n  background-color: #93f;\n}\n.ql-editor .ql-color-white {\n  color: #fff;\n}\n.ql-editor .ql-color-red {\n  color: #e60000;\n}\n.ql-editor .ql-color-orange {\n  color: #f90;\n}\n.ql-editor .ql-color-yellow {\n  color: #ff0;\n}\n.ql-editor .ql-color-green {\n  color: #008a00;\n}\n.ql-editor .ql-color-blue {\n  color: #06c;\n}\n.ql-editor .ql-color-purple {\n  color: #93f;\n}\n.ql-editor .ql-font-serif {\n  font-family: Georgia, Times New Roman, serif;\n}\n.ql-editor .ql-font-monospace {\n  font-family: Monaco, Courier New, monospace;\n}\n.ql-editor .ql-size-small {\n  font-size: 0.75em;\n}\n.ql-editor .ql-size-large {\n  font-size: 1.5em;\n}\n.ql-editor .ql-size-huge {\n  font-size: 2.5em;\n}\n.ql-editor .ql-direction-rtl {\n  direction: rtl;\n  text-align: inherit;\n}\n.ql-editor .ql-align-center {\n  text-align: center;\n}\n.ql-editor .ql-align-justify {\n  text-align: justify;\n}\n.ql-editor .ql-align-right {\n  text-align: right;\n}\n.ql-editor.ql-blank::before {\n  color: rgba(0,0,0,0.6);\n  content: attr(data-placeholder);\n  font-style: italic;\n  left: 15px;\n  pointer-events: none;\n  position: absolute;\n  right: 15px;\n}\n",""]);const r=i},74330:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>u});var n=o(23645),i=o.n(n),r=o(15399),a=o(61667),s=o.n(a),l=o(34807),c=i()((function(e){return e[1]}));c.i(r.Z);var d=s()(l.Z);c.push([e.id,".selection-area {\n  background: rgba(0, 0, 255, 0.1);\n  border-radius: 0.1em;\n  border: 0.05em solid rgba(0, 0, 255, 0.2);\n}\n.grabbing {\n  cursor: move !important;\n  /* fallback: no `url()` support or images disabled */\n  cursor: -webkit-grabbing !important;\n  /* Chrome 1-21, Safari 4+ */\n  cursor: -moz-grabbing !important;\n  /* Firefox 1.5-26 */\n  cursor: grabbing !important;\n  /* W3C standards syntax, should come least */\n}\n@media only screen {\n  #outlinemode.dark {\n    background: #1e2021 !important;\n    color: rgba(255, 255, 255, 0.9) !important;\n  }\n  .dark .selection-area {\n    background-color: rgba(148, 200, 249, 0.2);\n    border-color: rgba(196, 225, 252, 0.2);\n  }\n  .dark .root-topic .topic-inner-text {\n    color: rgba(255, 255, 255, 0.9) !important;\n    caret-color: #ffffff !important;\n  }\n  .dark .topic:not(.root-topic) {\n    background-image: url("+d+");\n    background-color: #1e2021;\n  }\n  .dark .topic:not(.root-topic).main-topic .topic-inner::before {\n    color: #ffffff !important;\n    opacity: 0.2 !important;\n  }\n  .dark .topic:not(.root-topic).has-child::after {\n    background: #ffffff !important;\n  }\n  .dark .topic:not(.root-topic).dragging {\n    opacity: 1 / 9 !important;\n  }\n  .dark.dragging .topic-inner,\n  .dark .dragging .topic-inner {\n    background: #1e2021 !important;\n  }\n  .dark .topic::before,\n  .dark .root-topic::before {\n    background-color: #27292a !important;\n  }\n  .dark .topic:focus-within .topic-inner,\n  .dark .root-topic:focus-within .topic-inner,\n  .dark .topic:focus-within .topic-inner-text,\n  .dark .root-topic:focus-within .topic-inner-text,\n  .dark .topic:focus-within .topic-dot,\n  .dark .root-topic:focus-within .topic-dot,\n  .dark .topic:focus-within .topic-dot::before,\n  .dark .root-topic:focus-within .topic-dot::before,\n  .dark .topic:focus-within .topic-notes,\n  .dark .root-topic:focus-within .topic-notes,\n  .dark .topic:focus-within .topic-inserts,\n  .dark .root-topic:focus-within .topic-inserts,\n  .dark .topic:focus-within .topic-markers,\n  .dark .root-topic:focus-within .topic-markers,\n  .dark .topic:focus-within,\n  .dark .root-topic:focus-within {\n    background-color: #27292a !important;\n  }\n  .dark .topic:focus-within .topic-dot::before,\n  .dark .root-topic:focus-within .topic-dot::before {\n    box-shadow: 0px 23px #27292a !important;\n  }\n  .dark .topic:focus-within .topic-dot:hover,\n  .dark .root-topic:focus-within .topic-dot:hover {\n    background: #323537 !important;\n  }\n  .dark .topic:focus-within::before,\n  .dark .root-topic:focus-within::before {\n    width: 100%;\n    box-shadow: -1740px 0px 0px #27292a, -1280px 0px 0px #27292a, -640px 0px 0px #27292a, 640px 0px 0px #27292a, 1280px 0px 0px #27292a, 1740px 0px 0px #27292a !important;\n  }\n  .dark .topic-outter-wrap.selected:not(.dragging) .topic-wrap {\n    background: rgba(54, 54, 54, 0.9) !important;\n  }\n  .dark .topic-outter-wrap.selected:not(.dragging) .topic-dot::before {\n    background-color: transparent !important;\n    box-shadow: none !important;\n  }\n  .dark .topic-outter-wrap.selected:not(.dragging) .topic-dot.has-child:hover {\n    background: #444444 !important;\n  }\n  .dark .topic-outter-wrap.selected:not(.dragging) .topic-notes,\n  .dark .topic-outter-wrap.selected:not(.dragging) .topic-inner-text,\n  .dark .topic-outter-wrap.selected:not(.dragging) .topic-dot,\n  .dark .topic-outter-wrap.selected:not(.dragging) .topic-inserts,\n  .dark .topic-outter-wrap.selected:not(.dragging) .topic-markers {\n    background: transparent !important;\n  }\n  .dark .topic-wrap .topic-dot,\n  .dark .topic-inner .topic-dot,\n  .dark .topic-wrap .topic-inserts,\n  .dark .topic-inner .topic-inserts {\n    background: #1e2021 !important;\n  }\n  .dark .topic-wrap .topic-inner-text,\n  .dark .topic-inner .topic-inner-text {\n    background: #1e2021 !important;\n    color: rgba(255, 255, 255, 0.9) !important;\n    caret-color: #ffffff !important;\n  }\n  .dark .topic-wrap .topic-inner-text.zipped::after,\n  .dark .topic-inner .topic-inner-text.zipped::after {\n    background: rgba(255, 255, 255, 0.16) !important;\n    color: rgba(255, 255, 255, 0.7) !important;\n  }\n  .dark .topic-dot::before {\n    background: #1e2021 !important;\n    box-shadow: 0px 23px #1e2021 !important;\n  }\n  .dark .topic-dot::after {\n    background: #ffffff !important;\n    border-color: #ffffff !important;\n  }\n  .dark .topic-dot:hover {\n    background: #303233 !important;\n  }\n  .dark .topic-dot:hover::before {\n    background: #1e2021 !important;\n  }\n  .dark .topic-label {\n    background-color: rgba(255, 255, 255, 0.05) !important;\n    border-color: rgba(255, 255, 255, 0.15) !important;\n    color: rgba(255, 255, 255, 0.7) !important;\n  }\n  .dark .topic-label:hover {\n    border-color: rgba(255, 255, 255, 0.5) !important;\n  }\n  .dark .topic-hyperlink,\n  .dark .topic-audio-notes {\n    background-color: rgba(255, 255, 255, 0.04) !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n  }\n  .dark .topic-hyperlink::before,\n  .dark .topic-audio-notes::before {\n    background-color: rgba(255, 255, 255, 0.6) !important;\n  }\n  .dark .topic-hyperlink:active,\n  .dark .topic-audio-notes:active,\n  .dark .topic-hyperlink:focus,\n  .dark .topic-audio-notes:focus {\n    background-color: rgba(255, 255, 255, 0.08) !important;\n  }\n  .dark .topic-hyperlink:hover,\n  .dark .topic-audio-notes:hover,\n  .dark .topic-hyperlink:active,\n  .dark .topic-audio-notes:active,\n  .dark .topic-hyperlink:focus,\n  .dark .topic-audio-notes:focus {\n    color: #69cbfb !important;\n  }\n  .dark .topic-hyperlink:hover::before,\n  .dark .topic-audio-notes:hover::before,\n  .dark .topic-hyperlink:active::before,\n  .dark .topic-audio-notes:active::before,\n  .dark .topic-hyperlink:focus::before,\n  .dark .topic-audio-notes:focus::before {\n    background-color: #69cbfb !important;\n  }\n  .dark .topic-notes {\n    background-color: #1e2021 !important;\n  }\n  .dark .topic-markers {\n    background: #1e2021 !important;\n  }\n  .dark .topic-notes .ql-editor {\n    color: rgba(255, 255, 255, 0.4) !important;\n    caret-color: #ffffff !important;\n  }\n  .dark .topic-notes .ql-editor.ql-blank::before {\n    color: rgba(255, 255, 255, 0.2) !important;\n  }\n  .dark .topic-notes-toolbar {\n    background-color: #343434 !important;\n  }\n  .dark .topic-notes-toolbar button::before {\n    background-color: #ffffff !important;\n  }\n  .dark .topic-notes-toolbar button:hover {\n    background-color: #444444 !important;\n  }\n  .dark .floating-topics-separator {\n    border-color: #303233 !important;\n    opacity: 1 !important;\n  }\n  .dark .topic-notes-container {\n    color: rgba(255, 255, 255, 0.5) !important;\n  }\n  .dark .topic-notes-container > trix-editor em,\n  .dark .topic-notes-container > trix-editor strong,\n  .dark .topic-notes-container > trix-editor u {\n    color: rgba(255, 255, 255, 0.5) !important;\n  }\n  .dark .topic-notes-container > trix-editor::before {\n    color: rgba(255, 255, 255, 0.3) !important;\n  }\n  .dark .topic-equation {\n    fill: #fff !important;\n  }\n}\n",""]);const u=c},46700:(e,t,o)=>{var n={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-SG":85383,"./en-SG.js":85383,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-nz":76319,"./en-nz.js":76319,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-tw":74152,"./zh-tw.js":74152};function i(e){var t=r(e);return o(t)}function r(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=46700},73725:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.STRUCTURECLASS2PREVIEWCLASSMAP=void 0;const i=n(o(61027)),{MAPUNBALANCED:r,MAPCLOCKWISE:a,LOGICRIGHT:s,LOGICLEFT:l,BRACERIGHT:c,BRACELEFT:d,TREERIGHT:u,TREELEFT:p,ORGCHARTDOWN:h,ORGCHARTUP:f,FISHBONELEFTHEADED:m,FISHBONERIGHTHEADED:g,TIMELINEHORIZONTAL:v,TIMELINEVERTICAL:b,SPREADSHEET:A,COLUMNSPREADSHEET:E,TOPTITLETREETABLE:T}=i.default.constant.STRUCTURECLASS;t.STRUCTURECLASS2PREVIEWCLASSMAP={[r]:"map-unbalance",[a]:"map-clockwise",[s]:"logic-right",[l]:"logic-left",[c]:"brace-right",[d]:"brace-left",[u]:"tree-right",[p]:"tree-left",[h]:"org-down",[f]:"org-up",[m]:"fishbone-left",[g]:"fishbone-right",[v]:"timeline-horizontal",[b]:"timeline-vertical",[A]:"matrix-row",[E]:"matrix-column",[T]:"tree-table-column"}},91115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectLinkRange=void 0,t.selectLinkRange=function(e){const t=window.getSelection();t.removeAllRanges();const o=document.createRange();o.selectNode(e),t.addRange(o)}},40084:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(46291)),a=o(81815),s=i(o(2286)),l=o(95287);t.default=function(e){return n(this,void 0,void 0,(function*(){const t=e.state.editor,o=e.state.editor.sheetContentChangedTrigger,n=e.state.editor.sheetSwitchedTrigger;if(t&&(t.isVisible||o||n)){const t=e.state.editor.sbEditorWrapper.value;if(!t)return;const o=t.getCurrentSheetEditor();if(!o)return;const n=new r.default(e),i=yield n.prepare();yield a.closeProgress(e);const c=yield l.showSaveDialog({title:"Export",suggestPath:{store:e,sheet:o.model},filters:[{name:"PowerPoint",extensions:["pptx"]}]});c&&(yield s.default.writeFile(c,i))}}))}},46291:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(32118),a=i(o(23907)),s=o(65831);t.default=class{constructor(e){this.contentProvider=new s.SheetSnapshotContentProvider(e),this.slideshow=new r.Slideshow(this.contentProvider)}exportPptxPage(e){return n(this,void 0,void 0,(function*(){const t=this.pptx.addSlide();t.background={color:e.backgroundColor,transparency:e.backgroundTransparency},e.boxes.forEach((e=>{"text"in e?t.addText(e.text,e):t.addImage(e)}))}))}prepare(){return n(this,void 0,void 0,(function*(){const e=new r.SlideshowExporter(this.slideshow);this.pptx=new a.default,this.pptx.layout="LAYOUT_16x9";const t=e.exportPptxSlides();for(const[e,o]of t.entries())yield this.exportPptxPage(o);return yield this.pptx.write({outputType:"nodebuffer"})}))}}},48519:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.exportPDF=void 0;const r=o(53166),a=o(95287),s=o(32118),l=o(65831),c=o(58933),d=i(o(2286)),u=i(o(85622)),p=o(81815),h=o(28441),f=o(1893),m=o(1893);class g extends l.SheetSnapshotContentProvider{constructor(e,t=null){super(e,t),this.themeId=e.getters["pitch/preferredThemeId"]||"default"}get preferredThemeId(){return this.themeId}set preferredThemeId(e){this.themeId=e}}function v(e,t,o,i=null){return n(this,void 0,void 0,(function*(){const n=e.state.editor.sbEditorWrapper.value;if(!n)return;const r={orientation:"portrait",suggestPath:{},backgroundColor:"#000",themeId:"default",title:""};let a;a=i?n.sheetEditors[i]:n.getCurrentSheetEditor();const l=new g(e,a);t||(l.preferredThemeId="light"),r.themeId=l.preferredThemeId;const c=new s.Slideshow(l);c.disablesAnimations=!0,yield new Promise((e=>setTimeout(e,200)));const d=new s.SlideshowExporter(c),u=yield d.exportHtmlPages();r.suggestPath={store:e,sheet:a.model},r.title=a.model.get("title");return{htmlPages:u,options:{pageSize:{width:Math.floor(c.slideSize.width/o.x*25400),height:Math.ceil(c.slideSize.height/o.y*25400)},marginsType:1,printBackground:!0,landscape:"landscape"==r.orientation},settings:r}}))}t.exportPDF=function(e,t,o=[]){return n(this,void 0,void 0,(function*(){const n=h.getScreenDPI(),i=[];if(o.length)for(const r of o)i.push(yield v(e,t,n,r));else i.push(yield v(e,t,n));if(yield p.closeProgress(e),1===i.length){const{htmlPages:t,options:o,settings:n}=i[0],s=yield r.pitchPrepare(e,n,t),l=yield a.showSaveDialog({title:e.getters["l10n/T"]("Save"),suggestPath:n.suggestPath,filters:[{name:"PDF",extensions:["pdf"]}]});if(l){const t=yield c.remote.getCurrentWebContents().printToPDF(o);s(),d.default.writeFile(l,t),e.commit("rateUs/addRateMasValue",1)}else s()}else if(i.length>1){const{canceled:t,filePaths:o}=yield c.remote.dialog.showOpenDialog(c.remote.getCurrentWindow(),{title:e.getters["l10n/T"]("Save"),buttonLabel:e.getters["l10n/T"]("Save"),properties:["openDirectory","createDirectory"],securityScopedBookmarks:!0});if(t||!o||!o.length)return;const n=e.state.editor.sbEditorWrapper.value;if(!n)return;const a=o[0],s=f.suggestDirNameSync(a,n.model.get("title"));yield d.default.ensureDir(s);for(const{htmlPages:t,options:o,settings:n}of i){const i=yield r.pitchPrepare(e,n,t),a=yield c.remote.getCurrentWebContents().printToPDF(o);i();let l=n.title;l="win32"===process.platform?m.filterSpecialCharacterOnWindows(l):l,l=l.replace(/[/\\?%*:|"<>]/g,"-");const p=u.default.resolve(s,l+".pdf");yield d.default.writeFile(p,a)}}}))}},51818:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useQuickStylesBoundaryPreview=void 0;const i=n(o(61027)),r=o(90571),a=10,{BOUNDARYSHAPE:s}=i.default.constant,l=10,c=10;function d(e){return"M "+e.x+" "+e.y+"L "+(e.x+e.width)+" "+e.y+"L "+(e.x+e.width)+" "+(e.y+e.height)+"L "+e.x+" "+(e.y+e.height)+"z"}function u(e){if(e.length>=3){const n=e.slice();n[n.length]=n[0];let i,r,a,s,l,d,u="";for(let e=1;e<n.length;e++)i=n[e-1],r=n[e],t=i,o=r,l=Math.sqrt((o.x-t.x)*(o.x-t.x)+(o.y-t.y)*(o.y-t.y)),l>c?(a={x:c*(r.x-i.x)/l+i.x,y:c*(r.y-i.y)/l+i.y},s={x:(l-c)*(r.x-i.x)/l+i.x,y:(l-c)*(r.y-i.y)/l+i.y}):(a={x:l/2*(r.x-i.x)/l+i.x,y:l/2*(r.y-i.y)/l+i.y},s={x:a.x,y:a.y}),""===u?(u+="M "+a.x+" "+a.y,d=a):u+=" Q "+i.x+" "+i.y+" "+a.x+" "+a.y,u+=" L "+s.x+" "+s.y;return u+=" Q "+n[0].x+" "+n[0].y+" "+d.x+" "+d.y,u+=" Z",u}var t,o}function p(e){if(e.length>=3){const t=e.shift();let o="M "+t.x+" "+t.y;return e.forEach((e=>{o+=" L "+e.x+" "+e.y})),o+=" Z",o}}const h={[s.RECT]:function(e,t){const o=e.x,n=e.y,i=e.width+e.x,r=e.height+e.y;return"M "+o+" "+n+"L "+i+" "+n+"L "+i+" "+r+"L "+o+" "+r+"z"},[s.ROUNDEDRECT]:function(e){const t=e.x,o=e.y,n=e.width+e.x,i=e.height+e.y;return"M "+(t+c)+" "+o+"L "+(n-c)+" "+o+"Q "+n+" "+o+" "+n+" "+(o+c)+"L "+n+" "+(i-c)+"Q "+n+" "+i+" "+(n-c)+" "+i+"L "+(t+c)+" "+i+"Q "+t+" "+i+" "+t+" "+(i-c)+"L "+t+" "+(o+c)+"Q "+t+" "+o+" "+(t+c)+" "+o+"z"},[s.SCALLOPS]:function(e){const t=e.x,o=e.y,n=e.width+e.x,i=e.height+e.y,r=n-t-l,a=i-o-l,s=r/Math.max(1,r/20),c=a/Math.max(1,a/20);let d=t+5,u=o+5,p=t+s+5,h=o+5,f="";const m=r/s,g=a/c;let v;for(f+="M "+d+" "+u,v=0;v<m;v++)f+="C "+(d+.25*(p-d))+" "+(h-5)+" "+(d+.75*(p-d))+" "+(h-5)+" "+p+" "+h,d=p,p=d+s;for(p=d,h+=c,v=0;v<g;v++)f+="C "+(d+5)+" "+(u+.25*(h-u))+" "+(d+5)+" "+(u+.75*(h-u))+" "+d+" "+h,u=h,h=u+c;for(h=u,p=d-s,v=0;v<m;v++)f+="C "+(d-.25*Math.abs(p-d))+" "+(h+5)+" "+(d-.75*Math.abs(p-d))+" "+(h+5)+" "+p+" "+h,d=p,p=d-s;for(p=d,h-=c,v=0;v<g;v++)f+="C "+(d-5)+" "+(u-.25*Math.abs(h-u))+" "+(d-5)+" "+(u-.75*Math.abs(h-u))+" "+d+" "+h,u=h,h=u-c;return f+="Z",f},[s.WAVES]:function(e){const t=e.x,o=e.y,n=e.width+e.x,i=e.height+e.y,r=n-t-l,a=i-o-l,s=r/Math.max(1,r/20),c=a/Math.max(1,a/20);let d=t+5,u=o+5,p=t+s+5,h=o+5,f="";const m=r/s,g=a/c;let v;for(f+="M "+d+" "+u,v=0;v<m;v++)f+="Q "+(d+.25*(p-d))+" "+(h-2.5)+" "+(d+.5*(p-d))+" "+h+"T "+p+" "+h,d=p,p=d+s;for(p=d,h+=c,v=0;v<g;v++)f+="Q "+(d+2.5)+" "+(u+.25*(h-u))+" "+d+" "+(u+.5*(h-u))+"T "+d+" "+h,u=h,h=u+c;for(h=u,p=d-s,v=0;v<m;v++)f+="Q "+(d-.25*Math.abs(p-d))+" "+(h+2.5)+" "+(d-.5*Math.abs(p-d))+" "+h+"T "+p+" "+h,d=p,p=d-s;for(p=d,h-=c,v=0;v<g;v++)f+="Q "+(d-2.5)+" "+(u-.25*Math.abs(h-u))+" "+d+" "+(u-.5*Math.abs(h-u))+"T "+d+" "+h,u=h,h=u-c;return f+="Z",f},[s.TENSION]:function(e){const t=e.x,o=e.y,n=e.width+e.x,i=e.height+e.y,r=n-t-l,a=i-o-l,s=r/Math.max(1,r/20),c=a/Math.max(1,a/20);let d=t+5,u=o+5,p=t+s+5,h=o+5,f="";const m=r/s,g=a/c;let v;for(f+="M "+d+" "+u,v=0;v<m;v++)f+="Q "+(d+.5*(p-d))+" "+(h+5)+" "+p+" "+h,d=p,p=d+s;for(p=d,h+=c,v=0;v<g;v++)f+="Q "+(d-5)+" "+(u+.5*(h-u))+" "+d+" "+h,u=h,h=u+c;for(h=u,p=d-s,v=0;v<m;v++)f+="Q "+(d-.5*Math.abs(p-d))+" "+(h-5)+" "+p+" "+h,d=p,p=d-s;for(p=d,h-=c,v=0;v<g;v++)f+="Q "+(d+5)+" "+(u-.5*Math.abs(h-u))+" "+d+" "+h,u=h,h=u-c;return f+="Z",f},[s.ROUNDEDPOLYGON]:function(e){return u(f(e))},[s.POLYGON]:function(e){return p(f(e))},[s.NEWBOUNDARY1]:function(e){const t=e.width,o=e.height;return"M 50 0L "+(t-5)+" 0Q "+t+" 0 "+t+" 5L "+t+" "+(o-50)+"Q "+t+" "+o+" "+(t-50)+" "+o+"L 5 "+o+"Q 0 "+o+" 0 "+(o-5)+"L 0 50Q 0 0 50 0z"},[s.NEWBOUNDARY2]:function(e){return u([{x:50,y:0},{x:e.width,y:e.height},{x:e.width-50,y:e.height},{x:0,y:e.height}])},[s.NEWBOUNDARY3]:function(e){return p([{x:0,y:0},{x:e.width,y:0},{x:e.width+50,y:e.height/2},{x:e.width,y:e.height},{x:0,y:e.height}])},[s.FOCUS]:function(e){const t=e.x,o=e.y,n=e.width,i=e.height,r=Math.min(60,Math.min(i,n)/8);return{d:`M ${t} ${o+r} L ${t} ${o} L ${t+r} ${o}\n            M ${t+n-r} ${o} L ${t+n} ${o} L ${t+n} ${o+r}\n            M ${t+n} ${o+i-r} L ${t+n} ${o+i} L ${t+n-r} ${o+i}\n            M ${t} ${o+i-r} L ${t} ${o+i} L ${t+r} ${o+i}\n            `,fillD:d(Object.assign({x:t,y:o},e))}},[s.CROSS]:function(e){const t=e.x,o=e.y,n=e.width,i=e.height;return{d:`M ${t} ${o+a} L ${n+t} ${o+a}\n            M ${t+a} ${o} L ${t+a} ${i+o}\n            M ${t} ${i+o-a} L ${t+n} ${i+o-a}\n            M ${t+n-a} ${o} L ${t+n-a} ${o+i}`,fillD:d(Object.assign({x:0,y:0},e))}}};function f(e){const t=e.width/3,o=e.height/2;return function(e){(e=[...e]).sort(((e,t)=>e.x!==t.x?e.x-t.x:e.y-t.y));const t=e.length,o=[];for(let i=0;i<2*t;i++){const r=i<t?i:2*t-1-i;for(;o.length>=2&&n(o[o.length-2],o[o.length-1],e[r]);)o.pop();o.push(e[r])}return o.pop(),o;function n(e,t,o){const n=(e.x-t.x)*(o.y-t.y)-(e.y-t.y)*(o.x-t.x),i=(e.x-t.x)*(o.x-t.x)+(e.y-t.y)*(o.y-t.y);return n<0||0===n&&i<=0}}([{x:e.x,y:e.y+o-15},{x:e.x,y:e.y+o+15},{x:e.x+t,y:e.y},{x:e.x+t,y:e.y+e.height},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height}])}t.useQuickStylesBoundaryPreview=e=>{const t={x:7,y:9,width:114,height:54},o=r.computed((()=>h[e.boundaryShape]&&h[e.boundaryShape](t,e.direction)));return{boundaryPath:r.computed((()=>"string"==typeof o.value?o.value:o.value&&o.value.d)),boundaryFillPath:r.computed((()=>"string"==typeof o.value?o.value:o.value&&o.value.fillD)),boundaryLineDashArray:r.computed((()=>{switch(e.boundaryLinePattern){case"dash":return"6, 2";case"dot":return"2, 2";case"dash-dot":return"6, 2, 2, 2";case"dash-dot-dot":return"6, 2, 2, 2, 2, 2";default:return""}})),boundaryShapeTransformPatch:r.computed((()=>({[s.WAVES]:{transform:"scale(0.85) translate(4px, 0px)"},[s.SCALLOPS]:{transform:"scale(0.85) translate(4px, 0px)"},[s.TENSION]:{transform:"scale(0.85) translate(4px, 0px)"}}[e.boundaryShape]||{})))}}},68121:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useQuickStylesRelationshipPreview=void 0;const n=o(90571),i="M 4 1.5 a 2.5 2.5 0 1 0 0.01 0ZM 4 2.5a 1.5 1.5 0 1 1 -0.01 0ZM 4 3A 1 1 0 1 1 4 5A 1 1 0 1 1 4 3 Z",r="M 4 2 L 6 4 L 4 6 L 2 4 L 4 2 Z M 3.65 3.65 L 4.35 4.35";var a,s,l;!function(e){e.Curved="org.xmind.relationshipShape.curved",e.Straight="org.xmind.relationshipShape.straight",e.Angled="org.xmind.relationshipShape.angled",e.Zigzag="org.xmind.relationshipShape.zigzag"}(a||(a={})),function(e){e.Solid="solid",e.Dash="dash",e.Dot="dot",e.DashDot="dash-dot",e.DashDotDot="dash-dot-dot"}(s||(s={})),function(e){e.NORMAL="org.xmind.arrowShape.normal",e.SPEARHEAD="org.xmind.arrowShape.spearhead",e.DOT="org.xmind.arrowShape.dot",e.TRIANGLE="org.xmind.arrowShape.triangle",e.SQUARE="org.xmind.arrowShape.square",e.DIAMOND="org.xmind.arrowShape.diamond",e.HERRINGBONE="org.xmind.arrowShape.herringbone",e.NONE="org.xmind.arrowShape.none",e.RING="org.xmind.arrowShape.ring",e.EYE="org.xmind.arrowShape.eye",e.DOUBLEARROW="org.xmind.arrowShape.doublearrow",e.SQUARERING="org.xmind.arrowShape.squarering",e.ANTITRIANGLE="org.xmind.arrowShape.antiTriangle",e.ATTACHED="org.xmind.arrowShape.attached",e.HOOK="org.xmind.arrowShape.hook"}(l||(l={}));const c={[l.NONE]:{width:8,height:8,startD:"",startRefX:5,startRefY:4,endD:"",endRefX:5,endRefY:4,tip:0,needFill:!1,strokeWidth:1},[l.NORMAL]:{width:8,height:8,startD:"M 6 2 L 2 4 L 6 6",endD:"M 2 2 L 6 4 L 2 6",startRefX:5,endRefX:3,tip:4,strokeWidth:1},[l.TRIANGLE]:{width:8,height:8,startD:"M 6 2 L 2 4 L 6 6 Z",endD:"M 2 2 L 6 4 L 2 6",startRefX:6,endRefX:2,tip:4,needFill:!0,strokeWidth:1},[l.SPEARHEAD]:{width:8,height:8,startD:"M 6 2 L 2 4 L 6 6 L 5 4 L 6 2 Z",endD:"M 2 2 L 6 4 L 2 6 L 3 4 L 2 2 Z",endRefX:3,startRefX:5,tip:3,needFill:!0,strokeWidth:1},[l.DOT]:{width:8,height:8,startD:"M 4 2 A 2 2 0 1 1 4 6 A 2 2 0 1 1 4 2 Z",endD:"M 4 2 A 2 2 0 1 1 4 6 A 2 2 0 1 1 4 2 Z",startRefX:6,endRefX:2,tip:4,needFill:!0,strokeWidth:1},[l.SQUARE]:{width:8,height:8,startD:"M 2 2 L 6 2 L 6 6 L 2 6 Z",endD:"M 2 2 L 6 2 L 6 6 L 2 6 Z",startRefX:6,endRefX:2,tip:4,needFill:!0,strokeWidth:1},[l.DIAMOND]:{width:8,height:8,startD:"M 1.5 4 L 4 2 L 6.5 4 L 4 6 Z",endD:"M 1.5 4 L 4 2 L 6.5 4 L 4 6 Z",startRefX:5,endRefX:3,tip:3.5,needFill:!0,strokeWidth:1},[l.HERRINGBONE]:{width:8,height:8,startD:"M 2 2 L 3 4 L 2 6 M 4 2 L 5 4 L 4 6 M 6 2 L 7 4 L 6 6 M 3 4 L 7 4",endD:"M 3 2 L 2 4 L 3 6 M 5 2 L 4 4 L 5 6 M 7 2 L 6 4 L 7 6 M 2 4 L 6 4",startRefX:7,endRefX:2,tip:5},[l.DOUBLEARROW]:{width:8,height:8,startD:"M 2 4 L 5 2 L 5 6 Z M 4 4 L 6.5 2.5 L 6.5 5.5 Z",endD:"M 6 4 L 3 2 L 3 6 Z M 4 4 L 1.5 2.5 L 1.5 5.5 Z",startRefX:6.5,endRefX:1.5,tip:4.5,needFill:!0},[l.RING]:{width:8,height:8,startD:"M 4 2 A 2 2 0 1 1 4 6 A 2 2 0 1 1 4 2 Z",endD:"M 4 2 A 2 2 0 1 1 4 6 A 2 2 0 1 1 4 2 Z",startRefX:6,endRefX:2,tip:4.5,needFill:!1,strokeWidth:1},[l.EYE]:{width:8,height:8,startD:i,endD:i,startRefX:6,endRefX:2,tip:4.5,needFill:!0,strokeWidth:1},[l.SQUARERING]:{width:8,height:8,startD:r,endD:r,startRefX:6,endRefX:2,tip:4.5,needFill:!1,strokeWidth:1},[l.ANTITRIANGLE]:{width:8,height:8,startD:"M 2 2 L 6 4 L 2 6 Z",endD:"M 6 2 L 2 4 L 6 6 Z",startRefX:6,endRefX:2,tip:5,needFill:!0,strokeWidth:1},[l.ATTACHED]:{width:8,height:8,startD:"M 3 1 L 4 1 L 4 5 L 3 5 Z",endD:"M 3 1 L 4 1 L 4 5 L 3 5 Z",startRefX:4,endRefX:3,startRefY:3,endRefY:3,tip:3,needFill:!0,strokeWidth:1},[l.HOOK]:{width:8,height:8,startD:"M 0 3 L 6 0 L 5.5 3 Z",endD:"M 0 0 L 6 3 L 0.5 3 Z",startRefX:6,endRefX:0,startRefY:2.5,endRefY:2.5,tip:6,needFill:!0,strokeWidth:1}},d={[s.Dash]:"9, 3",[s.DashDot]:"9, 3, 3, 3",[s.DashDotDot]:"9, 3, 3, 3, 3, 3",[s.Dot]:"3, 3",[s.Solid]:""};t.useQuickStylesRelationshipPreview=e=>{const t=n.computed((()=>c[e.relationshipBeginArrowShapeClass])),o=n.computed((()=>c[e.relationshipEndArrowShapeClass])),i=n.computed((()=>d[e.relationshipLinePattern])),r=n.computed((()=>Math.max(1,parseFloat(e.relationshipLineWidth)/1.5))),s=n.computed((()=>{const n=r.value/2,i=e.height/2,s=e.width/2,c=e.width/5,d=e.relationshipBeginArrowShapeClass&&e.relationshipBeginArrowShapeClass!==l.NONE,u=e.relationshipEndArrowShapeClass&&e.relationshipEndArrowShapeClass!==l.NONE,p=d?(t.value&&t.value.width||0)*n:0,h=u?(o.value&&o.value.width||0)*n:0;return{[a.Angled]:`\n        M${p+8} ${i}\n         L ${p+8+c} ${i-16}\n         L ${e.width-(c+h+8)} ${i+16}\n         L ${e.width-(h+8)} ${i}`,[a.Curved]:`M${p+8} ${i} C ${s} 0 ${s} ${e.height} ${e.width-(h+8)} ${i}`,[a.Straight]:`M${p+8} ${i} L ${e.width-(h+8)} ${i}`,[a.Zigzag]:`M${p+8} ${i-10} L ${s} ${i-10} L ${s} ${i+10} L ${e.width-(h+8)} ${i+10}`}[e.relationshipShapeClass]}));return{relationshipLineWidth:r,relationshipLineShapePath:s,relationshipLineDashArray:i,relationshipArrowBegin:t,relationshipArrowEnd:o}}},23350:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useQuickStyleSummaryPreview=void 0;const i=n(o(61027)),r=o(90571),{SUMMARYCONNECTION:a}=i.default.constant,s=20,l={[a.ANGLE]:function(e){const{posArray:t,lineWidth:o,lineColor:n}=e,i=t.startPos,r=t.middlePos,a=t.endPos;return{d:"M "+i.x+" "+i.y+"  "+r.x+" "+r.y+"  "+a.x+" "+a.y,strokeColor:n,strokeWidth:o,fill:"none"}},[a.CURLY]:function({posArray:e,isHorizontal:t,lineWidth:o,lineColor:n}){const i=e.startPos,r=e.middlePos,a=e.endPos;let s="";function l(e,o,n){const i=.3;let r;if(t){const t=e.x<o.x?e.x-i:e.x+i,a=e.x<o.x?e.x+i:e.x-i,s=o.x<e.x?o.x+i:o.x-i,l=o.x<e.x?o.x-i:o.x+i,c=(e.x+o.x)/2,d=(e.y+o.y)/2,u=d<o.y?d+n/2:d-n/2,p=d<o.y?d-n/2:d+n/2,h=o.y,f=h<e.y?h+n:h-n,m=e.y,g=m<o.y?m+n:m-n;r="M "+t+" "+e.y+"Q "+t+" "+h+", "+c+" "+u+"Q "+s+" "+g+", "+s+" "+o.y+"L "+l+" "+o.y+"Q "+l+" "+m+", "+c+" "+p+"Q "+a+" "+f+", "+a+" "+e.y+"L "+t+" "+e.y}else{const t=e.y<o.y?e.y-i:e.y+i,a=e.y<o.y?e.y+i:e.y-i,s=o.y<e.y?o.y+i:o.y-i,l=o.y<e.y?o.y-i:o.y+i,c=(e.x+o.x)/2,d=(e.y+o.y)/2,u=c<o.x?c+n/2:c-n/2,p=c<o.x?c-n/2:c+n/2,h=o.x,f=h<e.x?h+n:h-n,m=e.x,g=m<o.x?m+n:m-n;r="M "+e.x+" "+t+"Q "+h+" "+t+", "+u+" "+d+"Q "+g+" "+s+", "+o.x+" "+s+"L "+o.x+" "+l+"Q "+m+" "+l+", "+p+" "+d+"Q "+f+" "+a+", "+e.x+" "+a+"L "+e.x+" "+t}return r}return s=l(r,i,o)+l(r,a,o),{d:s,fill:n,strokeColor:n,strokeWidth:o}},[a.SQUARE]:function({posArray:e,isHorizontal:t,lineColor:o,lineWidth:n,position:i}){const r=e.startPos,a=e.middlePos,l=e.endPos,c=i.x>=0?s:-20,d=n;let u="M "+r.x+" "+r.y+"L "+(r.x+c/2)+" "+r.y+"L "+(r.x+c/2)+" "+a.y+"L "+a.x+" "+a.y+"M "+(r.x+c/2)+" "+a.y+"L "+(l.x+c/2)+" "+l.y+"L "+l.x+" "+l.y;if(t){const e=i.y>=0?s:-20;u="M "+r.x+" "+r.y+"L "+r.x+" "+(r.y+e/2)+"L "+a.x+" "+(r.y+e/2)+"L "+a.x+" "+a.y+"M "+a.x+" "+(r.y+e/2)+"L "+l.x+" "+(l.y+e/2)+"L "+l.x+" "+l.y}return{d:u,fill:"none",strokeColor:o,strokeWidth:d}},[a.ROUND]:function({posArray:e,isHorizontal:t,lineWidth:o,lineColor:n,position:i}){const r=e.startPos,a=e.middlePos,l=e.endPos,c=i.x>=0?s:-20,d=i.x>=0?1:0,u=o,p=n;let h="M "+r.x+" "+r.y+"A "+c/3*2+" "+(l.y-r.y)/2+" 0 1 "+d+" "+l.x+" "+l.y+"M "+(r.x+c/3*2)+" "+a.y+"L "+a.x+" "+a.y;if(t){const e=i.y>=0?0:1,t=i.y>=0?s:-20;h="M "+r.x+" "+r.y+"A "+(l.x-r.x)/2+" "+t/3*2+"  0 1 "+e+" "+l.x+" "+l.y+"M "+a.x+" "+(r.y+t/3*2)+"L "+a.x+" "+a.y}return{d:h,fill:"none",strokeColor:p,strokeWidth:u}},[a.BRACKET]:function({posArray:e,isHorizontal:t,lineColor:o,lineWidth:n}){const i=e.startPos,r=e.middlePos,a=e.endPos;let s="";const l=n,c=o;const d=t?function(e,t){const o=t.x>e.x?1:-1,n=t.y>e.y?1:-1,i=(e.y+t.y)/2,r=t.x-e.x,a=t.y-e.y,s=Math.min(Math.abs(r)/4,Math.abs(a)/2);return`M ${e.x} ${e.y}L ${e.x} ${i-n*s}Q ${e.x} ${i} ${e.x+o*s} ${i}L ${t.x-o*s} ${i}Q ${t.x} ${i} ${t.x} ${i+n*s} L ${t.x} ${t.y}`}:function(e,t){const o=t.x>e.x?1:-1,n=t.y>e.y?1:-1,i=(e.x+t.x)/2,r=t.x-e.x,a=t.y-e.y,s=Math.min(Math.abs(r)/2,Math.abs(a)/4);return`M ${e.x} ${e.y}L ${i-o*s} ${e.y}Q ${i} ${e.y} ${i} ${e.y+n*s} L ${i} ${t.y-n*s}Q ${i} ${t.y} ${i+o*s} ${t.y}L ${t.x} ${t.y}`};return s=d(r,i)+d(r,a),{d:s,fill:"none",strokeColor:c,strokeWidth:l}},[a.SHARP]:function({posArray:e,isHorizontal:t,lineWidth:o,lineColor:n}){const i=e.startPos,r=e.middlePos,a=e.endPos;let s="";const l=o,c=n;function d(e,o,n){const i=.3;let r;if(t){const t=e.x<o.x?e.x-i:e.x+i,a=e.x<o.x?e.x+i:e.x-i,s=o.x<e.x?o.x+i:o.x-i,l=o.x<e.x?o.x-i:o.x+i,c=(e.x+o.x)/2,d=(e.y+o.y)/2,u=d<o.y?d+n/2:d-n/2,p=d<o.y?d-n/2:d+n/2,h=o.y,f=h<e.y?h+n:h-n,m=e.y,g=m<o.y?m+n:m-n;r="M "+t+" "+e.y+"Q "+t+" "+h+", "+c+" "+u+"Q "+s+" "+g+", "+s+" "+o.y+"L "+l+" "+o.y+"Q "+l+" "+m+", "+c+" "+p+"Q "+a+" "+f+", "+a+" "+e.y+"L "+t+" "+e.y}else{const t=e.y<o.y?e.y-i:e.y+i,a=e.y<o.y?e.y+i:e.y-i,s=o.y<e.y?o.y+i:o.y-i,l=o.y<e.y?o.y-i:o.y+i,c=(e.x+o.x)/2,d=(e.y+o.y)/2,u=c<o.x?c+n/2:c-n/2,p=c<o.x?c-n/2:c+n/2,h=o.x,f=h<e.x?h+n:h-n,m=e.x,g=m<o.x?m+n:m-n;r="M "+e.x+" "+t+"Q "+h+" "+t+", "+u+" "+d+"Q "+g+" "+s+", "+o.x+" "+s+"L "+o.x+" "+l+"Q "+m+" "+l+", "+p+" "+d+"Q "+f+" "+a+", "+e.x+" "+a+"L "+e.x+" "+t}return r}return s=d(r,i,l)+d(r,a,l),{d:s,fill:c,strokeColor:c,strokeWidth:l}},[a.FOLD]:function({posArray:e,isHorizontal:t,lineColor:o,lineWidth:n}){const i=e.startPos,r=e.middlePos,a=e.endPos;let s="";const l=n,c=o;const d=t?function(e,t,o){const n=t.x>e.x?1:-1,i=t.x-e.x,r=t.y-e.y,a=r/1.8+e.y,s=Math.min(Math.abs(i)/4,Math.abs(r)/2),l=[`L ${e.x} ${e.y}`,`L ${e.x+n*s/1.5} ${a}`,`L ${t.x-n*s/2} ${a}`,`${o?"M":"L"} ${t.x} ${t.y}`];return o?l.reverse():l}:function(e,t,o){const n=t.y>e.y?1:-1,i=t.x-e.x,r=t.y-e.y,a=i/1.8+e.x,s=Math.min(Math.abs(i)/2,Math.abs(r)/4),l=[`L ${e.x} ${e.y}`,`L ${a} ${e.y+n*s/1.5}`,`L ${a} ${t.y-n*s/2}`,`${o?"M":"L"} ${t.x} ${t.y}`];return o?l.reverse():l};return s=d(r,i,!0).concat(d(r,a,!1)).join(""),{d:s,fill:"none",strokeColor:c,strokeWidth:l}},[a.STRAIGHT]:function({posArray:e,isHorizontal:t,lineWidth:o,lineColor:n,position:i}){const r=e.startPos,a=e.middlePos,l=e.endPos,c=i.x>=0?s:-20,d=o,u=n;let p=`M ${r.x+c/2} ${r.y}\n            L ${r.x+c/2} ${l.y}\n            M ${r.x+c/2} ${a.y}\n            L ${a.x} ${a.y}\n            `;if(t){const e=i.y>=0?s:-20;p=`M ${r.x} ${r.y+e/2}\n          L ${l.x} ${r.y+e/2}\n          M ${a.x} ${l.y+e/2}\n          L ${a.x} ${a.y}\n          `}return{d:p,strokeColor:u,strokeWidth:d,fill:"none"}}};t.useQuickStyleSummaryPreview=e=>({summaryPreview:r.computed((()=>{const t=parseFloat(e.summaryLineWidth)||1;return l[e.summaryShapeClass]&&l[e.summaryShapeClass]({position:{x:0,y:0},lineColor:e.summaryLineColor,lineWidth:t,isHorizontal:!1,posArray:{startPos:{x:8,y:8},middlePos:{x:28,y:e.height/2},endPos:{x:8,y:e.height-8}}})}))})},19821:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useInjectors=void 0;const n=o(90571);t.useInjectors=()=>{const e=n.inject("getComputedStyles"),t=n.inject("getPrivateFallBackComputedStyles"),o=n.inject("getUserStyles"),i=n.inject("updateStyles"),r=n.inject("updateStyles"),a=n.inject("updateForceUpdateKey"),s=n.inject("getStructureClasses"),l=n.inject("getTopicWidths"),c=n.inject("selectionIds"),d=n.inject("getAvailableFontFamily"),u=n.inject("getRecentFontFamily"),p=n.inject("setRecentFontFamily"),h=n.inject("getAvailableStructures"),f=n.inject("currentSheetId"),m=n.inject("centralBranchId"),g=n.inject("getClassLists"),v=n.inject("getLayerLevels"),b=n.inject("getClassNames"),A=n.inject("getThemeStyle"),E=n.inject("getSuggestedClassNames"),T=n.inject("getTypes"),y=n.inject("getTheme"),C=n.inject("getModel"),S=n.inject("isFreePositionEnabled"),k=n.inject("isFloatingTopicFlexible"),w=n.inject("isTopicOverlapEnabled"),x=n.inject("selectionTypes"),I=n.inject("getTopicIdsByThemeClassNames"),_=n.inject("getTopicIdsByLevel"),B=n.inject("getSuggestedStructureClasses"),O=n.inject("getBranchLineDirectionRotateDeg"),M=n.inject("getSummaryDirectionRotateDeg"),L=n.inject("getCentralBranchStructureClass");return{getSkeletonThemeId:n.inject("getSkeletonThemeId"),getColorThemeId:n.inject("getColorThemeId"),getColorListFromExportedTheme:n.inject("getColorListFromExportedTheme"),getComputedStyles:e,getPrivateFallBackComputedStyles:t,getUserStyles:o,updateStyles:i,updateForceUpdateKey:a,getStructureClasses:s,getTopicWidths:l,selectionIds:c,selectionTypes:x,getAvailableStructures:h,getAvailableFontFamily:d,getRecentFontFamily:u,setRecentFontFamily:p,currentSheetId:f,centralBranchId:m,getClassLists:g,getClassNames:b,getLayerLevels:v,getThemeStyle:A,getSuggestedClassNames:E,getTypes:T,getTheme:y,isFreePositionEnabled:S,isFloatingTopicFlexible:k,isTopicOverlapEnabled:w,updateSummaryStyle:r,getModel:C,getTopicIdsByThemeClassNames:I,getTopicIdsByLevel:_,getSuggestedStructureClasses:B,getCentralBranchStructureClass:L,isFloatingRootTopic:n.inject("isFloatingRootTopic"),isSelectionsHasSymbolLikeShapeBranch:n.inject("isSelectionsHasSymbolLikeShapeBranch"),getBranchLineDirectionRotateDeg:O,getSummaryDirectionRotateDeg:M,getParentTopicStructure:n.inject("getParentTopicStructure"),isCompactMode:n.inject("isCompactMode"),isAlignmentByLevel:n.inject("isAlignmentByLevel")}}},58792:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useSnowbrush=void 0;const i=n(o(61027)),r=o(90571),a=o(36414),s=o(78408),{VIEW_TYPE:l,STRUCTURECLASS:c,EXPOSED_STRUCTURE:d,DIRECTION:u,ALL_TOPIC_TYPES:p,COMPACT_LAYOUT_MODE_LEVEL:h,STYLE_DESCRIPTOR_FOR_PRIVATE_STYLE_ID:f}=i.default.constant;t.useSnowbrush=function(e,t){const o=t.root.$store,n=r.ref(a.UUID()),m=r.ref({map:[],centralTopic:[],subTopic:[],mainTopic:[],summaryTopic:[],calloutTopic:[],boundary:[],floatingTopic:[],relationship:[],image:[]}),g=r.computed((()=>Object.entries(m.value).filter((([e,t])=>0!==t.length)).map((([e,t])=>e)))),v=r.computed((()=>Object.entries(m.value).filter((([e,t])=>0!==t.length)).reduce(((e,[t,o])=>e.concat(o)),[]))),b=()=>{n.value=a.UUID()},A=()=>{const e=o.state.editor.sbEditorWrapper.value;if(!e)return;const t=e.getSelections(),n={map:[],centralTopic:[],subTopic:[],mainTopic:[],summaryTopic:[],calloutTopic:[],boundary:[],floatingTopic:[],relationship:[],image:[]};for(const o of t){const{type:t}=o;switch(!0){case t===l.BRANCH&&o.model.parent()&&o.model.parent().isRootTopic&&o.model.parent().isRootTopic()&&o.isAttachedBranch():n.mainTopic.push(o.model.getId());break;case!(t!==l.BRANCH||o.isCentralBranch()||o.isDetachedBranch()||o.isSummaryBranch()||o.isCalloutBranch()):n.subTopic.push(o.model.getId());break;case t===l.BRANCH&&o.isCentralBranch():n.centralTopic.push(o.model.getId());break;case t===l.BRANCH&&o.isDetachedBranch():n.floatingTopic.push(o.model.getId());break;case t===l.BRANCH&&o.isSummaryBranch():n.summaryTopic.push(o.model.getId());break;case t===l.BRANCH&&o.isCalloutBranch():n.calloutTopic.push(o.model.getId());break;case t===l.BOUNDARY:n.boundary.push(o.model.getId());break;case t===l.RELATIONSHIP:n.relationship.push(o.model.getId());break;case t===l.IMAGE:n.image.push(o.model.getId());break;default:n.map.push(e.getCurrentSheetEditor().model.getId())}}m.value=n},E=e=>{n.value;const t=[],i=o.state.editor.sbEditorWrapper.value;if(i){for(const o of e||v.value){const e=i.getComponentViewById(o);e&&e.getStructureClass&&t.push(e.getStructureClass())}return t}},T=()=>{n.value;const e=o.state.editor.sbEditorWrapper.value;if(!e)return null;const t=e.getCurrentSheetEditor();return t&&t.model&&t.model.theme?t.model.theme():null},y=r.ref(""),C=r.ref(""),S=r.computed((()=>{n.value;const e=o.state.editor.sbEditorWrapper.value;if(!e)return;const t=e.getCurrentSheetEditor();return t&&t.model?t.model.isFreePositionEnabled():void 0})),k=r.computed((()=>{n.value;const e=o.state.editor.sbEditorWrapper.value;if(!e)return;const t=e.getCurrentSheetEditor();return t&&t.model?t.model.isFloatingTopicFlexible():void 0})),w=r.computed((()=>{n.value;const e=o.state.editor.sbEditorWrapper.value;if(!e)return;const t=e.getCurrentSheetEditor();return t&&t.model?"overlap"===t.model.get("topicOverlapping"):void 0})),x=e=>{switch(e){case u.DOWN:return u.UP;case u.UP:return u.DOWN;case u.LEFT:return u.RIGHT;case u.RIGHT:return u.LEFT;default:return u.RIGHT}},I={up:-90,right:0,down:90,left:180},_=(e,t)=>I[e]-I[t],B=()=>{n.value;const e=o.state.editor.sbEditorWrapper.value;if(!e)return x(u.LEFT);const t=v.value[0],r=e.getComponentViewById(t);return r&&r.type===l.BRANCH?x(i.default.utils.utils.getChildTargetOrientation(r,0)):x(u.LEFT)},O=()=>{n.value;const e=o.state.editor.sbEditorWrapper.value;if(!e)return x(u.LEFT);const t=v.value[0],r=e.getComponentViewById(t);return r&&r.type===l.BRANCH?x(r.summaryView?i.default.utils.utils.getSummaryDirection(r):u.LEFT):x(u.LEFT)},M=()=>{const e=E([C.value]);return Array.isArray(e)&&e.length?e[0]:null},L=r.computed((()=>{if(!Array.isArray(v.value)||v.value.length>1)return!1;const e=v.value[0],t=o.state.editor.sbEditorWrapper.value;if(!t)return!1;const n=t.getComponentViewById(e);return!!n&&n.type===l.BRANCH&&n.isDetachedBranch()})),R=r.computed((()=>{if(v.value.length>1)return!1;const e=o.state.editor.sbEditorWrapper.value;if(!e)return!1;if(!o.state.editor.sheetContentChangedTrigger)return!1;return v.value.findIndex((t=>{const o=e.getComponentViewById(t);return!(!o||o.type!==l.BRANCH)&&i.default.utils.utils.isSymbolLikeShapeBranch(o)}))>-1})),N=r.computed((()=>{if(n.value,v.value.length>1)return!1;const e=o.state.editor.sbEditorWrapper.value;if(!e)return!1;return e.getCurrentSheetEditor().model.getCompactLayoutModeLevel()===h.Second})),D=r.computed((()=>{if(n.value,v.value.length>1)return!1;const e=o.state.editor.sbEditorWrapper.value;if(!e)return!1;return e.getCurrentSheetEditor().isAlignmentByLevelMode()}));return r.watch((()=>o.state.editor.sheetSwitchedTrigger),(()=>{A(),(()=>{const e=o.state.editor.sbEditorWrapper.value;if(!e)return;const t=e.getCurrentSheetEditor();t&&t.model&&(y.value=t.model.getId())})(),(()=>{const e=o.state.editor.sbEditorWrapper.value;if(!e)return;const t=e.getCurrentSheetEditor&&e.getCurrentSheetEditor&&e.getCurrentSheetEditor().getSheetView();t&&t.centralBranchView&&t.centralBranchView.model&&(C.value=t.centralBranchView.model.getId())})(),b()})),r.watch((()=>o.state.editor.selectionObs),(()=>{A(),b()})),r.watch((()=>o.state.editor.sheetContentChangedTrigger),(()=>{A(),b()})),r.watch((()=>o.state.workbench.isZenDarkTheme),(()=>{b()})),{updateStyles:(e,t={})=>{const n=o.state.editor.sbEditorWrapper.value;n&&(o.execSnowbrushAction({commandId:e,args:Object.assign(Object.assign({},t),{targets:t.targets?t.targets.map(n.getComponentViewById.bind(n)).filter(Boolean):n.getSelections()})}),b())},getComputedStyles:(e,t={})=>{n.value;const r=[],a=o.state.editor.sbEditorWrapper.value;if(a){for(const o of t.targets||v.value){let n=a.getComponentViewById(o);if(t.isSummary&&n&&(n.originBranchView&&(n=n.originBranchView),n=n.summaryView),!n||n.type===l.IMAGE)continue;const c=Object.assign({},t.options);e===s.STYLE_KEYS.FILL_COLOR&&i.default.utils.utils.isTreeTableCell(n)&&(c.ignoreLayeredBeforeUser=!0),r.push(i.default.utils.styleManager.getStyleValue(n,e,c))}return r}},getPrivateFallBackComputedStyles:(e,t={})=>{n.value;const r=[],a=o.state.editor.sbEditorWrapper.value;if(a){for(const o of t.targets||v.value){let n=a.getComponentViewById(o);if(t.isSummary&&n&&(n.originBranchView&&(n=n.originBranchView),n=n.summaryView),!n||n.type===l.IMAGE)continue;const c=Object.assign({},t.options);e===s.STYLE_KEYS.FILL_COLOR&&i.default.utils.utils.isTreeTableCell(n)&&(c.ignoreLayeredBeforeUser=!0);const d=i.default.utils.styleManager.getStyleValue(n,e,c);if(i.default.utils.utils.isPrivateStyleValue(d)){const t=i.default.utils.styleManager.getStyleValue(n,e,{ignoreOverrideStyleIdList:[f]});i.default.utils.utils.isPrivateStyleValue(t)?r.push(i.default.utils.utils.getPrivateStyleValueFallBackValue(t)):r.push(t)}else r.push(d)}return r.filter(Boolean)}},getUserStyles:(e,t={})=>{n.value;const r=[],a=o.state.editor.sbEditorWrapper.value;if(a){for(const o of t.targets||v.value){let n=a.getComponentViewById(o);t.isSummary&&n&&(n=n.summaryView),n&&n.type!==l.IMAGE&&r.push(i.default.utils.styleManager.getUserStyleValue(n,e,t&&t.options))}return r}},getStructureClasses:E,getSuggestedStructureClasses:e=>{n.value;const t=[],i=o.state.editor.sbEditorWrapper.value;if(i){for(const o of e||v.value){const e=i.getComponentViewById(o);if(!e||!e.getStructureClass)continue;let n,a=e;do{if(!a||!a.getStructureClass)break;n=a.getStructureClass(),a=a&&a.parent()}while(r=n,!d.includes(r)&&a);t.push(n)}var r;return t}},getCentralBranchStructureClass:M,getTopicWidths:e=>{n.value;const t=[],i=o.state.editor.sbEditorWrapper.value;if(i){for(const o of e&&e.targetIds||v.value){const n=i.getComponentViewById(o);if(!n||!n.getTopicCustomWidth)return void t.push(null);e&&e.isUserOnly?t.push(n.getTopicCustomWidth()):t.push(n.getTopicCustomWidth()||n.getTopicWidth())}return t}},getAvailableStructures:e=>{n.value;const t=[],i=o.state.editor.sbEditorWrapper.value;if(!i)return;const r=M();for(const o of e&&e.targetIds||v.value){const n=i.getComponentViewById(o);if(!n||!n.getAvailableStructure)continue;let a=n.getAvailableStructure();e&&e.filter?(r===c.FISHBONERIGHTHEADED?a=a.filter((e=>![c.FISHBONELEFTHEADED,c.TREELEFT].includes(e))):r===c.FISHBONELEFTHEADED&&(a=a.filter((e=>![c.FISHBONERIGHTHEADED,c.TIMELINEHORIZONTAL,c.TREERIGHT].includes(e)))),t.push(a)):t.push(a)}return t},updateSummaryStyle:(e,t={})=>{const n=o.state.editor.sbEditorWrapper.value;n&&o.execSnowbrushAction({commandId:e,args:Object.assign(Object.assign({},t),{targets:t.targets?t.targets.map(n.getComponentViewById.bind(n)).filter(Boolean).map((e=>e.summaryView)):n.getSelections()})})},updateForceUpdateKey:b,focusUpdateKey:n,selectionTypes:g,selectionIds:v,currentSheetId:y,centralBranchId:C,getClassLists:e=>{n.value;const t=[],r=o.state.editor.sbEditorWrapper.value;if(r){for(const o of e&&e.targetIds||v.value){const e=r.getComponentViewById(o);if(!e||e.type===l.IMAGE)continue;const n=i.default.utils.styleManager.getClassList(e);e&&n.length&&t.push(n)}return t}},getClassNames:e=>{n.value;const t=[],r=o.state.editor.sbEditorWrapper.value;if(r){for(const o of e&&e.targetIds||v.value){const e=r.getComponentViewById(o);e&&e.type!==l.IMAGE&&t.push(i.default.utils.styleManager.getClassName(e))}return t}},getLayerLevels:e=>{n.value;const t=[],i=o.state.editor.sbEditorWrapper.value;if(i){for(const o of e&&e.targetIds||v.value){const e=i.getComponentViewById(o);e&&e.getLayer&&t.push(e.model.getLayer())}return t}},getThemeStyle:(e,t)=>{const o=T();return o&&o.getStyleValue?o.getStyleValue(e,t):null},getSkeletonThemeId:()=>{n.value;const e=T();return e&&e.getSkeletonThemeId?e.getSkeletonThemeId():null},getColorThemeId:()=>{n.value;const e=T();return e&&e.getColorThemeId?e.getColorThemeId():null},getColorListFromExportedTheme:()=>{n.value;const e=o.state.editor.sbEditorWrapper.value;if(!e)return null;const t=e.getCurrentSheetEditor();if(!t||!t.model||!t.model.theme)return null;const i=t.exportTheme({toColorTheme:!0});return i&&i.colorList?i.colorList:null},getSuggestedClassNames:e=>{n.value;const t=[],r=o.state.editor.sbEditorWrapper.value;if(r){for(const o of e&&e.targetIds||v.value){const e=r.getComponentViewById(o);e&&e.type!==l.IMAGE&&t.push(i.default.utils.styleManager.getSuggestedClassName(e))}return t}},getTypes:e=>{n.value;const t=[],i=o.state.editor.sbEditorWrapper.value;if(i){for(const o of e&&e.targetIds||v.value){const e=i.getComponentViewById(o);e&&e.model&&t.push(e.model.type&&e.model.type())}return t}},getTheme:T,getModel:e=>{n.value;const t=[],i=o.state.editor.sbEditorWrapper.value;if(i){for(const o of e&&e.targetIds||v.value){const n=i.getComponentViewById(o);n&&t.push(n.model.get(e.name))}return t}},getTopicIdsByThemeClassNames:(e,t)=>{const n=o.state.editor.sbEditorWrapper.value;if(!n)return;const r=n.getComponentViewById(C.value);if(!r)return;const a=[],s=(e=>{const t=[e],o=[];for(;t.length;){const e=t.pop();o.push(e),p.forEach((o=>{t.push(...e.getChildrenBranchesByType(o))}))}return o})(r),l=s.map((e=>e.boundaries)).reduce(((e,t)=>e.concat(t)),[]),c=n.getCurrentSheetEditor().getSheetView().relationships;for(const o of[...s,...l,...c]){const n=[i.default.utils.styleManager.getClassName(o),i.default.utils.styleManager.getSuggestedClassName(o),...i.default.utils.styleManager.getClassList(o)];n.some((t=>e.includes(t)))&&n.every((e=>!t.includes(e)))&&a.push(o.model.getId())}return a},getTopicIdsByLevel:e=>{const t=o.state.editor.sbEditorWrapper.value;if(!t)return;const n=t.getComponentViewById(C.value);if(!n)return;const i=[];for(const t of n.getDescendantBranchesByType())t.getLayer()===e&&i.push(t.model.getId());return i},getBranchLineDirection:B,getSummaryDirection:O,getBranchLineDirectionRotateDeg:(e="right")=>_(B(),e),getSummaryDirectionRotateDeg:(e="right")=>_(O(),e),getParentTopicStructure:e=>{if(!e)return;const t=o.state.editor.sbEditorWrapper.value;if(!t)return;const n=t.getComponentViewById(e),i=!!n&&n.parent();return i&&i.type===l.BRANCH?i.getStructureClass():void 0},isFreePositionEnabled:S,isFloatingTopicFlexible:k,isTopicOverlapEnabled:w,isFloatingRootTopic:L,isSelectionsHasSymbolLikeShapeBranch:R,isCompactMode:N,isAlignmentByLevel:D}}},90544:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.traverseTopic=void 0;const i=n(o(61027)),{TOPIC_TYPE:r}=i.default.constant,a={topic:e=>e,note:e=>e.notes,label:e=>e.labels,marker:e=>e.markers,summary:e=>e.summaries,boundary:e=>e.boundaries,link:e=>e.href};t.traverseTopic=function e(t,o,n){const{isOutlinerMode:i=!1,createContext:s=(()=>({})),createLink:l,visitors:c}=o,d=s();let u=[];const p=()=>{u.length&&l&&u.forEach((e=>{l(e,d)}))};if(Object.keys(a).forEach((e=>{const o=c[e];if(!o)return;const i=a[e](t);if(!i)return;if("function"==typeof o)return o(i,d,"topic"===e?n:t);const r=o.visitor(i,s,"topic"===e?n:t,"topic"===e?null:d);r&&l&&(o.asChild&&u.push(r),o.asChildren&&(u=u.concat(r)))})),!t.children)return l&&u.length&&p(),d;const h=t.summaries||[];let f=t.children[r.SUMMARY]||[];const m=t.children[r.ATTACHED]||[];h.length&&!i&&(h.forEach((e=>{const{topicId:t,range:o}=e;f=f.map((e=>(e.id===t&&(e.rangeLastIndex=Number(o.slice(1,o.length-1).split(",")[1])+1),e)))})),f=f.sort(((e,t)=>e.rangeLastIndex-t.rangeLastIndex)).map(((e,t)=>(e.rangeLastIndex+=t,e))),f.forEach((e=>{m.splice(e.rangeLastIndex,0,e)})));const g=[...m,...t.children[r.DETACHED]||[]];i||g.push(...t.children[r.CALLOUT]||[]),l&&u.length&&p();for(const n of g){const i=e(n,o,t);l&&l(i,d)}return d}},27608:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSearchResultHighlight=t.getReplaceContentFunction=t.createRegExp=void 0;const n=o(90571),i=o(90336),r=o(48932),a=o(17462);t.createRegExp=(e,t,o,n)=>{if(!e)return;e=(e=>e.replace(/[-\\{}*+?|^$.[\]()#]/g,"\\$&"))(e),t&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let i="";return o||(i+="i"),n&&(i+="g"),new RegExp(e,i)};t.getReplaceContentFunction=e=>{const o=e.root.$store,s=n.computed((()=>o.state[i.SHARED].editorMode===r.EDITOR_MODE_OUTLINER));return function(e){const{type:n,id:i,pattern:r,replacement:l,wholeWord:c,caseSensitive:d}=e,u=e=>e.replace(t.createRegExp(r,c,d,!0),l),p=(()=>{const e=o.state.editor.sbEditorWrapper.value;return e?e.getComponentViewById(i):null})();if(!p)return;const{model:h}=p;switch(n){case"topic":case"boundary":case"relationship":{const e=h.get("title");s.value&&"topic"===n?o.handleCommand("outliner.changeTopicTitle",{topicId:i,title:u(e)}):o.execSnowbrushAction({commandId:"editor.changeTitle",args:{newTitle:u(e),targets:[p]}});break}case"note":{const e=h.get("notes"),t=a.Finder.replace(e,r,l);o.state.editor.sbEditorWrapper.value.execAction("changeNote",{noteContent:t,targets:[p]});break}case"label":{const e=h.getLabel();o.execSnowbrushAction({commandId:"editor.changeLabel",args:{labelString:u(e),targets:[p]}});break}case"link":{const e=h.getHref();o.execSnowbrushAction({commandId:"editor.changeHyperlink",args:{link:u(e),targets:[p]}});break}}}};t.buildSearchResultHighlight=(e,t)=>{t.forEach((t=>{const o=t.text,n=[],i=o.split(e),r=o.match(e);let a=!1;const s=i.length+r.length;for(let e=0;e<s;e++)a?n.push({text:r.shift(),isHighlight:!0}):n.push({text:i.shift(),isHighlight:!1}),a=!a;t.highlight=n.filter((e=>!!e.text))}))}},52:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FrameBuilder=void 0;const i=o(53305);t.FrameBuilder=class{constructor(e,t){this.canvas=document.createElement("canvas"),this.options=t,this.imageDataUrl=e,this.shadowColor="rgba(0, 0, 0, 0.1)",this.shadowBlurRatio=.4,this.shadowBlurWidth=10,this.watermarkFrameRatio=.15,this.watermarkNoFrameRatio=.015,this.watermarkBottomBorderNoFrameMaxRatio=.2,this.watermarkUrl=i.toURL("static/images/map-shot/watermark-light.svg"),this.watermarkDarkUrl=i.toURL("static/images/map-shot/watermark-dark.svg"),this.watermarkColor=t.watermarkColor||"dark"}loadImage(e){return new Promise(((t,o)=>{const n=new Image;n.src=e,n.onload=()=>{t(n)},n.onerror=e=>o(e)}))}initCanvas(e,t){const{frame:o,shadow:n,watermark:i,frameRatio:r}=this.options,a={width:e.width,height:e.height},s=a.width<a.height?"width":"height",l="width"===s?"height":"width",c={width:400,height:360};let d=[0,0,0,0];o?d=d.map((()=>a[s]*r)):n?d=d.map((()=>a[s]*this.shadowBlurRatio*this.shadowBlurRatio)):i&&(d[2]=a[s]*this.shadowBlurRatio*this.shadowBlurRatio);const u=()=>a.width+d[1]+d[3],p=()=>a.height+d[0]+d[2],h={width:u(),height:p()};let f={[l]:c[l],[s]:c[l]*(h[s]/h[l])};f.width<c.width+1&&f.height<c.height+1||(f={[s]:c[s],[l]:c[s]*(h[l]/h[s])});const m=f.height*(a.height/h.height);let g=null;if(i){const e=Math.max(6,f.height*(d[2]/h.height)*(o?this.watermarkFrameRatio:this.watermarkNoFrameRatio)),n=a.height*(e/m),i=h.width/f.width,r=h.height/f.height;g={height:n,width:n*(t.width/t.height)},g.width>u()&&(d[1]=d[3]=(g.width-a.width)/2+1*i),g.height+d[0]+a.height>p()&&(d[2]=g.height+2*r*2),!o&&g.height/d[2]>this.watermarkBottomBorderNoFrameMaxRatio&&(d[2]=g.height/this.watermarkBottomBorderNoFrameMaxRatio)}let v=null;if(n){v=a.height*(this.shadowBlurWidth/m);const e=Math.min.apply(null,d);v>Math.min.apply(null,d)&&(v=e)}return this.canvas.width=u(),this.canvas.height=p(),{context:this.canvas.getContext("2d"),border:d,watermarkSize:g,shadowBlur:v}}drawFrame(e){const{frame:t,frameColor:o}=this.options;e.fillStyle=t?o:"rgba(0, 0, 0, 0)",e.fillRect(0,0,this.canvas.width,this.canvas.height)}drawShadow(e,t,o,n){const{shadow:i}=this.options;i&&(e.fillStyle="#FFF",e.shadowBlur=n,e.shadowColor=this.shadowColor,e.fillRect(o[3],o[0],t.width,t.height))}drawImage(e,t,o){e.imageSmoothingEnabled=!1,e.drawImage(t,o[3],o[0],t.width,t.height)}drawWatermark(e,t,o,n,i){const{watermark:r}=this.options;if(!r)return;e.imageSmoothingEnabled=!1;const a=n[2],{width:s,height:l}=i;let c=n[3],d=n[0]+t.height;c+=(t.width-s)/2,d+=(a-l)/2,e.drawImage(o,c,d,s,l)}getPngDataURL(){return this.canvas.toDataURL("image/png")}build(){return n(this,void 0,void 0,(function*(){const e=yield this.loadImage(this.imageDataUrl),t=yield this.loadImage(this.options.frame&&"light"===this.watermarkColor?this.watermarkUrl:this.watermarkDarkUrl),{context:o,border:n,watermarkSize:i,shadowBlur:r}=this.initCanvas(e,t);return this.drawFrame(o),this.drawShadow(o,e,n,r),this.drawImage(o,e,n),this.drawWatermark(o,e,t,n,i),this.getPngDataURL()}))}}},81617:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createChangedPngDpiBuffer=void 0;const i=o(58933),r=o(28441),{BrowserWindow:a,screen:s,BrowserView:l}=i.remote,c=e=>new Promise((t=>setTimeout(t,e)));function d(e,t){return n(this,void 0,void 0,(function*(){const o={};for(let n=0;n<e.length;n++){const{name:i,fn:r}=e[n];`before/${i}`in t&&(yield t[`before/${i}`]()),yield r(o),`after/${i}`in t&&(yield t[`after/${i}`]())}return o}))}t.createChangedPngDpiBuffer=e=>r.getAdaptedScreenMaxDPIPngBuffer(e),t.default=class{constructor(e){const t=s.getAllDisplays().reduce(((e,t)=>e?e.bounds.y+e.bounds.height<t.bounds.y+t.bounds.height?t:e:t),null);this.window=new a({show:!1,enableLargerThanScreen:!0,maxWidth:1/0,maxHeight:1/0,x:t.bounds.x+t.bounds.width-1,y:t.bounds.y+t.bounds.height-1,skipTaskbar:!0,focusable:!1,frame:!1}),this.view=new l,this.view.webContents.loadURL(e.blankPageURL),this.delay=e.delay||50,this.normalBounds=e.normalBounds,this.currentBrowserWindowId=e.currentBrowserWindowId,this.scrollContainerElement=e.scrollContainerElement,this.fullPageElement=e.fullPageElement}captureInPage(e,t){return n(this,void 0,void 0,(function*(){const{scrollContainerElement:o,fullPageElement:r}=this,{result:s}=yield d([{name:"init",fn:t=>n(this,void 0,void 0,(function*(){t.bv=i.remote.getCurrentWindow().getBrowserView(),t.originScroll=[o.scrollLeft,o.scrollTop],t.currentBW=a.fromId(this.currentBrowserWindowId),t.scrollTo=[t.originScroll[0]+e.left,t.originScroll[1]+e.top]}))},{name:"addBrowserViewToWindowAndSetBounds",fn:e=>n(this,void 0,void 0,(function*(){e.currentBW.addBrowserView(this.view),this.view.setBounds(this.normalBounds)}))},{name:"scrollBeforeCapture",fn:e=>n(this,void 0,void 0,(function*(){o.scrollTo.apply(o,e.scrollTo),yield c(this.delay)}))},{name:"capturePage",fn:t=>n(this,void 0,void 0,(function*(){t.img=yield t.bv.webContents.capturePage({x:r.clientWidth-t.scrollTo[0]<o.clientWidth?Math.ceil(o.clientWidth-(r.clientWidth-t.scrollTo[0])):0,y:r.clientHeight-t.scrollTo[1]<o.clientHeight?Math.ceil(o.clientHeight-(r.clientHeight-t.scrollTo[1])):0,width:Math.ceil(e.width),height:Math.ceil(e.height)})}))},{name:"delayAfterCapture",fn:()=>n(this,void 0,void 0,(function*(){yield c(2*this.delay)}))},{name:"removeBrowserViewFromWindow",fn:e=>n(this,void 0,void 0,(function*(){e.currentBW.removeBrowserView(this.view)}))},{name:"scrollAfterCapture",fn:e=>n(this,void 0,void 0,(function*(){o.scrollTo.apply(o,e.originScroll),yield c(this.delay)}))},{name:"createChangedPngDpiBuffer",fn:e=>n(this,void 0,void 0,(function*(){e.result=this.createChangedPngDpiBuffer(e.img.toDataURL())}))}],t);return s}))}captureFullPage(e,t){return n(this,void 0,void 0,(function*(){const{scrollContainerElement:o}=this,{result:r}=yield d([{name:"init",fn:t=>n(this,void 0,void 0,(function*(){t.startTime=Date.now(),t.bv=i.remote.getCurrentWindow().getBrowserView(),t.originScroll=[o.scrollLeft,o.scrollTop],t.currentBW=a.fromId(this.currentBrowserWindowId),t.OFFSET=2,t.startPoint=[o.scrollLeft+e.left+t.OFFSET,o.scrollTop+e.top+t.OFFSET],t.mapShotFrameSize=[Math.ceil(e.width),Math.ceil(e.height)],t.storedScrollContainerHeight=o.clientHeight}))},{name:"showWindow",fn:()=>n(this,void 0,void 0,(function*(){this.window.show(),yield c(this.delay)}))},{name:"moveBrowserViewBeforeCapture",fn:e=>n(this,void 0,void 0,(function*(){e.currentBW.removeBrowserView(e.bv),e.currentBW.addBrowserView(this.view),this.view.setBounds(this.normalBounds),yield c(this.delay),this.window.setBrowserView(e.bv)}))},{name:"setSizeAndBoundsBeforeCapture",fn:e=>n(this,void 0,void 0,(function*(){this.window.setSize(e.mapShotFrameSize[0],e.mapShotFrameSize[1]),e.bv.setBounds({x:0,y:0,width:e.mapShotFrameSize[0],height:e.mapShotFrameSize[1]+25}),yield c(this.delay)}))},{name:"scrollBeforeCapture",fn:e=>n(this,void 0,void 0,(function*(){o.scrollTo(e.startPoint[0],e.startPoint[1]),yield c(2*this.delay)}))},{name:"capturePage",fn:e=>n(this,void 0,void 0,(function*(){e.img=yield e.bv.webContents.capturePage({x:0,y:0,width:e.mapShotFrameSize[0],height:e.mapShotFrameSize[1]}),yield c(this.delay)}))},{name:"setBoundsAfterCapture",fn:e=>n(this,void 0,void 0,(function*(){if("darwin"===process.platform){const t=Object.assign({},this.normalBounds);t.y=2*e.storedScrollContainerHeight,e.bv.setBounds(t)}else e.bv.setBounds(this.normalBounds);yield c(this.delay)}))},{name:"moveBrowserViewAfterCapture",fn:e=>n(this,void 0,void 0,(function*(){this.window.removeBrowserView(e.bv),e.currentBW.addBrowserView(e.bv),yield c(this.delay),"darwin"===process.platform&&e.bv.setBounds(this.normalBounds)}))},{name:"scrollAfterCapture",fn:e=>n(this,void 0,void 0,(function*(){o.scrollTo(e.originScroll[0],e.originScroll[1])}))},{name:"removeTmpBrowserViewFromWindow",fn:e=>n(this,void 0,void 0,(function*(){e.currentBW.removeBrowserView(this.view),yield c(this.delay)}))},{name:"endTimeDelay",fn:e=>n(this,void 0,void 0,(function*(){const t=Date.now();t-e.startTime<100&&(yield c(t-e.startTime))}))},{name:"hideWindow",fn:()=>n(this,void 0,void 0,(function*(){this.window.hide()}))},{name:"createChangedPngDpiBuffer",fn:e=>n(this,void 0,void 0,(function*(){e.result=this.createChangedPngDpiBuffer(e.img.toDataURL())}))}],t);return r}))}createChangedPngDpiBuffer(e){return t.createChangedPngDpiBuffer(e)}destroy(){this.window.destroy(),this.window=null,this.view=null}}},96682:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveImage=t.showItemInFolder=t.openFolder=t.getPicturesPath=t.getDesktopPath=t.getCurrentBrowserWindow=void 0;const i=o(58933),r=n(o(2286));t.getCurrentBrowserWindow=function(){return i.remote.BrowserWindow.fromId(window.id)},t.getDesktopPath=function(){return i.remote.app.getPath("desktop")},t.getPicturesPath=function(){return i.remote.app.getPath("pictures")},t.openFolder=function(e){return i.shell.openPath(e)},t.showItemInFolder=function(e){i.shell.showItemInFolder(e)},t.saveImage=function(e,t,o){const{nativeImage:n,clipboard:a}=i.remote,{mimetype:s="image/png"}=o;let l;return Buffer.isBuffer(t)?l=t:"string"==typeof t&&(l=Buffer.from(t.replace(`data:${s};base64,`,""),"base64")),o.clipboard&&a.writeImage(n.createFromBuffer(l)),r.default.writeFile(e,l)}},95855:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toJS=t.subscribe=t.watch=t.mutation=t.state=t.Committable=void 0;const i=n(o(20144)),r=o(87219),a=o(96486),s=o(28614),l=[],c=new s.EventEmitter;class d extends s.EventEmitter{constructor(...e){super(),this.committing=!1,this.setMaxListeners(0)}static for(e,...t){if(this.namespaces||(this.namespaces=new Map),this.namespaces.has(e))return this.namespaces.get(e);const o=new this(...t);return this.namespaces.set(e,o),o}static replace(e,t){if(!this.namespaces)return;const o=this.for(e);return this.namespaces.set(e,t),o}commit(e,...t){if(this[e]&&this[e].isMutation){if(this.committing&&this._committingDraft)return this[e].original.call(this,this._committingDraft,...t);this.committing=!0;const o=this[e].call(this,...t);return this.committing=!1,this._committingDraft=null,o}}}function u(e,t){const o=t.map((e=>[e.path[0]+e.path.slice(1).map((e=>`[${JSON.stringify(e)}]`)).join("").replace(/\.(\w+)/g,"['$1']").replace(/"/g,"'"),e.value]));for(const[e,t]of o)a.set(this.state,e,t);i.default.nextTick((()=>{for(const[t,n]of o)c.emit("watch:"+t,this,n,a.get(e,t))}))}function p(e){return JSON.parse(JSON.stringify(e))}t.Committable=d,t.state=function(e){return i.default.observable(e)},t.mutation=function(e,t,o){const n=o.value;return"function"==typeof n&&(o.value=function(...e){if(!this.committing)throw new Error("DO NOT call the mutation method directly guys! Use .commit(mutationName) PLEASE!");const t=p(this.state),o=r.createDraft(t);this._committingDraft=o,n.apply(this,[o,...e]);return r.finishDraft(o,u.bind(this,t))},o.value.original=n,o.value.isMutation=!0),o},t.watch=function(e){return(t,o,n)=>(c.on("watch:"+e.replace(/\.(\w+)/g,"['$1']").replace(/"/g,"'"),((e,t,o)=>{n.value.call(e,t,o)})),n)},t.subscribe=function(e){l.push(e)},t.toJS=p},72185:function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(95855),s=o(96486),l=r(o(11222)),c=o(58933),d=o(31381),u=r(o(32871)),p=o(40518),h=l.default.for("outliner"),{Menu:f,MenuItem:m}=c.remote;const g=[{title:"Copy",shortcut:"CmdOrCtrl+C",command:"copy"},{title:"Cut",shortcut:"CmdOrCtrl+X",command:"cut"},{title:"Paste",shortcut:"CmdOrCtrl+V",command:"paste"},{divider:!0},{title:"Indent",shortcut:"Tab",command:"outliner.indent"},{title:"Outdent",shortcut:"Shift+Tab",command:"outliner.outdent"},{divider:!0},{title:"Duplicate",shortcut:"CmdOrCtrl+D",command:"duplicate"},{title:"Delete",shortcut:"Backspace",command:"delete"},{divider:!0},{title:e=>"fold"===function(e){return(h.tidySelection().length>0?h.tidySelection():[e]).map((e=>!(h.zipStatus.indexOf(e)>=0))).reduce(((e,t)=>e||t))?"fold":"unfold"}(e)?"Fold Subtopic":"Unfold Subtopic",shortcut:"CmdOrCtrl+/",command:"editor.toggleBranch"}],v=[{divider:!0},{title:()=>h.isInShowBranchOnlyMode?"Show Full Content":"Show Branch Only",command:()=>h.rootTopicId===h.originalRootTopicId?"editor.showBranchOnly":"editor.exitBranchOnly"},{divider:!0},{title:"New Sheet From Topic",command:"editor.newSheetFromTopic"}],b=[{spellCheck:!0},{title:"Learn Spelling",handle(){const e=d.getTextSelection();e.length<=0||u.default.add(e)}},{divider:!0},{title:"Copy",shortcut:"CmdOrCtrl+C",command:"copy"},{title:"Cut",shortcut:"CmdOrCtrl+X",command:"cut"},{title:"Paste",shortcut:"CmdOrCtrl+V",command:"paste"},{title:"Delete",shortcut:"Backspace",command:"delete"},{divider:!0},{title:"Select All",shortcut:"CmdOrCtrl+A",command:"selectAll"}],A=[{title:"Edit",handle(e){"MARKER"===h.state.selectionType&&h.emit("showMarkerPopover-"+e,h.state.selectedItemInfo)}},{divider:!0},{title:"Copy",shortcut:"CmdOrCtrl+C",command:"copy"},{title:"Cut",shortcut:"CmdOrCtrl+X",command:"cut"},{title:"Paste",shortcut:"CmdOrCtrl+V",command:"paste"},{title:"Delete",shortcut:"Backspace",command:"delete"}],E=[{title:"Copy",shortcut:"CmdOrCtrl+C",handle(){document.execCommand("copy")}},{title:"Cut",shortcut:"CmdOrCtrl+X",handle(){document.execCommand("cut"),this.getUndo().push({undo:()=>document.execCommand("undo"),redo:()=>document.execCommand("redo")})}},{title:"Paste",shortcut:"CmdOrCtrl+V",handle(){document.execCommand("paste"),this.getUndo().push({undo:()=>document.execCommand("undo"),redo:()=>document.execCommand("redo")})}},{title:"Delete",shortcut:"Backspace",handle(){document.execCommand("delete"),this.getUndo().push({undo:()=>document.execCommand("undo"),redo:()=>document.execCommand("redo")})}},{divider:!0},{title:"Select All",shortcut:"CmdOrCtrl+A",handle:()=>document.execCommand("selectAll")}],T=[{spellCheck:!0},...E],y=[{title:"Open Link",handle(){c.shell.openExternal(k.state.currentTarget.href)}},{title:"Copy Link",handle(){c.clipboard.writeText(k.state.currentTarget.href)}},{title:"Edit Link",handle(e){h.emit(`notes.editLink-${e}`)}},{title:"Remove Link",handle(e){h.emit(`notes.removeLink-${e}`)}},{divider:!0},...E],C={TOPIC:g.concat(v),"MULTI-TOPIC":g,IMAGE:[{title:"Copy",shortcut:"CmdOrCtrl+C",command:"copy"},{title:"Cut",shortcut:"CmdOrCtrl+X",command:"cut"},{title:"Paste",shortcut:"CmdOrCtrl+V",command:"paste"},{title:"Delete",shortcut:"Backspace",command:"delete"},{divider:!0},{title:"Save as",command:"outliner.saveAsImage"},{divider:!0},{title:"Reset Size",command:"outliner.resizeTopicImage"}],TEXT:b,HYPERLINK:[{title:"Edit",command:"editor.showHyperlinkEditor"},{divider:!0},{title:"Delete",command:"outliner.removeHyperlink"}],ATTACHMENT:[{title:"Delete",command:"outliner.removeHyperlink"},{divider:!0},{title:"Save As",command:"outliner.saveAsAttachment"}],"AUDIO-NOTES":[{title:"Delete",command:"outliner.removeAudioNotes"},{divider:!0},{title:"Save as",command:"outliner.saveAsAudioNote"}],MARKER:A,NOTES:T,"NOTES-LINK":y,LABEL:[{title:"Delete",shortcut:"Backspace",command:"delete"}],FOLDERLINK:[{title:"Edit",command:"editor.addFolderLink"},{divider:!0},{title:"Delete",command:"outliner.removeHyperlink"}],FILELINK:[{title:"Edit",command:"editor.addFileLink"},{divider:!0},{title:"Delete",command:"outliner.removeHyperlink"}],EQUATION:[{title:"Copy",shortcut:"CmdOrCtrl+C",command:"copy"},{title:"Cut",shortcut:"CmdOrCtrl+X",command:"cut"},{title:"Paste",shortcut:"CmdOrCtrl+V",command:"paste"},{title:"Delete",shortcut:"Backspace",command:"outliner.removeTopicEquation"},{divider:!0},{title:"Save as",command:"outliner.saveAsEquation"},{divider:!0},{title:"Reset Size",command:"outliner.resizeTopicEquation"}]};class S extends a.Committable{constructor(){super(...arguments),this.state=a.state({menusType:"NONE",targetTopicId:"",opened:!1,currentTarget:null})}toggleOpened(e,t=!e.opened){return i(this,void 0,void 0,(function*(){if(e.opened=t,t){const t=e.targetTopicId,o=e.menusType,n=new f;h.commit("setCurrentEditingTopic",t),n.on("menu-will-close",(()=>{this.commit("setTargetTopic",""),this.commit("toggleOpened",!1)}));const i=s.cloneDeep(C[e.menusType]);i.forEach((t=>{s.isFunction(t.title)&&(t.title=t.title(e.targetTopicId)),s.isFunction(t.command)&&(t.command=t.command(e.targetTopicId))}));const r=()=>{for(const e of i){const o=Object.assign({},e);if(o.divider){n.append(new m({type:"separator"}));continue}if(o.spellCheck){const e=d.getTextSelection().trim();if(e.length<=0)continue;const t=u.default.getCorrectionsForMisspelling(e);if(t.length>0)for(let e of t)n.append(new m({label:e,click:()=>{document.execCommand("insertText",!1,e),this.getUndo().push({undo:()=>document.execCommand("undo"),redo:()=>document.execCommand("redo")})}}));else n.append(new m({label:this.$T("No Guesses Found"),enabled:!1}));n.append(new m({type:"separator"}));continue}const i=o.handle&&s.isFunction(o.handle)?()=>o.handle.call(this,t):()=>this.handleCommand&&this.handleCommand(o.command,{topicId:t});n.append(new m(Object.assign({label:this.$T(o.title),enabled:!o.command||this.canHandleCommand(o.command),click:i},o.shortcut?{accelerator:p.formarKeybindingForMenu(o.shortcut)}:{})))}n.popup({window:c.remote.getCurrentWindow()})};"TEXT"===o?u.default.setSuggestedBuildSpellContextMenuFn(r):r()}}))}setCurrentTarget(e,t){e.currentTarget=t}setTargetTopic(e,t){e.targetTopicId=t}switchMenuItems(e,t="TOPIC"){e.menusType=t}}n([a.mutation],S.prototype,"toggleOpened",null),n([a.mutation],S.prototype,"setCurrentTarget",null),n([a.mutation],S.prototype,"setTargetTopic",null),n([a.mutation],S.prototype,"switchMenuItems",null),t.default=S;const k=S.for("context-menu")},11222:function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.HYPERLINK_EDITOR_MODE=void 0;const i=o(95855),r=o(47977),a=o(96486);var s;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.NOTES=1]="NOTES"}(s=t.HYPERLINK_EDITOR_MODE||(t.HYPERLINK_EDITOR_MODE={}));const l={markerWidth:18,open:!1,selectedMarkerId:"",top:0,right:0,bottom:0,left:0},c={open:!1,top:0,right:0,bottom:0,left:0},d={open:!1,top:0,right:0,bottom:0,left:0};class u extends i.Committable{constructor(){super(...arguments),this.state=i.state({version:0,editable:!0,currentEditingTopicId:"",mouseIsDown:!1,startTopicId:"",copyMode:"copy",draggingType:"TOPIC",ghostImgElementId:"",draggingTopicIds:[],zipStatus:[],isSelecting:!1,selectionIds:[],selectionType:"TOPIC",selectedItemInfo:null,rootTopicId:"",notesShownTopicIds:[],imageShownTopicIds:[],equationSownTopicIds:[],ready:!1,timestampForSaving:Date.now(),markersEditor:Object.assign({},l),labelsEditor:Object.assign({},c),hyperlinkEditor:Object.assign({},d),equationEditor:Object.assign({},d),currentHyperlinkEditorMode:s.DEFAULT,defaultNotesLink:""}),this.sheetModel=null,this.flattenedSheet=[],this.flattenedFloatingTopics=[],this.rootTopic=null}init(e){this.sheetModel=e,this.originalRootTopicId=e.rootTopic().getId(),this.commit("setRootTopic",e.rootTopic()),this.commit("refreshSheet"),this.commit("ready")}reactSelection(e){e.length<=0?this.commit("toggleEditable",!0):this.commit("toggleEditable",!1)}get isEditing(){return""!==this.state.currentEditingTopicId}get zipStatus(){return this.state.zipStatus}get isDragging(){return this.state.mouseIsDown&&(this.state.draggingTopicIds.length>0||"TOPIC"!==this.state.draggingType)}get fullFlattenedSheet(){return this.flattenedSheet.concat(this.flattenedFloatingTopics)}get rootTopicId(){return this.state.rootTopicId}get isInShowBranchOnlyMode(){return!!this.originalRootTopicId&&this.rootTopicId!==this.originalRootTopicId}get ownerSheet(){return this.rootTopic?this.rootTopic.ownerSheet():null}getTopicById(e){const t=this.flattenedSheet.concat(this.flattenedFloatingTopics),o=t.findIndex((t=>t.id===e));return t[o]}tidySelection(){const e=new Set(this.state.selectionIds),t=Array.from(e).map((e=>this.getTopicById(e))).filter(Boolean).sort(((e,t)=>t.depth-e.depth));for(const o of t)e.has(o.parent)&&e.delete(o.id);return Array.from(e).filter(Boolean).map((e=>this.getTopicById(e))).filter(Boolean).map((e=>[e,this.fullFlattenedSheet.indexOf(e)])).sort(((e,t)=>e[1]-t[1])).map((([e])=>e.id)).filter(Boolean)}setDefaultNotesLink(e,t){e.defaultNotesLink=t}changeHyperlinkEditorMode(e,t){e.currentHyperlinkEditorMode=t}ready(e){e.ready=!0,this.emit("ready")}updateTimestamp(e){e.timestampForSaving=Date.now()}setRootTopic(e,t){this.rootTopic=t,e.rootTopicId=t.getId(),t.getNotes()&&this.commit("showTopicNotes",e.rootTopicId),t.getImageModel()&&this.commit("showTopicImage",e.rootTopicId),this.emit("setRootTopic"),this.emit("focus-"+e.rootTopicId)}refreshSheet(e,t=!0){if(this.flattenedSheet=function(e,t="attached"){const o=r.transformModelTopic(e,t);return o?r.flattenSheet(o.children,e.getId()):[]}(this.rootTopic),this.flattenedFloatingTopics=r.flattenSheet(this.rootTopic.children("detached").map((e=>r.transformModelTopic(e))).filter(Boolean),e.rootTopicId),this.flattenedFloatingTopics.forEach((e=>e.isFloating=!0)),this.ownerSheet){if(!e.ready){for(const t of e.zipStatus)this.commit("setZippedStatus",{topicId:t,zipped:!1,canUndo:!1});for(const t of this.fullFlattenedSheet){t.show=!r.isZipped(e.zipStatus,this.fullFlattenedSheet,t.id,e.rootTopicId,!0);const o=this.ownerSheet.findComponentById(t.id);o&&(o.isCollapse()&&this.commit("setZippedStatus",{topicId:t.id,zipped:!0,canUndo:!1}),o.getNotes()&&this.commit("showTopicNotes",t.id),o.getImageModel()&&this.commit("showTopicImage",t.id))}}this.commit("refreshZippedStatus"),this.commit("updateVersion"),this.emit("refreshSheet",t)}}setCurrentEditingTopic(e,t){e.currentEditingTopicId=t,t?this.updateContexts&&this.updateContexts({"selection.text":!0}):this.updateContexts&&this.updateContexts({"selection.text":!1})}toggleEditable(e,t=!e.editable){e.editable=t}toggleSelecting(e,t=!e.isSelecting){e.isSelecting=t}toggleMouseDown(e,t=!e.mouseIsDown){e.mouseIsDown=t}setStartTopic(e,t){e.startTopicId=t}setCopyMode(e,t="copy"){e.copyMode=t}setGhostImageCallback(e,t){e.ghostImgElementId=t}setZippedStatus(e,{topicId:t,zipped:o,canUndo:n}){if(n=!!a.isUndefined(n)||n,!r.hasChildTopics(this.fullFlattenedSheet,t))return;const i=new Set(e.zipStatus);if(o?i.add(t):i.delete(t),e.zipStatus=Array.from(i),n){this.sheetModel.getUndo().add({undo:()=>this.commit("setZippedStatus",{topicId:t,zipped:!o,canUndo:!1}),redo:()=>this.commit("setZippedStatus",{topicId:t,zipped:o,canUndo:!1})})}const s=r.findChildTopics(this.fullFlattenedSheet,t);for(const t of s)t.show=!r.isZipped(e.zipStatus,this.fullFlattenedSheet,t.id,e.rootTopicId,!0),this.emit("toggleTopicShow-"+t.id)}refreshZippedStatus(e){const t=new Set(e.zipStatus);for(const o of t){const t=r.findChildTopics(this.fullFlattenedSheet,o);for(const o of t)o.show=!r.isZipped(e.zipStatus,this.fullFlattenedSheet,o.id,e.rootTopicId,!0),this.emit("toggleTopicShow-"+o.id)}}addSelection(e,t,o=!1){if(!t)return;const n=new Set(e.selectionIds);n.add(t);const i=[t];if(o&&r.hasChildTopics(this.fullFlattenedSheet,t)){const e=r.findChildTopics(this.fullFlattenedSheet,t);for(const{id:t}of e)n.add(t),i.push(t)}this.updateContexts&&this.updateContexts({"selection.single":1===i.length,"selection.couple":2===i.length,"selection.greaterThanCouple":i.length>2,"selection.multiple":i.length>1,"selection.some":i.length>=1}),e.selectionIds=Array.from(n);for(const e of i)this.emit("addSelection",e);e.selectionIds.length&&this.commit("setCurrentEditingTopic",e.selectionIds[0]),this.emit("selectionChanged",e.selectionIds),this.commit("toggleEditable",!1),this.commit("setSelectionType","TOPIC")}removeSelection(e,t){if(!t)return;const o=new Set(e.selectionIds);o.delete(t),e.selectionIds=Array.from(o),this.emit("removeSelection",t),this.updateContexts&&this.updateContexts({"selection.single":1===e.selectionIds.length,"selection.couple":2===e.selectionIds.length,"selection.greaterThanCouple":e.selectionIds.length>2,"selection.multiple":e.selectionIds.length>1,"selection.some":e.selectionIds.length>=1,"selection.none":0===e.selectionIds.length}),o.size<=0&&this.commit("toggleEditable",!0),this.emit("selectionChanged",e.selectionIds)}clearSelection(e){e.selectionIds=[],this.updateContexts&&this.updateContexts({"selection.single":!1,"selection.couple":!1,"selection.greaterThanCouple":!1,"selection.multiple":!1,"selection.some":!1,"selection.none":!0}),this.commit("setSelectionType",""),this.emit("clearSelection"),this.emit("selectionChanged",e.selectionIds),this.commit("toggleEditable",!0),this.commit("setCurrentEditingTopic",""),this.commit("updateVersion")}setSelectionType(e,t="TOPIC"){e.selectionType=t}setSelectedItemInfo(e,t=null){e.selectedItemInfo=t}addDragging(e,t){const o=new Set(e.draggingTopicIds);o.add(t),e.draggingTopicIds=Array.from(o)}removeDragging(e,t){const o=new Set(e.draggingTopicIds);o.delete(t),e.draggingTopicIds=Array.from(o)}clearDragging(e){e.draggingTopicIds=[]}setDraggingType(e,t="TOPIC"){e.draggingType=t}showTopicNotes(e,t){const o=new Set(e.notesShownTopicIds);o.add(t),e.notesShownTopicIds=Array.from(o),this.emit("showTopicNotes",t),this.emit("showTopicNotes-"+t)}hideTopicNotes(e,t){const o=new Set(e.notesShownTopicIds);o.delete(t),e.notesShownTopicIds=Array.from(o),this.emit("hideTopicNotes",t),this.emit("hideTopicNotes-"+t)}showTopicImage(e,t,o=!0){const n=new Set(e.imageShownTopicIds);n.add(t),e.imageShownTopicIds=Array.from(n),o&&(this.emit("showTopicImage",t),this.emit("showTopicImage-"+t))}hideTopicImage(e,t,o=!0){const n=new Set(e.imageShownTopicIds);n.delete(t),e.imageShownTopicIds=Array.from(n),o&&(this.emit("hideTopicImage",t),this.emit("hideTopicImage-"+t))}showTopicEquation(e,t,o=!0){const n=new Set(e.equationSownTopicIds);n.add(t),e.equationSownTopicIds=Array.from(n),o&&(this.emit("showTopicEquation",t),this.emit("showTopicEquation-"+t))}hideTopicEquation(e,t,o=!0){const n=new Set(e.equationSownTopicIds);n.delete(t),e.equationSownTopicIds=Array.from(n),o&&(this.emit("hideTopicEquation",t),this.emit("hideTopicEquation-"+t))}setMarkerEditorState(e,t){Object.assign(e.markersEditor,t)}setLabelsEditorState(e,t){Object.assign(e.labelsEditor,t)}setHyperlinkEditorState(e,t){Object.assign(e.hyperlinkEditor,t)}setEquationEditorState(e,t){Object.assign(e.equationEditor,t)}updateVersion(e){e.version++}destroy(){this.updateContexts&&this.updateContexts({"selection.text":!1,"selection.single":!1,"selection.couple":!1,"selection.greaterThanCouple":!1,"selection.multiple":!1,"selection.some":!1,"selection.none":!1})}}n([i.watch("selectionIds")],u.prototype,"reactSelection",null),n([i.mutation],u.prototype,"setDefaultNotesLink",null),n([i.mutation],u.prototype,"changeHyperlinkEditorMode",null),n([i.mutation],u.prototype,"ready",null),n([i.mutation],u.prototype,"updateTimestamp",null),n([i.mutation],u.prototype,"setRootTopic",null),n([i.mutation],u.prototype,"refreshSheet",null),n([i.mutation],u.prototype,"setCurrentEditingTopic",null),n([i.mutation],u.prototype,"toggleEditable",null),n([i.mutation],u.prototype,"toggleSelecting",null),n([i.mutation],u.prototype,"toggleMouseDown",null),n([i.mutation],u.prototype,"setStartTopic",null),n([i.mutation],u.prototype,"setCopyMode",null),n([i.mutation],u.prototype,"setGhostImageCallback",null),n([i.mutation],u.prototype,"setZippedStatus",null),n([i.mutation],u.prototype,"refreshZippedStatus",null),n([i.mutation],u.prototype,"addSelection",null),n([i.mutation],u.prototype,"removeSelection",null),n([i.mutation],u.prototype,"clearSelection",null),n([i.mutation],u.prototype,"setSelectionType",null),n([i.mutation],u.prototype,"setSelectedItemInfo",null),n([i.mutation],u.prototype,"addDragging",null),n([i.mutation],u.prototype,"removeDragging",null),n([i.mutation],u.prototype,"clearDragging",null),n([i.mutation],u.prototype,"setDraggingType",null),n([i.mutation],u.prototype,"showTopicNotes",null),n([i.mutation],u.prototype,"hideTopicNotes",null),n([i.mutation],u.prototype,"showTopicImage",null),n([i.mutation],u.prototype,"hideTopicImage",null),n([i.mutation],u.prototype,"showTopicEquation",null),n([i.mutation],u.prototype,"hideTopicEquation",null),n([i.mutation],u.prototype,"setMarkerEditorState",null),n([i.mutation],u.prototype,"setLabelsEditorState",null),n([i.mutation],u.prototype,"setHyperlinkEditorState",null),n([i.mutation],u.prototype,"setEquationEditorState",null),n([i.mutation],u.prototype,"updateVersion",null),t.default=u},9613:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_SIZE_LIMIT=t.IMAGE_DEFAULT_SIZE_LIMIT=t.MAX_DISPLAY_LEVEL=void 0,t.MAX_DISPLAY_LEVEL=20,t.IMAGE_DEFAULT_SIZE_LIMIT={MAX:200,MIN:64},t.IMAGE_SIZE_LIMIT={MAX:650,MIN:64}},71510:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(47977),a=i(o(71171)),s=o(96486);t.default=class{constructor(){this.clipboardHelper=null}get ready(){return!!this.clipboardHelper}init(e){const t=e.state.editor.sbEditorWrapper.value;if(!t)return;const o=t.getCurrentSheetEditor();if(!o)return;const n=o.getModule("copypastemanager");n&&(this.clipboardHelper=n.clipboardHelper)}serializeTopic(e){if(!e)return"";return r.flattenSheet([r.transformModelTopic(e)]).map((({title:e,depth:t})=>s.repeat("\t",t)+e+"\r\n")).join("")}writeTopicToClipboard(e){return n(this,void 0,void 0,(function*(){if(!this.ready)return;const t=e.filter(Boolean).map((e=>this.serializeTopic(e))).filter(Boolean).join("\r\n");yield this.clipboardHelper.write({"text/plain":t,"text/x-array-json":e.map((e=>e.toJSON())),"text/x-type":"branch"})}))}writeImagesToClipboard(e){return n(this,void 0,void 0,(function*(){this.ready&&(yield this.clipboardHelper.write({"text/plain":JSON.stringify(e),"text/x-array-json":e,"text/x-type":"image"}))}))}writeEquationsToClipboard(e,t){return n(this,void 0,void 0,(function*(){this.ready&&(yield this.clipboardHelper.write({"text/plain":JSON.stringify(e),"text/x-array-json":e,"text/x-type":"mathJax","text/x-other-object-json":{imageDataList:t}}))}))}writeMarkersToClipboard(e){return n(this,void 0,void 0,(function*(){this.ready&&(yield this.clipboardHelper.write({"text/plain":JSON.stringify(e),"text/x-array-json":e,"text/x-type":"marker"}))}))}getClipboardData(){return n(this,void 0,void 0,(function*(){if(this.ready)return yield this.clipboardHelper.readObj()}))}getClipboardDataType(){return n(this,void 0,void 0,(function*(){const e=yield this.getClipboardData();return e&&e["text/x-type"]||"none"}))}getTopicsFromClipboard(){return n(this,void 0,void 0,(function*(){return((yield this.getClipboardData())["text/x-array-json"]||[]).map((function e(t){if(t.id=a.default(),t.children&&Object.keys(t.children).length>0)for(const o of Object.keys(t.children))t.children[o]=t.children[o].map(e);return t}))}))}getImagesFromClipboard(){return n(this,void 0,void 0,(function*(){return(yield this.getClipboardData())["text/x-array-json"]||[]}))}getMarkersFromClipboard(){return n(this,void 0,void 0,(function*(){return(yield this.getClipboardData())["text/x-array-json"]||[]}))}getEquationsFromClipboard(){return n(this,void 0,void 0,(function*(){return(yield this.getClipboardData())["text/x-array-json"]||[]}))}clearClipboardData(){return n(this,void 0,void 0,(function*(){this.ready&&(yield this.clipboardHelper.reset())}))}}},31381:function(e,t){"use strict";var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};function n(e){return(i(e)||[0,0])[1]}function i(e){const t=e.ownerDocument||e.document,o=t.defaultView||t.parentWindow;let n;if(void 0!==o.getSelection){if(n=o.getSelection(),n.rangeCount>0){const t=o.getSelection().getRangeAt(0);let{startOffset:n,endOffset:i}=t;const{startContainer:r,endContainer:a}=t,s=e===r?n:Array.prototype.indexOf.call(e.childNodes,r),l=e===a?i:Array.prototype.indexOf.call(e.childNodes,a);return s>0&&(n+=Array.prototype.slice.call(e.childNodes,0,s).map((e=>{switch(e.nodeName){case"#text":return e.nodeValue.length;case"BR":return 1}})).reduce(((e,t)=>e+t))),l>0&&(i+=Array.prototype.slice.call(e.childNodes,0,l).map((e=>{switch(e.nodeName){case"#text":return e.nodeValue.length;case"BR":return 1}})).reduce(((e,t)=>e+t))),[n,i]}}else if((n=t.selection)&&"Control"!=n.type){const o=n.createRange(),i=t.body.createTextRange();return i.moveToElementText(e),i.setEndPoint("EndToEnd",o),[i.startOffset,i.endOffset]}}function r(e,t=0,o=0){try{if(e.childNodes.length<=0)return void e.focus();const n=document.createRange(),i=window.getSelection(),r={node:-1,offset:0,padding:t},a={node:-1,offset:0,padding:o};for(let t=0;t<e.childNodes.length;t++){const o=e.childNodes[t];if(r.node++,o.nodeValue){if(!(r.padding>0))break;if(o.nodeValue.length>=r.padding){r.offset=r.padding,r.padding=0;break}r.padding-=o.nodeValue.length}else"BR"===o.nodeName&&r.padding--}for(let t=0;t<e.childNodes.length;t++){const o=e.childNodes[t];if(a.node++,o.nodeValue){if(!(a.padding>0))break;if(o.nodeValue.length>=a.padding){a.offset=a.padding,a.padding=0;break}a.padding-=o.nodeValue.length}else"BR"===o.nodeName&&a.padding--}if(!e.childNodes[r.node]||!e.childNodes[a.node])return;n.setStart(e.childNodes[r.node],r.offset),n.setEnd(e.childNodes[a.node],a.offset),i.removeAllRanges(),i.addRange(n)}catch(t){e.focus()}}function a(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function s(e,t=document.documentElement){const o=e.getBoundingClientRect(),n=t.scrollTop||window.pageYOffset,i=t.scrollLeft||window.pageXOffset,r=t.offsetTop||0,a=t.offsetLeft||0,s=o.top+n-r,l=o.left+i-a,c=s+o.height,d=l+o.width;return{top:Math.round(s),left:Math.round(l),right:Math.round(d),bottom:Math.round(c),height:o.height,width:o.width}}function l(e){return e.innerText.replace(/&nbsp;/g," ")}function c(e,t){return e.innerText=t,!1}function d(e){if(!(e instanceof Blob))throw new Error("this is not a file");const t=new FileReader;return new Promise(((o,n)=>{t.addEventListener("load",(()=>o(t.result))),t.addEventListener("error",(e=>n(e))),t.readAsDataURL(e)}))}function u(e,t,o,n){return e.substring(0,t)+n+e.substring(o)}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceRange=t.mouseEventOffset=t.readImageOriginalSize=t.readImageFileSize=t.readFileAsDataUrl=t.getTopicTextElementById=t.updateTextElement=t.getTextElementContent=t.getCoords=t.createTopicGhostImage=t.replaceTextSelection=t.clearTextSelection=t.getTextSelection=t.isInViewport=t.scrollToElement=t.getSelectionLength=t.getMultiLineElementWidthInOneLine=t.calculateCaretLinePos=t.setSelectionRange=t.setCaretCharacterOffsetWithIn=t.getSelectionRange=t.getCaretCharacterOffsetWithin=void 0,t.getCaretCharacterOffsetWithin=n,t.getSelectionRange=i,t.setCaretCharacterOffsetWithIn=function(e,t=0){return r(e,t,t)},t.setSelectionRange=r,t.calculateCaretLinePos=function(e){const t=document.body.querySelector("#dummy-text-element");t&&t.parentElement.removeChild(t);const o=e.cloneNode(!1);o.id="dummy-text-element",document.body.appendChild(o);const i=document.createElement("span");o.appendChild(i);const r=document.createElement("span");o.appendChild(r);const a=window.getComputedStyle(e,null);o.style.display="block",o.style.overflowY="auto",o.style.position="fixed",o.style.bottom="100px",o.style.left="5000px",o.style.zIndex="100",o.style.width=a.width,o.style.height=a.height,o.style.fontFamily=a.fontFamily,o.style.fontSize=a.fontSize;const s=l(e),c=n(e);i.innerText="a";const d=Array.from(i.getClientRects())[0].height;i.innerHTML=s.slice(0,c).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(new RegExp(String.fromCharCode(10),"g"),"<br/>"),r.innerHTML=s.slice(c).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(new RegExp(String.fromCharCode(10),"g"),"<br/>");const u=Array.from(i.getClientRects()),p=Array.from(r.getClientRects()),h=(e,t,o=.001)=>Math.abs(e-t)<o;return h(p.map((({height:e})=>e)).reduce(((e,t)=>e+t)),d),{isOnFirstLine:0===s.length||0===c||h(u.map((({height:e})=>e)).reduce(((e,t)=>e+t)),d)&&u[0].top===p[0].top,isOnLastLine:0===s.length||h(p.map((({height:e})=>e)).reduce(((e,t)=>e+t)),d)}},t.getMultiLineElementWidthInOneLine=function(e,t){const{width:o,height:n}=e.getBoundingClientRect();return o*Math.round(n/t)},t.getSelectionLength=function(e){const t=i(e)||[0,0];return t[1]-t[0]},t.scrollToElement=function(e,t=-1,o=!1){if(a(e)&&!o)return;const n=document.querySelector("#outlinemode");if(!n)return;const i=document.querySelector(".outline-paper").getBoundingClientRect().height,r=window.innerHeight;if(i<=r)return;const l=t>=0?t:.6*r,c=s(e,n||document.documentElement),d=c.top,u=c.height,p=i-(d+u);let h=d-l;h+u+p>=i&&(h=i-(u+p));try{n.scrollTo(0,h)}catch(e){n.scrollTo({top:h,left:0,behavior:"smooth"})}},t.isInViewport=a,t.getTextSelection=function(){if(window.getSelection){return window.getSelection().toString()}return document.selection?document.selection.toString():""},t.clearTextSelection=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},t.replaceTextSelection=function(e,t){const[o,n]=i(e);c(e,u(l(e),o,n,t))},t.createTopicGhostImage=function(e,t=1){const o=e.cloneNode(!0);o.classList.remove("selected"),o.style.maxWidth="650px",o.style.width="100%",o.style.position="fixed",o.style.left="5000px",o.style.padding="5px 0",o.style.borderRadius="5px",o.style.cursor="-webkit-grabbing",o.id="dummy-"+Math.random().toString(32).substr(2);const n=o.querySelector(".topic-dot");n&&n.classList.remove("has-child");const i=o.querySelector(".topic-inner-text");i&&t>1&&(i.classList.add("zipped"),i.setAttribute("child_count",t.toString()));const r=document.createElement("div");return r.appendChild(o),document.body.appendChild(r),r},t.getCoords=s,t.getTextElementContent=l,t.updateTextElement=c,t.getTopicTextElementById=function(e,t=document.body){return t.querySelector(`.vana-outliner .topic#topic-${e} .topic-inner-text`)},t.readFileAsDataUrl=d,t.readImageFileSize=function(e){return o(this,void 0,void 0,(function*(){const t=yield d(e),o=new Image;return yield new Promise((e=>{o.onload=()=>e({width:o.width,height:o.height}),o.src=t}))}))},t.readImageOriginalSize=function(e){const t=new Image;return new Promise(((o,n)=>{t.onload=function(){const{height:e,width:n}=t;o({height:e,width:n})},t.onerror=e=>n(e),t.src=e}))},t.mouseEventOffset=function(e,t){t=t||e.currentTarget||e.srcElement;const o=e.pageX||0,n=e.pageY||0,i=t.getBoundingClientRect();return[o-i.left,n-i.top]},t.replaceRange=u},47977:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOutdentable=t.isIndentable=t.isZipped=t.countChildTopics=t.hasChildTopics=t.hasNextTopicInSameDepth=t.getNextTopicInSameDepth=t.hasNextSibling=t.getNextSiblingTopic=t.hasPrevTopicInSameDepth=t.getPrevTopicInSameDepth=t.hasPrevSibling=t.getPrevSiblingTopic=t.calculateDropOptions=t.getAllChildren=t.findChildTopicsByDepth=t.findChildTopics=t.flattenSheet=t.transformModelTopic=void 0;const n=o(96486);function i(e,t="__root__",o=0,n=0){if(o>0&&n>=o)return[];const r=e.map(((e,o)=>e.parent===t?o:-1)).filter((e=>e>=0)),a=r.map((t=>e[t])),s=a.map(((t,a)=>i(e.slice(r[a]),t.id,o,n+1)));return a.concat(s.length>0?s.reduce(((e,t)=>e.concat(t))):[])}function r(e,t){const o=e.findIndex((e=>e.id===t));if(o<0)return null;const n=e[o];for(let t=o-1;t>=0;--t){const o=e[t];if(o.depth<n.depth)return null;if(o.depth===n.depth)return o}return null}function a(e,t){return!!r(e,t)}function s(e,t){const o=e.findIndex((e=>e.id===t));if(o<0)return null;const n=e[o];for(let t=o-1;t>=0;--t){const o=e[t];if(!(o.depth<n.depth)&&o.depth===n.depth)return o}return null}function l(e,t){const o=e.findIndex((e=>e.id===t));if(o<0)return null;const n=e[o];for(let t=o+1;t<e.length;++t){const o=e[t];if(o.depth<n.depth)return null;if(o.depth===n.depth)return o}return null}function c(e,t){return!!l(e,t)}function d(e,t){const o=e.findIndex((e=>e.id===t));if(o<0)return null;const n=e[o];for(let t=o+1;t<e.length;++t){const o=e[t];if(!(o.depth<n.depth)&&o.depth===n.depth)return o}return null}function u(e,t,o,n,i=!1){const r=t.findIndex((e=>e.id===o));if(r<0)return!0;const a=t[r];return!i&&e.indexOf(a.id)>=0||a.parent!==n&&u(e,t,a.parent,n)}t.transformModelTopic=function e(t,o="attached"){if(!t)return null;const n={id:t.get("id"),title:t.get("title")||"",parent:t.parent().get("id")},i=t.children(o).filter((e=>e.type()===o));return n.children=i.map((t=>e(t,"attached"))).filter(Boolean),n},t.flattenSheet=function e(t,o="__root__",n=0){return t.length<=0?[]:t.map((t=>[{id:t.id,parent:o,title:t.title,show:!0,zipped:!1,depth:n},...e(t.children||[],t.id,n+1)])).reduce(((e,t)=>e.concat(t)))},t.findChildTopics=i,t.findChildTopicsByDepth=function(e,t="__root__",o=0){let n=e.map(((e,o)=>e.parent===t?o:-1)).filter((e=>e>=0)).map((t=>e[t]));for(let t=0;t<o;t++)n=n.map((t=>{const o=i(e,t.id,0);return o.length?o[0]:null})).filter(Boolean);return n},t.getAllChildren=function(e,t="__root__"){let o=[],n=[t];const i=t=>e.filter((e=>e.parent===t)).map((e=>e.id));for(;n.length;){let e=[];n.forEach((t=>{e=e.concat(i(t))})),n=e,o=o.concat(e)}return o.map((t=>e.find((e=>e.id===t))))},t.calculateDropOptions=function e(t,o,r,a,s,l=!0){const d=t.filter((e=>!(r.indexOf(e.id)>=0))),p=d.findIndex((e=>e.id===o));if(p<0)return[];const h=d[p],f=c(d,o),m=r.indexOf(o)>=0,g=!u(s,d,o,a)&&i(d,o,1).length>0;let v=[];return v=f?[{id:o,depth:h.depth},m?null:{id:o,depth:h.depth+1}]:[...e(d,h.parent,r,a,s,!1),g?null:{id:o,depth:h.depth},m?null:{id:o,depth:h.depth+1}],h.parent===a&&v.unshift({id:o,depth:0}),v=n.uniqBy(v.filter(Boolean).sort((({depth:e},{depth:t})=>e-t)),"depth"),l&&(v=v.filter((e=>!(g&&e.depth<=h.depth)))),v},t.getPrevSiblingTopic=r,t.hasPrevSibling=a,t.getPrevTopicInSameDepth=s,t.hasPrevTopicInSameDepth=function(e,t){return!!s(e,t)},t.getNextSiblingTopic=l,t.hasNextSibling=c,t.getNextTopicInSameDepth=d,t.hasNextTopicInSameDepth=function(e,t){return!!d(e,t)},t.hasChildTopics=function(e,t){return e.filter((e=>e.parent===t)).length>0},t.countChildTopics=function e(t,o,n=!1){const i=t.filter((e=>e.parent===o));let r=i.length;return n&&i.length>0&&(r+=i.map((o=>e(t,o.id,n))).reduce(((e,t)=>e+t))),r},t.isZipped=u,t.isIndentable=function(e,t){return a(e,t)},t.isOutdentable=function(e,t,o){return t.parent!==o}},27703:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SheetDynamicContentProvider=void 0;const i=n(o(61027)),r=o(32118),a=o(51168),s=o(33276),l=i.default.constant.TOPIC_TYPE;t.SheetDynamicContentProvider=class{constructor(e){this.store=e}get sheetEditor(){return s.getSheetEditorFromStore(this.store)}get sheet(){return this.sheetEditor.model}childrenOfTopic(e){return e&&e.attributes&&e.attributes.children?e.attributes.children:null}rootTopicId(){return this.sheet.attributes.rootTopic.id}getStartingTopicId(){return this.rootTopicId()}getTopicAttributes(e){return this.topicModelToTopicAttributes(this.sheet.findComponentById(e))}getSubtopics(e){const t=this.childrenOfTopic(this.sheet.findComponentById(e));return t&&t.attached?t.attached.map((e=>e.id)):[]}getParentTopicId(e){const t=this.sheet.findComponentById(e);if(t&&t.parent){const e=t.parent();if(e&&e.componentType===i.default.constant.MODEL_TYPE.TOPIC)return e.id}return""}getFloatingTopics(){const e=this.childrenOfTopic(this.sheet.rootTopic());return e&&e.detached?e.detached.map((e=>e.id)):[]}getImageAlignmentOptionForTopics(e){if(!e.some((e=>{const t=this.sheet.findComponentById(e);return!(!t.attributes||!t.attributes.image)})))return[];return["left","right","aboveTitle","belowTitle","full"]}getTopicImageAlignment(e){const t=this.sheet.findComponentById(e);let o;if(t){o=a.getPitchModeExtensionRaw(t).topicImageAlignment}return o}getListLayout(e){const t=this.sheet.findComponentById(e);let o;if(t){o=a.getPitchModeExtensionRaw(t).listSlideLayout}return o}topicModelToTopicAttributes(e){if(!e)return{id:"",title:""};const t=a.getPartialPitchModeDataset(e),o=e.attributes,n=o.notes&&o.notes.plain?o.notes.plain.content:void 0;return Object.assign({},t,{title:o.title||"",labels:o.labels?o.labels.slice(0):void 0,note:n?{plainText:n}:null,image:s.getImageAttributes(o,this.store,this.sheetEditor),calloutTopicId:o.children&&o.children.callout&&o.children.callout.length>0?o.children.callout[0].id:null,markers:s.convertMarkerAttributes(this.store,(o.markers||[]).map((e=>e.markerId))),summaries:s.convertSummaryAttributes(o)})}hasCustomizedProperty(e){const t=this.sheet.findComponentById(e);if(!t)return!1;const o=a.getPitchModeExtensionRaw(t);for(const e in o)if(o.hasOwnProperty(e))return!0;return!1}getPitchModeExtension(e){const t=this.sheet.findComponentById(e);return t?a.getPitchModeExtensionRaw(t):{}}setPitchModeExtensionRaw(e,t){const o=this.sheet.findComponentById(e);if(!o||!o.updatePitchInfo)return!1;const n=a.getPitchModeExtensionRaw(o);for(const e in t)n[e]=t[e];return o.updatePitchInfo({provider:a.PitchModeExtensionProvider,content:[n]}),!0}clearPitchModeExtensionRaw(e,t){const o=this.sheet.findComponentById(e);if(!o||!o.updatePitchInfo)return!1;const n=a.getPitchModeExtensionRaw(o);return t in n&&delete n[t],o.updatePitchInfo({provider:a.PitchModeExtensionProvider,content:[n]}),!0}resetPitchModeProperty(e){for(const t of e){const e=this.sheet.findComponentById(t);e&&e.updatePitchInfo&&e.updatePitchInfo()}}setTopicSlideEnabled(e,t){if(t.clear){for(const t of e)this.clearPitchModeExtensionRaw(t,"topicSlide");return}const o={topicSlide:t.enabled};for(const t of e)this.setPitchModeExtensionRaw(t,o)}setSummarySlideEnabled(e,t){if(t.clear){for(const t of e)this.clearPitchModeExtensionRaw(t,"summarySlideDisabled");return}const o={summarySlideDisabled:!t.enabled};for(const t of e)this.setPitchModeExtensionRaw(t,o)}setListSlideData(e,t){for(const o of e){const e=this.sheet.findComponentById(o);if(!e)continue;if(0===e.children(l.ATTACHED).length)continue;const n={};void 0!==t.enabled&&(n.listSlideDisabled=!t.enabled),void 0!==t.layout&&(n.listSlideLayout=t.layout),this.setPitchModeExtensionRaw(o,n)}}setListSlideEnabled(e,t){if(t.clear)for(const t of e)this.clearPitchModeExtensionRaw(t,"listSlideDisabled");else this.setListSlideData(e,{enabled:t.enabled})}setListSlideLayout(e,t){this.setListSlideData(e,{layout:t})}setImageAlignment(e,t){for(const o of e)this.setPitchModeExtensionRaw(o,{topicImageAlignment:t})}clearImageAlignment(e){for(const t of e)this.clearPitchModeExtensionRaw(t,"topicImageAlignment")}get preferredThemeId(){return this.store.getters["pitch/preferredThemeId"]||"default"}get aspectRatio(){return this.store.getters["pitch/aspectRatio"]}get slideSizeByRatio(){const e="Auto"===this.aspectRatio?"16:9":this.aspectRatio;return r.slideSizes[e]}}},74282:(e,t,o)=>{"use strict";const n=o(88606),i=o(83450),r=o(90336),a=o(33276),s=o(36414),l=e=>()=>{if(0===a.getSelectedTopics(e,!1).allTopics.length){const t=a.getSheetEditorFromStore(e);if(!t)return!1;const o=t.getSelections();return!o||0===o.length}return!0};t.Z=()=>e=>{e.registerCommands([{id:"editor.enterPitchMode",provider:`editor/${window.editorId}`,enabledFn:l(e),handler:()=>{e.commit("editor/updateIgnoreResizeEditor",!0),e.commit(`${r.SHARED}/setPitchMode`,{mode:!0}),e.commit("contexts/updateMainContexts",{inPitchMode:!0}),new n.PitchModeController(e),i.trackView({actionName:"EnterPitchMode"})}}]),e.registerCommands([{id:"editor.enterPitchModeWindowed",provider:`editor/${window.editorId}`,enabledFn:l(e),handler:()=>{new n.PitchModeWindowedController(e,s.UUID()),e.commit("pitch/updateControls",{showOnWindow:!1}),i.trackView({actionName:"EnterPitchMode"})}}]);let t=null,o=!1;e.watch((e=>e[r.SHARED].pitchMode),(e=>{const n=window;e?o||(t=n.canPreformUIkitMutationObserver,n.canPreformUIkitMutationObserver=e=>document.getElementById("PresentationMainWrapper")===e.target,o=!0):o&&(n.canPreformUIkitMutationObserver=t,o=!1)}),{sync:!0})}},69121:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({name:"spinner",props:{text:String},setup(e,t){const o=t.root.$store;return{appearance:n.computed((()=>o.getters["preferences/appearance"]))}}})},71308:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=o(96486);t.Z=n.createComponent({name:"drag-bar",props:{minPanelWidth:{type:Number,default:240},maxPanelWidth:{type:Number,default:600}},setup:(e,t)=>{const o=n.ref(!1),r=i.throttle((n=>{const{minPanelWidth:i,maxPanelWidth:r}=e;if(o.value){const{clientX:e}=n;let o=e;o<i&&(o=i),o>r&&(o=r),t.emit("change",o)}}));n.onMounted((()=>{document.body.addEventListener("mousemove",r)})),n.onBeforeUnmount((()=>{document.body.removeEventListener("mousemove",r)}));const a=()=>{t.emit("dragend"),o.value=!1};return{onDragBarMouseDown:()=>{o.value=!0,t.emit("dragstart"),document.body.addEventListener("mouseup",a,{once:!0}),document.body.addEventListener("mouseleave",a,{once:!0})}}}})},903:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(61027)),a=o(83450),s=o(90571),l=i(o(65122)),c=o(96486),d=i(o(24678)),u=o(99492),{CHANGE_MATH_JAX:p,DELETE_ITEM:h}=r.default.constant.ACTION_NAMES;t.default=s.createComponent({components:{TopicPopoverContainer:l.default},setup(e,t){const o=s.getCurrentInstance(),i=s.computed((()=>f.getters["preferences/appearance"])),l=s.computed((()=>f.getters["preferences/language"])),f=t.root.$store,m=s.ref("");let g=null;const v=s.ref(null),b=e=>{const t=f.state.editor.sbEditorWrapper.value.getComponentViewById(e);if(t)return t&&t.model.getMathJaxText()},A=()=>{const e=(()=>{const e=f.state.editor.sbEditorWrapper.value;if(!e)return;const t=e&&e.getSelections()[0];if(t&&(t.type===r.default.constant.VIEW_TYPE.MATH_JAX||"branch"===t.type))return t.type===r.default.constant.VIEW_TYPE.MATH_JAX?t.parent().parent():"branch"===t.type?t:void 0})();return e&&e.model.get("id")},E=c.debounce((e=>{if(v.value&&"string"==typeof e){for(;v.value.hasChildNodes();)v.value.removeChild(v.value.lastChild);if(e=e.trim()){const o=window.getComputedStyle(v.value),n=parseFloat(o.height)-12,i=parseFloat(o.width)-12,a=((e,t)=>{const o=r.default.utils.utils.mathJaxExporterUtil.export(e,{lang:t,fontFamily:"NeverMind, monospace"});return o&&o.result})(e,l.value);let s=0,c=0;if(a){v.value.append(a);const e=window.getComputedStyle(a);s=parseFloat(e.height),c=parseFloat(e.width),v.value.removeChild(a)}if(!s||!c){const e=(t=l.value,r.default.utils.utils.mathJaxExporterUtil.generateErrorMessageSVG({lang:t,fontFamily:"NeverMind, monospace"}));v.value.append(e)}else{const e=Math.min(n/s,i/c,1);a.style.height=s*e+"px",a.style.width=c*e+"px",v.value.append(a)}}else{const e=document.createElement("span");e.classList.add("uk-text-bold"),e.style.opacity="0.3",e.style.fontSize="13px",e.innerText=o.$T("Equation Preview"),v.value.append(e)}var t}}),0);return s.onMounted((()=>n(this,void 0,void 0,(function*(){g=A(),m.value=b(g)||"",E(m.value),a.trackEvent({eventCategory:"Equation",eventAction:""===m.value?"newEquation":"editEquation"})})))),s.onBeforeUnmount((()=>{""===(b(g)||"")&&a.trackEvent({eventCategory:"Equation",eventAction:"saveEmptyEquation"})})),s.watch((()=>l.value),(()=>{E(m.value)})),s.watch((()=>m.value),(()=>{E(m.value)})),{popoverWidth:394,popoverHeight:280,equation:m,previewContainer:v,handleEquationInput:e=>{m.value=e,E(e)},handleGoEquationHelp:()=>{a.trackEvent({eventCategory:"Equation",eventAction:"clickEquationHelp"}),d.default.fetch(u.XOS.GO_EQUATION_HELP,{})},handleBlur:()=>{((e,t)=>{const o=f.state.editor.sbEditorWrapper.value;if(!o)return;const n=o.getComponentViewById(t);if(!n)return;if(b(t)!==e)if(e)o.execAction(p,{mathJaxText:e,targets:[n]});else{const e=n.topicView&&n.topicView.mathJaxView;if(!e)return;o.execAction(h,{targets:[e]})}})(m.value,g)},appearance:i}}})},34550:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({name:"Popover",props:{value:{validator:e=>null===e||"string"==typeof e||e&&"object"==typeof e&&"string"==typeof e.img&&"string"==typeof e.value,default:null},items:{type:Array,validator:e=>Array.isArray(e)&&e.every((e=>"string"==typeof e.value&&"string"==typeof e.img)),default:()=>[]},isMultiple:Boolean,title:{default:"",type:String},disabled:Boolean,itemStyles:{type:String,default:""},toggleClasses:{type:String,default:"uk-large-toggle"},popoverStyles:{type:String,default:""},pos:{type:String,default:"bottom-center"}},setup(e,t){const o=n.ref(null);return{selectedItem:n.computed((()=>e.value?"object"==typeof e.value?e.value:e.items.find((({value:t})=>t===e.value)):null)),popover:o,handleItemSelect:e=>t.emit("input",e),isDisabled:n.computed((()=>e.disabled||!e.items.length))}}})},94086:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(64650)),a=n(o(24186)),s=["#FFFFFF","#EEEEEE","#D0D0D0","#ADADAD","#999999","#666666","#333333","#111111","#000000","#FDD834","#FF9595","#8EDE99","#0CE6CF","#8EDDF9","#50C3F7","#7986CB","#BA69C8","#FFABD5","#FFC009","#FF5252","#2CD551","#00A99D","#2ABEE0","#05A8F4","#4051B5","#9C27B0","#EA8ABA","#FF9F00","#FF3C00","#19A719","#007C74","#0096BF","#0288D1","#303E9F","#7B1FA2","#CE4289","#FF6F00","#E32C2D","#15831C","#025A5A","#00526B","#00579B","#1A227E","#4A148C","#A34075"];t.default=i.createComponent({name:"color-picker",props:{value:{type:String,default:"#FFF"},noneValue:{type:String,default:"none"},isMultiple:{type:Boolean,default:!1},pos:{type:String,default:"left-center"}},components:{colorWell:r.default,colorWall:a.default},setup(e,t){let o=i.getCurrentInstance();const n=i.ref(null),r=i.ref(null),a=t.root.$store;i.onBeforeUnmount((()=>{c()})),i.watch((()=>e.value),(e=>{r.value=e}));const l=i.computed((()=>e.isMultiple?"multi-color":r.value)),c=()=>{if(!n.value)return;const e=n.value.$el.querySelector("[uk-popover]");o.$withUIKit((t=>{t.pop(e).close()}))},d=i.computed((()=>a.state.editors.recentlyUsedColors));return{colorWellElement:n,computedInternalValue:l,handleColorInput:e=>{r.value=e,t.emit("input",e)},presetColors:s,popoverHide:()=>{setTimeout((()=>{o.$store.commit("focus/updateLastFocusedElementTag",null)}),100)},recentlyUsedColors:d,recentColorChange:e=>a.commit("editors/updateRecentlyUsedColor",e)}}})},53426:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({name:"FillPopover",props:{value:{validator:e=>null===e||"string"==typeof e||e&&"object"==typeof e&&"string"==typeof e.img&&"string"==typeof e.value&&"string"==typeof e.title,default:null},items:{type:Array,validator:e=>Array.isArray(e)&&e.every((e=>"string"==typeof e.value&&"string"==typeof e.img&&"string"==typeof e.title)),default:()=>[]},isMultiple:Boolean,title:String,disabled:Boolean,pos:{type:String,default:"bottom-center"}},setup(e,t){const o=n.getCurrentInstance(),i=n.ref(null),r=n.computed((()=>e.value?"object"==typeof e.value?e.value:e.items.find((({value:t})=>t===e.value)):null)),a=n.computed((()=>e.disabled||!e.items.length));return n.onBeforeUnmount((()=>{i.value&&o.$withUIKit((e=>{e.pop(i.value).close()}))})),{selectedItem:r,popover:i,handleItemSelect:e=>t.emit("input",e),isDisabled:a}}})},41773:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({name:"font-family",props:{recentFonts:{type:Array,validator:e=>Array.isArray(e)&&e.every((e=>"string"==typeof e)),default:null},fonts:{type:Array,validator:e=>Array.isArray(e)&&e.every((e=>"string"==typeof e.text&&"string"==typeof e.value)),default:()=>[]},font:{type:String,default:null},defaultFont:{type:String,default:null},isMultiple:{default:!1,type:Boolean},alignChecked:{type:Boolean,default:!0}},setup(e,t){const o=n.ref(null);let i=n.getCurrentInstance();const r=n.ref([]),a=n.ref(null),s=()=>{const e=a.value;if(!e)return;if(!(0!==e.getBoundingClientRect().height))return;const t=e.scrollTop,o=e.offsetHeight;e.querySelectorAll(".font-preview").forEach((e=>{const n=e.parentElement.parentElement;n.offsetTop>=t&&n.offsetTop<=t+o&&(e.style.display="inline")}))},l=n.computed((()=>{if(e.isMultiple)return{text:i.$T("Multiple"),value:null};if(!e.font)return{text:i.$T("Default"),value:"default"};const t=(e.fonts||[]).find((t=>t.value===e.font));return!t&&e.font?{value:e.font,text:e.font}:t})),c=n.computed((()=>e.isMultiple?0:e.fonts.findIndex((t=>t.value===e.font))+1)),d=n.computed((()=>e.defaultFont&&e.fonts&&e.fonts.find((t=>t.value===e.defaultFont))||null)),u=n.computed((()=>{if(!e.recentFonts||!e.fonts)return[];return e.recentFonts.map((t=>e.fonts.find((o=>o.value===t&&o.value!==e.defaultFont)))).filter(Boolean).slice(0,6)})),p=n.computed((()=>[...u.value,d.value].filter(Boolean))),h=n.computed((()=>!(!e.fonts||!e.fonts.length)));return n.watch(h,(e=>{e&&s()})),n.onMounted((function(){s(),i.$withUIKit((e=>{e.util.on(o.value,"show",(()=>{s()}))}))})),n.onBeforeUnmount((()=>{o.value&&i.$withUIKit((e=>{e.pop(o.value).close()}))})),{popover:o,currentFont:l,handleFontSelect:e=>{t.emit("select",e)},renderVisibleFontPreview:s,autoFocusIndex:c,fontPreviewContainer:a,fontPreviewRefs:r,isFontsLoaded:h,computedRecentFonts:u,computedDefaultFont:d,computedRecommendFonts:p,handlePopShow:()=>{s()}}}})},23275:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=["8","10","12","14","18","24","36","48","60"];t.Z=n.createComponent({name:"font-size",props:{size:{type:String,default:i[0]},isMultiple:{type:Boolean,default:!1}},setup(e,t){const o=n.ref(null),r=n.ref(null);let a=n.getCurrentInstance();return n.onBeforeUnmount((()=>{(()=>{if(!r.value)return;const e=r.value.$el.querySelector("[uk-menu]");a.$withUIKit((t=>{t.pop(e).close()}))})()})),n.watch((()=>e.size),(e=>{const t=e||i[0];o.value=parseInt(t,10).toString()}),{lazy:!1}),n.watch((()=>e.isMultiple),(e=>{e&&(o.value="")})),{internalValue:o,comboBox:r,fontSizes:i,handleFontsizeChange:(n,r="input")=>{const a=parseInt(n,10);if(e.isMultiple&&!a)return;const s=e.size||i[0],l=Math.max(1,Math.min(200,a||parseInt(s,10)));o.value=l.toString(),t.emit(r,l)}}}})},85298:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({name:"font-style",props:{fontFamily:{type:String,default:""},value:{type:Object,validator:e=>"object"==typeof e&&"number"==typeof e.weight&&"boolean"==typeof e.italic||null===e,default:null},styles:{type:Array,validator:e=>Array.isArray(e),default:()=>[]},isMultiple:{type:Boolean,default:!1}},setup(e,t){const o=n.computed((()=>{const t=n.getCurrentInstance(),o={style:"-",italic:null,weight:null};if(e.isMultiple)return o.style=t.$T("Multiple"),o;if(!e.value)return o;let r=[e.value.weight];e.value.weight<500&&(r=r.concat([400,300,200,500])),e.value.weight>500&&(r=r.concat([600,800,900,500])),500===e.value.weight&&(r=r.concat([400,600,300,700,200,800,100,900]));for(let t of r){const o=i.value.find((o=>o.weight===t&&o.italic===e.value.italic))||i.value.find((e=>e.weight===t));if(o)return o}return o})),i=n.computed((()=>e.styles||[]));return{computedFontStyle:o,computedFontStyles:i,handleSelectFontStyle:e=>{t.emit("input",e)}}}})},94573:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i={solid:"999",dash:"9, 3",dot:"3, 3","dash-dot":"9, 3, 3, 3","dash-dot-dot":"9, 3, 3, 3, 3, 3"};t.Z=n.createComponent({props:{items:{type:Array,validator:e=>Array.isArray(e)&&e.every((e=>"string"==typeof e.value&&"string"==typeof e.title)),default:()=>[]},value:{type:String,default:null},isMultiple:{type:Boolean,default:!1},title:{type:String,default:""},disabled:Boolean},setup(e,t){const o=n.ref(null),r=n.getCurrentInstance(),a=n.computed((()=>e.items.find((t=>t.value===e.value))));return n.onBeforeUnmount((()=>{o.value&&r.$withUIKit((e=>{e.pop(o.value).close()}))})),{handleSelectLineStyle:e=>t.emit("input",e),selectedItem:a,styleValuesToStrokeDashArray:i}}})},13002:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({props:{items:{type:Array,validator:e=>Array.isArray(e)&&e.every((e=>"string"==typeof e.value&&"string"==typeof e.title)),default:()=>[]},value:{type:String,default:null},isMultiple:{type:Boolean,default:!1},title:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(e,t){const o=n.ref(null),i=n.getCurrentInstance(),r=n.computed((()=>{const t=e.items.findIndex((t=>t.value===e.value));return e.items[t]||{value:"-1",title:i.$T("None")}})),a=n.computed((()=>"0"===e.value)),s=n.computed((()=>e.items.filter((e=>Number(e.value)>0))));return n.onBeforeUnmount((()=>{o.value&&i.$withUIKit((e=>{e.pop(o.value).close()}))})),{handleInput:e=>t.emit("input",e),computedItems:s,selectedItem:r,isNone:a,popover:o}}})},58818:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({name:"popover",props:{value:{validator:e=>null===e||"string"==typeof e||e&&"object"==typeof e&&"string"==typeof e.img&&"string"==typeof e.value&&"string"==typeof e.title,default:null},items:{type:Array,validator:e=>Array.isArray(e)&&e.every((e=>"string"==typeof e.value&&"string"==typeof e.img&&"string"==typeof e.title)),default:()=>[]},isMultiple:Boolean,title:String,disabled:Boolean,itemStyles:{type:String,default:""},toggleClasses:{type:String,default:"uk-large-toggle"},pos:{type:String,default:"bottom-center"}},setup(e,t){const o=n.getCurrentInstance(),i=n.ref(null),r=n.computed((()=>e.value?"object"==typeof e.value?e.value:e.items.find((({value:t})=>t===e.value)):null)),a=n.computed((()=>e.disabled||!e.items.length));return n.onBeforeUnmount((()=>{i.value&&o.$withUIKit((e=>{e.pop(i.value).close()}))})),{selectedItem:r,popover:i,handleItemSelect:e=>t.emit("input",e),isDisabled:a}}})},55720:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({name:"popover",props:{value:{validator:e=>null===e||"string"==typeof e||e&&"object"==typeof e&&"string"==typeof e.img&&"string"==typeof e.value&&"string"==typeof e.title,default:null},data:Array,isMultiple:Boolean,title:String,disabled:Boolean,itemStyles:{type:String,default:""},toggleClasses:{type:String,default:"uk-large-toggle"},pos:{type:String,default:"bottom-center"}},setup(e,t){const o=n.getCurrentInstance(),i=n.ref(null),r=n.ref([]),a=n.computed((()=>{if(!e.value)return null;if("object"==typeof e.value)return e.value;for(const t of e.data){const o=t.items.find((({value:t})=>t===e.value));if(o)return o}})),s=n.computed((()=>e.disabled||!e.data.length)),l=n.computed((()=>e.data.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.items.length>15})),{}))),c=n.computed((()=>e.data.map((e=>r.value.includes(e.name)?e:Object.assign(Object.assign({},e),{items:e.items.slice(0,15)})))));return n.onBeforeUnmount((()=>{i.value&&o.$withUIKit((e=>{e.pop(i.value).close()}))})),{selectedItem:a,popover:i,handleItemSelect:e=>t.emit("input",e),isDisabled:s,currentShowItems:c,expandedGroup:r,isGroupCanExpand:l}}})},79258:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(90571),a=i(o(61027)),s=o(78408),l=o(19821),c=o(83450),{COMPACT_LAYOUT_MODE_LEVEL:d}=a.default.constant;t.default=r.createComponent({name:"advanced-layout",components:{},props:{},setup(e,t){const o=t.root.$store,{centralBranchId:i,getStructureClasses:a,updateStyles:u,isFreePositionEnabled:p,isFloatingTopicFlexible:h,isTopicOverlapEnabled:f,isCompactMode:m,isAlignmentByLevel:g}=l.useInjectors(),v=r.computed((()=>a([i.value])[0])),b=r.computed((()=>v.value===s.STRUCTURECLASS.MAPCLOCKWISE)),A=r.computed((()=>[s.STRUCTURECLASS.MAP,s.STRUCTURECLASS.MAPUNBALANCED,s.STRUCTURECLASS.MAPCLOCKWISE].includes(v.value))),E=r.computed((()=>[s.STRUCTURECLASS.MAP,s.STRUCTURECLASS.MAPUNBALANCED,s.STRUCTURECLASS.MAPCLOCKWISE,s.STRUCTURECLASS.MAPANTICLOCKWISE,s.STRUCTURECLASS.MAPFLOATINGCLOCKWISE,s.STRUCTURECLASS.MAPFLOATINGANTICLOCKWISE].includes(v.value))),T="darwin"===process.platform;return{isAutoBalanceMapEnabled:A,isAutoBalanceMap:b,handleCheckAutoBalanceMap:()=>u("editor.changeStructure",{structureClass:b.value?s.STRUCTURECLASS.MAPUNBALANCED:s.STRUCTURECLASS.MAPCLOCKWISE,targets:[i.value]}),isFreePositionEnabled:p,isFloatingTopicFlexible:h,isEnableFreePosition:E,handleCheckFreePosition:()=>n(this,void 0,void 0,(function*(){yield u("editor.changeTopicPositioning",{value:p.value?"fixed":"free"}),c.trackEvent({eventCategory:"FormatMap",eventAction:"enableTopicFreePositioning"})})),handleCheckFlexibleFloating:()=>n(this,void 0,void 0,(function*(){yield u("editor.changeFloatingTopicFlexible",{value:h.value?"sticky":"flex"}),c.trackEvent({eventCategory:"FormatMap",eventAction:"changeFloatingTopicFlexible"})})),isTopicOverlapEnabled:f,handleCheckTopicOverlap:()=>{u("editor.changeTopicOverlap",{value:f.value?"none":"overlap"}),c.trackEvent({eventCategory:"FormatMap",eventAction:"enableTopicOverlap"})},isMac:T,isCompactMode:m,isAlignmentByLevel:g,handleCheckCompactMode:()=>{o.execSnowbrushAction({commandId:"editor.changeCompactLayoutModeLevel",args:{level:m.value?d.Third:d.Second}})},handleCheckAlignmentByLevel:()=>{o.execSnowbrushAction({commandId:"editor.toggleAlignmentByLevel"})}}}})},36545:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(78408),a=o(19821),s=n(o(4027)),l=n(o(27925)),c=n(o(38657)),d=n(o(90212));t.default=i.createComponent({name:"boundary-shape",components:{Popover:s.default,LineWidth:l.default,LineStyles:c.default,ColorPicker:d.default},props:{},setup(){const{getComputedStyles:e,updateStyles:t}=a.useInjectors(),o=i.getCurrentInstance(),n=i.computed((()=>r.LINEWIDTHS.map((e=>Object.assign(Object.assign({},e),{title:o.$T("$$",e.title)}))))),s=i.computed((()=>[...new Set(e(r.STYLE_KEYS.LINE_WIDTH))].map((e=>"string"==typeof e&&e.endsWith("pt")?e.slice(0,-2):e)))),l=i.computed((()=>u.value||d.value?null:s.value[0])),c=i.computed((()=>n.value.some((e=>e.value===l.value))&&"0"!==s.value[0])),d=i.computed((()=>u.value&&s.value.some((e=>"0"===e||n.value.every((t=>t.value!==e)))))),u=i.computed((()=>s.value.length>1)),p=i.computed((()=>[...new Set(e(r.STYLE_KEYS.LINE_PATTERN))])),h=i.computed((()=>p.value.length>1)),f=i.computed((()=>r.BOUNDARYLINEPATTERNS.map((e=>Object.assign(Object.assign({},e),{title:o.$T("$$",e.title),imageUrl:o.$toResourceURL(`static/assets/images/shapes/line-pattern/normal/${e.image}.svg`),iconUrl:o.$toResourceURL(`static/assets/images/shapes/line-pattern/small/${e.image}.svg`)}))))),m=i.computed((()=>[...new Set(e(r.STYLE_KEYS.LINE_COLOR))])),g=i.computed((()=>m.value.length>1));return{lineWidths:n,isBorderChecked:c,isBorderIndeterminate:d,isBorderMultiple:u,computedBorderLineWidth:l,handleBorderWidthCheck:()=>{c.value?t("editor.changeLineWidth",{width:"0"}):t("editor.changeLineWidth",{width:"2"})},handleBorderWidthSelect:e=>t("editor.changeLineWidth",{width:e}),uniqueBoundaryLineStyles:p,boundaryLinePatterns:f,isBoundaryLineStylesMultiple:h,handleSelectBoundaryLineStyle:e=>{t("editor.changeBoundaryLinePattern",{linePattern:e})},uniqueBoundaryLineColors:m,isBoundaryLineColorMultiple:g,handleInputBoundaryLineColor:e=>{t("editor.changeLineColor",{color:e})}}}})},96555:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(78408),a=o(19821),s=n(o(4027));t.default=i.createComponent({name:"boundary-shape",components:{Popover:s.default},props:{},setup(){const{getComputedStyles:e,updateStyles:t}=a.useInjectors(),o=i.getCurrentInstance(),n=i.computed((()=>r.BOUNDARYSHAPES.map((e=>({value:e.value,title:o.$T("$$",e.title),img:o.$toResourceURL(`static/assets/images/shapes/boundary-shape/${e.image}.svg`)}))))),s=i.computed((()=>[...new Set(e(r.STYLE_KEYS.SHAPE_CLASS))])),l=i.computed((()=>s.value.length>1));return{currentShapeClass:i.computed((()=>s.value[0])),isMultiple:l,boundaryShapes:n,handleBoundaryShapeSelect:e=>{t("editor.changeShapeClass",{shape:e})}}}})},924:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(4027)),a=o(19821),s=o(78408);t.default=i.createComponent({name:"branch-line-shape",components:{Popover:r.default},props:{},setup(){const e=i.getCurrentInstance(),{getComputedStyles:t,updateStyles:o,getStructureClasses:n,getBranchLineDirectionRotateDeg:r}=a.useInjectors(),l=i.computed((()=>s.BRANCHCONNECTIONS.map((t=>({value:t.value,title:e.$T("$$",t.title),img:e.$toResourceURL(`static/assets/images/shapes/branch-connection/normal/${t.image}.svg`)}))))),c=i.computed((()=>s.BRANCHCONNECTIONS.map((t=>({value:t.value,title:e.$T("$$",t.title),img:e.$toResourceURL(`static/assets/images/shapes/branch-connection/tree-chart/${t.image}.svg`)}))))),d={value:s.SPECIAL_STRUCTURE_TO_ENABLE_CONNECTION_LIST_MAP[s.STRUCTURECLASS.BRACELEFT][0],title:e.$T("$$",s.STRUCTUREMAP[s.STRUCTURECLASS.BRACELEFT].title),img:e.$toResourceURL("static/assets/images/shapes/branch-connection/special/line-brace-1.svg")},u=i.computed((()=>p.value.every((e=>e===s.STRUCTURECLASS.TREELEFT))?"transform: scaleX(-1); width:auto;":`transform: rotate(${r()}deg);width:auto;`)),p=i.computed((()=>[...new Set(n())])),h=i.computed((()=>[...new Set(t(s.STYLE_KEYS.LINE_CLASS))])),f=i.computed((()=>h.value.length?h.value[0]:null)),m=i.computed((()=>h.value.length>1||v.value)),g=i.computed((()=>{const e=p.value.filter((e=>[s.STRUCTURECLASS.BRACELEFT,s.STRUCTURECLASS.BRACERIGHT].includes(e))),t=p.value.filter((e=>[s.STRUCTURECLASS.TREELEFT,s.STRUCTURECLASS.TREERIGHT].includes(e)));return e.length?[d]:t.length?c.value:l.value})),v=i.computed((()=>{const e=[s.STRUCTURECLASS.TIMELINEHORIZONTAL,s.STRUCTURECLASS.TIMELINETHROUGHVERTICAL,s.STRUCTURECLASS.TIMELINESIDEDHORIZONTAL,s.STRUCTURECLASS.TIMELINEVERTICAL,s.STRUCTURECLASS.FISHBONELEFTHEADED,s.STRUCTURECLASS.FISHBONERIGHTHEADED,s.STRUCTURECLASS.LEFTHEADTOPBONE,s.STRUCTURECLASS.LEFTHEADBOTTOMBONE,s.STRUCTURECLASS.RIGHTHEADTOPBONE,s.STRUCTURECLASS.RIGHTHEADBOTTOMBONE,s.STRUCTURECLASS.BRACELEFT,s.STRUCTURECLASS.BRACERIGHT,s.STRUCTURECLASS.TOPTITLETREETABLE].filter(Boolean);return p.value.length>1||p.value.some((t=>e.includes(t)))}));return{branchLineItems:l,currentBranchLineItems:g,isBranchLineClassMultiple:m,isBranchLineDisabled:v,currentSelectionLineClass:f,handleLineClassInput:e=>{o("editor.changeBranchLineStyle",{lineStyle:e})},itemStyles:u}}})},31701:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(27925)),r=n(o(90212)),a=o(90571),s=o(19821),l=o(78408);t.default=a.createComponent({name:"branch-line-styles",components:{LineWidth:i.default,ColorPicker:r.default},props:{isRootTopic:Boolean},setup(){const{getComputedStyles:e,updateStyles:t,currentSheetId:o,getStructureClasses:n,selectionIds:i}=s.useInjectors(),r=a.computed((()=>[...new Set(e(l.STYLE_KEYS.LINE_WIDTH))].map((e=>parseInt(e))))),c=a.computed((()=>r.value.length>1)),d=a.computed((()=>c.value&&r.value.includes(0))),u=a.computed((()=>r.value.length&&!r.value.includes(0))),p=a.computed((()=>u.value?String(r.value[0]):null)),h=a.computed((()=>[...new Set(n())])),f=a.computed((()=>{const e=[l.STRUCTURECLASS.TOPTITLETREETABLE];return h.value.some((t=>e.includes(t)))})),m=a.computed((()=>[...new Set(e(l.STYLE_KEYS.LINE_COLOR))])),g=a.computed((()=>m.value.length>1)),v=a.computed((()=>e(l.STYLE_KEYS.MULTI_LINE_COLORS,{targets:[o.value]})[0])),b=a.computed((()=>v.value&&"none"!==v.value)),A=a.getCurrentInstance();return{BORDERWIDTHS:l.BORDERWIDTHS.map((e=>Object.assign(Object.assign({},e),{title:A.$T("$$",e.title)}))),branchLineWidth:p,isBranchLineWidthChecked:u,isBranchLineIndeterminate:d,isBranchLineWidthMultiple:c,isBranchLineStyleDisabled:f,handleCheckBranchLineWidth:()=>{if(u.value)t("editor.changeLineWidth",{width:"0pt",prue:!0}),t("editor.changeLineColor",{color:null});else for(const o of i.value){const n=e(l.STYLE_KEYS.LINE_WIDTH,{targets:[o],options:{ignoreUser:!0}})[0],i=parseInt(n,10),r=Number.isNaN(i)||0===i;t("editor.changeLineWidth",{width:`${r?2:i}pt`,prue:!0})}},handleInputBranchLineWidth:e=>{t("editor.changeLineWidth",{width:`${e}pt`,prue:!0})},uniqueBorderLineColors:m,isBorderLineColorMultiple:g,handleInputBorderLineColor:e=>{t("editor.changeLineColor",{color:e})},isMultiBranchColorEnabled:b}}})},5259:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(78408),a=o(19821),s=n(o(4027));t.default=i.createComponent({name:"callout-shape",components:{Popover:s.default},props:{},setup(){const{getComputedStyles:e,updateStyles:t}=a.useInjectors(),o=i.getCurrentInstance(),n=i.computed((()=>r.CALLOUTSHAPES.map((e=>({value:e.value,title:o.$T("$$",e.title),img:o.$toResourceURL(`static/assets/images/shapes/callout-shape/normal/${e.image}.svg`)}))))),s=i.computed((()=>[...new Set(e(r.STYLE_KEYS.CALLOUT_SHAPE_CLASS))])),l=i.computed((()=>s.value.length>1));return{currentShapeClass:i.computed((()=>s.value[0])),isMultiple:l,calloutShapes:n,handleCalloutShapeSelect:e=>{t("editor.changeShapeClass",{shape:e})}}}})},67508:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(89466)),a=o(90571),s=o(19821),l=o(78408),c=o(83450);t.default=a.createComponent({name:"cjk-font",components:{FontFamily:r.default},props:{},setup(e){const{currentSheetId:t,getComputedStyles:o,updateStyles:i,getAvailableFontFamily:r}=s.useInjectors(),d=a.getCurrentInstance(),u=a.ref(null);a.onMounted((()=>n(this,void 0,void 0,(function*(){u.value=(yield r()).filter((e=>e.isCJKFont)),u.value.unshift({text:d.$T("Default"),value:"default"})}))));const p=a.computed((()=>o(l.STYLE_KEYS.CJK_FONT_FAMILY,{targets:[t.value]})[0]));return{availableCJKFontFamily:u,currentCJKFontFamily:p,handleSelectCJKFont:e=>{i("editor.changeCJKFontFamily",{targets:[t.value],fontFamily:e}),c.trackEvent({eventCategory:"FormatMap",eventAction:"changeCJKFamily",eventName:e})}}}})},29819:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(90212)),a=i(o(66567)),s=i(o(89466)),l=i(o(65107)),c=o(90571),d=o(19821),u=o(78408),p=o(28441);t.default=c.createComponent({name:"font-styles",components:{ColorPicker:r.default,FontStyle:a.default,FontFamily:s.default,FontSize:l.default},props:{},setup(e){const{getComputedStyles:t,updateStyles:o,selectionIds:i,getAvailableFontFamily:r,getRecentFontFamily:a,setRecentFontFamily:s,getStructureClasses:l,getParentTopicStructure:h}=d.useInjectors(),f={},m=e=>{if("number"==typeof e)return e;if(void 0===e)return 0;return{thin:100,"extra light":200,"ultra light":200,light:300,normal:400,medium:500,bold:700,"semi bold":600,"demi bold":600,"extra bold":800,"ultra bold":800,black:900,heavy:900}[e.toLowerCase()]||parseInt(e,10)},g=c.ref(null),v=c.computed((()=>[...new Set(t(u.STYLE_KEYS.FONT_FAMILY))].map((e=>((e=e.split(",")[0]).startsWith("'")&&(e=e.substring(1)),e.endsWith("'")&&(e=e.substring(0,e.length-1)),e))))),b=c.computed((()=>v.value&&v.value.length>1)),A=c.computed((()=>a())),E=c.computed((()=>!b.value&&1===i.value.length&&1===v.value.length&&f[i.value[0]]?f[i.value[0]]:v.value[0]));c.onMounted((()=>n(this,void 0,void 0,(function*(){g.value=yield r()}))));const T=c.computed((()=>[...new Set(t(u.STYLE_KEYS.TEXT_COLOR))])),y=c.computed((()=>T.value.length>1)),C=c.computed((()=>[...new Set(t(u.STYLE_KEYS.FONT_WEIGHT))])),S=c.computed((()=>[...new Set(t(u.STYLE_KEYS.FONT_STYLE))])),k=c.computed((()=>S.value.length>1||C.value.length>1)),w=c.computed((()=>{if(k.value)return[];const e=v.value[0];if(!e||!g.value)return[];const t=g.value.find((t=>t.value===e));return t?t.styles:[]})),x=c.computed((()=>k.value||!C.value.length?null:C.value[0]&&S.value[0]?{weight:m(C.value[0]),italic:S.value[0].includes("italic")}:null)),I=c.computed((()=>[...new Set(t(u.STYLE_KEYS.FONT_SIZE))])),_=c.computed((()=>I.value.length>1));let B=[];const O=c.computed((()=>C.value.map(m).every((e=>e>500)))),M=c.computed((()=>S.value.every((e=>(e||"").includes("italic"))))),L=c.computed((()=>[...new Set(t(u.STYLE_KEYS.TEXT_DECORATION))])),R=c.computed((()=>L.value.every((e=>(e||"").includes("line-through"))))),N=c.computed((()=>[...new Set(t(u.STYLE_KEYS.TEXT_TRANSFORM))].filter(Boolean))),D=c.computed((()=>1!==N.value.length?-1:u.TEXTTRANSFORMS.findIndex((({value:e})=>e==N.value[0])))),P=c.computed((()=>-1===D.value?"":u.TEXTTRANSFORMS[D.value].value)),F=c.computed((()=>"manual"===P.value?"manual-style":P.value)),W=c.computed((()=>[...new Set(t(u.STYLE_KEYS.TEXT_ALIGN))])),$=c.computed((()=>1!==W.value.length?null:W.value[0])),U=c.computed((()=>{const e=l(i.value),t=i.value.map((e=>h(e))).filter(Boolean);return!![u.STRUCTURECLASS.SPREADSHEET,u.STRUCTURECLASS.COLUMNSPREADSHEET].some((o=>t.includes(o)||e.includes(o)))}));return{recentFontFamily:A,selectionFontFamily:v,availableFontFamily:g,isFontFamilyMultiple:b,handleFontFamilyChanged:e=>{const n=g.value.find((t=>t.value===e));if(!n||!n.styles)return;const r=n.styles.map((e=>e.weight));b.value||1!==i.value.length||1!==v.value.length||f[i.value[0]]||(f[i.value[0]]=v.value[0]);const a=(e,t)=>[...t].sort(((e,t)=>e>t?1:-1)).map((t=>[Math.abs(t-e),t])).sort((([e,t],[o,n])=>e>o?1:-1))[0][1];for(let e of i.value){const n=m(t(u.STYLE_KEYS.FONT_WEIGHT,{targets:[e]})[0]);o("editor.changeFontWeight",{targets:[e],fontWeight:a(n,r)})}s(e),o("editor.changeFontFamily",{fontFamily:e,prue:!0})},uniqueTextColors:T,isTextColorMultiple:y,handleTextColorInput:e=>o("editor.changeTextColor",{color:e}),selectionFontStyle:x,isFontStylesMultiple:k,availableStyles:w,handleFontStyleInput:e=>{o("editor.changeFontStyle",{fontStyle:e.italic?"italic":"normal"}),o("editor.changeFontWeight",{fontWeight:e.weight,prue:!0})},selectionDefaultFonts:f,selectionDefaultFont:E,uniqueFontSizes:I,isFontSizesMultiple:_,handleFontSizeInput:e=>{e&&o("editor.changeFontSize",{size:`${e}pt`,prue:!0})},handleFontSizeBlur:e=>{e&&(o("editor.changeFontSize",{size:`${e}pt`,prue:!0,targets:B}),B=[])},handleFontsizeFocus:()=>{B=i.value.slice()},isFontBold:O,handleCheckFontBold:()=>{o("editor.changeFontWeight",{fontWeight:O.value?"normal":"bold",prue:!0})},isFontItalic:M,handleCheckFontItalic:()=>{o("editor.changeFontStyle",{fontStyle:M.value?"normal":"italic",prue:!0})},isFontLineThrough:R,handleCheckFontLineThrough:()=>{o("editor.changeTextDecoration",{textDecoration:R.value?"rm:line-through":"add:line-through",prue:!0})},TEXTTRANSFORMS:u.TEXTTRANSFORMS,textTransform:P,textTransformIcon:F,textTransformFocusIndex:D,handleSelectTextTransform:e=>{o("editor.changeTextTransform",{type:e,prue:!0})},textAlignment:$,handleCheckTextAlignment:e=>{U.value||o("editor.changeTextAlign",{textAlign:e,prue:!0})},isAlignmentDisable:U,wrappedTooltipWithKeybinding:p.wrappedTooltipWithKeybinding}}})},39532:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(61027)),r=o(90571),a=o(83450),{RESIZE_IMAGE:s,CHANGE_IMAGE_LOCK_RATIO:l}=i.default.constant.ACTION_NAMES;t.default=r.createComponent({name:"image-size",components:{},props:{userImageStyle:Object,initialImageStyle:Object,imageViews:{type:Array,default:()=>[]},initialStyles:Object},setup(e,t){const o=t.root.$store,n=r.getCurrentInstance(),i=r.ref(100),c=r.ref(100),d=r.ref({lock:n.$toResourceURL("/static/assets/images/icon-lock.svg"),unlock:n.$toResourceURL("/static/assets/images/icon-unlock.svg")}),u=r.computed((()=>e.initialImageStyle||null)),p=r.computed((()=>u.value.height!==c.value||u.value.width!==i.value)),h=r.computed((()=>{if(e.userImageStyle)return{width:e.userImageStyle.width,height:e.userImageStyle.height}})),f=r.computed((()=>!!u.value&&p.value)),m=r.computed((()=>e.imageViews.every((e=>!!e.view.figure.lockRatio)))),g=r.computed((()=>e.imageViews.length>1)),v=r.computed((()=>{if(g.value){const t=e.imageViews.map((e=>e.view.figure.size.width));return t.every((e=>e===t[0]))?i.value.toString():""}return i.value.toString()})),b=r.computed((()=>{if(g.value){const t=e.imageViews.map((e=>e.view.figure.size.height));return t.every((e=>e===t[0]))?c.value.toString():""}return c.value.toString()}));r.watch(h,((e,t)=>{e&&"object"==typeof e&&e!==t&&(i.value=e.width,c.value=e.height)}));const A=t=>n=>{if(!n.target)return;const i=n.target;let r=parseInt(i.value);if(Number.isNaN(r))return;const l=o.state.editor.sbEditorWrapper.value;l&&(e.imageViews.forEach((o=>{const{id:n,view:i}=o,a=Math.ceil(r);let{width:c,height:d}=i.figure.size;const{width:u,height:p}=e.initialStyles[n];if("width"===t&&(c=a),"height"===t&&(d=a),m.value){const e=u/p;"width"===t&&(d=Math.ceil(c/e)),"height"===t&&(c=Math.ceil(d*e))}l&&l.execAction(s,{targets:[i],newSize:{width:c,height:d}})})),a.trackEvent({actionName:"editImageStyle",eventName:"editImageSize"}))},E=A("width"),T=A("height");return{imageWidth:i,imageHeight:c,inputImageWidth:v,inputImageHeight:b,handleRatioChanged:()=>{const e=o.state.editor.sbEditorWrapper.value;e&&e.execAction(l,{lockRatio:!m.value})},userImageSize:h,resetSizeEnable:f,resetImageSize:()=>{const t=o.state.editor.sbEditorWrapper.value;t&&e.imageViews.forEach((o=>{const{id:n,view:i}=o,{width:r,height:a}=e.initialStyles[n];t&&t.execAction(s,{targets:[i],newSize:{width:r,height:a}})}))},initialSize:u,handleInputWidth:E,handleInputHeight:T,lockIcon:d,isMultiple:g,isRatioLocked:m}}})},82459:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(61027)),r=o(90571),a=o(78408),s=n(o(27925)),l=n(o(90212)),c=o(83450),{CHANGE_IMAGE_BORDER_COLOR:d,CHANGE_IMAGE_BORDER_WIDTH:u,CHANGE_IMAGE_SHADOW_VISIBLE:p,CHANGE_IMAGE_OPACITY:h}=i.default.constant.ACTION_NAMES,f={borderWidth:a.BORDERWIDTHS[Math.floor(a.BORDERWIDTHS.length/2)].value,borderColor:"#000000",opacity:1,shadow:!1};t.default=r.createComponent({name:"image-style",components:{LineWidth:s.default,ColorPicker:l.default},props:{userImageStyle:Object,initialImageStyle:Object,imageViews:{type:Array,default:()=>[]},initialStyles:Object},setup(e,t){const o=r.getCurrentInstance(),n=t.root.$store,i=(e=[])=>{const t=n.state.editor.sbEditorWrapper.value;if(t)return{borderWidth:o=>{t.execAction(u,{targets:e,borderWidth:parseInt(o)}),c.trackEvent({actionName:"editImageStyle",eventName:"editImageBorder"})},color:o=>{t.execAction(d,{targets:e,borderColor:o}),c.trackEvent({actionName:"editImageStyle",eventName:"editImageBorder"})},shadow:o=>{t.execAction(p,{targets:e,visible:o}),c.trackEvent({actionName:"editImageStyle",eventName:"editImageShadow"})},opacity:o=>{t.execAction(h,{targets:e,opacity:Number(o)}),c.trackEvent({actionName:"editImageStyle",eventName:"editImageOpacity"})}}},s=r.ref(f.shadow),l=r.ref(f.borderWidth),m=r.ref(f.borderColor),g=r.ref(!1),v=r.ref(f.opacity),b=r.ref("100%");r.watch(v,(e=>{b.value=`${Math.ceil(100*Number(e))}%`}));const A=r.computed((()=>{if(e.userImageStyle)return e.userImageStyle}));r.watch(A,((e,t)=>{e&&"object"==typeof e&&e!==t&&(l.value=e.borderWidth,parseInt(l.value)>0?s.value=!0:s.value=!1,m.value=e.borderColor,g.value=e.shadow,v.value=e.opacity)}));return{BORDERWIDTHS:a.BORDERWIDTHS.map((e=>Object.assign(Object.assign({},e),{title:o.$T("$$",e.title)}))),borderStyleChecked:s,borderStyleToggle:()=>{if(!s.value){const e="0"===l.value?f.borderWidth:l.value;i().borderWidth(e),i().color(m.value)}else i().borderWidth("0")},selectedBorderWidth:l,handleInputBorderWidth:e=>{s.value&&i().borderWidth(e)},selectedBorderColor:m,handleInputBorderColor:e=>{i().color(e)},borderShadowChecked:g,borderShadowToggle:()=>{i().shadow(!g.value)},opacity:v,opacityText:b,opacityInputRange:()=>{i().opacity(v.value)},opacityInputNumber:()=>{const e=parseInt(b.value);isNaN(e)||e>100||e<0||i().opacity(e/100)},imageStyle:A,resetStyle:()=>{e.imageViews.forEach((t=>{const{id:o,view:n}=t,{borderWidth:r,borderColor:a,shadow:s,opacity:l}=e.initialStyles[o];i([n]).borderWidth(r),i([n]).color(a),i([n]).shadow(s),i([n]).opacity(l)}))}}}})},72783:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=o(19821),r=o(78408),a=o(18999).snowballConstant.RAINBOW_LIGHT_COLOR_LIST.map((e=>e.reduce(((e,t)=>e+" "+t),"").trim()));t.Z=n.createComponent({name:"multi-branch-colors",props:{},setup(){const{updateStyles:e,getComputedStyles:t,currentSheetId:o}=i.useInjectors(),s=n.computed((()=>t(r.STYLE_KEYS.MULTI_LINE_COLORS,{targets:[o.value]})[0])),l=n.computed((()=>a.indexOf(s.value))),c=n.computed((()=>(s.value||"").split(" "))),d=n.computed((()=>s.value&&"none"!==s.value)),u=n.computed((()=>a.map((e=>e.split(" ")))));return{MULTI_BRANCH_COLORS:a,computedMultiBranchColor:c,computedMultiBranchColors:u,isMultiBranchColorEnabled:d,currentIndexOfMultiBranchColor:l,handleCheckMultiBranchColor:()=>{if(d.value)e("editor.changeMultiLineColors",{multiLineColors:"none",prue:!0});else{const n=t(r.STYLE_KEYS.MULTI_LINE_COLORS,{targets:[o.value],options:{ignoreUser:!0}})[0];e("editor.changeMultiLineColors",{multiLineColors:n&&"none"!==n?n:a[0],prue:!0})}},handleInputMultiBranchColor:t=>{e("editor.changeMultiLineColors",{multiLineColors:t,prue:!0})}}}})},92888:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=o(51818);t.Z=n.createComponent({name:"quick-styles-boundary-preview",props:{width:{type:Number,default:128},height:{type:Number,default:72},direction:String,boundaryShape:String,boundaryLineColor:String,boundaryLineWidth:String,boundaryLinePattern:String,boundaryFillColor:String},setup(e){const{boundaryPath:t,boundaryFillPath:o,boundaryLineDashArray:n,boundaryShapeTransformPatch:r}=i.useQuickStylesBoundaryPreview(e);return{boundaryPath:t,boundaryFillPath:o,boundaryLineDashArray:n,boundaryShapeTransformPatch:r}}})},79245:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(19821),a=n(o(18071)),s=n(o(57052)),l=n(o(82782)),c=n(o(40350)),d=o(78408);t.default=i.createComponent({name:"quick-styles-preview",props:{},components:{QuickStylesBoundaryPreview:a.default,QuickStylesRelationshipPreview:s.default,QuickStylesTopicPreview:l.default,QuickStylesSummaryPreview:c.default},setup(){const e=i.getCurrentInstance(),{getComputedStyles:t,selectionTypes:o,currentSheetId:n,getLayerLevels:a,getClassNames:s,getClassLists:l,getSuggestedClassNames:c,selectionIds:u}=r.useInjectors(),p=i.computed((()=>[...new Set(o.value)])),h=i.computed((()=>p.value.length>1)),f=i.computed((()=>p.value.includes("boundary"))),m=i.computed((()=>p.value.includes("summaryTopic"))),g=i.computed((()=>p.value.includes("relationship"))),v=i.computed((()=>["mainTopic","subTopic","floatingTopic"].some((e=>p.value.includes(e))))),b=i.computed((()=>{const e=t(d.STYLE_KEYS.FILL_COLOR,{targets:[n.value]})[0];return"none"!==e&&e?e:"transparent"})),A=i.computed((()=>t(d.STYLE_KEYS.SHAPE_CLASS)[0])),E=i.computed((()=>t(d.STYLE_KEYS.LINE_PATTERN)[0])),T=i.computed((()=>(t(d.STYLE_KEYS.LINE_WIDTH)[0]||"").replace(/pt$/,""))),y=i.computed((()=>t(d.STYLE_KEYS.LINE_COLOR)[0])),C=i.computed((()=>t(d.STYLE_KEYS.FILL_COLOR)[0])),S=i.computed((()=>{const e=t(d.STYLE_KEYS.BORDER_LINE_WIDTH)[0]||"";return"string"==typeof e&&e.endsWith("pt")?e.slice(0,-2):e})),k=i.computed((()=>t(d.STYLE_KEYS.BORDER_LINE_COLOR)[0])),w=i.computed((()=>t(d.STYLE_KEYS.SHAPE_CLASS,{isSummary:!0})[0])),x=i.computed((()=>{const e=t(d.STYLE_KEYS.LINE_WIDTH,{isSummary:!0})[0]||"";return"string"==typeof e&&e.endsWith("pt")?e.slice(0,-2):e})),I=i.computed((()=>t(d.STYLE_KEYS.LINE_COLOR,{isSummary:!0})[0])),_=A,B=i.computed((()=>t(d.STYLE_KEYS.ARROW_END_CLASS)[0])),O=i.computed((()=>t(d.STYLE_KEYS.ARROW_BEGIN_CLASS)[0])),M=y,L=E,R=T,N=y,D=T,P=A,F=C,W=E,$=A,U=i.computed((()=>C.value&&"none"!==C.value?C.value:b.value)),j=k,H=S,Y=i.computed((()=>t(d.STYLE_KEYS.TEXT_COLOR)[0])),V=i.computed((()=>t(d.STYLE_KEYS.FONT_WEIGHT)[0])),z=i.computed((()=>t(d.STYLE_KEYS.FONT_FAMILY)[0])),Z=i.computed((()=>t(d.STYLE_KEYS.TEXT_DECORATION)[0])),G=i.computed((()=>Math.min(parseFloat(t(d.STYLE_KEYS.FONT_SIZE)[0]),26))),q=i.computed((()=>[...new Set(a())])),X=i.computed((()=>[...new Set(s())])),K=i.computed((()=>{const e=[];for(const t of u.value){const o=l({targetIds:[t]});if(o.length&&o[0].length)e.push(o[0][0]);else{const o=c({targetIds:[t]});o.length&&e.push(o[0])}}return[...new Set(e)]})),J=i.computed((()=>{const t=1===X.value.length&&1===K.value.length?K.value[0]:"multiple";if("string"==typeof d.THEMECLASSNAMEKEYMAP[t])return e.$T("$$",d.THEMECLASSNAMEKEYMAP[t]);const o=q.value.length&&q.value[0];return t.includes("level")?e.$T("Level {} Topic").replace("{}",o.toString()):2===o?e.$T("Main Topic"):e.$T("Subtopic")}));return{isSelectionMultiple:h,isBoundarySelected:f,isRelationshipSelected:g,isSummarySelected:m,isTopicSelected:v,sheetBackgroundColor:b,boundaryLineColor:N,boundaryLineWidth:D,boundaryShape:P,boundaryFillColor:F,boundaryLinePattern:W,topicText:J,topicShapeClass:$,topicFillColor:U,topicBorderLineColor:j,topicBorderLineWidth:H,topicColor:Y,topicFontWeights:V,topicFontFamily:z,topicTextDecoration:Z,topicFontSize:G,relationshipShapeClass:_,relationshipArrowBeginClass:O,relationshipArrowEndClass:B,relationshipLineColor:M,relationshipLineWidth:R,relationshipLinePattern:L,summaryShapeClass:w,summaryLineWidth:x,summaryLineColor:I}}})},77852:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=o(68121);let r=0;t.Z=n.createComponent({name:"quick-styles-relationship-previews",props:{width:{type:Number,default:128},height:{type:Number,default:72},relationshipShapeClass:String,relationshipBeginArrowShapeClass:String,relationshipEndArrowShapeClass:String,relationshipLinePattern:String,relationshipLineWidth:String,relationshipLineColor:String},setup(e){r++;const t=`relation-previews-marker-start-${r}`,o=`relation-previews-marker-end-${r}`,{relationshipLineWidth:n,relationshipLineShapePath:a,relationshipLineDashArray:s,relationshipArrowBegin:l,relationshipArrowEnd:c}=i.useQuickStylesRelationshipPreview(e);return{markerStartId:t,markerEndId:o,computedRelationshipLineWidth:n,relationshipLineShapePath:a,relationshipLineDashArray:s,relationshipArrowBegin:l,relationshipArrowEnd:c}}})},29784:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(82782)),a=o(23350);t.default=i.createComponent({name:"quick-styles-summary-preview",components:{QuickStylesTopicPreview:r.default},props:{width:{type:Number,default:128},height:{type:Number,default:72},topicShapeClass:String,topicBorderLineWidth:String,topicBorderLineColor:String,topicFillColor:String,topicColor:String,topicTextDecoration:String,topicFontSize:Number,topicFontWeights:String,topicFontFamily:String,topicText:{type:String,default:""},summaryShapeClass:String,summaryLineWidth:String,summaryLineColor:String},setup(e){const{summaryPreview:t}=a.useQuickStyleSummaryPreview(e);return{summaryPreview:t}}})},62190:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z=n.createComponent({name:"quick-styles-topic-preview",props:{topicBorderLineWidth:String,topicBorderLineColor:String,topicFillColor:String,topicColor:String,topicTextDecoration:String,topicFontSize:Number,topicFontWeights:String,topicFontFamily:String,topicText:{type:String,default:""}},setup:()=>({})})},11683:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(61765),r=o(83450),a=o(90571),s=o(19821),l=o(78408),c=n(o(5071)),d=["importantTopic","minorTopic","expiredTopic","normal"],u=e=>"none"===e?"rgba(0, 0, 0, 0)":e,p=e=>{const t=parseInt(e);return t>1?1:t},h="win32"===i.platform;t.default=a.createComponent({name:"quick-styles",components:{QuickStylesPreview:c.default},props:{tooltip:{type:String,required:!1}},setup(){const e=a.ref(null),t=a.ref(null),o=a.getCurrentInstance(),{getLayerLevels:n,getClassNames:i,getClassLists:c,getComputedStyles:f,currentSheetId:m,getThemeStyle:g,getUserStyles:v,updateStyles:b,getSuggestedClassNames:A,selectionIds:E,getTypes:T,getTopicIdsByThemeClassNames:y,getTopicIdsByLevel:C,selectionTypes:S}=s.useInjectors(),k=a.computed((()=>[...new Set(n())])),w=a.computed((()=>[...new Set(i())])),x=a.computed((()=>[...new Set(c().reduce(((e,t)=>e.concat(t)),[]))])),I=a.computed((()=>{const e=[];for(const t of E.value){const o=c({targetIds:[t]});if(o.length&&o[0].length)e.push(o[0][0]);else{const o=A({targetIds:[t]});o.length&&e.push(o[0])}}return[...new Set(e)]})),_=a.computed((()=>["subTopic","mainTopic","floatingTopic"].some((e=>S.value.includes(e))))),B=a.computed((()=>S.value.includes("boundary"))),O=a.computed((()=>S.value.includes("summaryTopic"))),M=a.computed((()=>S.value.includes("relationship"))),L=a.computed((()=>!_.value)),R=_,N=a.computed((()=>!H.value&&Y.value)),D=a.computed((()=>_.value?N.value?97:200:128)),P=a.computed((()=>{const e=f(l.STYLE_KEYS.FILL_COLOR,{targets:[m.value]})[0];return"none"!==e&&e?e:"transparent"})),F=a.computed((()=>["relationship","boundary","summaryTopic"].some((e=>S.value.includes(e))))),W=a.computed((()=>{const e={options:{ignoreUser:!0,ignoreClass:!0}},t=d.reduce(((t,o)=>{let n=g(o,l.STYLE_KEYS.FILL_COLOR)||f(l.STYLE_KEYS.FILL_COLOR,e)[0];const i=g(o,l.STYLE_KEYS.BORDER_LINE_WIDTH)||f(l.STYLE_KEYS.BORDER_LINE_WIDTH,e)[0],r=g(o,l.STYLE_KEYS.BORDER_LINE_COLOR)||f(l.STYLE_KEYS.BORDER_LINE_COLOR,e)[0],a=g(o,l.STYLE_KEYS.TEXT_COLOR)||f(l.STYLE_KEYS.TEXT_COLOR,e)[0],s=g(o,l.STYLE_KEYS.FONT_STYLE)||f(l.STYLE_KEYS.FONT_STYLE,e)[0],c=g(o,l.STYLE_KEYS.FONT_WEIGHT)||f(l.STYLE_KEYS.FONT_WEIGHT,e)[0],d=g(o,l.STYLE_KEYS.TEXT_DECORATION)||f(l.STYLE_KEYS.TEXT_DECORATION,e)[0],h=Math.min(Number(g(o,l.STYLE_KEYS.FONT_SIZE)||f(l.STYLE_KEYS.FONT_SIZE,e)[0]),26);return n&&"none"!==n||(n=P.value),t.push({className:o,checked:I.value.includes(o),styles:{backgroundColor:u(n),color:u(a),border:`${p(i)}px solid ${u(r)}`,fontStyle:s,fontWeight:c,textDecoration:d,fontSize:`${h}px`}}),t}),[]);return t.every((e=>!e.checked))&&(t[0].checked=!0),t})),$=e=>{const{styleClassName:t,isSummary:o,targetId:n,stylesKeys:i}=e,r={};let a=!1;for(let e of i){const i=g(t,e);i&&(r[e]=i);let s=v(e,{isSummary:o,targets:[n]})[0],l=f(e,{targets:[n],isSummary:o,options:{ignoreUser:!0}})[0];s&&s!=l&&(r[e]=s,a=!0)}return{classData:r,hasData:a}},U=a.computed((()=>E.value.reduce(((e,t)=>(e[t]=(e=>{const t=c({targetIds:[e]}),o=t.length&&t[0].length&&d.includes(t[0][0])?t[0][0]:A({targetIds:[e]})[0];if(!o)return;let n=[...l.FONTKEYS];_.value?n=n.concat(l.TOPICKEYS):M.value?n=n.concat(l.RELATIONSHIPSTYLEKEYS):B.value?n=n.concat(l.BOUNDARYSTYLEKEYS):O.value&&(n=n.concat(l.TOPICKEYS));const i=$({styleClassName:o,isSummary:!1,targetId:e,stylesKeys:[...new Set(n)]});return i.hasData?i.classData:null})(t),e)),{}))),j=a.computed((()=>E.value.reduce(((e,t)=>(e[t]=(e=>{const t=$({styleClassName:"summary",isSummary:!0,targetId:e,stylesKeys:l.SUMMARYKEYS});return t.hasData?t.classData:null})(t),e)),{}))),H=a.computed((()=>{const e=e=>{const t=Object.values(e);if(t.length<1)return!0;if(1===t.length)return null===t[0];if(!t.every(Boolean))return!0;const o=(e,t,o)=>!e.some((e=>t&&o&&t[e]!==o[e]));let n=!0;const i=Object.keys(t[0]);for(let e=1;e<t.length;++e){const r=Object.keys(t[e]);if(i.length!=r.length){n=!1;break}if(!o(i,t[0],t[e])){n=!1;break}}return n};let t=!0;return O.value&&!e(j.value)&&(t=!1),e(U.value)||(t=!1),t})),Y=a.computed((()=>1===w.value.length)),V=a.computed((()=>1===k.value.length)),z=a.computed((()=>E.value.every((e=>{const t=T({targetIds:[e]}),o=n({targetIds:[e]});return!(!t.length||!o.length)&&(t[0]===l.TOPIC_TYPE.ATTACHED&&o[0]>2)})))),Z=()=>{if(!E.value.length)return;const e=E.value[0],t=U.value[e],o=w.value[0],n=y([o],[]),i=[];for(const e of n)i.push(...A({targetIds:[e]}));[...new Set(i)].forEach((e=>{b("editor.removeClass",{className:e,prue:!0,targets:n})})),b("editor.removeClassFromTheme",{classNames:i,prue:!0,targets:n}),b("editor.updateClassIntoTheme",{className:o,classData:{properties:t,type:"topic"}}),b("editor.setStyleObject",{styleObj:null,prue:!0,targets:y([o],d)}),r.trackEvent({eventCategory:"FormatStyle",eventAction:"updateToAllSubtopics"}),r.trackEvent({eventCategory:"FormatStyle",eventAction:"updateTopicMarkedStyle"})},G=(e=!0)=>{t.value&&o.$withUIKit((o=>{e?o.pop(t.value).show():o.pop(t.value).hide()}))};return{isWin:h,previewContainerMaxWidth:D,selectionTypes:S,isTopicNameVisible:L,isTopicSelected:_,isUpdateButtonVisible:N,isPresetTopicQuickStyleAvailable:R,isPanelSection:F,previewSheetBackgroundColor:P,presetTopicQuickStylesData:W,THEMECLASSNAMEKEYMAP:l.THEMECLASSNAMEKEYMAP,handleQuickStyleChanged:e=>{if(b("editor.setStyleObject",{styleObj:null}),x.value.forEach((e=>{b("editor.removeClass",{className:e,prue:!0})})),"normal"===e)return;b("editor.addClass",{className:e,prue:!0});r.trackEvent({eventCategory:"FormatMap",eventAction:"chooseStyleMarker",eventName:{importantTopic:"veryImportTopic",minorTopic:"importantTopic",expiredTopic:"crossOutTopic"}[e]})},isSameSelectionLevels:V,handleUpdateToAllLevels:Z,handleUpdateToSameLevels:()=>{if(!E.value.length)return;const e=E.value[0],t=U.value[e];b("editor.updateClassIntoTheme",{className:`level${k.value[0]}`,classData:{properties:t,type:"topic"}});const o=C(k.value[0]).filter((e=>{const t=c({targetIds:[e]});return!t.length||t[0].every((e=>!d.includes(e)))}));b("editor.removeClass",{className:w.value[0],targets:o}),b("editor.setStyleObject",{styleObj:null,targets:o}),r.trackEvent({eventCategory:"FormatStyle",eventAction:"updateToAllLevelSubtopics"}),r.trackEvent({eventCategory:"FormatStyle",eventAction:"updateTopicMarkedStyle"})},handleShowPopoverOrUpdate:e=>{if(_.value){const t=d.some((e=>x.value.includes(e)||w.value.includes(e)));z.value&&!t||(t?(()=>{if(!E.value.length||!x.value[0])return;const e=x.value[0],t=U.value[E.value[0]];b("editor.updateClassIntoTheme",{className:e,toBeRemovedClassName:null,classData:{properties:t,type:"topic"}}),b("editor.setStyleObject",{styleObj:null,prue:!0,targets:y([e],[])}),r.trackEvent({eventCategory:"FormatStyle",eventAction:"updateTopicMarkedStyle"})})():Z(),e.stopImmediatePropagation())}else M.value||B.value?((()=>{if(!E.value.length)return;const e=E.value[0],t=U.value[e],o=w.value[0];b("editor.updateClassIntoTheme",{className:o,classData:{properties:t,type:"topic"}}),b("editor.setStyleObject",{styleObj:null,prue:!0,targets:y([o],[])})})(),e.stopImmediatePropagation()):O.value?((()=>{if(!E.value.length)return;const e=E.value[0],t=U.value[e],o=j.value[e],n=w.value[0];O.value&&(t&&b("editor.updateClassIntoTheme",{className:n,classData:{properties:t,type:"topic"}}),o&&b("editor.updateClassIntoTheme",{className:"summary",classData:{properties:o,type:"summary"}}),b("editor.setSummaryStyleObject",{styleObj:null,prue:!0,targets:y([n],[])}),b("editor.setStyleObject",{styleObj:null,prue:!0,targets:y([n],[])}))})(),e.stopImmediatePropagation()):(Z(),e.stopImmediatePropagation())},popover:e,uniqueSelectionLayerLevels:k,presetStylesListElement:t,handlePreviewClicked:()=>{R.value&&G(!0)},handlePopupPresetStylesList:G}}})},39888:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(78408),a=o(19821),s=n(o(38657)),l=n(o(4027));t.default=i.createComponent({name:"relationship-line-styles",components:{LineStyles:s.default,Popover:l.default},props:{},setup(){const{getComputedStyles:e,updateStyles:t}=a.useInjectors(),o=i.computed((()=>[...new Set(e(r.STYLE_KEYS.ARROW_BEGIN_CLASS))])),n=i.computed((()=>o.value.length>1)),s=i.computed((()=>[...new Set(e(r.STYLE_KEYS.ARROW_END_CLASS))])),l=i.computed((()=>s.value.length>1)),c=i.computed((()=>[...new Set(e(r.STYLE_KEYS.LINE_PATTERN))])),d=i.computed((()=>c.value.length>1)),u=i.getCurrentInstance();return{beginArrowShapes:i.computed((()=>r.BEGINARROWS.map((e=>({value:e.value,title:u.$T("$$",e.title),img:u.$toResourceURL(`static/assets/images/shapes/arrow-shape/normal/${e.image}.svg`)}))))),endArrowShapes:i.computed((()=>r.ENDARROWS.map((e=>({value:e.value,title:u.$T("$$",e.title),img:u.$toResourceURL(`static/assets/images/shapes/arrow-shape/normal/${e.image}.svg`)}))))),linePatterns:i.computed((()=>r.RELATIONSHIPLINEPATTERNS.map((e=>({value:e.value,title:u.$T("$$",e.title),img:u.$toResourceURL(`static/assets/images/shapes/line-pattern/normal/${e.image}.svg`)}))))),uniqueSelectionBeginArrowShapes:o,isSelectionBeginArrowMultiple:n,handleSelectBeginArrowShape:e=>{t("editor.changeStartArrowType",{style:e})},uniqueSelectionEndArrowShapes:s,isSelectionEndArrowMultiple:l,handleSelectEndArrowShape:e=>{t("editor.changeEndArrowType",{style:e})},uniqueSelectionLinePatterns:c,isSelectionLinePatternsMultiple:d,handleSelectLinePatterns:e=>{t("editor.changeLinePattern",{linePattern:e})}}}})},53477:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(78408),a=o(19821),s=n(o(27925)),l=n(o(90212));t.default=i.createComponent({name:"relationship-line-width",components:{LineWidth:s.default,ColorPicker:l.default},props:{},setup(){const{getComputedStyles:e,updateStyles:t}=a.useInjectors(),o=i.getCurrentInstance(),n=i.computed((()=>r.LINEWIDTHS.map((e=>Object.assign(Object.assign({},e),{title:o.$T("$$",e.title)}))))),s=i.computed((()=>[...new Set(e(r.STYLE_KEYS.LINE_WIDTH))].map((e=>String(parseInt(e)))))),l=i.computed((()=>s.value.length>1)),c=i.computed((()=>[...new Set(e(r.STYLE_KEYS.LINE_COLOR))])),d=i.computed((()=>c.value.length>1));return{lineWidths:n,uniqueSelectionLineWidths:s,isSelectionLineWidthMultiple:l,handleSelectLineWidth:e=>{t("editor.changeLineWidth",{width:e})},uniqueSelectionLineColors:c,isSelectionLineColorMultiple:d,handleInputLineColor:e=>{t("editor.changeLineColor",{color:e})}}}})},99113:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(78408),a=o(19821),s=n(o(4027));t.default=i.createComponent({name:"relationship-line-width",components:{Popover:s.default},props:{},setup(){const{getComputedStyles:e,updateStyles:t}=a.useInjectors(),o=i.getCurrentInstance(),n=i.computed((()=>r.RELATIONSHIPSHAPES.map((e=>({value:e.value,title:o.$T("$$",e.title),img:o.$toResourceURL(`static/assets/images/shapes/relationship-shape/normal/${e.image}.svg`)}))))),s=i.computed((()=>[...new Set(e(r.STYLE_KEYS.SHAPE_CLASS))])),l=i.computed((()=>s.value.length>1));return{currentShapeClass:i.computed((()=>s.value[0])),isMultiple:l,relationshipShapes:n,handleRelationshipShapeSelect:e=>{t("editor.changeShapeClass",{shape:e})}}}})},99596:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=o(78408),r=o(19821);t.Z=n.createComponent({name:"reset-button",props:{styleKeys:{type:Array,validator:e=>e.every((e=>"string"==typeof e)),default:()=>[]},summaryStyleKeys:{type:Array,validator:e=>e.every((e=>"string"==typeof e)),default:()=>[]}},setup(e){const{selectionTypes:t,selectionIds:o,currentSheetId:a,getComputedStyles:s,getUserStyles:l,updateStyles:c}=r.useInjectors(),d=(e,t,o)=>s(e,Object.assign({targets:[t],options:{ignoreUser:!0}},o));return{isStylesChanged:n.computed((()=>{const n=t.value.includes("summaryTopic"),r=t.value.includes("centralTopic"),s=o.value.some((t=>e.styleKeys.some((e=>{const o=i.CENTRALSTYLEKEYS.includes(e);if(o&&!r)return!1;const n=o?a.value:t,s=l(e,{targets:[n]}),c=d(e,n);return"string"==typeof s[0]&&"string"==typeof c[0]&&s[0].startsWith("#")&&c[0].startsWith("#")?c[0].toLowerCase()!==s[0].toLowerCase():o?s[0]&&"none"!==s[0]&&s[0]!==c[0]:s[0]&&s[0]!==c[0]}))));if(n){return o.value.some((t=>e.summaryStyleKeys.some((e=>{const o=l(e,{targets:[t],isSummary:!0}),n=d(e,t,{isSummary:!0});return"string"==typeof o[0]&&"string"==typeof n[0]&&o[0].startsWith("#")&&n[0].startsWith("#")?n[0].toLowerCase()!==o[0].toLowerCase():o[0]&&o[0]!==n[0]}))))||s}return s})),handleResetStyles:()=>{if(c("editor.setStyleObject",{styleObj:null,prue:!0}),t.value.includes("summaryTopic")&&c("editor.setSummaryStyleObject",{styleObj:null,prue:!0}),["subTopic","mainTopic","centralTopic","summaryTopic","calloutTopic"].some((e=>t.value.includes(e)))&&c("editor.changeTopicCustomWidth",{customWidth:0,prue:!0}),t.value.includes("centralTopic")){const[[e],[t]]=[i.STYLE_KEYS.MULTI_LINE_COLORS,i.STYLE_KEYS.LINE_TAPERED].map((e=>d(e,a.value)));c("editor.changeMultiLineColors",{multiLineColors:e,prue:!0}),c("editor.changeLineTapered",{targets:[a.value],tapered:t,prue:!0})}}}}})},18576:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(90212)),a=o(90571),s=o(78408),l=o(19821);t.default=a.createComponent({name:"sheet-background",components:{ColorPicker:r.default},setup(){const{currentSheetId:e,getUserStyles:t,getComputedStyles:o,updateStyles:i}=l.useInjectors(),r=a.computed((()=>o(s.STYLE_KEYS.FILL_COLOR,{targets:[e.value],options:{ignoreUser:!0}})[0])),c=a.computed((()=>{const o=t(s.STYLE_KEYS.FILL_COLOR,{targets:[e.value]});return(null!==o[0]||"none"!==r.value)&&(o.length&&"none"!==o[0])})),d=a.computed((()=>o(s.STYLE_KEYS.FILL_COLOR,{targets:[e.value]})[0]));return{isFillColorChecked:c,currentFilledColor:r,computedFillColor:d,handleCheckFillColor:()=>n(this,void 0,void 0,(function*(){if(c.value)yield i("editor.changeSheetBackground",{targets:[e.value],color:"none",prue:!0});else{let t=r.value;"none"===t&&(t="#fff"),yield i("editor.changeSheetBackground",{targets:[e.value],color:t,prue:!0})}})),handlePickUpFillColor:t=>{i("editor.changeSheetBackground",{targets:[e.value],color:t,prue:!0})}}}})},6267:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(90571),c=o(99492),d=r(o(53305)),u=s(o(24678)),p=o(73725),h=o(28441),f=o(78408),m=o(19821),g=o(74627);t.default=l.createComponent({name:"theme",props:{},setup(e,t){let o=l.getCurrentInstance();const n=t.root.$store,i=l.ref([]),r=n.getters["l10n/T"],s=l.ref(!1),{centralBranchId:v,getTheme:b,getSkeletonThemeId:A,getColorThemeId:E,getColorListFromExportedTheme:T,getStructureClasses:y}=m.useInjectors(),C=l.computed((()=>n.state.themeEditor.customThemes)),S=l.computed((()=>{n.state.editor.themeChanged;const e=b();return e?[...i.value,...C.value].find((t=>t&&t.id===e.id||t.tid&&t.tid===e.id)):null})),k=l.computed((()=>y([v.value])[0])),w=()=>{const e=n.state.editor.sbEditorWrapper.value;if(!e)return null;const t=e.getCurrentSheetEditor();if(!t)return null;return t.getCurrentTemporaryColorTheme()||null},x=l.computed((()=>{const e=A(),t=g.snowballConstant.SKELETON_GRAY_COLOR_THEME_ID;if(e){let o=null;if(o=t?g.getSkeletonThemePreviewById(e,t):(e=>{const t=w();return t&&g.getSkeletonThemePreviewById(e,t)})(e),o)return"data:image/svg+xml,"+encodeURIComponent(o)}return((e,t)=>{if(t.startsWith("CUSTOM-")){const o=C.value.find((({id:e})=>e===t)),n=o&&o.createdAt;return d.toURLInAppData(`theme/${t}/previews/${e}.svg?t=${n}`)}return"theme-custom"===t?o.$toResourceURL("static/assets/images/theme-custom.svg"):o.$toResourceURL(`static/styles/theme_previews/${e}/${e}-${t}.svg`)})(p.STRUCTURECLASS2PREVIEWCLASSMAP[k.value]||"map-unbalance",(S.value||{}).id||"theme-custom")})),I=l.computed((()=>[f.STRUCTURECLASS.SPREADSHEET,f.STRUCTURECLASS.COLUMNSPREADSHEET,f.STRUCTURECLASS.TOPTITLETREETABLE].includes(y([v.value])[0]))),_=l.computed((()=>I.value?g.snowballConstant.COLOR_THEME_PREVIEW_TYPE.TABLE:g.snowballConstant.COLOR_THEME_PREVIEW_TYPE.MAP)),B=l.computed((()=>{const e=E();let t=null;return e&&(t=g.getColorThemePreviewById(e,_.value)),t||(t=(()=>{const e=w();return e&&g.getColorThemePreviewById(e,_.value)})()),t?`data:image/svg+xml,${encodeURIComponent(t)}`:""})),O=l.computed((()=>x.value.startsWith("data:image/svg")||x.value.endsWith(".svg")));(()=>{a(this,void 0,void 0,(function*(){o.$safeRun((()=>a(this,void 0,void 0,(function*(){const e=yield d.load("static/styles/themes.json"),t=JSON.parse(e.toString());i.value=t.themes}))))}))})();const M=l.computed((()=>{const e=E();return g.getThemeColorListById(e)||T()}));return{skeletonPreviewURL:x,colorThemePreviewURL:B,isSvg:O,previewColorList:M,openColorTheme:()=>a(this,void 0,void 0,(function*(){t.emit("navigation",{componentName:"color-theme-panel",componentTitle:l.computed({get:()=>r("Color Theme"),set:e=>e}),options:{closeBtn:!0,colorThemeShuffle:!0}})})),onAllThemesClick:()=>a(this,void 0,void 0,(function*(){o.$safeRun((()=>a(this,void 0,void 0,(function*(){s.value=!0,yield u.default.fetch(c.WINDOW_OPEN,{name:"dialog-all-themes",parentId:window.id,wait:!0,query:{editorId:window.editorId,parentId:window.id,centralTopicStructureClass:p.STRUCTURECLASS2PREVIEWCLASSMAP[k.value]||"map-unbalance",previewClassList:Object.values(p.STRUCTURECLASS2PREVIEWCLASSMAP)}}),s.value=!1}))))})),isAllThemesDisabled:s,wrappedTooltipWithKeybinding:h.wrappedTooltipWithKeybinding,onSkeletonPreview:()=>{t.emit("navigation",{componentName:"skeleton-panel",componentTitle:l.computed({get:()=>r("Skeleton"),set:e=>e}),options:{closeBtn:!0}})}}}})},30476:(e,t,o)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),t.vA=t.rb=void 0;const n=o(90571);t.rb=["Auto","Display","Hide"],t.vA="Auto",t.ZP=n.createComponent({name:"slide-display-option",props:{currentOption:{type:String,default:t.vA}},setup(e,o){const n=o.root.$store.getters["l10n/T"];return{displayOptions:t.rb,getLabel:e=>{switch(e){case"Auto":return n("AUTO");case"Display":return n("Visible");case"Hide":return n("Hidden");case"Multiple":return n("Multiple")}},onChangeOption:e=>{o.emit("optionChanged",e)}}}})},60053:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(90571),l=o(32118),c=a(o(9858)),d=r(o(64297)),u=o(19821),p=["brace-list","bullet-list"];t.default=s.createComponent({name:"slide-list",components:{SlidePreview:c.default,DisplayOptions:d.default},setup(e,t){const{selectionIds:o}=u.useInjectors(),n=t.root.$store.getters["l10n/T"],i=s.getCurrentInstance().$store,r=s.inject("contentProvider"),a=s.computed((()=>i.getters["pitch/updateTrigger"])),c=s.ref(new l.Slideshow({contentProvider:r,slideSize:r.slideSizeByRatio,slideTheme:r.preferredThemeId})),h=s.ref([]),f=e=>{c.value=new l.Slideshow({contentProvider:r,slideSize:r.slideSizeByRatio,slideTheme:r.preferredThemeId});h.value=e.map((e=>{return t=e,c.value.getSlideByAlias({kind:"listOfTopic",topicId:t,index:0});var t})).filter(Boolean)};f(o.value);const m=s.computed((()=>h.value.map((e=>e.topicId)))),g=s.ref(d.defaultDisplayOption),v=s.ref(!1),b=s.ref(!1),A=s.ref(null),E=s.ref(p);return s.watch(o,(e=>{f(e)})),s.watch(h,(e=>{t.emit("onSlidesChange",e),(e=>{let t=e.map((e=>!(!e||!e.topicId||c.value.isSlideSkipped(e))));t=[...new Set(t)],b.value=t.length>1,v.value=1===t.length&&t[0];let o=e.map((e=>{if(e&&e.topicId){const{listSlideDisabled:t}=r.getPitchModeExtension(e.topicId);return void 0===t?"Auto":t?"Hide":"Display"}})).filter(Boolean);o=[...new Set(o)],1===o.length&&(g.value=o[0]),o.length>1&&(g.value="Multiple")})(e),(e=>{if(!e.length)return;let t=[];for(let o of e){const e=l.getEligibleSlideLayouts("list",c.value.getSlideContent(o.topicId));t=[...t,...e]}t=[...new Set(t)],E.value=p.filter((e=>t.includes(e)));let o=e.map((e=>r.getListLayout(e.topicId)||e.layout)).filter(Boolean);o=[...new Set(o)],o.length?A.value=o.length>1?"Multiple":o[0]:A.value=null})(e)})),s.watch(a,(()=>{setTimeout((()=>f(o.value)),100)})),{selectionIds:o,slideIds:m,slideSize:c.value.slideSize,slides:h,slideDisplayStatus:g,isSlideEnabled:v,isSlideEnabledMultiple:b,currentLayout:A,LayoutOptions:E,getLayoutLabel:e=>{switch(e){case"brace-list":return n("Brace List");case"bullet-list":return n("Bullet List");case"Multiple":return n("Multiple")}return n("Default")},onToggle:e=>{"Auto"===e&&r.setListSlideEnabled(m.value,{clear:!0}),"Display"===e&&r.setListSlideEnabled(m.value,{enabled:!0}),"Hide"===e&&r.setListSlideEnabled(m.value,{enabled:!1})},onChangeLayout:e=>{r.setListSlideLayout(m.value,e),A.value=e,f(o.value)}}}})},13291:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(27703),a=n(o(79901)),s=n(o(98074)),l=n(o(89643)),c=o(90336),d=o(19821),u=o(48932),p=o(78408);t.default=i.createComponent({name:"slide-panel",components:{SlideTopic:a.default,SlideList:s.default,SlideSummary:l.default},setup(e){const{selectionTypes:t}=d.useInjectors(),o=i.ref([]),n=i.ref([]),a=i.ref([]),s=i.getCurrentInstance().$store,l=new r.SheetDynamicContentProvider(s),h=i.computed((()=>s.state[c.SHARED].rightPanelTab)),f=i.ref(!0);i.provide("contentProvider",l);const m=i.computed((()=>t.value.filter((e=>p.VALIDPITCHSELECTIONTYPES.includes(e))))),g=i.computed((()=>[...o.value,...n.value,...a.value]));return i.watch(h,(()=>{f.value=s.state[c.SHARED].rightPanelTab===u.FORMAT_PANEL_TAB_SLIDE})),{selectionTypes:t,validSelectionTypes:m,topicSlides:o,listSlides:n,summarySlides:a,allSlides:g,isSlidePanelTab:f}}})},28340:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(90571),l=o(32118),c=a(o(9858)),d=r(o(64297)),u=o(19821);t.default=s.createComponent({name:"slide-Summary",components:{SlidePreview:c.default,DisplayOptions:d.default},setup(e,t){const{selectionIds:o}=u.useInjectors(),n=s.getCurrentInstance().$store,i=s.computed((()=>n.getters["pitch/updateTrigger"])),r=s.inject("contentProvider"),a=s.ref(new l.Slideshow({contentProvider:r,slideSize:r.slideSizeByRatio,slideTheme:r.preferredThemeId})),c=s.ref([]),p=e=>{a.value=new l.Slideshow({contentProvider:r,slideSize:r.slideSizeByRatio,slideTheme:r.preferredThemeId});c.value=e.map((e=>{return t=e,a.value.getSlideByAlias({kind:"startOfSummary",topicId:t});var t})).filter(Boolean)};p(o.value);const h=s.computed((()=>c.value.map((e=>e.topicId)))),f=s.ref(d.defaultDisplayOption),m=s.ref(!1),g=s.ref(!1),v=e=>{let t=e.map((e=>!(!e||!e.topicId)&&!a.value.isSlideSkipped(e)));t=[...new Set(t)],g.value=t.length>1,m.value=1===t.length&&t[0];let o=e.map((e=>{if(e&&e.topicId){const{summarySlideDisabled:t}=r.getPitchModeExtension(e.topicId);return void 0===t?"Auto":t?"Hide":"Display"}})).filter(Boolean);o=[...new Set(o)],1===o.length&&(f.value=o[0]),o.length>1&&(f.value="Multiple")};v(c.value),s.watch(o,(e=>{p(e)})),s.watch(c,(e=>{t.emit("onSlidesChange",e),v(e)})),s.watch(i,(()=>{setTimeout((()=>p(o.value)),100)}));return{selectionIds:o,slideIds:h,slides:c,slideSize:a.value.slideSize,slideDisplayStatus:f,isSlideEnabled:m,isSlideEnabledMultiple:g,onToggle:e=>{"Auto"===e&&r.setSummarySlideEnabled(h.value,{clear:!0}),"Display"===e&&r.setSummarySlideEnabled(h.value,{enabled:!0}),"Hide"===e&&r.setSummarySlideEnabled(h.value,{enabled:!1})}}}})},6431:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(90571),l=o(32118),c=a(o(9858)),d=r(o(64297)),u=o(96486),p=o(19821);t.default=s.createComponent({name:"slide-topic",components:{SlidePreview:c.default,DisplayOptions:d.default},setup(e,t){const{selectionIds:o}=p.useInjectors(),n=t.root.$store.getters["l10n/T"],i=s.getCurrentInstance(),r=i.$store,a=s.inject("contentProvider"),c=s.computed((()=>r.getters["pitch/updateTrigger"])),h=s.ref(new l.Slideshow({contentProvider:a,slideSize:a.slideSizeByRatio,slideTheme:a.preferredThemeId})),f=s.ref([]),m=e=>{h.value=new l.Slideshow({contentProvider:a,slideSize:a.slideSizeByRatio,slideTheme:a.preferredThemeId});f.value=e.map((e=>{return t=e,h.value.getSlideByAlias({kind:"startOfTopic",topicId:t});var t})).filter(Boolean)};m(o.value);const g=s.computed((()=>f.value.map((e=>e.topicId)))),v=s.ref(d.defaultDisplayOption),b=s.ref(!1),A=s.ref(!1),E=e=>{let t=e.map((e=>!(!e||!e.topicId)&&!h.value.isSlideSkipped(e)));t=[...new Set(t)],A.value=t.length>1,b.value=1===t.length&&t[0];let o=e.map((e=>{if(e&&e.topicId){const{topicSlide:t}=a.getPitchModeExtension(e.topicId);return void 0===t?"Auto":t?"Display":"Hide"}})).filter(Boolean);o=[...new Set(o)],1===o.length&&(v.value=o[0]),o.length>1&&(v.value="Multiple")};E(f.value);const T=s.ref(!1),y=s.ref(!1),C=s.ref(void 0),S=e=>{let t=[];for(const o of e){const e=a.getTopicImageAlignment(o.topicId);t.push(!!e)}t=[...new Set(t)],T.value=1===t.length&&t[0],y.value=t.length>1};S(f.value);const k=e=>{let t=e.map((e=>a.getTopicImageAlignment(e.topicId)||e.imagePlacement)).filter(Boolean);t.length===e.length&&1===new Set(t).size?C.value=t[0]:C.value=null};k(f.value);const w=s.computed((()=>a.getImageAlignmentOptionForTopics(g.value).filter(Boolean)));let x=[];return s.watch(o,(e=>{m(e);for(const e of x)clearTimeout(e);x=[];for(const t of[10,100,300,800])x.push(setTimeout((()=>m(e)),t))})),s.watch(f,((e,o)=>{t.emit("onSlidesChange",e),E(e),k(e);const n=e.map((e=>e.topicId)),i=o?o.map((e=>e.topicId)):[];u.xor(n,i).length&&S(e)})),s.watch(c,(()=>{setTimeout((()=>m(o.value)),100)})),{selectionIds:o,slideIds:g,slides:f,slideSize:h.value.slideSize,slideDisplayStatus:v,isSlideEnabled:b,isSlideEnabledMultiple:A,imageAlignment:C,imageAlignmentOptions:w,isFixedImagePosition:T,isImagePositionInterminate:y,getImageAlignmentLabel:e=>{switch(e){case"aboveTitle":return n("Image top.");case"belowTitle":return n("Image bottom.");case"left":return n("Image left.");case"right":return n("Image right.");case"full":return n("Image behind.")}return""},getImageAlignmentLogo:e=>{switch(e){case"aboveTitle":return i.$toResourceURL("static/images/format-panel/slide/above.svg");case"belowTitle":return i.$toResourceURL("static/images/format-panel/slide/below.svg");case"left":return i.$toResourceURL("static/images/format-panel/slide/left.svg");case"right":return i.$toResourceURL("static/images/format-panel/slide/right.svg");case"full":return i.$toResourceURL("static/images/format-panel/slide/fill.svg")}return""},onToggle:e=>{"Auto"===e&&a.setTopicSlideEnabled(g.value,{clear:!0}),"Display"===e&&a.setTopicSlideEnabled(g.value,{enabled:!0}),"Hide"===e&&a.setTopicSlideEnabled(g.value,{enabled:!1})},onChangeImageAlignment:e=>{a.setImageAlignment(g.value,e),C.value=e,m(o.value)},onToggleFixedImagePosition:()=>{y.value=!1,T.value=!T.value,T.value?f.value.forEach((e=>{const t=e.imagePlacement;t&&a.setImageAlignment([e.topicId],t)})):a.clearImageAlignment(g.value),m(o.value)}}}})},13443:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(73725),a=o(83450),s=n(o(43643)),l=o(19821),c=o(78408),d=o(96486);t.default=i.createComponent({name:"structures",components:{Popover:s.default},props:{isRootTopic:{type:Boolean,default:!1},popoverPos:String,popoverTitle:{type:String,default:""},isMapStyle:{type:Boolean,default:!1}},setup(e){const t=i.getCurrentInstance(),{getStructureClasses:o,getSuggestedStructureClasses:n,getAvailableStructures:s,updateStyles:u,centralBranchId:p,selectionIds:h,getModel:f}=l.useInjectors(),m=i.computed((()=>e.isRootTopic?[p.value]:h.value)),g=i.computed((()=>[...new Set(o(m.value.slice()))])),v=i.computed((()=>{const e=s({targetIds:m.value.slice()});return e.reduce(((e,t)=>e.filter((e=>t.includes(e)))),e[0])||[]})),b=i.computed((()=>[...new Set(n(m.value.slice()))].filter(Boolean))),A=i.computed((()=>b.value.length>1)),E=i.computed((()=>!e.isRootTopic&&f({name:"structureClass"}).some((e=>"string"==typeof e)))),T=i.computed((()=>{if(A.value||!g.value.length)return null;const e=b.value[0];return e?t.$T("$$",c.STRUCTUREMAP[e].value):null})),y=i.computed((()=>{if(!g.value.length)return[];const e=c.STRUCTURES.filter((e=>v.value.includes(e.value))),o=new Map;e.map((e=>{const{group:t}=e;if(o.has(t)){const{layoutPriority:n}=o.get(t);e.layoutPriority<n&&o.set(t,e)}else o.set(t,e)}));const n=b.value[0],i=c.STRUCTUREMAP[n];return i&&o.set(i.group,i),Array.from(o.values()).map((e=>({title:t.$T("$$",e.title),value:e.value,img:t.$toResourceURL(`static/assets/images/structures/normal/${e.img}`)})))})),C=i.computed((()=>{const e=s({targetIds:m.value.slice()}),t=Object.keys(c.STRUCTUREMAP),o=d.flatten(e).filter((e=>t.includes(e)));return g.value.some((e=>!o.includes(e)))})),S=i.computed((()=>{if(A.value&&g.value.length>1){const e=c.STRUCTURES.filter((e=>g.value.includes(e.value))),o=e[0].layout;if(!e.every((e=>e.layout===o)))return[];const n=g.value.map((e=>w(e).map((e=>e.title)).sort())),i=n[0].join();if(n.every((e=>e.join()===i))){const e=g.value[0],o=c.STRUCTUREMAP[e];return[{value:o.value,title:t.$T("$$",o.layout)}]}return[]}const e=g.value[0];return w(e)})),k=i.computed((()=>{if(!g.value.length)return"";if(A.value&&0===S.value.length)return t.$T("Multiple");const e=b.value[0];return e?t.$T("$$",c.STRUCTUREMAP[e].layout):""})),w=e=>{const{group:o}=c.STRUCTUREMAP[e]||{};if(!o)return[];return c.STRUCTURES.filter((e=>e.group===o&&v.value.includes(e.value))).map((e=>({value:e.value,title:t.$T("$$",e.layout)})))};return{isResetButtonVisible:E,items:y,isMultiple:A,currentTargetIds:m,uniqueSelectionStructureClasses:g,currentSelectionValue:T,handleChangeStructure:e=>{u("editor.changeStructure",{structureClass:e,targets:m.value.slice()}),a.trackEvent({eventCategory:"FormatMap",eventAction:"changeStructure",eventName:r.STRUCTURECLASS2PREVIEWCLASSMAP[e]})},isStructureDisable:C,layoutMenu:S,layoutTitle:k}}})},89169:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(19821),a=o(78408),s=n(o(4027));t.default=i.createComponent({name:"summary-line-shape",components:{Popover:s.default},props:{},setup(){const{getComputedStyles:e,updateSummaryStyle:t,getSummaryDirectionRotateDeg:o}=r.useInjectors(),n=i.getCurrentInstance(),s=i.computed((()=>a.SUMMARYCONNECTIONS.map((e=>({value:e.value,title:n.$T("$$",e.title),img:n.$toResourceURL(`static/assets/images/shapes/summary-connection/normal/${e.image}.svg`)}))))),l=i.computed((()=>[...new Set(e(a.STYLE_KEYS.SHAPE_CLASS,{isSummary:!0}))])),c=i.computed((()=>l.value.length>1));return{currentShapeClass:i.computed((()=>l.value[0])),isMultiple:c,summaryLineShapes:s,handleSummaryLineShapeSelect:e=>{t("editor.changeSummaryLineStyle",{lineStyle:e})},itemStyles:i.computed((()=>`transform: rotate(${o()}deg);width:auto;`))}}})},93080:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(19821),a=o(78408),s=n(o(90212)),l=n(o(27925));t.default=i.createComponent({name:"summary-line-styles",components:{LineWidth:l.default,ColorPicker:s.default},props:{},setup(){const{getComputedStyles:e,updateSummaryStyle:t}=r.useInjectors(),o=i.computed((()=>[...new Set(e(a.STYLE_KEYS.LINE_WIDTH,{isSummary:!0}))])),n=i.computed((()=>o.value.length&&!o.value.includes("0"))),s=i.computed((()=>o.value.length>1)),l=i.computed((()=>[...new Set(e(a.STYLE_KEYS.LINE_COLOR,{isSummary:!0}))])),c=i.computed((()=>l.value.length>1)),d=i.getCurrentInstance();return{SUMMARYLINEWIDTHS:a.SUMMARYLINEWIDTHS.map((e=>Object.assign(Object.assign({},e),{title:d.$T("$$",e.title)}))),isSummaryLineWidthMultiple:s,isSummaryLineStyleVisible:n,uniqueSelectionSummaryLineWidths:o,handleChangeSummaryLineWidth:e=>{t("editor.changeSummaryLineWidth",{width:e})},uniqueSelectionSummaryLineColors:l,isLineColorMultiple:c,handleChangeLineColor:e=>{t("editor.changeSummaryLineColor",{color:e})}}}})},84278:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(19821),a=o(78408),s=n(o(4027));t.default=i.createComponent({name:"topic-shape",components:{Popover:s.default},props:{},setup(){const e=i.getCurrentInstance(),t=i.computed((()=>a.SUMMARYTOPICSHAPES.map((t=>({value:t.value,title:e.$T("$$",t.title),img:e.$toResourceURL(`static/assets/images/shapes/shape/normal/${t.image}.svg`)}))))),{getComputedStyles:o,updateStyles:n}=r.useInjectors(),s=i.computed((()=>[...new Set(o(a.STYLE_KEYS.SHAPE_CLASS))])),l=i.computed((()=>s.value.length&&s.value[0]||null));return{isCurrentTopicShapesMultiple:i.computed((()=>s.value.length>1)),currentTopicShape:l,handleTopicShapeSelect:e=>n("editor.changeShapeClass",{shape:e}),topicShapes:t}}})},24311:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=o(19821),r=o(78408);t.Z=n.createComponent({name:"tapered-line",props:{},setup(){const{getComputedStyles:e,updateStyles:t,currentSheetId:o,getCentralBranchStructureClass:a}=i.useInjectors(),s=n.computed((()=>![r.STRUCTURECLASS.TIMELINEHORIZONTAL,r.STRUCTURECLASS.TIMELINETHROUGHVERTICAL,r.STRUCTURECLASS.TIMELINESIDEDHORIZONTAL,r.STRUCTURECLASS.TIMELINEVERTICAL,r.STRUCTURECLASS.SPREADSHEET,r.STRUCTURECLASS.COLUMNSPREADSHEET,r.STRUCTURECLASS.TOPTITLETREETABLE].includes(a()))),l=n.computed((()=>e(r.STYLE_KEYS.LINE_TAPERED,{targets:[o.value]}).includes("tapered")));return{isTaperedLineChecked:l,isTaperedLineEnabled:s,handleCheckOnTaperedLine:()=>{l.value?t("editor.changeLineTapered",{targets:[o.value],tapered:"none",prue:!0}):t("editor.changeLineTapered",{targets:[o.value],tapered:"tapered",prue:!0})}}}})},42600:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(90212)),r=n(o(27925)),a=o(19821),s=o(78408),l=o(90571);t.default=l.createComponent({name:"topic-border",components:{ColorPicker:i.default,LineWidth:r.default},props:{isRootTopic:Boolean},setup(e){const{getComputedStyles:t,updateStyles:o,getStructureClasses:n,centralBranchId:i,selectionIds:r,isFloatingRootTopic:c,getParentTopicStructure:d}=a.useInjectors(),u=l.computed((()=>e.isRootTopic?[i.value]:r.value)),p=l.computed((()=>[...new Set(n(u.value.slice()))])),h=l.computed((()=>t(s.STYLE_KEYS.BORDER_LINE_WIDTH).map((e=>"string"==typeof e&&e.endsWith("pt")?e.slice(0,-2):e)))),f=l.computed((()=>v.value||g.value?null:h.value[0])),m=l.computed((()=>s.BORDERWIDTHS.some((e=>e.value===h.value[0]))&&"0"!==h.value[0])),g=l.computed((()=>{const e=[...new Set(h.value)];return e.length>1&&e.some((e=>"0"===e||s.BORDERWIDTHS.every((t=>t.value!==e))))})),v=l.computed((()=>[...new Set(h.value)].length>1)),b=l.computed((()=>{const e=[s.STRUCTURECLASS.SPREADSHEETROW,s.STRUCTURECLASS.SPREADSHEETCOLUMN];return n().some((t=>e.includes(t)))})),A=l.computed((()=>[...new Set(t(s.STYLE_KEYS.BORDER_LINE_COLOR))])),E=l.computed((()=>A.value.length>1)),T=l.computed((()=>E.value?null:A.value[0])),y=l.computed((()=>{if(e.isRootTopic)return!0;if(c.value)return!0;const t=u.value.map((e=>d(e))).filter(Boolean);return![s.STRUCTURECLASS.TOPTITLETREETABLE,s.STRUCTURECLASS.TREETABLE].some((e=>t.includes(e)))})),C=l.getCurrentInstance();return{BORDERWIDTHS:s.BORDERWIDTHS.map((e=>Object.assign(Object.assign({},e),{title:C.$T("$$",e.title)}))),computedBorderLineWidth:f,isBorderChecked:m,isBorderIndeterminate:g,isBorderMultiple:v,isBorderLineEnabled:y,handleCheckBorder:()=>{if(m.value)o("editor.changeBorderColor",{color:null}),o("editor.changeBorderWidth",{width:"0pt"});else for(const e of r.value){const n=t(s.STYLE_KEYS.BORDER_LINE_WIDTH,{targets:[e],options:{ignoreUser:!0}})[0],i=parseInt(n,10),r=Number.isNaN(i)||0===i;o("editor.changeBorderWidth",{width:`${r?2:i}pt`})}},handleBorderSelect:e=>{o("editor.changeBorderWidth",{width:e})},isMatrix:b,isBorderLineColorMultiple:E,computedBorderLineColor:T,handleBorderLineInput:e=>{o("editor.changeBorderColor",{color:e})},uniqueSelectionStructureClasses:p}}})},43087:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(78408),a=o(19821),s=n(o(90212)),l=n(o(2));t.default=i.createComponent({name:"topic-fill",components:{ColorPicker:s.default,FillPopover:l.default},props:{},setup(){const{getComputedStyles:e,updateStyles:t,selectionIds:o,getStructureClasses:n}=a.useInjectors(),s=i.getCurrentInstance(),l=i.ref([{title:s.$T("Color Fill"),value:"solid",img:s.$toResourceURL("static/assets/images/fill/color-fill.svg")},{title:s.$T("Hand-Drawn Fill"),value:"zigzag",img:s.$toResourceURL("static/assets/images/fill/hand-drawn-fill.svg")},{title:s.$T("Hand-Drawn Fill (Reverse)"),value:"zigzag-left-hand",img:s.$toResourceURL("static/assets/images/fill/hand-drawn-fill-reverse.svg")}]),c=i.computed((()=>e(r.STYLE_KEYS.FILL_COLOR))),d=i.computed((()=>c.value.every((e=>"none"!==e&&e)))),u=i.computed((()=>c.value.every((e=>"none"===e||!e)))),p=i.computed((()=>[...new Set(c.value)].length>1)),h=i.computed((()=>!d.value&&!u.value)),f=i.computed((()=>[...new Set(e(r.STYLE_KEYS.SHAPE_CLASS,{options:{ignoreLayeredBeforeUser:!0,ignoreLayeredBeforeClass:!0,ignoreLayeredBeforeTheme:!0,ignoreLayeredBeforeDefault:!0}}))])),m=i.computed((()=>[...new Set(n())])),g=i.computed((()=>{const e=[r.TOPICSHAPE.MATRIXMAIN].filter(Boolean),t=[r.STRUCTURECLASS.SPREADSHEET,r.STRUCTURECLASS.SPREADSHEETROW,r.STRUCTURECLASS.COLUMNSPREADSHEET,r.STRUCTURECLASS.SPREADSHEETCOLUMN].filter(Boolean);return f.value.some((t=>e.includes(t)))||m.value.some((e=>t.includes(e)))})),v=i.computed((()=>[...new Set(e(r.STYLE_KEYS.FILL_STYLE))])),b=i.computed((()=>[...new Set(v.value)].length>1)),A=i.computed((()=>b.value?null:l.value.find((e=>e.value===v.value[0]))));return{TopicFillStyles:l,computedFilledColors:c,isFillColorMultiple:p,isFillStyleMultiple:b,isFillColorIndeterminate:h,isFillColorChecked:d,handleCheckFillColor:()=>{if(d.value)t("editor.changeShapeColor",{color:"none"});else for(const n of o.value){const[o]=e(r.STYLE_KEYS.FILL_COLOR,{targets:[n],options:{ignoreUser:!0}});t("editor.changeShapeColor",{targets:[n],color:"none"!==o?null:"#FFF"})}},handleInputFillColor:e=>{t("editor.changeShapeColor",{color:e})},isTopicFillSelectorDisabled:g,handleUpdateHandDrawFillStyles:e=>{t("editor.changeFillStyle",{fillStyle:e})},selectionFillStyles:v,selectedFillStyle:A}}})},89772:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(19821),a=o(78408),s=n(o(27246));t.default=i.createComponent({name:"topic-shape",components:{Popover:s.default},props:{},setup(){const e=i.getCurrentInstance(),{getPrivateFallBackComputedStyles:t,getStructureClasses:o,updateStyles:n,selectionIds:s,centralBranchId:l,getCentralBranchStructureClass:c}=r.useInjectors(),d=i.computed((()=>({name:e.$T("$$","Normal"),items:a.TOPICSHAPES.map((t=>({value:t.value,title:e.$T("$$",t.title),img:e.$toResourceURL(`static/assets/images/shapes/shape/normal/${t.image}.svg`)})))}))),u=i.computed((()=>({name:e.$T("$$","Hand-Drawn"),items:a.HANDDRAWSHAPES.map((t=>({value:t.value,title:e.$T("$$",t.title),img:e.$toResourceURL(`static/assets/images/shapes/shape/hand-drawn/${t.image}.svg`)})))}))),p=i.computed((()=>{const e=c(),t=[a.STRUCTURECLASS.FISHBONELEFTHEADED,a.STRUCTURECLASS.FISHBONERIGHTHEADED].filter(Boolean).includes(e),o=[d.value,u.value].slice(0,1);if(t&&s.value.some((e=>e!==l.value))){const e=[a.TOPICSHAPE.HEART,a.TOPICSHAPE.STAR,a.TOPICSHAPE.FATLEFTARROW,a.TOPICSHAPE.FATRIGHTARROW].filter(Boolean);return o.map((t=>Object.assign(Object.assign({},t),{items:t.items.filter((t=>!e.includes(t.value)))})))}return o})),h=i.computed((()=>[...new Set(t(a.STYLE_KEYS.SHAPE_CLASS,{options:{ignoreLayeredBeforeUser:!0,ignoreLayeredBeforeClass:!0,ignoreLayeredBeforeTheme:!0,ignoreLayeredBeforeDefault:!0}}))])),f=i.computed((()=>[...new Set(o())])),m=i.computed((()=>{const e=[a.TOPICSHAPE.MATRIXMAIN,a.TOPICSHAPE.FISHHEADTORIGHT,a.TOPICSHAPE.FISHHEADTOLEFT,a.TOPICSHAPE.FISHBONEROATEDNW,a.TOPICSHAPE.FISHBONEROATEDNE,a.TOPICSHAPE.FISHBONEROATEDSW,a.TOPICSHAPE.FISHBONE_NE_UNDERLINE,a.TOPICSHAPE.FISHBONE_NW_UNDERLINE,a.TOPICSHAPE.FISHBONEROATEDSE].filter(Boolean),t=[a.STRUCTURECLASS.SPREADSHEET,a.STRUCTURECLASS.SPREADSHEETROW,a.STRUCTURECLASS.COLUMNSPREADSHEET,a.STRUCTURECLASS.SPREADSHEETCOLUMN,a.STRUCTURECLASS.LEFTHEADEDNENORMAL,a.STRUCTURECLASS.LEFTHEADEDSENORMAL,a.STRUCTURECLASS.RIGHTHEADEDNWNORMAL,a.STRUCTURECLASS.RIGHTHEADEDSWNORMAL,a.STRUCTURECLASS.TOPTITLETREETABLE,a.STRUCTURECLASS.TREETABLE].filter(Boolean);return h.value.some((t=>e.includes(t)))||f.value.some((e=>t.includes(e)))})),g=i.computed((()=>h.value.length&&h.value[0]||null));return{isTopicShapeSelectorDisabled:m,isCurrentTopicShapesMultiple:i.computed((()=>h.value.length>1)),currentTopicShape:g,handleTopicShapeSelect:e=>n("editor.changeShapeClass",{shape:e}),topicShapes:p}}})},49179:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(90571),a=i(o(61027)),s=o(19821),l=o(78408);t.default=r.createComponent({name:"topic-width",components:{},props:{},setup(){const{updateStyles:e,getTopicWidths:t,selectionIds:o,getComputedStyles:i}=s.useInjectors(),c=r.ref(null),d=r.computed((()=>t())),u=r.computed((()=>[...new Set(t({isUserOnly:!0}))])),p=r.computed((()=>[...new Set(d.value)].length>1));let h=[];const f=r.computed((()=>{const e=[...new Set(i(l.STYLE_KEYS.SHAPE_CLASS))],{ELLIPSE:t,DIAMOND:o}=a.default.constant.TOPICSHAPE;return e&&1===e.length?e[0]===t||e[0]===o:!(!e||2!==e.length)&&(e[0]===t&&e[1]===o||e[0]===o&&e[1]===t)})),m=r.computed((()=>{if(p.value)return"";const e=[...new Set(d.value)];return Number(e[0])?Math.round(Number(e[0])).toString():""})),g=r.computed((()=>!(!u.value.length||!u.value[0]))),v=r.computed((()=>{const e=u.value;return p.value&&e.some((e=>0===Number(e)))&&e.some((e=>0!==Number(e)))}));return r.watch((()=>g.value),(e=>{!e&&!v.value||p.value?c.value="":c.value=m.value})),r.watch((()=>u.value),(e=>{(g.value||v.value)&&!p.value&&e.length&&(c.value=Math.round(parseFloat(e[0])).toString())})),{topicWidthInput:c,placeholderTopicWidth:m,isCustomTopicWidthChecked:g,isCustomTopicWidthDisabled:f,isCustomTopicWidthIndeterminate:v,handleCheckCustomWidth:n=>{if(n.target.checked){const n=Math.max(...t({targetIds:o.value}).map((e=>Number(e))).filter(Boolean));if(Math.round(n)<=0)return;for(const t of o.value)e("editor.changeTopicCustomWidth",{targets:[t],customWidth:Math.round(n)})}else e("editor.changeTopicCustomWidth",{customWidth:0,prue:!0})},handleCustomWidthInput:t=>n(this,void 0,void 0,(function*(){if(!t.target)return;if(!g.value)return;const o=t.target;let n=parseInt(o.value);yield new Promise((e=>window.setTimeout(e,100))),Number.isNaN(n)?c.value=m.value:(c.value=Math.round(n).toString(),e("editor.changeTopicCustomWidth",{customWidth:Math.round(n),targets:h}))})),handleTopicWidthFocus:()=>{h=o.value.slice()}}}})},68106:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(22035)),a=n(o(78122)),s=n(o(5848)),l=n(o(89896)),c=n(o(4084)),d=n(o(65470)),u=o(78408);t.default=i.createComponent({name:"boundary-panel",components:{QuickStyles:d.default,BoundaryShape:r.default,BoundaryBorder:c.default,TopicFill:a.default,FontStyles:s.default,ResetButton:l.default},props:{options:Object},setup:()=>({FONTKEYS:u.FONTKEYS,BOUNDARYSTYLEKEYS:u.BOUNDARYSTYLEKEYS})})},62305:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(58331));t.default=i.createComponent({name:"branch-only-panel",props:{options:Object},components:{CommonNonePanel:r.default},setup:()=>({})})},35438:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(85460)),a=n(o(78122)),s=n(o(89896)),l=n(o(5848)),c=o(78408);t.default=i.createComponent({name:"callout-panel",components:{FontStyles:l.default,CalloutShape:r.default,TopicFill:a.default,ResetButton:s.default},props:{options:Object},setup:()=>({CALLOUTSTYLEKEYS:c.CALLOUTSTYLEKEYS,FONTKEYS:c.FONTKEYS})})},17365:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(17863)),a=o(83450),s=o(74627),l=o(83450),c=o(19821),d=o(78408);t.default=i.createComponent({name:"color-theme-panel",components:{PreviewSection:r.default},props:{options:Object},setup(e,t){const o=i.getCurrentInstance(),n=t.root.$store,r=i.computed((()=>n.state.theme.recentlyUsedColorThemeIds)),{getColorThemeId:u,getStructureClasses:p,centralBranchId:h}=c.useInjectors(),f=i.computed((()=>[d.STRUCTURECLASS.SPREADSHEET,d.STRUCTURECLASS.COLUMNSPREADSHEET,d.STRUCTURECLASS.TREETABLE,d.STRUCTURECLASS.TOPTITLETREETABLE].includes(p([h.value])[0]))),m=i.computed((()=>u())),g=e=>{const t=s.getColorThemePreviewById(e,f.value?s.snowballConstant.COLOR_THEME_PREVIEW_TYPE.TABLE:s.snowballConstant.COLOR_THEME_PREVIEW_TYPE.MAP);return t?`data:image/svg+xml,${encodeURIComponent(t)}`:""},v=i.computed((()=>{const e=[...r.value];if(!e||!Array.isArray(e))return;const t=e.reverse().map((e=>{const t=g(e);return t?{id:e,previewURL:t}:null})).filter(Boolean);return[{label:o.$T("Recently Used"),items:t,toggleDisabled:!0},...b.value]})),b=i.computed((()=>{const e=n.getters["preferences/language"];return s.getColorThemeOrderInfo(e).map((e=>({label:e.themeName,uiName:e.uiName,items:e.idList.map((e=>({id:e,previewURL:g(e)})))})))}));return a.trackView({actionName:"color-theme-panel"}),{currentColorThemeId:m,computedColorThemeList:v,onSelect:e=>{n.commit("theme/appendRecentlyUsedColorTheme",e);const t=s.getColorThemeDataById(e);n.execSnowbrushAction({commandId:"editor.changeTheme",args:{colorThemeData:t,options:{toFixUserStyle:!0}}}),l.trackEvent({eventAction:"applyColor",eventname:e})}}}})},43701:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(61027)),a=o(83450),s=o(19821),l=n(o(73481)),c=n(o(85447)),d=o(96486),{VIEW_TYPE:u}=r.default.constant;t.default=i.createComponent({name:"image-panel",components:{ImageSize:l.default,ImageStyle:c.default},props:{options:Object},setup(e,t){const o=t.root.$store,n=i.getCurrentInstance(),{selectionIds:r}=s.useInjectors(),l=i.ref({}),c=i.ref(null),p=i.ref({}),h=i.computed((()=>{const e=o.state.editor,t=o.state.editor.sheetContentChangedTrigger,n=o.state.editor.sheetSwitchedTrigger,i=o.state.editor.sheetTitleChangedTrigger;return{trigger:e&&(e.isVisible||t||n||i)}})),f=i.computed((()=>Array.isArray(r.value)?r.value:[])),m=i.computed((()=>f.value[0])),g=e=>{const{borderWidth:t,borderColor:o,size:n,shadowVisible:i,opacity:r}=e.figure;return{borderWidth:`${t}`,borderColor:"none"===o?"#000000":o,width:Math.floor(n.width),height:Math.floor(n.height),shadow:!!i,opacity:r}},v=()=>{A.value.forEach((e=>{if(!e)return;const t=g(e.view),o=e.view.model.getFlipAndRotateRecords();let n=0;if(Array.isArray(o)&&(n=o.reduce(((e,t)=>e+("rotate"===t.type?t.value:0)),0)),l.value[e.id]){if(n){const t=Math.abs(n-p.value[e.id]||0);if(Math.floor(t/90)%2==1){const{width:t,height:o}=l.value[e.id];l.value[e.id].width=o,l.value[e.id].height=t}}}else l.value=Object.assign(Object.assign({},l.value),{[e.id]:t});p.value[e.id]=n}))},b=i.computed((()=>{const e=o.state.editor.sbEditorWrapper.value;if(!e)return;if(!h.value.trigger)return;const t=e.getComponentViewById(m.value);return t&&t.type!==u.IMAGE?null:t})),A=i.computed((()=>{const e=[];return f.value.filter((e=>e!==m.value)).forEach((t=>{const n=(e=>{const t=o.state.editor.sbEditorWrapper.value;if(!t)return;if(!h.value.trigger)return;const n=t.getComponentViewById(e);return n&&n.type!==u.IMAGE?null:n})(t);n&&e.push({id:t,view:n})})),m.value&&b.value?[{id:m.value,view:b.value},...e]:e}));i.watch(f,(()=>{v()})),i.watch(b,(e=>{if(!e)return;const t=g(e);c.value=t,v()}));const E=i.computed((()=>!!l.value[m.value]&&!d.isEqual(l.value[m.value],c.value))),T=i.computed((()=>l.value[m.value]));return a.trackView({actionName:"showImageStyle"}),{currentViewId:m,currentImageView:b,imageViews:A,userImageStyle:c,handleResetStyles:()=>{n.$refs.imageSize.resetImageSize(),n.$refs.imageStyle.resetStyle()},currentInitialImageStyle:T,styleChanged:E,initialImageStyles:l,viewIds:f}}})},12310:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(93722)),a=n(o(49242)),s=n(o(71127)),l=n(o(64185)),c=n(o(40002)),d=n(o(85940)),u=o(83450),p=o(48932);t.default=i.createComponent({name:"map-panel",components:{SkeletonPreview:r.default,AdvancedLayout:a.default,CjkFontFamily:s.default,SheetBackground:l.default,MultiBranchColor:c.default,TaperedLine:d.default},props:{options:Object},setup(){const e=i.inject("navigateTo");return u.trackView({actionName:"MapPanel"}),{onNavigation:({componentName:t,componentTitle:o,options:n}={})=>{e&&e({componentName:t,componentTitle:o,originTab:p.FORMAT_PANEL_TAB_MAP,options:n})}}}})},76301:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(85622)),r=o(90336),a=o(57818),s=o(48932),l=o(20629),c=o(83450),d=o(6921),u="win32"==process.platform;t.default={name:"Markerpanel",props:{options:Object},data:()=>({markerGroups:[],recentMarkers:[],marker:{},isWin:u,isLegendEnabled:!1}),computed:Object.assign(Object.assign({},l.mapState("editor",["sheetSwitchedTrigger"])),{isOutlineMode(){return this.$store.state[r.SHARED].editorMode===s.EDITOR_MODE_OUTLINER}}),watch:{sheetSwitchedTrigger(){this.isLegendEnabled=this.getLegendStatus()}},mixins:[],created(){this.getMarkerGroups(),this.isLegendEnabled=this.getLegendStatus(),c.trackView({actionName:"IconPanel"})},beforeDestroy(){},methods:{getMarkerGroups(){const e=this.$store.state.editor.sbEditorWrapper.value;if(!e)return;if(!e.getCurrentSheetEditor())return;const t=a.markerModule.getGroupInfoList();for(let e of t){if(e.hidden)continue;let t=[];for(let o of e.markers){if(o.hidden)continue;const{resource:e}=a.markerModule.getMarkerInfoById(o.markerId);let n=i.default.join(d.getResourceBasePath(),e);"win32"==process.platform&&(n=n.split("\\").join("/")),t.push({id:o.markerId,markerUrl:n,backgroundImage:`url("${n}")`})}let o=e.id.replace(/Mar?kers/,"");o=o.charAt(0).toUpperCase()+o.slice(1),this.markerGroups.push({id:e.id,title:this.$T("$$",o),markers:t})}},addMarker(e){let t=e.id;if(t){this.isOutlineMode?this.$store.handleCommand("editor.addMarker",t):this.$store.handleCommand("editor.addMarker",{markerId:t})}},getLegendStatus(){const e=this.$store.state.editor.sbEditorWrapper.value;let t=e?e.getCurrentSheetEditor().model:null;if(!t)return!1;const o=t.getLegendModel();return o&&"visible"===o.get("visibility")},toggleLegend(){this.isLegendEnabled=!this.isLegendEnabled,this.$store.execSnowbrushAction({commandId:"editor.changeLegendDisplay",args:{display:this.isLegendEnabled}}),this.isLegendEnabled&&c.trackEvent({eventCategory:"FormatMap",eventAction:"toggleLegendDisplay"})}}}},89907:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(5848)),r=n(o(89896)),a=o(90571),s=o(78408);t.default=a.createComponent({name:"reset",props:{options:Object},components:{FontStyle:i.default,ResetButton:r.default},setup:()=>({FONTKEYS:s.FONTKEYS})})},5888:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(19821),a=n(o(58331));t.default=i.createComponent({name:"none-panel",props:{options:Object},components:{CommonNonePanel:a.default},setup(){const{selectionIds:e}=r.useInjectors();return{isNoSelections:i.computed((()=>0===e.value.length))}}})},34238:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(24819)),a=n(o(59291)),s=n(o(78713)),l=n(o(5848)),c=n(o(89896)),d=n(o(65470)),u=o(78408);t.default=i.createComponent({name:"relationship-panel",components:{QuickStyles:d.default,RelationshipShape:r.default,RelationshipLineWidth:a.default,RelationshipLineStyles:s.default,FontStyles:l.default,ResetButton:c.default},props:{options:Object},setup:()=>({FONTKEYS:u.FONTKEYS,RELATIONSHIPSTYLEKEYS:u.RELATIONSHIPSTYLEKEYS})})},91727:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(87489)),a=o(90336),s=o(83450),l=o(74627),c=o(83450),d=o(19821);t.default=i.createComponent({name:"skeleton-panel",components:{SkeletonPreview:r.default},props:{options:Object},setup(e,t){const o=t.root.$store,{getSkeletonThemeId:n}=d.useInjectors(),r=i.ref(l.snowballConstant.SKELETON_GRAY_COLOR_THEME_ID),u=i.computed((()=>n()));return s.trackView({actionName:"skeleton-panel"}),{changeSkeleton:e=>{const t=e;if(!t)return!1;const n=l.getSkeletonThemeDataById(t.id);o.commit(`${a.SHARED}/setTargetTheme`,{skeletonThemeData:n}),c.trackEvent({eventAction:"applySkeleton",eventname:t.id})},staticColorThemeId:r,currentSkeletonId:u}}})},75765:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(85622)),r=o(57818),a=n(o(28147)),s=o(6921),l=o(83450),c=o(36414),d="win32"==process.platform;t.default={props:{options:Object},data:function(){return{stickerGroups:[],isWin:d}},created:function(){const e=r.stickerModule.getGroupInfoList();this.stickerGroups=e.map((e=>({name:this.$T("$$",e.name),items:e.items.map((e=>({name:e.name,imageURL:i.default.join(s.getResourceBasePath(),e.resource)})))}))),l.trackView({actionName:"StickerPanel"})},methods:{ondragstart(e,t){let o=i.default.join(s.getResourceBasePath(),"stickers",t+".svg");e.dataTransfer.setData("isXTypeFile",!0),e.dataTransfer.setData("xapType","x-sticker"),e.dataTransfer.setData("extType","svg"),e.dataTransfer.setData("dataUrl",o);let n=`image/svg+xml:${t}.svg:file://${o}`;e.dataTransfer.setData("downloadurl",n)},addimage(e){let t=i.default.join(s.getResourceBasePath(),"stickers",e+".svg");a.default.existsSync(t)&&a.default.readFile(t).then((e=>{let o="resources/"+c.HASH(e)+i.default.extname(t),n="xap:"+o;this.$store.state.wd.manifestWrapper.value["file-entries"][o]={},a.default.writeFile(i.default.join(this.$store.state.wd.tempStorage,o),e).then((()=>{this.$store.handleCommand("editor.changeImage",n)}))}))}}}},17163:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(10058)),a=n(o(73699)),s=n(o(78122)),l=n(o(26594)),c=n(o(5848)),d=n(o(42276)),u=n(o(60354)),p=n(o(89896)),h=n(o(4514)),f=n(o(20608)),m=n(o(89934)),g=n(o(65470)),v=o(78408);t.default=i.createComponent({name:"summary-panel",components:{FontStyles:c.default,TopicBorder:a.default,TopicFill:s.default,TopicWidth:l.default,BranchLineShape:d.default,BranchLineStyles:u.default,TopicShape:r.default,ResetButton:p.default,SummaryLineShape:f.default,SummaryLineStyle:m.default,SummaryTopicShape:h.default,QuickStyles:g.default},props:{options:Object},setup:()=>({FONTKEYS:v.FONTKEYS,SUMMARYKEYS:v.SUMMARYKEYS,TOPICKEYS:v.TOPICKEYS})})},12512:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(65470)),a=n(o(10058)),s=n(o(73699)),l=n(o(78122)),c=n(o(26594)),d=n(o(5848)),u=n(o(37211)),p=n(o(42276)),h=n(o(60354)),f=n(o(40002)),m=n(o(85940)),g=n(o(89896)),v=o(78408),b=o(83450);t.default=i.createComponent({name:"topic-panel",components:{QuickStyles:r.default,FontStyles:d.default,TopicStructure:u.default,TopicBorder:s.default,TopicFill:l.default,TopicWidth:c.default,BranchLineShape:p.default,BranchLineStyles:h.default,MultiBranchColors:f.default,TaperedLine:m.default,TopicShape:a.default,ResetButton:g.default},props:{options:Object},setup:()=>(b.trackView({actionName:"StylePanel"}),{STYLEKEYS:v.FONTKEYS.concat(v.TOPICKEYS,v.CENTRALSTYLEKEYS)})})},90734:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(96486),a=o(58792),s=o(90571),l=o(83450),c=i(o(84414)),d=i(o(96240)),u=i(o(21715)),p=i(o(1298)),h=i(o(84293)),f=i(o(32829)),m=i(o(74998)),g=i(o(79599)),v=i(o(42693)),b=i(o(58331)),A=i(o(18701)),E=i(o(22625)),T=i(o(74254)),y=i(o(18829)),C=i(o(42430)),S=i(o(69169)),k=o(48932),w=o(78408),x=o(90336),I=o(28441);t.default=s.createComponent({name:"format-panel",components:{TopicPanel:c.default,SummaryPanel:d.default,RelationshipPanel:u.default,NonePanel:p.default,MultiPanel:h.default,MapPanel:f.default,SlidePanel:S.default,CalloutPanel:m.default,BranchOnlyPanel:g.default,BoundaryPanel:v.default,CommonNonePanel:b.default,ImagePanel:A.default,MarkerPanel:E.default,StickerPanel:T.default,SkeletonPanel:y.default,ColorThemePanel:C.default},props:{panelWidth:Number},setup(e,t){const o=s.getCurrentInstance(),i=t.root.$store,{selectionTypes:c,selectionIds:d,updateStyles:u,getComputedStyles:p,getPrivateFallBackComputedStyles:h,getUserStyles:f,getStructureClasses:m,getTopicWidths:g,updateSummaryStyle:v,updateForceUpdateKey:b,focusUpdateKey:A,getAvailableStructures:E,currentSheetId:T,centralBranchId:y,getLayerLevels:C,getClassLists:S,getClassNames:_,getThemeStyle:B,getSkeletonThemeId:O,getColorThemeId:M,getColorListFromExportedTheme:L,getSuggestedClassNames:R,getTypes:N,getTheme:D,getModel:P,isFreePositionEnabled:F,isFloatingTopicFlexible:W,isTopicOverlapEnabled:$,isFloatingRootTopic:U,isSelectionsHasSymbolLikeShapeBranch:j,getTopicIdsByThemeClassNames:H,getTopicIdsByLevel:Y,getSuggestedStructureClasses:V,getCentralBranchStructureClass:z,getBranchLineDirection:Z,getSummaryDirection:G,getBranchLineDirectionRotateDeg:q,getSummaryDirectionRotateDeg:X,getParentTopicStructure:K,isCompactMode:J,isAlignmentByLevel:Q}=a.useSnowbrush(e,t);s.provide("getComputedStyles",p),s.provide("getPrivateFallBackComputedStyles",h),s.provide("getUserStyles",f),s.provide("updateStyles",u),s.provide("updateSummaryStyle",v),s.provide("selectionIds",d),s.provide("selectionTypes",c),s.provide("updateForceUpdateKey",b),s.provide("getStructureClasses",m),s.provide("getTopicWidths",g),s.provide("getAvailableStructures",E),s.provide("currentSheetId",T),s.provide("centralBranchId",y),s.provide("getClassLists",S),s.provide("getLayerLevels",C),s.provide("getClassNames",_),s.provide("getThemeStyle",B),s.provide("getSkeletonThemeId",O),s.provide("getColorThemeId",M),s.provide("getColorListFromExportedTheme",L),s.provide("getSuggestedClassNames",R),s.provide("getTypes",N),s.provide("getTheme",D),s.provide("getModel",P),s.provide("isFreePositionEnabled",F),s.provide("isFloatingTopicFlexible",W),s.provide("isTopicOverlapEnabled",$),s.provide("getTopicIdsByThemeClassNames",H),s.provide("getTopicIdsByLevel",Y),s.provide("getSuggestedStructureClasses",V),s.provide("getCentralBranchStructureClass",z),s.provide("isFloatingRootTopic",U),s.provide("isSelectionsHasSymbolLikeShapeBranch",j),s.provide("getBranchLineDirection",Z),s.provide("getSummaryDirection",G),s.provide("getBranchLineDirectionRotateDeg",q),s.provide("getSummaryDirectionRotateDeg",X),s.provide("getParentTopicStructure",K),s.provide("isCompactMode",J),s.provide("isAlignmentByLevel",Q);const ee=s.ref(null),te=s.ref(o.$toResourceURL("static/assets/images/icon-shuffle.svg"));s.provide("getAvailableFontFamily",(()=>n(this,void 0,void 0,(function*(){const{systemFonts:e,vanaFonts:t}=yield i.dispatch("fonts/getLoadedFonts"),o=[...Object.values(t),...Object.values(e).filter((e=>!t[e.value]))];return r.orderBy(o,["isSystemLocaleFont","value"],["desc","asc"])})))),s.provide("getRecentFontFamily",(()=>i.state.editors.recentFontFamilies)),s.provide("setRecentFontFamily",(e=>{const t=i.state.editors.recentFontFamilies.slice();t.includes(e)&&t.splice(t.indexOf(e),1),t.unshift(e),t.length>10&&t.splice(10),i.commit("editors/setRecentFontFamilies",t)}));const oe=s.computed((()=>i.state[x.SHARED].editorMode===k.EDITOR_MODE_OUTLINER)),ne=s.computed((()=>i.state[x.SHARED].rightPanelTab)),ie=s.computed((()=>i.state.editor.isBranchOnlyMode)),re=s.computed((()=>i.state[x.SHARED].sheetRendering)),ae=s.computed((()=>{A.value;const e=[...new Set(c.value)],t={name:null,options:{}};if(ne.value===k.IMAGE_PANEL_TAB_MARKER)return t.name="marker-panel",t;if(ne.value===k.IMAGE_PANEL_TAB_STICKER)return t.name="sticker-panel",t;if(ne.value===k.FORMAT_PANEL_TAB_SLIDE){t.name="slide-panel";const e=w.VALIDPITCHSELECTIONTYPES,o=c.value.some((t=>e.includes(t))),n=i.state.editor.sbEditorWrapper.value,r=!!n&&n.getActiveUIStatus().includes(w.UI_STATUS.EDIT_TITLE);return o&&!r||(t.name="common-none-panel",t.options.type="slide-empty-selection"),t}if(ne.value===k.FORMAT_PANEL_TAB_MAP)return""!==ce.componentName?(t.name=ce.componentName,t.options.animate=!0):t.name="map-panel",ie.value?(t.name="common-none-panel",t.options.type="branch-only",t):t;if(0===e.length)return t.name="none-panel",t;if(1===e.length){switch(e[0]){case"boundary":t.name="boundary-panel";break;case"calloutTopic":t.name="callout-panel";break;case"relationship":t.name="relationship-panel";break;case"summaryTopic":t.name="summary-panel";break;case"image":t.name="image-panel";break;case"centralTopic":t.name="topic-panel",t.options.isRoot=!0;break;case"floatingTopic":case"mainTopic":case"subTopic":t.name="topic-panel";break;default:t.name="none-panel"}return t}return e.includes("calloutTopic")?(t.name="multi-panel",t):(t.name="topic-panel",t.options.isMultiTypes=!0,t)})),se=s.computed((()=>[{key:k.FORMAT_PANEL_TAB_STYLE,category:k.RIGHT_BAR_PANEL_FORMAT,image:o.$toResourceURL("static/images/format-panel/style.svg"),tooltip:o.$T("Style"),isVisible:!oe.value},{key:k.FORMAT_PANEL_TAB_MAP,category:k.RIGHT_BAR_PANEL_FORMAT,image:o.$toResourceURL("static/images/format-panel/map.svg"),tooltip:o.$T("Map"),isVisible:!oe.value},{key:k.IMAGE_PANEL_TAB_MARKER,category:k.RIGHT_BAR_PANEL_IMAGE,image:o.$toResourceURL("static/images/format-panel/marker.svg"),tooltip:o.$T("Marker"),isVisible:!0},{key:k.IMAGE_PANEL_TAB_STICKER,category:k.RIGHT_BAR_PANEL_IMAGE,image:o.$toResourceURL("static/images/format-panel/sticker.svg"),tooltip:o.$T("Sticker"),isVisible:!0}].filter((e=>e.isVisible)))),le=(e,t)=>{i.commit(`${x.SHARED}/updateRightBarPanel`,{panel:e,tab:t})},ce=s.reactive({componentName:"",componentTitle:null,originTab:"",options:{}});s.watch((()=>ne.value),(()=>{ce.componentName="",ce.componentTitle=null,ce.options={}}));const de=e=>{ce.componentName=e.componentName,ce.componentTitle=e.componentTitle,ce.originTab=e.originTab,ce.options=e.options||{}};s.provide("navigateTo",de);return s.watch((()=>ne.value),(e=>{l.trackEvent({eventAction:"rightPanel",eventName:e})})),s.watch(ae,((e,t)=>{e&&t&&e.name===t.name||setTimeout((()=>{ee.value&&ee.value.scroll(0,0)}),1)})),{wrappedTooltipWithKeybinding:I.wrappedTooltipWithKeybinding,contentContainer:ee,switchTab:le,shuffleBtnIcon:te,randomColorTheme:()=>n(this,void 0,void 0,(function*(){i.handleCommand("randomColorTheme"),l.trackEvent({eventAction:"randomColor"})})),currentComponent:ae,rightPanelTab:ne,isShowBranchOnly:ie,sheetRendering:re,tabData:se,navigationInfo:ce,navigateTo:de,backToOrigin:()=>{const e=ce.originTab;ce.componentName="",ce.componentTitle=null,ce.originTab="",ce.options={},le(void 0,e)},FORMAT_PANEL_TAB_STYLE:k.FORMAT_PANEL_TAB_STYLE,FORMAT_PANEL_TAB_MAP:k.FORMAT_PANEL_TAB_MAP,FORMAT_PANEL_TAB_SLIDE:k.FORMAT_PANEL_TAB_SLIDE}}})},2164:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(85622)),a=o(90571),s=o(57818),l=o(90336),c=o(48932),d=o(83450),u=o(6921),p=i(o(83099)),h=i(o(43139)),f=i(o(78660));t.default=a.createComponent({name:"navigation-panel",components:{topicview:h.default,noteview:p.default,tagview:f.default},props:{panelWidth:Number},setup(e,t){const o=a.getCurrentInstance(),i=t.root.$store,p=a.ref([{key:"topic",image:o.$toResourceURL("static/images/navigation-panel/filter-topic.svg"),tooltip:o.$T("View topic outline and search the map.")},{key:"note",image:o.$toResourceURL("static/images/navigation-panel/filter-note.svg"),tooltip:o.$T("View and search all the notes.")},{key:"tag",image:o.$toResourceURL("static/images/navigation-panel/filter-tag.svg"),tooltip:o.$T("Highlight topics by marker and label.")}]),h=a.ref([]);a.onActivated((()=>{d.trackEvent({eventAction:"naviPanel"})})),a.onMounted((()=>{y()}));const f=a.computed((()=>`${g.value}view`)),m=a.computed((()=>{const e=i.state.workbench;return{tab:e.leftBarPanelTab,suggestSelection:e.leftBarPanelSuggestSelection,updateTrigger:e.leftBarPanelSuggestSelectionUpdateTrigger}})),g=a.computed({get:()=>m.value.tab,set:e=>{i.commit("workbench/UPDATE_LEFTBAR_STATE",{tab:e})}});a.watch(g,(e=>{d.trackEvent({eventAction:"naviType",eventName:e})})),a.watch((()=>m.value.updateTrigger),(()=>{const{type:e,id:t}=m.value.suggestSelection,o="note"===e?"note":"label",n="note"===e?"navigationPanel.note":"navigationPanel.label";setTimeout((()=>{i.handleCommand(n,{type:e,id:t}),"label"===o&&d.trackEvent({eventAction:"highlightType",eventName:e})}),10)}));const v=a.computed((()=>{const e=i.state.editor,t=i.state.editor.sheetContentChangedTrigger,o=i.state.editor.sheetSwitchedTrigger,n=i.state.editor.sheetTitleChangedTrigger;return{sheetRendering:i.state[l.SHARED].sheetRendering,isOutlinerMode:i.state[l.SHARED].editorMode===c.EDITOR_MODE_OUTLINER,trigger:e&&(e.isVisible||t||o||n)}})),b=a.computed((()=>!!i.state.workbench.isLeftbarVisible));a.watch((()=>v.value.isOutlinerMode),(e=>{e&&i.commit("workbench/UPDATE_LEFTBAR_STATE",{tab:"topic"})}));const A=a.computed((()=>{const e={sheets:null,sheetsWithCurrentTitle:null};if(!v.value.trigger)return e;const t=i.state.editor.sbEditorWrapper.value;if(!t)return e;return t.getCurrentSheetEditor()?(e.sheets=t.model.sheets,e.sheetsWithCurrentTitle=t.model.get("sheets"),e):e})),E=a.computed((()=>A.value.sheets)),T=a.computed((()=>{const e=i.state.editor.sbEditorWrapper.value;return E.value.find((t=>t.id===e.currentSheetId))})),y=()=>n(this,void 0,void 0,(function*(){const e=i.state.editor.sbEditorWrapper.value;if(!e)return;let t=e.getCurrentSheetEditor();if(!t)return;const o=t.getSheetModel().getLegendModel().get("markers")||{},n=s.markerModule.getGroupInfoList();let a=[],l=0;for(let e of n){let t=[],n=e.id.replace(/Mar?kers/,"");n=n.charAt(0).toUpperCase()+n.slice(1);for(let n of e.markers){const{resource:e,name:i}=s.markerModule.getMarkerInfoById(n.markerId);let a=r.default.join(u.getResourceBasePath(),e);"win32"==process.platform&&(a=a.split("\\").join("/")),t.push({id:n.markerId,name:n.markerId in o?o[n.markerId].name:i,markerUrl:a,index:l++})}a=a.concat(t)}h.value=a}));a.watch(v,(()=>{y()}));const C=a.computed((()=>{const e={};return h.value.forEach((t=>{e[t.id]=t})),e}));return{panelTab:g,tabData:p,markersMap:C,updateTrigger:v,isLeftBarVisible:b,currentComponentName:f,getSheetTitle:e=>{const t=A.value.sheetsWithCurrentTitle;if(!t)return null;return t[t.findIndex((t=>t.id===e))].title},sheets:E,currentSheet:T,onClose:()=>{t.emit("close")}}}})},33799:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(90571),a=o(90336),s=o(90544),l=i(o(12753)),c=i(o(43621)),d=i(o(58331)),u=o(27608),p=o(27608),h=o(48932);t.default=r.createComponent({name:"note-view",components:{"tree-list-v2":l.default,"common-none-panel":d.default,toolbar:c.default},props:{sheets:Array,currentSheet:Object,updateTrigger:Object,getSheetTitle:Function},setup(e,t){const o=r.getCurrentInstance(),i=t.root.$store,l=r.ref(""),c=r.computed((()=>i.state[a.SHARED].leftBarPanelSearchMenu)),d=r.computed((()=>o.$T("<Empty Text>"))),f=e=>new Promise((t=>setTimeout(t,e))),m=r.computed((()=>l.value.length>0)),g=r.ref([]),v=u.getReplaceContentFunction(t),b=r.ref(null);r.watch(m,((e,t)=>{!t&&e&&(b.value=null)}));const A=r.computed((()=>!l.value||(!b.value||!m.value))),E=r.computed((()=>{const{isCurrentMapMode:e}=c.value;if(!l.value)return!0;if(e){if(!C.value||!C.value.length)return!0}else if(C.value.every((e=>0===e.items.length)))return!0;return!1}));r.onMounted((()=>{i.registerCommands([{id:"navigationPanel.note",provider:`editor/${window.editorId}`,enabledFn:()=>!0,handler:e=>{const{id:t}=e;g.value=[t];const o=document.getElementsByName(t)[0];o&&(o.focus(),o.scrollIntoView())}}])})),r.onBeforeUnmount((()=>{i.unregisterCommands([{id:"navigationPanel.select",provider:`editor/${window.editorId}`}])}));const T=(t,o)=>{Array.isArray(t)||(t=[t]),t.forEach((e=>{e.unindent=!0}));return{expanded:!0,value:o.id,text:e.getSheetTitle(o.id),slotType:"sheetTitle",triangleOpacity:1,items:t}},y=r.computed((()=>{const{value:t}=c;if(!e.updateTrigger.trigger)return[];const o=t.isCurrentMapMode?[e.currentSheet]:e.sheets;if(!o||!o.length)return[];let n=[];return o.forEach((o=>{const i=o.toJSON(),{rootTopic:r}=i,a=[];s.traverseTopic(r,{isOutlinerMode:e.updateTrigger.isOutlinerMode,visitors:{note(e,t,o){if(!e||!e.plain)return;const{title:n}=o,{content:i}=e.plain;a.push({expanded:!0,value:h.CREATE_LEFT_BAR_PANEL_NOTE_VIEW_ID(o.id),topicId:o.id,title:n,text:i,slotType:"noteItem"})}}}),t.isCurrentMapMode?n=a:a.length&&n.push(T(a,i))})),n})),C=r.computed((()=>{const{value:e}=c,{value:t}=y,o=l.value,n=p.createRegExp(o,e.filters.wholeWords,e.filters.matchCase,!0),i=e=>{const t=e.filter((e=>!!e.text&&!!e.text.match(n)));return p.buildSearchResultHighlight(n,t),t};return e.isCurrentMapMode?i(t):t.map((e=>T(i(e.items),{id:e.value,title:e.text}))).filter((e=>e.items.length>0))})),S=(e,t)=>{const{filters:n}=c.value;v({type:"note",id:e.topicId,pattern:l.value,replacement:t,wholeWord:n.wholeWords,caseSensitive:n.matchCase}),o.$nextTick((()=>{b.value=null}))};return{emptyText:d,defaultSelected:g,searchKeywords:l,menuOptions:c,workbook:y,searchResult:C,disabledReplace:A,disabledReplaceAll:E,isSearchMode:m,onClick:t=>n(this,void 0,void 0,(function*(){const{isOutlinerMode:o}=e.updateTrigger;b.value=t,yield f(50),o||(i.handleCommand("editor.selectAndCenter",t.value.slice(h.LEFT_BAR_PANEL_NOTE_VIEW_ID_PREFIX.length)),yield f(50)),i.handleCommand("editor.showNotesEditor",o&&{topicId:t.value.slice(h.LEFT_BAR_PANEL_NOTE_VIEW_ID_PREFIX.length)})})),onReplace:e=>{b.value&&m.value&&S(b.value,e)},onReplaceAll:e=>{if(!m.value)return;const{isCurrentMapMode:t}=c.value;t?C.value.forEach((t=>{S(t,e)})):C.value.forEach((t=>{t.items.forEach((t=>{S(t,e)}))}))}}}})},31676:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(90571),a=o(99492),s=i(o(24678)),l=o(90544),c=i(o(58331)),d=i(o(12753)),u=o(48932);t.default=r.createComponent({name:"tag-view",components:{"common-none-panel":c.default,"tree-list-v2":d.default},props:{sheets:Array,currentSheet:Object,markersMap:Object,updateTrigger:Object,isLeftBarVisible:Boolean},setup(e,t){const o=r.getCurrentInstance(),i=t.root.$store,c=r.ref(!1),d=r.ref(!1),p=r.reactive({label:new Set([]),marker:new Set([])}),h=r.computed((()=>o.$toResourceURL("/static/images/navigation-panel/sun.svg"))),f=r.computed((()=>o.$toResourceURL("/static/images/navigation-panel/sun-fill.svg")));r.onMounted((()=>{i.registerCommands([{id:"navigationPanel.label",provider:`editor/${window.editorId}`,enabledFn:()=>!0,handler:e=>{e.type&&e.id&&(p.label=new Set,p.marker=new Set,o.$nextTick((()=>{b({type:e.type,value:e.id})})))}}])})),r.onBeforeUnmount((()=>{i.unregisterCommands([{id:"navigationPanel.label",provider:`editor/${window.editorId}`}])})),r.onDeactivated((()=>{c.value&&g()}));const m=r.computed((()=>{const{markersMap:t}=e;if(!t||!Object.keys(t).length)return[];if(!e.updateTrigger.trigger)return[];const n=e.currentSheet.toJSON(),{rootTopic:i}=n,r=[],a={},s=[],c={};l.traverseTopic(i,{isOutlinerMode:e.updateTrigger.isOutlinerMode,visitors:{marker(e,o,n){e.forEach((e=>{const o=t[e.markerId];if(e.markerId in a){a[e.markerId].topicIds.push(n.id)}else{const t={type:"marker",value:u.CREATE_LEFT_BAR_PANEL_TAG_VIEW_MARKER_ID(e.markerId),text:o.name,marker:o,unindent:!0,topicIds:[n.id],slotType:"item"};r.push(t),a[e.markerId]=t}}))},label(e,t,o){e.forEach((e=>{if((e=e.trim())in c){c[e].topicIds.push(o.id)}else{const t={type:"label",value:u.CREATE_LEFT_BAR_PANEL_TAG_VIEW_LABEL_ID(e),text:e,unindent:!0,topicIds:[o.id],slotType:"item"};s.push(t),c[e]=t}}))}}}),r.sort(((e,t)=>e.marker.index-t.marker.index)),s.sort(((e,t)=>e.text.charCodeAt(0)-t.text.charCodeAt(0)));const d=[];return r.length&&d.push({type:"marker",isTitle:!0,text:o.$T("Marker"),value:"$tag-view-marker",expanded:!0,items:r,slotType:"item",topicIds:[]}),s.length&&d.push({type:"label",isTitle:!0,text:o.$T("Label"),value:"$tag-view-label",expanded:!0,items:s,slotType:"item",topicIds:[]}),d})),g=()=>{c.value=!1,p.label=new Set,p.marker=new Set,i.commit("workbench/UPDATE_LEFTBAR_STATE",{suggestSelection:{type:null,id:null}}),i.handleCommand("editor.filterBranch",{idList:[]})},v=()=>{let e=[];const t=m.value.find((e=>"label"===e.type)),o=m.value.find((e=>"marker"===e.type));p.label.forEach((o=>{const n=t.items.find((e=>e.value===o));if(!n)return;const i=n.topicIds;e=[...e,...i]})),p.marker.forEach((t=>{const n=o.items.find((e=>e.value===t));if(!n)return;const i=n.topicIds;e=[...e,...i]})),setTimeout((()=>{var t;t=e,c.value=!0,i.handleCommand("editor.filterBranch",{idList:t})}),20)},b=e=>n(this,void 0,void 0,(function*(){if(!d.value){if(!(yield s.default.fetch(a.FEATURE_TRIAL_REQUEST,"action.topicFilter")))return;d.value=!0}e.isTitle?(e=>{const t=m.value.find((t=>t.type===e));t&&(p[e]=Array.from(p[e]).length===t.items.length?new Set:new Set(t.items.map((e=>e.value))),v())})(e.type):(e=>{const t=p[e.type];t.has(e.value)?t.delete(e.value):t.add(e.value),p[e.type]=new Set(Array.from(t)),v()})(e)}));return r.watch(m,(()=>{const e=m.value.find((e=>"label"===e.type)),t=m.value.find((e=>"marker"===e.type));p.label=e?new Set(Array.from(p.label).filter((t=>e.items.find((e=>e.value===t))))):new Set,p.marker=t?new Set(Array.from(p.marker).filter((e=>t.items.find((t=>t.value===e))))):new Set,o.$nextTick((()=>{v()}))})),r.watch((()=>e.isLeftBarVisible),((e,t)=>{e===t||e||g()})),{workbook:m,selectedData:p,selectedIconImage:h,selectedIconFillImage:f,isItemChecked:e=>p[e.type].has(e.value),isTitleChecked:e=>{const t=m.value.find((t=>t.type===e));return!!t&&Array.from(p[e]).length===t.items.length},couldFilterBranch:d,onSelect:b}}})},23714:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(58933),i=o(90571),r=o(90336),{Menu:a}=n.remote;t.Z=i.createComponent({model:{prop:"searchKeywords",event:"input"},props:{searchKeywords:{type:String,default:""},showFiltersOptions:{type:Boolean,default:!0},showReplaceOptions:{type:Boolean,default:!0},menuOptions:Object,searchText:String,replaceText:String,disabledSearch:{type:Boolean,default:!1},disabledReplace:{type:Boolean,default:!0},disabledReplaceAll:{type:Boolean,default:!0},disabledItems:{type:Array,default:()=>[]}},setup(e,t){const o=i.getCurrentInstance(),s=t.root.$store,l=i.ref(""),c=i.computed((()=>o.$toResourceURL("static/images/pitchmode/setting.svg"))),d=i.computed((()=>o.$toResourceURL("/static/images/navigation-panel/searchbar-search.svg"))),u=i.computed((()=>o.$toResourceURL("/static/images/navigation-panel/searchbar-replace.svg"))),p=(t,o)=>{let n=Object.assign({},e.menuOptions);["isReplaceMode","isCurrentMapMode"].includes(t)?n[t]=o:(n=Object.assign({},e.menuOptions),n.filters=Object.assign({},e.menuOptions.filters),n.filters[t]=o),s.commit(`${r.SHARED}/updateLeftBarPanelSearchMenu`,n)},h=t=>!e.disabledItems.includes(t),f=(t,o)=>{const{filters:n}=e.menuOptions;return{label:o,id:t,click:e=>{p(t,!n[t]),e.checked=!n[t]},type:"checkbox",enabled:h(t),checked:n[t]}},m=i.ref(null),g=i.ref([]),v=i.ref(null);return i.onMounted((()=>{v.value.focus()})),{replaceWord:l,count:m,selected:g,searchInput:v,gearImage:c,searchIconImage:d,replaceIconImage:u,onReplace:()=>{t.emit("replace",l.value)},onReplaceAll:()=>{t.emit("replaceAll",l.value)},onToggleConfig:()=>{const{isReplaceMode:t,isCurrentMapMode:i}=e.menuOptions;let r=[{type:"separator"},{label:o.$T("Current Map"),id:"currentMap",click:e=>{p("isCurrentMapMode",!0),e.checked=!0},type:"radio",enabled:h("currentMap"),checked:i},{label:o.$T("Whole Workbook"),id:"wholeWorkbook",click:e=>{p("isCurrentMapMode",!1),e.checked=!0},type:"radio",enabled:h("wholeWorkbook"),checked:!i},{type:"separator"},f("wholeWords",o.$T("Whole Words")),f("matchCase",o.$T("Match Case"))];e.showReplaceOptions&&(r=[{label:o.$T("Find"),id:"find",click:e=>{p("isReplaceMode",!1),e.checked=!0},type:"radio",enabled:h("find"),checked:!t},{label:o.$T("Find & Replace").replace(/(&)/g,"$1$1"),id:"replace",click:e=>{p("isReplaceMode",!0),e.checked=!0},type:"radio",enabled:h("replace"),checked:t}].concat(r)),e.showFiltersOptions&&(r=r.concat([{type:"separator"},f("topic",o.$T("Topic")),f("note",o.$T("Note")),f("relationship",o.$T("Relationship")),f("boundary",o.$T("Boundary")),f("label",o.$T("Label")),f("link",o.$T("Link(noun)"))])),a.buildFromTemplate(r).popup({window:n.remote.getCurrentWindow()})},onUpdateSearchKeywords:e=>{t.emit("input",e.target.value)}}}})},96968:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(90571),a=o(90336),s=o(90544),l=o(27608),c=i(o(12753)),d=i(o(43621)),u=i(o(58331)),p=o(27608),h="darwin"===process.platform;t.default=r.createComponent({name:"topic-view",components:{"tree-list-v2":c.default,"common-none-panel":u.default,toolbar:d.default},props:{sheets:Array,currentSheet:Object,updateTrigger:Object,panelWidth:Number,getSheetTitle:Function},setup(e,t){const o=r.getCurrentInstance(),i=t.root.$store,c=r.ref(null),d=r.ref(""),u=r.computed((()=>i.state[a.SHARED].leftBarPanelSearchMenu));r.watch((()=>e.updateTrigger.isOutlinerMode),((e,t)=>{e!==t&&(e?(u.value.filters.relationship=!1,u.value.filters.boundary=!1):(u.value.filters.relationship=!0,u.value.filters.boundary=!0))}));const f=r.ref(null),m=r.computed((()=>d.value.length>0)),g=r.computed((()=>!d.value||(!f.value||!("isSearchResult"in f.value)))),v=r.computed((()=>{const{isCurrentMapMode:e}=u.value;if(!d.value)return!0;if(e){if(!C.value||!C.value.length)return!0}else if(C.value.every((e=>0===e.items.length)))return!0;return!1})),b=l.getReplaceContentFunction(t),A=e=>new Promise((t=>setTimeout(t,e))),E=e=>e.startsWith("http"),T=(t,o)=>{Array.isArray(t)||(t=[t]),t.forEach((e=>{e.unindent=!0}));return{expanded:!0,value:o.id,text:e.getSheetTitle(o.id),slotType:"sheetTitle",triangleOpacity:1,items:t}},y=r.computed((()=>{const{value:t}=u,n=[];if(!e.updateTrigger.trigger)return n;const i=t.isCurrentMapMode?[e.currentSheet]:e.sheets;if(!i||!i.length)return n;return i.map((n=>{const i=n.toJSON(),{rootTopic:r}=i,a=s.traverseTopic(r,{isOutlinerMode:e.updateTrigger.isOutlinerMode,createContext:()=>({value:"",text:"",items:[],expanded:!0}),createLink:(e,t)=>{if(!t)return e;t.items.push(e)},visitors:{topic(e,t,n){t.value=e.id,t.text=n?e.title||"":(e=>e.image&&e.image.src?`[${o.$T("Image")}] ${e.title}`:e.title)(e)}}});return t.isCurrentMapMode?a:T(a,i)}))})),C=r.computed((()=>{const{value:t}=u;if(!d.value)return null;if(!e.updateTrigger.trigger)return null;const o=t.isCurrentMapMode?[e.currentSheet]:e.sheets;let n=[];const i=d.value,r=p.createRegExp(i,t.filters.wholeWords,t.filters.matchCase,!0),a={label:{},note:{},link:{}};return o.forEach((e=>{let o=[];const i=e.toJSON(),{rootTopic:l,relationships:c}=i,d=(e,t,n,i)=>{o.push({isSearchResult:!0,value:t,text:n,type:e,topicId:i,slotType:"searchResult"})},u={isOutlinerMode:!1,visitors:{}},{filters:h}=t;h.topic&&(u.visitors.topic=e=>{d("topic",e.id,e.title,e.id)}),h.label&&(u.visitors.label=(e,t,o)=>{e.forEach((e=>{e=e.trim();const t=`sl-${o.id}-${e}`;a.label[t]||(a.label[t]=!0,d("label",t,e,o.id))}))}),h.note&&(u.visitors.note=(e,t,o)=>{if(!e||!e.plain)return;const{content:n}=e.plain,i=`sn-${o.id}-${n}`;a.note[i]||(a.note[i]=!0,d("note",i,n,o.id))}),h.link&&(u.visitors.link=(e,t,o)=>{const n=`sln-${o.id}-${e}`;!a.link[n]&&E(e)&&(a.link[n]=!0,d("link",n,e,o.id))}),h.boundary&&(u.visitors.boundary=(e,t,o)=>{e.forEach((e=>{d("boundary",e.id,e.title,o.id)}))}),s.traverseTopic(l,u),h.relationship&&c&&c.forEach((e=>{d("relationship",e.id,e.title,null)})),o=o.filter((e=>!!e.text&&!!e.text.match(r))),p.buildSearchResultHighlight(r,o),t.isCurrentMapMode?n=o:o.length&&n.push(T(o,i))})),n})),S=(e,t)=>{const{filters:o}=u.value;"isSearchResult"in e&&b({type:e.type,id:["boundary","relationship"].includes(e.type)?e.value:e.topicId,pattern:d.value,replacement:t,wholeWord:o.wholeWords,caseSensitive:o.matchCase})};return{containerEl:c,searchKeywords:d,menuOptions:u,workbook:y,searchResult:C,disabledReplace:g,disabledReplaceAll:v,isSearchMode:m,onClick:t=>n(this,void 0,void 0,(function*(){f.value=t;const{isOutlinerMode:o}=e.updateTrigger,n=e=>{o?i.handleCommand("editor.selectTopicById",{componentId:e}):i.handleCommand("editor.selectAndCenter",e)};if("isSearchResult"in t)if(h&&(yield A(50)),["topic","relationship","boundary"].includes(t.type))n(t.value);else switch(o||n(t.topicId),yield A(50),t.type){case"label":i.handleCommand("editor.showLabelEditor",o&&{topicId:t.topicId});break;case"note":i.handleCommand("editor.showNotesEditor",o&&{topicId:t.topicId});break;case"link":E(t.text)&&i.handleCommand("editor.showHyperlinkEditor",o&&{topicId:t.topicId})}else n(t.value)})),onReplace:e=>{f.value&&S(f.value,e)},onReplaceAll:e=>{const{isCurrentMapMode:t}=u.value;t?C.value.forEach((t=>{S(t,e)})):C.value.forEach((t=>{t.items.forEach((t=>{S(t,e)}))}))}}}})},41637:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=o(28441).createGetTextWidthFunction();t.default=i.createComponent({name:"tree-list-v2",props:{items:{type:Array,default:()=>[]},type:{type:String,default:"radio"},value:{type:Array,default:()=>[]},indent:{type:Number,default:0},prefix:{type:String,default:""},index:{type:Number,default:0},striped:{type:Boolean,default:!1},textWrap:{type:Boolean,default:!1},container:HTMLElement,highPerformanceMode:{type:Boolean,default:!1},width:{type:Number,default:240},allowDirectionKey:{type:Boolean,default:!1}},setup(e,t){const o=i.getCurrentInstance(),a=i.ref({}),s=i.ref([]),l=i.ref({scrollTop:0,clientHeight:100});i.watch((()=>e.value),((e,t)=>{null!=e&&e!==t&&(s.value=new Set(e))}));const c=e=>{const t=e.target;l.value={scrollTop:t.scrollTop,clientHeight:t.clientHeight}},d=(t=e.container)=>{t&&(l.value={scrollTop:t.scrollTop,clientHeight:t.clientHeight})};i.watch((()=>e.container),(e=>{e&&(e.addEventListener("scroll",c),d(e))}));const u=()=>{d()};i.onMounted((()=>{window.addEventListener("resize",u)})),i.onActivated((()=>{d()})),i.onBeforeUnmount((()=>{window.removeEventListener("resize",u),e.container&&e.container.removeEventListener("scroll",c)}));const p=i.computed((()=>o.$T("<Empty Text>"))),h=i.computed((()=>{const{items:t,indent:o}=e;if(!t||!t.length)return[];const n="$ROOT_VALUE",i=[],a=(e,t,o=[])=>{const r=e.value===n,s=e.unindent?t:t+1;if(r||i.push({value:e.value,current:e,indent:s,parentValues:o.map((e=>e.value))}),e.items)for(let t=0;t<e.items.length;t++){const n=e.items[t],i=o.concat(r?[]:e);a(n,s,i)}};return a({items:t,value:n},o||-1),i.forEach((t=>{const o=16*t.indent+16,n=e.width-(o+16),i=(a=t.current.text,r(a,'13px -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, Roboto, "Helvetica Neue", Arial, sans-serif')+10);var a;if(t.containerWidth=n,t.textWidth=i,t.singleLineWidth=o+16+i,e.textWrap){const e=Math.ceil(i/n);t.allocatedLine=e}else t.allocatedLine=1})),i})),f=i.computed((()=>{const{value:e}=h,t=e=>v(e)&&g(e),o={},n={},i={};for(let t=0;t<e.length;t++){const n=e[t];o[n.value]=n}for(let r=0;r<e.length;r++){const a=e[r],s=a.parentValues.join(",");s in i?n[a.value]=i[s]:i[s]=n[a.value]=a.parentValues.every((e=>t(o[e].current)))}return n})),m=i.computed((()=>{let t=h.value.filter((e=>!!f.value[e.value]));if(!e.highPerformanceMode)return{items:t,totalHeight:0};let o=0,n=0;return t.forEach((t=>{t.currentTop=`${o}px`,t.currentTopNumber=o;const i=12+14.4*t.allocatedLine,r=[],a=t.textWidth/t.current.text.length,s=Math.floor(t.containerWidth/a);if(e.textWrap)for(let e=0;e<t.allocatedLine;e++)r.push(t.current.text.slice(e*s,(e+1)*s));else n=Math.max(t.singleLineWidth,n),r.push(t.current.text);t.textLines=r,1!==r.length||r[0]||(r[0]=p.value),o+=i})),t=t.filter((e=>!(e.currentTopNumber<l.value.scrollTop-100)&&!(e.currentTopNumber>l.value.scrollTop+l.value.clientHeight+100))),{items:t,totalHeight:o,commonWidth:n}})),g=e=>e.value in a.value?Boolean(a.value[e.value]):Boolean(e.expanded),v=e=>"items"in e&&Array.isArray(e.items)&&e.items.length>0,b=e=>n(this,void 0,void 0,(function*(){const o=new Set([e.value]);var n;s.value=o,n=e,t.emit("click",n)}));return{emptyText:p,currentItems:h,visibleItems:f,displayData:m,isItemExpandable:v,isItemExpanded:g,isItemChecked:e=>s.value.has(e.value),onToggleClick:(e,i)=>n(this,void 0,void 0,(function*(){i.preventDefault(),i.stopPropagation(),(e=>{a.value=Object.assign(Object.assign({},a.value),{[e.value]:!g(e)}),t.emit("toggleitem",e.value)})(e),yield o.$nextTick(),i.currentTarget.parentNode.focus()})),onClickButton:b,onKeydown:t=>{if(!e.allowDirectionKey)return;const o=Array.from(s.value);let n=null;if(o.length){const e=m.value.items.findIndex((e=>e.value===o[0]));n=m.value.items[e+("up"===t?-1:1)]}else m.value.items.find((e=>!e.current.slotType));if(n&&!n.current.slotType){b(n.current);const e=document.querySelector(`button[data-value="${n.value}"]`);e&&e.focus()}}}}})},19267:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r={side:[["left"],["top"],["right"],["bottom"]],corner:[["left","top"],["left","bottom"],["right","top"],["right","bottom"]]};function a(e){let t=!1;return function(...o){t||(window.requestAnimationFrame((function(){e.apply(null,o),t=!1})),t=!0)}}t.default=i.createComponent({name:"map-shot-frame",props:{backgroundGrayscale:Number,visible:{type:Boolean,default:!0},defaultSize:Array,defaultRate:String,isTakingShot:{type:Boolean,default:!1},appearance:String,getScrollContainerDomElement:Function,getFullPageDomElement:Function,containerStyle:Object},setup(e,t){const o=i.getCurrentInstance(),s=i.computed((()=>e.getScrollContainerDomElement())),l=i.computed((()=>e.getFullPageDomElement())),c=i.ref(null),d=i.ref(null),u=i.ref(null),p=i.ref(null);let h=i.ref(null);const f=i.ref(!1),m=i.ref(!1),g=i.ref("default"),v=i.ref(null),b=i.ref(null),A=i.ref(null),E=i.ref(null),T=i.ref(e.defaultRate),y=i.ref([0,0]),C=i.ref(null),S=i.ref(null),k=i.ref(!1),w=i.ref(null),x=i.ref(null),I=i.ref(),_=i.ref(o.$toResourceURL("static/images/map-shot/close.svg")),B=i.ref(o.$toResourceURL("static/images/map-shot/camera.svg"));i.onMounted((()=>{W(),D(!0)})),i.onBeforeUnmount((()=>{D(!1)}));const O=i.computed((()=>{const{value:e}=l;return Math.max(e.clientHeight,e.clientWidth)+500})),M=i.computed((()=>{const t={width:"auto",height:"auto",overflow:"hidden","z-index":1020,cursor:g.value};return Object.assign({},t,e.containerStyle)})),L=i.computed((()=>[{key:"1:1",text:o.$T("Square (1:1)")},{key:"free",text:o.$T("Custom")}])),R=i.computed({set(e){T.value=e.key},get:()=>L.value.find((e=>e.key===T.value))}),N=i.computed((()=>"free"===R.value.key?r.side.concat(r.corner):r.corner));i.watch(R,(e=>{const{value:t}=d;if("free"===e.key)return;if(!t)return;const{clientHeight:o}=t,n=R.value.key.split(":"),i=o*(parseInt(n[0])/parseInt(n[1]));$({width:i})}));const D=e=>{const{value:t}=s;t[e?"addEventListener":"removeEventListener"]("scroll",P),e||(C.value=null,S.value=null)},P=()=>{if(f.value)return;if(e.isTakingShot)return;const{value:t}=s,{value:o}=l,{value:n}=d,i=[t.scrollLeft,t.scrollTop],r=[o.clientWidth,o.clientHeight];if(null!==S.value&&(r[0]!==S.value[0]||r[1]!==S.value[1]))return C.value=i,void(S.value=r);if(C.value){const e=window.getComputedStyle(n),t=parseFloat(e.getPropertyValue("top").replace("px","")),o=parseFloat(e.getPropertyValue("left").replace("px",""));n.style.left=o-(i[0]-C.value[0])+"px",n.style.top=t-(i[1]-C.value[1])+"px"}C.value=i,U({})},F=()=>{const{value:e}=s,{value:t}=l;C.value=[e.scrollLeft,e.scrollTop],S.value=[t.clientWidth,t.clientHeight]},W=()=>{const{value:t}=s,{value:o}=l,{value:n}=c,{clientWidth:i,clientHeight:r}=n;let[a,d]=e.defaultSize;const u=a/d;let p=(r-(d+4))/2;if(p<60){let e=p-(.5*(d+2)-.5*r)-60;const o=t.scrollTop+e;o<0&&(e=-t.scrollTop,d-=Math.abs(o),a-=Math.abs(o)*u),p=e}let h=(i-(a+4))/2;if(h<0){let e=h+(.5*(a+2)-.5*i)+1;if(t.scrollLeft+e+a>o.clientWidth){a=o.clientWidth-(t.scrollLeft+e);const n=a/u;p+=.5*Math.abs(n-d),d=n}h=e}$({width:a,height:d,left:h,top:p}),F(),m.value=!1},$=e=>{const{value:t}=d;let n=!1;const i=["left","top","right","bottom","width","height"];for(const o in e){let r=e[o];null!==r&&(["width","height"].includes(o)&&(n=!0),i.includes(o)&&(r=`${r}px`),t.style[o]=r)}U(e),n&&o.$nextTick((()=>{const{clientWidth:e,clientHeight:o}=t;y.value=[e,o]}))},U=t=>{const{value:o}=s,{value:n}=l,{value:i}=d,{value:r}=u,{value:a}=p;let{left:c,top:h,height:f,width:g}=t;c="number"==typeof c?c:parseInt(c),h="number"==typeof h?h:parseInt(h),f="number"==typeof f?f:parseInt(f),g="number"==typeof g?g:parseInt(g);const v=r,b=a,{clientHeight:A,clientWidth:E}=v,{clientHeight:T,clientWidth:y}=o;if(!c||!h){const e=getComputedStyle(i);c=parseInt(e.getPropertyValue("left").replace("px","")),h=parseInt(e.getPropertyValue("top").replace("px",""))}f&&g||(f=i.clientHeight,g=i.clientWidth);const C={top:h+f+14+4,left:c},S={bottom:"calc(100% + 8px)",color:"#FFF"};if(o.scrollTop+h-16<=0&&(S.bottom="calc(100% - 16px)",e.backgroundGrayscale>128&&(S.color="#333")),o.scrollTop+T>=n.clientHeight-5){let e=!1;C.top+A>T&&(C.top=h+f-14-A,e=!0),e&&C.top+14+A>=T&&(C.top=T-A-14)}v.style.top=`${C.top}px`,v.style.left=`${C.left}px`,b.style.color=S.color,b.style.bottom=S.bottom;const k=0<C.top&&C.top+A<=T&&-10<C.left&&C.left+E<=y;k&&m.value&&(m.value=!1),k||m.value||(m.value=!0)};let j=e=>{const{value:t}=s,{value:o}=l,{value:n}=d;if(0===e.buttons&&"handler"===v.value)return H();if(!f.value&&"handler"!==v.value)return;const i=(i={vertical:!0,horizontal:!0})=>{const r=n.getBoundingClientRect(),{scrollTop:a,scrollLeft:s}=t,{clientWidth:l,clientHeight:c}=o,d=s+r.left,u=s+r.right,p=a+r.top,h=a+r.bottom,f={left:i.horizontal&&e.clientX-w.value.offsetX,top:i.vertical&&e.clientY-w.value.offsetY};"number"==typeof f.left&&(d<=0&&f.left<=r.left||u>=l&&f.left+r.width>=r.right)&&(f.left=null),"number"==typeof f.top&&(p<=0&&f.top<=r.top||h>=c&&f.top+r.height>=r.bottom)&&(f.top=null),$(f)},r=()=>{t.scroll(x.value.scrollLeft-(e.clientX-w.value.mouseClientX),x.value.scrollTop-(e.clientY-w.value.mouseClientY))},c=()=>{const e={vertical:!0,horizontal:!0};return(t.scrollTop<=1||t.scrollTop+t.clientHeight>=o.clientHeight-1)&&(e.vertical=!1),(t.scrollLeft<=1||t.scrollLeft+t.clientWidth>=o.clientWidth-1)&&(e.horizontal=!1),e};if("frame"===v.value&&"left"===b.value)i();else if("container"===v.value&&"right"===b.value)r(),i(c());else if("frame"===v.value&&"right"===b.value)r(),i(c());else if("handler"===v.value){const i=E.value.getBoundingClientRect();let r,s,l,c=null;const d={top:!1,left:!1,right:!1,bottom:!1},u=50,p=12;if(A.value.includes("right")&&(r=e.clientX-I.value.frameClientRectLeft,r<1&&(r=1),t.offsetWidth-i.x<u+p&&(d.right=!0)),A.value.includes("bottom")&&(s=e.clientY-I.value.frameClientRectTop,s<1&&(s=1),t.offsetHeight-i.y<u+p&&(d.bottom=!0)),A.value.includes("left")){const t=I.value.frameClientRectLeft+I.value.frameClientWidth-1;l=e.clientX,r=I.value.frameClientWidth-(e.clientX-I.value.frameClientRectLeft),r<1&&(r=1),l>t&&(l=t),i.x<u&&(d.left=!0)}if(A.value.includes("top")){const t=I.value.frameClientRectTop+I.value.frameClientHeight-1;c=e.clientY,s=I.value.frameClientHeight-(e.clientY-I.value.frameClientRectTop),s<1&&(s=1),c>t&&(c=t),i.y<u&&(d.top=!0)}const f=()=>{const e=R.value.key.split(":");if(d.top||d.bottom){let t=r;t=Math.floor(Math.floor(s)*(parseInt(e[0])/parseInt(e[1]))),l&&(l+=r-t),r=t}else if(d.right||d.left){let t=Math.floor(Math.floor(r)*(parseInt(e[1])/parseInt(e[0])));c&&(c+=s-t),s=t}else{let t=r;t=Math.floor(Math.floor(s)*(parseInt(e[0])/parseInt(e[1]))),l&&(l+=r-t),r=t}};if(clearInterval(h.value),Object.values(d).some((e=>e))){let e=8;"free"!==R.value.key&&(e=4);const n=()=>{if(!I.value)return;const n={left:t.scrollLeft,top:t.scrollTop},i=new Set;d.left&&n.left>1&&(n.left-=e,r+=e,I.value.frameClientRectLeft+=e,i.add("width")),d.right&&n.left+t.clientWidth<o.clientWidth-1&&(n.left+=e,r+=e,I.value.frameClientRectLeft-=e,i.add("width")),d.top&&n.top>1&&(n.top-=e,s+=e,I.value.frameClientRectTop+=e,i.add("height")),d.bottom&&n.top+t.clientHeight<o.clientHeight-1&&(n.top+=e,s+=e,I.value.frameClientRectTop-=e,i.add("height")),t.scroll(n),"free"!==R.value.key&&f(),$({width:r,height:s,top:c,left:l})};h.value=setInterval(a(n),1)}"free"!==R.value.key&&f(),null!==c&&t.scrollTop+c<=0&&(c=0,r=null,s=null);let m=c;m||(m=n.getBoundingClientRect().top),null!==s&&t.scrollTop+m+s>o.clientHeight&&(r=null,s=null),$({width:r,height:s,top:c,left:l})}};j=a(j);const H=e=>{e&&"mouseup"===e.type&&clearInterval(h.value),e&&"mouseleave"===e.type&&"handler"===v.value||(e&&"mouseup"===e.type&&0===e.button&&e.target===c.value&&!k.value&&t.emit("close"),v.value=null,f.value=!1,w.value=null,I.value=null,x.value=null,A.value=null,g.value="default",F())};return{mapShotFrameContainerEl:c,mapShotFrameEl:d,mapShotToolbarEl:u,mapShotFrameDisplaySizeEl:p,isShowGoMapShotBar:m,commputedBoxShadow:O,computedContainerStyle:M,containerCursorStyle:g,currentFrameSize:y,frameSizeList:L,mapShotHandlers:N,computedSelectedRate:R,closeMapShotIcon:_,cameraIcon:B,onMapShotMouseDown:e=>{const{value:t}=s,{value:o}=d,{value:n}=c;if(e.target===o&&(v.value="frame"),e.target===n&&(v.value="container"),0===e.button&&(b.value="left"),2===e.button&&(b.value="right"),null!==v.value&&null!==b.value){const n=o.getBoundingClientRect();w.value={offsetX:e.clientX-n.left,offsetY:e.clientY-n.top,mouseClientX:e.clientX,mouseClientY:e.clientY},"right"===b.value&&(x.value={scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),f.value=!0}"right"===b.value&&(g.value="grab!important"),k.value=e.target!==c.value},onMapShotHandlerDown:(e,t)=>{const{value:o}=d,n=o.getBoundingClientRect(),i=window.getComputedStyle(t.target,null).getPropertyValue("cursor");g.value=i,v.value="handler",A.value=e.slice(),E.value=document.querySelector(`.map-shot-handler-${A.value[0]}`+(A.value[1]?`-${A.value[1]}`:"")),I.value={frameClientRectLeft:n.left,frameClientRectTop:n.top,frameClientWidth:o.clientWidth,frameClientHeight:o.clientHeight}},onMapShotMouseMove:j,onWheelAndPinch:e=>{t.emit("mousewheel",e)},onMapShotMouseUpOrLeave:H,onClose:e=>{t.emit("close",e)},onTakeShot:()=>{t.emit("takeshot",d.value,c.value,T.value,y.value)},goMapShotBar:()=>n(this,void 0,void 0,(function*(){const{value:e}=d,{value:t}=s,n=e.getBoundingClientRect(),i=e.clientWidth+4,r=e.clientHeight+4,{clientWidth:a,clientHeight:l}=t;let c=t.scrollLeft+n.left-(a-i)/2-(a<i?(i-a)/2+1:0),u=t.scrollTop+n.top-(l-r)/2+(l/2<r/2+60?(r-l)/2+60:0);t.scrollTo(c,u),yield o.$nextTick(),P()})),panelOnClick:e=>{e.target===c.value&&t.emit("close")},updateMapShotFrameStyle:$}}})},26554:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(90571),a=i(o(90212)),s=o(28441);t.default=r.createComponent({props:{pngBuffer:Buffer,appearance:String,defaultCheckedFrame:Boolean,defaultCheckedShadow:Boolean,defaultCheckedWatermark:Boolean,defaultFrameColor:String,defaultFrameWidth:String},components:{ColorPicker:a.default},setup(e,t){const o=r.getCurrentInstance(),i=r.ref(e.defaultCheckedShadow),a=r.ref(e.defaultCheckedWatermark),l=r.ref(e.defaultCheckedFrame),c=r.ref(e.defaultFrameColor),d=r.ref(e.defaultCheckedFrame?e.defaultFrameWidth:"normal"),u=r.ref({width:400,height:360});["thin","normal","thick"].includes(d.value)||(d.value="normal");const p=r.ref(null),h=r.ref(o.$toResourceURL("static/images/map-shot/watermark.svg")),f=r.ref({dark:"rgba(0, 0, 0, 0.3)",light:"rgba(255, 255, 255, 0.3)"}),m=r.computed((()=>{const e=[{name:o.$T("Thin"),id:"thin",ratio:.1,borderWidth:0},{name:o.$T("Medium"),id:"normal",ratio:.2,borderWidth:0},{name:o.$T("Thick"),id:"thick",ratio:.3,borderWidth:0}],t=(e,t)=>e.map((e=>(e.borderWidth=Math.floor(t*e.ratio),e)));if(!p.value)return t(e,100);const n=(()=>{const{width:e,height:t}=p.value;return e<t?"width":"height"})();return t(e,p.value[n])})),g=r.computed((()=>m.value.find((e=>e.id===d.value)))),v=r.computed((()=>{if(!p.value)return{width:0,height:0};const e=m.value.find((e=>"thick"===e.id)).borderWidth;return{width:p.value.width/(p.value.width+2*e)*u.value.width,height:p.value.height/(p.value.height+2*e)*u.value.height}})),b=r.computed((()=>{if(!p.value)return 1;const e=(()=>{const{width:e,height:t}=p.value;return e>t?"width":"height"})();return Math.min(1,v.value[e]/p.value[e])})),A=r.computed((()=>{const{pngBuffer:t}=e;if(!t)return"";let o="";for(let e=0;e<t.byteLength;e++)o+=String.fromCharCode(t[e]);return`data:image/png;base64,${window.btoa(o)}`})),E=r.computed((()=>{const e=m.value.find((e=>"normal"===e.id)).borderWidth,t=(l.value?g.value.borderWidth:e)*b.value;return Math.max(Math.floor(t),2)})),T=r.computed((()=>l.value?s.luminance(c.value)>127.5?"dark":"light":"dark"));r.watch(A,(e=>{const t=new Image;t.src=e,t.onload=()=>{p.value={width:t.width,height:t.height}}}));return{shrinkRatio:b,previewCinatinerMaxSize:u,maxPreviewImageSize:v,checkedFrame:l,checkedShadow:i,checkedWatermark:a,watermarkImage:h,watermarkColor:T,watermarkColors:f,selectedFrame:d,pickedColor:c,frameListConfig:m,selectedFrameData:g,previewPadding:E,pngDataURL:A,onSave:()=>n(this,void 0,void 0,(function*(){t.emit("save",A.value,{frame:l.value,shadow:i.value,watermark:a.value,watermarkColor:T.value,frameColor:c.value,frameWidth:d.value,frameRatio:g.value.ratio})})),onCancel:()=>{t.emit("cancel")}}}})},80023:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=o(90571),c=s(o(85622)),d=s(o(61027)),u=o(20072),p=o(90336),h=o(95287),f=s(o(41698)),m=o(83450),g=s(o(2286)),v=o(36414),b=o(96682),A=s(o(94190)),E=s(o(10634)),T=r(o(81617)),y=o(52),{styleManager:C}=d.default.utils,{STYLE_KEYS:S}=d.default.constant,k=[400,400],w=f.default("map-shot");t.default=l.createComponent({name:"map-shot",components:{MapShotFrame:A.default,MapShotModal:E.default},setup(e,t){const o=l.getCurrentInstance(),n=t.root.$store,i=l.ref(!1),r=l.ref(!1),s=l.ref(!1),d=l.ref(null),f=l.ref(null),A=l.ref(!1),E=l.ref(null);l.onMounted((()=>{D(!1);const e=R(),t=N();d.value=new T.default({blankPageURL:o.$toResourceURL("static/html/map-shot-placeholder.html"),currentBrowserWindowId:window.id,normalBounds:F(),fullPageElement:t,scrollContainerElement:e}),o.$el.focus(),z=V()})),l.onBeforeUnmount((()=>{D(!0),d.value.destroy(),z&&z(),A.value&&G()}));const x=l.computed((()=>n.getters["preferences/appearance"])),I=l.computed((()=>n.getters["editor/zoomScaleForActiveSheet"])),_=l.computed((()=>n.getters["mapShot/screenshot"].size||k)),B=l.computed((()=>n.getters["mapShot/screenshot"].rate||"free")),O=l.computed((()=>{const e=n.getters["mapShot/modalOptions"];return Object.assign({},e)})),M=l.computed((()=>{const e=R(),[t]=b.getCurrentBrowserWindow().getSize();let o="win32"===process.platform?10:15;return e.clientWidth===t&&(o=0),{"margin-bottom":`${24+o}px`,"margin-right":`${o}px`}})),L=l.computed((()=>{const e=n.state.editor.sbEditorWrapper.value;if(!e)return null;const t=e.getCurrentSheetEditor().getSheetView(),o=C.getStyleValue(t,S.FILL_COLOR,{ignoreUser:!1}),i="none"===o?"#FFFFFF":o,r=[parseInt("0x"+i.slice(1,3)),parseInt("0x"+i.slice(3,5)),parseInt("0x"+i.slice(5,7))];return(r[0]+r[1]+r[2])/3})),R=()=>o.$store.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().getScrollContainer(),N=()=>R().children[0],D=e=>{const t=b.getCurrentBrowserWindow();t.setResizable(e),t.setMaximizable(e),t.setFullScreenable(e)},P=e=>{R().style.overflow=e?"scroll":"hidden"},F=()=>{const e=b.getCurrentBrowserWindow().getContentBounds(),t=n.getters[`${p.FRAME_SHARED}/contentOffset`]();return{x:t.left,y:t.top,width:e.width-t.left-t.right,height:e.height-t.top-t.bottom}},W=e=>a(this,void 0,void 0,(function*(){r.value=!0;const t=`XMind ${Date.now()}`,i=c.default.join(K(),`${t}.png`);E.value=i;try{yield b.saveImage(i,e,{clipboard:!0})}catch(t){let[i]=yield h.showMessageBox({type:"info",message:o.$T("Failed to save image"),detail:o.$T("XMind has no permission to access this folder. Please change another one."),buttons:[o.$T("Continue"),o.$T("Cancel")],defaultId:0,cancelId:1});if(0==i){let t=yield h.showSaveDialog({suggestPath:h.suggestSavePath({store:n}),filters:[{name:"PNG",extensions:["png"]}]});t&&g.default.writeFile(t,e)}}r.value=!1})),$=()=>o.$children[0],U=e=>{const t=e.getBoundingClientRect(),n=window.getComputedStyle(e,null),r={top:parseInt(n.getPropertyValue("top").replace("px","")),left:parseInt(n.getPropertyValue("left").replace("px",""))};return d.value.captureInPage(t,{"before/scrollBeforeCapture":()=>a(this,void 0,void 0,(function*(){s.value=!0,yield o.$nextTick()})),"after/capturePage":()=>a(this,void 0,void 0,(function*(){i.value=!0})),"before/createChangedPngDpiBuffer":()=>a(this,void 0,void 0,(function*(){$().updateMapShotFrameStyle({top:r.top,left:r.left})}))})},j=e=>{const t=e.getBoundingClientRect(),r=window.getComputedStyle(e,null),l={top:parseInt(r.getPropertyValue("top").replace("px","")),left:parseInt(r.getPropertyValue("left").replace("px",""))};return d.value.captureFullPage(t,{"before/init":()=>a(this,void 0,void 0,(function*(){n.commit("editor/updateIgnoreResizeEditor",!0)})),"after/showWindow":()=>a(this,void 0,void 0,(function*(){s.value=!0,yield o.$nextTick()})),"after/moveBrowserViewBeforeCapture":()=>a(this,void 0,void 0,(function*(){P(!1)})),"after/capturePage":()=>a(this,void 0,void 0,(function*(){i.value=!0})),"before/removeTmpBrowserViewFromWindow":()=>a(this,void 0,void 0,(function*(){n.commit("editor/updateIgnoreResizeEditor",!1),P(!0)})),"before/endTimeDelay":()=>a(this,void 0,void 0,(function*(){$().updateMapShotFrameStyle({top:l.top,left:l.left})}))})},H=(e,t)=>{m.trackEvent({eventAction:"clickCaptureMap",eventName:"mapShotRatio",eventValue:e}),m.trackEvent({eventAction:"clickCaptureMap",eventName:"mapShotResolution",eventValue:JSON.stringify(t)})},Y=(()=>{let e=null;return()=>(e||(e=document.getElementById("map-shot-modal")),e)})(),V=()=>{const e=document.querySelector("#map-shot-modal"),t=new MutationObserver((t=>{t.forEach((t=>{"attributes"===t.type&&"class"===t.attributeName&&(!t.oldValue.includes("uk-open")&&e.getAttribute("class").includes("uk-open")?A.value=!0:t.oldValue.includes("uk-open")&&!e.getAttribute("class").includes("uk-open")&&(A.value=!1))}))}));return t.observe(e,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0}),()=>{t.disconnect()}};let z=null;const Z=()=>{const{UIkit:e}=window,t=Y();return e.modal(t)},G=()=>{Z().hide()},q=e=>a(this,void 0,void 0,(function*(){f.value=e,yield o.$nextTick(),Z().show()})),X=(e,t,o,n,i)=>{m.trackEvent({eventAction:"addBorder",eventValue:e}),m.trackEvent({eventAction:"addShadow",eventValue:t}),m.trackEvent({eventAction:"addWatermark",eventValue:o}),e&&(m.trackEvent({eventAction:"borderWidth",eventValue:n}),m.trackEvent({eventAction:"borderColor",eventValue:i}))},K=()=>{let e=null;try{e=b.getDesktopPath()}catch(t){w.error(v.normalizeError(t)),e=h.suggestSavePath({store:n})}return e},J=()=>{E.value&&b.showItemInFolder(E.value),b.openFolder(K())};return{isShowModal:A,isShowMapShotMask:i,isTakingShot:s,tmpPngBuffer:f,defaultSize:_,defaultRate:B,defaultModalOptions:O,appearance:x,containerStyle:M,mindMapBackgroundGrayscale:L,getScrollContainerDomElement:R,getFullPageDomElement:N,onWheelAndPinch:e=>{if(e.ctrlKey){const t=Math.abs(e.deltaY)>10?e.deltaY/Math.abs(e.deltaY)*10:e.deltaY;let o=Math.floor(-t)+I.value;o>u.MAX_ZOOM_SCALE?o=u.MAX_ZOOM_SCALE:o<u.MIN_ZOOM_SCALE&&(o=u.MIN_ZOOM_SCALE),n.commit("editor/updateSheetStatus",{id:n.state.editor.activeSheetId,zoomScale:o})}else{R().scrollBy(e.deltaX,e.deltaY)}},onCloseMapShot:()=>{n.handleCommand("mapShot")},onOpenMapShotFolder:J,onMapShotModalCancel:()=>{G()},onMapShotModalSave:(e,t)=>a(this,void 0,void 0,(function*(){const i=new y.FrameBuilder(e,t),r=yield i.build();W(T.createChangedPngDpiBuffer(r)),o.$nextTick((()=>{G(),n.commit("mapShot/updateModalOptions",{frame:t.frame,shadow:t.shadow,watermark:t.watermark,frameColor:t.frameColor,frameWidth:t.frameWidth}),o.$withUIKit((e=>{const t=`<div class="uk-button-group">\n            <button\n            class="uk-button uk-button-tile uk-button-icon uk-icon"\n            focustrigger="cannotGetFocusByMouse"\n            style="width: 24px; height: 24px;">\n              <img\n                draggable="false"\n                class="uk-display-inline-block"\n                src="${o.$toResourceURL("static/images/map-shot/open-folder.svg")}"\n                uk-svg\n              />\n            </button>\n            </div>`;e.toast({message:o.$T("The map you captured is saved and copied."),pos:"bottom-center",timeout:4e3,btn:t,style:{width:"310px"},btnClick:J})})),X(t.frame,t.shadow,t.watermark,t.frameWidth,t.frameColor)}))})),onTakeShot:(e,t,l,c)=>a(this,void 0,void 0,(function*(){if(r.value)return;let a=null;a=e.clientWidth<t.clientWidth&&e.clientHeight<t.clientHeight?yield U(e):yield j(e),q(a),yield o.$nextTick(),s.value=!1,i.value=!1,$().isShowGoMapShotBar=!1,n.commit("mapShot/updateScreenshot",{rate:l,size:c}),H(l,c)}))}}})},61818:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(85622)),r=n(o(61027)),a=o(57818),s=n(o(53597)),l=o(6921),{MOVE_VIEWPORT:c}=r.default.constant.ACTION_NAMES;t.default={name:"Markerpopup",components:{popover:s.default},data:function(){return{markerId:"",markerResources:[],oneMarkerOnly:"",topicLeft:"",topicRight:"",topicTop:"",topicBottom:"",computedHeight:"42px",computedWidth:"221px"}},computed:{containerStyle(){return this.markerResources.length>7?"uk-flex-column uk-flex-center uk-separator":"uk-flex-row uk-flex-middle uk-separator-vertical"},markersPadding(){return this.markerResources.length>7?"uk-padding-small uk-padding-remove-horizontal uk-padding-remove-top":"uk-padding-small uk-padding-remove-vertical uk-padding-remove-left"},deleteButtonPadding(){return this.markerResources.length>7?"uk-padding-xsmall uk-padding-remove-horizontal uk-padding-remove-bottom uk-flex uk-flex-column uk-flex-center":"uk-padding-xsmall uk-padding-remove-vertical uk-padding-remove-right"}},mounted(){const e=this.$store.state.editor.selectedMarkerView;if(!e)return void this.close();const t=document.querySelector(".sb-editor-container");if(!t)return void this.close();const o=this.$store.state.editor.sbEditorWrapper.value;if(!o)return void this.close();let n=o.getSelections();if(this.selectedTopic=n&&n[0],!this.selectedTopic||this.selectedTopic.type!==r.default.constant.VIEW_TYPE.BRANCH)return void this.close();const i=this.selectedTopic.el&&this.selectedTopic.el.getBoundingClientRect();if(!i)return void this.close();this.topicLeft=i.left,this.topicRight=i.right,this.topicTop=i.top,this.topicBottom=i.bottom;const a=t.offsetLeft,s=t.clientWidth,l=i.width,d=137,u=()=>{if("markerpopup"!==this.$store.state.workbench.currentVisiblePopover)return;const t=this.selectedTopic.el&&this.selectedTopic.el.getBoundingClientRect();t?(this.topicLeft=t.left,this.topicRight=t.right,this.topicTop=t.top,this.topicBottom=t.bottom,this.refreshData(e),setTimeout((()=>{this.$refs.popover.show()}),0)):this.close()},p={animate:!1,finishToRun:u};this.topicLeft<d-l/2?o.execAction(c,{deltaX:d-l/2-this.topicLeft,option:p}):this.topicRight+d-l/2>a+s?o.execAction(c,{deltaX:a+s-this.topicRight-d+l/2,option:p}):u()},beforeDestroy(){this.close()},methods:{refreshData(e){this.markerView=e,this.markerId=e.markerId,this.markerResources=[];const{groupId:t}=a.markerModule.getMarkerInfoById(this.markerId),o=a.markerModule.getGroupInfoById(t);if(o.markers){this.calcSize(o);for(let e of o.markers)if(!e.hidden){const{resource:t}=a.markerModule.getMarkerInfoById(e.markerId);let o=i.default.join(l.getResourceBasePath(),t);o&&("win32"==process.platform&&(o=o.split("\\").join("/")),this.markerResources.push({id:e.markerId,path:o}))}}else this.close()},calcSize:function(e){let t=0;for(let o of e.markers)o.hidden||t++;t?t<8?(this.computedWidth=24*(t+1)+31+"px",this.computedHeight="40px"):(this.computedWidth="186px",this.computedHeight=24*Math.ceil(t/7)+54+"px"):this.close()},changeMarker:function(e){e!=this.markerId&&this.$store.execSnowbrushAction({commandId:"editor.addMarker",args:{markerId:e}}),this.close()},deleteMarker:function(){this.$store.execSnowbrushAction({commandId:"delete",args:{targets:[this.markerView]}}),this.close()},close:function(){this.$refs.popover.close()},onPopoverClose:function(){this.markerId="",this.$store.commit("editor/SELECTED_MARKER_VIEW",{markerView:null}),this.$store.commit("workbench/POPOVER_VISIBLE",{name:""})}}}},45187:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=o(90336),r=o(48932),a=o(90544);t.Z=n.createComponent({name:"mostly-used-labels",props:{labelText:String},setup(e,t){const o=t.root.$store,s=n.computed((()=>{const e=o.state.editor,t=o.state.editor.sheetContentChangedTrigger;return{isOutlinerMode:o.state[i.SHARED].editorMode===r.EDITOR_MODE_OUTLINER,trigger:e&&(e.isVisible||t)}})),l=n.computed((()=>{if(!s.value.trigger)return null;const e=o.state.editor.sbEditorWrapper.value;if(!e)return null;if(!e.getCurrentSheetEditor())return null;const t=e.model.sheets,n=o.state.editor.sbEditorWrapper.value;return t.find((e=>e.id===n.currentSheetId))})),c=n.computed((()=>{if(!l.value)return[];const e=l.value.toJSON(),{rootTopic:t}=e,o={},n={};return a.traverseTopic(t,{isOutlinerMode:s.value.isOutlinerMode,visitors:{label(e,t,i){n[i.id]=n[i.id]||{},e.forEach((e=>{(e=e.trim())in n[i.id]||(n[i.id][e]=!0,e in o?o[e]+=1:o[e]=1)}))}}}),Object.keys(o).map((e=>({label:e,count:o[e]}))).sort(((e,t)=>t.count-e.count)).map((e=>e.label))}));n.watch(c,(e=>{t.emit("update-visible",!!e.length)}));return{mostlyUsedLabels:c,addLabel:o=>{const{labelText:n}=e,i=n.split(/,|/).filter((e=>!!e));i.push(o);const r=i.join(",");t.emit("update-label",r)}}}})},68822:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(90571),a=o(48932),s=o(90336),l=i(o(11222)),c=i(o(36556)),d=i(o(53436)),u=i(o(20823)),p=i(o(92730)),h=l.default.for("outliner");t.default={name:"OutlineMode",components:{Outliner:c.default,audiobar:d.default,branchonlybar:p.default,statusbar:u.default},setup(e,t){r.provide("editingStore",h),r.provide("staticMode",!1);const o=t.root.$store,i=r.computed((()=>o.state.editor.isSheetBarVisible&&l.value)),l=r.computed((()=>o.state[s.SHARED].editorMode===a.EDITOR_MODE_OUTLINER)),c=r.computed((()=>h.state.rootTopicId!==h.originalRootTopicId)),d=r.computed((()=>o.getters["preferences/appearance"]));return r.watch((()=>l),(e=>n(this,void 0,void 0,(function*(){if(e){o.commit("workbench/POPOVER_VISIBLE",{name:""}),o.commit("editor/AUDIO_BAR_MODE",{audioBarMode:""});let e=o.state.editor.sbEditorWrapper.value.getCurrentSheetEditor();const t=e.model;h.state.ready&&h.ownerSheet&&h.ownerSheet.getId()===e.model.getId()||h.init(t),h.commit("refreshSheet")}}))),{sync:!0}),{appearance:d,isSheetBarVisible:i,isOutlineMode:l,isInShowBranchOnlyMode:c}}}},4709:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=i(o(61027)),s=o(90571),l=i(o(71171)),c=i(o(85622)),d=o(96486),u=o(90336),p=i(o(2286)),h=o(36414),f=o(48932),m=o(47977),g=o(31381),v=o(9613),b=i(o(72185)),A=i(o(64349)),E=i(o(47775)),T=i(o(13545)),y=i(o(60030)),C=i(o(88779)),S=i(o(29514)),k=i(o(45993));o(58426);const w=o(90255),x=o(2201),I=b.default.for("context-menu"),{SHEET_SWITCHED:_}=a.default.constant.EVENTS;t.default=s.createComponent({name:"outliner",components:{topic:E.default,RootTopic:A.default,PlaceholderLine:T.default,TopicMarkersEditor:y.default,TopicLabelsEditor:C.default,TopicHyperlinkEditor:S.default,TopicEquationEditor:k.default},setup(e,t){const o=t.root.$store,i=o.getters["l10n/T"],a=o.handleCommand,b=s.ref(null),A=s.inject("editingStore"),E=s.inject("staticMode");A.handleCommand=a,A.updateContexts=e=>o.dispatch(`${u.SHARED}/updateContexts`,e),I.handleCommand=a,I.getCurrentLanguage=()=>o.getters["preferences/language"],I.$T=i,I.canHandleCommand=e=>{const t=o.getters[`${u.SHARED}/commandById`](e);return!!t&&t.enabled},I.getUndo=()=>P().getCurrentSheetEditor().model.getUndo();const T=s.computed((()=>o.state[u.SHARED].editorMode===f.EDITOR_MODE_OUTLINER)),y=s.ref({top:0,right:0,left:0}),C=s.ref({id:null,depth:0}),S=s.ref(0),k=[];let B=null,O=null;const M=s.computed((()=>A.state.editable)),L=s.computed((()=>A.state.draggingTopicIds.length>0)),R=s.computed((()=>A.rootTopicId)),N=s.computed({get:()=>(o.getters["editor/outlinerZoomScaleForActiveSheet"]||120)/100,set:e=>{e>3||e<.8||o.commit("editor/updateOutlinerSheetStatus",{id:o.state.editor.activeSheetId,zoomScale:Math.round(100*e)})}}),D=s.computed((()=>o.getters["preferences/appearance"]));s.watch((()=>M.value),(()=>{const e=b.value;e&&!M.value&&e&&e.focus&&e.focus()})),s.watch((()=>o.getters["focus/isFocusMissing"]),(()=>{if(o.state[u.SHARED].editorMode===f.EDITOR_MODE_OUTLINER){const e=b.value;if(!e)return;e.focus()}}));const P=()=>o.state.editor.sbEditorWrapper.value,F=(e,t)=>{const o=b.value;if(!t)return;e.dataTransfer.dropEffect="move";const n=t.isFloating?A.flattenedFloatingTopics:A.flattenedSheet;if(A.state.draggingTopicIds.indexOf(t.id)>=0){const o=n.findIndex((e=>e.id===t.id));if(o>0)return void F(e,n[o-1])}const i=$(t.id);if(!i||!i.show)return;const r=i.$el;if(!r)return;const[a,s]=g.mouseEventOffset(e,document.querySelector(".outline-paper")),l=g.getCoords(r,document.querySelector(".outline-paper")||document.documentElement);let c=[];if(s<(r.offsetTop+l.height/2)*N.value){const o=n.findIndex((e=>e.id===t.id));if(o>0)return void F(e,n[o-1]);if(t.parent!==A.rootTopicId)return void F(e,W(t.parent));c=[{id:A.rootTopicId,depth:0}]}else c=m.calculateDropOptions(n,t.id,A.state.draggingTopicIds,A.rootTopicId,A.zipStatus);if(c.length>0&&"TOPIC"!==A.state.draggingType&&(c=[c.pop()].filter((({depth:e,id:t})=>e>0||t===A.rootTopicId))),c.length<=0)return;document.body.offsetWidth;const d=o.getBoundingClientRect().left;let u=Math.round((a-d)/(22*N.value))-1;u<0&&(u=0),u>c[c.length-1].depth&&(u=c[c.length-1].depth);const p=c.find((({depth:e})=>u===e));if(p){if(p.id===A.rootTopicId)return void j(p.id,p.depth);A.state.draggingTopicIds.indexOf(p.id)<0&&j(t.id,p.depth)}},W=e=>{const t=A.fullFlattenedSheet,o=t.findIndex((t=>t.id===e));return t[o]},$=e=>k.find((t=>t.topic.id===e)),U=e=>o.state.editor.sbEditorWrapper.value.getCurrentSheetEditor().model.findComponentById(e),j=(e,t=0)=>{const o=b.value;if(!o)return;if(A.state.draggingTopicIds.indexOf(e)>=0)return;if(e===A.rootTopicId){C.value={id:A.rootTopicId,depth:0};const e=A.flattenedSheet[0].id,t=o.querySelector(`.topic#topic-${e}`).parentElement.offsetTop;return void Y(t,0)}C.value={id:e,depth:t};const n=o.querySelector(`.topic#topic-${e}`).parentElement;if(!n)return;const i=n.offsetTop+n.offsetHeight;Y(i,22*t)},H=(e,t)=>{const o=A.state.selectionIds.slice();if(o.length>=A.fullFlattenedSheet.length)return o;let n;if(e.id!==A.rootTopicId){if(n=W(e.id),!n)return o}else n={id:A.rootTopicId,depth:0,parent:""};if(A.state.draggingTopicIds.indexOf(n.id)>=0)return[];switch(!0){case n.depth<e.depth:for(const e of t)a("outliner.insertAsSubTopic",{topicId:e,targetTopicId:n.id,refresh:!1});break;case n.depth===e.depth&&n.id!==A.rootTopicId:for(const e of t)a("outliner.insertAfterTopic",{topicId:e,targetTopicId:n.id});break;case n.id!==A.rootTopicId&&e.depth<n.depth:let o=n.depth;for(;o-e.depth>0;)n=m.transformModelTopic(A.ownerSheet.findComponentById(n.parent)),o--;for(const e of t)a("outliner.insertAfterTopic",{topicId:e,targetTopicId:n.id,refresh:!1});break;case n.id===A.rootTopicId&&0===e.depth:for(const e of t)a("outliner.insertAsSubTopic",{topicId:e,targetTopicId:n.id,refresh:!1})}return A.commit("clearSelection"),setTimeout((()=>{A.commit("refreshSheet")}),50),o},Y=d.debounce((function(e,t){y.value.top=e,y.value.left=t}),20),V=(e=!1)=>n(this,void 0,void 0,(function*(){S.value+=1,yield r.default.nextTick();const n=t.refs["root-topic"];if(n.updateTitle(A.rootTopic.get("title")||"",e),n.$refs.markers&&n.$refs.markers.refreshMarkers(),n.$refs.labels&&n.$refs.labels.refreshLabels(),n.$refs.image&&n.$refs.image.refreshImage(),n.$refs.notes&&n.$refs.notes.refreshNotes(!0),n.$refs.equation&&n.$refs.equation.refreshEquation(),n.$refs.hyperlink&&n.$refs.hyperlink.refreshHyperlink(),k&&k.length>0){const t=A.fullFlattenedSheet;for(const o of t){const t=$(o.id);t&&(t.updateTitle(o.title||"",e),t.show&&(t.$refs.markers&&t.$refs.markers.refreshMarkers(),t.$refs.labels&&t.$refs.labels.refreshLabels(),t.$refs.image&&t.$refs.image.refreshImage(),t.$refs.equation&&t.$refs.equation.refreshEquation(),t.$refs.notes&&t.$refs.notes.refreshNotes(!0),t.$refs.hyperlink&&t.$refs.hyperlink.refreshHyperlink()))}}if(t.refs["root-topic"]&&(t.refs["root-topic"].title=A.rootTopic.getTitle()),o.state[u.SHARED].sheetRendering&&null!==o.state[u.SHARED].sheetRenderingStartAt){const e=(new Date).getTime()-o.state[u.SHARED].sheetRenderingStartAt;e<f.MIN_SHEET_LOADING_TIME&&(yield h.sleep(f.MIN_SHEET_LOADING_TIME-e)),o.commit(`${u.SHARED}/updateSheetRendering`,{sheetRendering:!1,sheetRenderingStartAt:null}),yield r.default.nextTick();document.querySelector("#outlinemode").scrollTo(0,0)}})),z=()=>n(this,void 0,void 0,(function*(){""!==A.state.currentEditingTopicId?A.emit("focus-"+A.state.currentEditingTopicId):A.emit("focus-"+A.rootTopicId)}));let Z=null;const G=()=>n(this,void 0,void 0,(function*(){const e=P().getCurrentSheetEditor(),n=e.model;A.init(n),o.state.editor.isBranchOnlyMode&&!A.isInShowBranchOnlyMode&&A.commit("setRootTopic",e.getSheetView().activatedTopBranchView.model),yield r.default.nextTick(),A.commit("refreshSheet"),t.refs["root-topic"]&&t.refs["root-topic"].focus(),A.emit("sheetSwitched")}));return s.watch((()=>o.state[u.SHARED].editorMode),(e=>n(this,void 0,void 0,(function*(){const t=o.state.editor.sbEditorWrapper.value,n=t.getCurrentSheetEditor().model.getUndo();e===f.EDITOR_MODE_OUTLINER?(n.pushTag("outliner"),yield V(),z()):n.popTag("outliner"),e===f.EDITOR_MODE_OUTLINER?t.on(_,G):t.off(_,G)}))),{immediate:!0}),s.onBeforeMount((function(){A.on("refreshSheet",(e=>V(e))).on("clearSelection",(()=>(A.commit("toggleEditable",!0),A.commit("toggleMouseDown",!1),B.clearSelection(),void A.commit("clearDragging")))).on("setRootTopic",(()=>n(this,void 0,void 0,(function*(){yield r.default.nextTick();const e=document.querySelector("#outlinemode");if(e)try{e.scrollTo(0,0)}catch(t){e.scrollTo({top:0,left:0,behavior:"smooth"})}}))))})),s.onMounted((function(){return n(this,void 0,void 0,(function*(){const e=b.value;e&&(E||(O=x([e.closest("#outlinemode")],{margin:100,maxSpeed:5,scrollWhenOutside:!0,autoScroll(){return this.down&&A.isDragging}})),Z=(()=>{if("win32"===process.platform){function e(){o.commit("editor/toggleInputMethodInputting",!0)}function t(){o.commit("editor/toggleInputMethodInputting",!1)}function n(e){const t=e.isComposing;o.commit("editor/toggleInputMethodInputting",t)}function i(e){const t=o.getters["keybindings/codeToKey"](e.code),n=229===e.keyCode&&" "!==t&&"Enter"!==t&&"NumpadEnter"!==t&&"Escape"!==t;o.commit("editor/toggleInputMethodInputting",n)}return document.addEventListener("compositionstart",e,!0),document.addEventListener("compositionend",t,!0),document.addEventListener("input",n,!0),document.addEventListener("keydown",i,!0),()=>{document.removeEventListener("compositionstart",e),document.removeEventListener("compositionend",t),document.removeEventListener("input",n),document.removeEventListener("keydown",i)}}})(),B=w.create({selectables:[".topic-inner"],boundaries:["#outlinemode"],selectionAreaContainer:".outline-paper",startThreshold:50}).on("beforestart",(({oe:e})=>{const t=e.target;return!(0!==e.button||!e.metaKey&&(t.classList.contains("topic-inner-text")||t.classList.contains("topic-dot")))})).on("start",(function({selected:e,oe:t}){A.commit("clearSelection"),t.ctrlKey||t.metaKey||(requestAnimationFrame((()=>{for(const t of e)t.closest(".topic-wrap-slot").classList.remove("selected")})),this.clearSelection()),A.commit("toggleSelecting",!0)})).on("move",(({selected:e,changed:{removed:t}})=>{for(const t of e){const e=t.closest(".topic");e&&A.commit("addSelection",e.dataset.topicId)}for(const e of t){const t=e.closest(".topic");t&&A.commit("removeSelection",t.dataset.topicId)}})).on("stop",(({selected:e})=>{A.commit("clearSelection");e.map((e=>{const t=e.closest(".topic");if(t)return t.dataset.topicId})).filter(Boolean).forEach((e=>A.commit("addSelection",e))),A.commit("toggleEditable",!1),A.commit("toggleSelecting",!1)})),yield r.default.nextTick(),A.commit("refreshSheet"),yield z())}))})),s.onBeforeUnmount((()=>{B&&B.destroy(),O&&O.destroy(),Z&&Z(),P().off(_,G),A.removeAllListeners("refreshSheet").removeAllListeners("clearSelection").removeAllListeners("setRootTopic"),A.destroy()})),{placeholder:y,rootTopicId:R,editable:M,dragging:L,topics:k,scale:N,appearance:D,getAttachedSheet:()=>A.flattenedSheet.filter((({depth:e})=>e<=v.MAX_DISPLAY_LEVEL)),getDetachedSheet:()=>A.flattenedFloatingTopics.filter((({depth:e})=>e<=v.MAX_DISPLAY_LEVEL)),addOnlyEmptyTopic:()=>{if(!b.value)return;const e=g.getTopicTextElementById(A.rootTopicId,b.value);e&&(g.setCaretCharacterOffsetWithIn(e,g.getTextElementContent(e).length),a("outliner.insertEmptySubTopic",{topicId:A.rootTopicId,refresh:!0}))},handleDragStart:(e,t)=>n(this,void 0,void 0,(function*(){const n=t.isFloating?A.flattenedFloatingTopics:A.flattenedSheet;if(!e.target.classList.contains("topic-dot"))return;if(o.state[u.SHARED].contexts["focus.input"]||"NOTES"===A.state.selectionType){const e=A.state.currentEditingTopicId;A.emit("saveTopicNotes-"+e),yield new Promise((t=>A.once("savedTopicNotes-"+e,(()=>{t()}))))}A.state.selectionIds.indexOf(t.id)<0&&(A.commit("clearSelection"),A.commit("addSelection",t.id)),A.commit("toggleMouseDown",!0);const i=A.state.selectionIds.slice();if(i.length>n.length)return;A.commit("clearDragging"),A.commit("setDraggingType","TOPIC"),i.forEach((e=>A.commit("addDragging",e)));const r=A.tidySelection();for(const e of r){const t=m.findChildTopics(n,e);for(const e of t)A.commit("addDragging",e.id)}const a=$(t.id).$el.querySelector(".topic-inner"),s=g.createTopicGhostImage(a,A.state.draggingTopicIds.length);s.classList.add("dragging"),"dark"===D.value&&s.classList.add("dark"),e.dataTransfer.setDragImage(s,-5,-5),e.dataTransfer.effectAllowed="move",A.commit("setGhostImageCallback",s.querySelector(".topic-inner").id),document.querySelector(".uk-window").classList.add("grabbing")})),handleDragOver:F,handleDragEnter:(e,t)=>{e.dataTransfer.items.length>0&&"file"===e.dataTransfer.items[0].kind&&(A.commit("toggleMouseDown",!0),e.dataTransfer.items[0].type.startsWith("image/")?A.commit("setDraggingType","IMAGE"):A.commit("setDraggingType","ATTACHMENT"))},handleDragLeave:(e,t)=>{"TOPIC"===A.state.draggingType||e.clientX||e.clientY||A.commit("setDraggingType","")},handleDragEnd:()=>n(this,void 0,void 0,(function*(){const e=b.value;if(e)switch(document.querySelector(".uk-window").classList.remove("grabbing"),A.commit("toggleMouseDown",!1),A.state.draggingType){case"TOPIC":const t=H(C.value,A.tidySelection().reverse());yield A.commit("clearSelection");const o=Array.from(t).map((t=>{const o=g.getTopicTextElementById(t,e);if(o)return o.closest(".topic-wrap-slot")})).filter(Boolean);requestAnimationFrame((()=>{o.forEach((e=>e.classList.add("selected"))),setTimeout((()=>{o.forEach((e=>e.classList.remove("selected")))}),500)}));const n=document.body.querySelector("#"+A.state.ghostImgElementId);n&&(document.body.removeChild(n.parentElement),n.remove()),A.commit("setGhostImageCallback","")}})),handleDrop:e=>n(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation();const t=C.value.id,n=U(t);A.commit("toggleMouseDown",!1);const i=e.dataTransfer;switch(A.state.draggingType){case"IMAGE":if(i.files.length>0){const e=i.files[0],n=yield p.default.readFile(e.path),r=c.default.extname(e.name).substring(1),s=yield o.dispatch("wd/generateXap",{extType:r,data:n});A.updateContexts({"focus.outliner":!0}),setTimeout((()=>{A.commit("hideTopicEquation-"+t),a("outliner.addLocalImage",{topicId:t,src:s})}),100)}else if(i.getData("text/plain").length>2){const{srcTopicId:e,image:o}=JSON.parse(i.getData("text/plain")),n=P().getCurrentSheetEditor().model.getUndo();n.keepAllInOne(!0),yield a("outliner.removeTopicImage",e),yield a("outliner.addTopicImage",Object.assign({topicId:t},o)),n.keepAllInOne(!1),A.commit("hideTopicEquation",t)}A.commit("setDraggingType","");break;case"ATTACHMENT":if(i.files.length>0){const e=i.files[0],s=yield p.default.readFile(e.path),d=c.default.extname(e.name).substring(1),u="resources/"+l.default()+d;o.state.wd.manifestWrapper.value["file-entries"][u]={};const h="xap:"+u,f=e.path.substr(e.path.lastIndexOf(c.default.sep)+1);yield p.default.writeFile(c.default.join(o.state.wd.tempStorage,u),s);const m=l.default();yield a("outliner.insertEmptySubTopic",{topicId:t,newTopicId:m,title:f,index:n.children("attached").length,refresh:!0}),yield r.default.nextTick(),yield a("outliner.changeHyperlink",{topicId:m,link:h})}A.commit("setDraggingType","");break;case"EQUATION":if(i.getData("text/plain").length>2){const{srcTopicId:e,mathJaxInfo:o}=JSON.parse(i.getData("text/plain")),n=P().getCurrentSheetEditor().model.getUndo();n.keepAllInOne(!0),yield a("outliner.updateTopicEquationInfo",{topicId:t,mathJaxInfo:o}),yield a("outliner.removeTopicEquation",{topicId:e}),n.keepAllInOne(!1),A.commit("hideTopicImage",t)}A.commit("setDraggingType","")}})),handleClick:e=>{if(0!==e.button)return;const t=e.target;if(I.commit("toggleOpened",!1),!t.classList.contains("topic-dot")&&A.state.selectionIds.length>0&&!A.state.isSelecting&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey)return e.stopPropagation(),A.commit("setCurrentEditingTopic",""),A.commit("setStartTopic",""),void A.commit("clearSelection");const o=A.state.currentEditingTopicId||A.state.startTopicId,n=t.closest(".topic");if(!n)return;const i=n.dataset.topicId;if(e.shiftKey&&A.state.selectionIds.length<=0&&(o&&i&&o===i||!o&&i))return;if(!e.shiftKey)return;if(!o||!i)return;A.commit("toggleEditable",!1);let r=A.flattenedSheet.findIndex((e=>e.id===o)),a=A.flattenedSheet.findIndex((e=>e.id===i));a<r&&([r,a]=[a,r]);const s=A.flattenedSheet.slice(r,a+1);if(!(s.length<=1)){g.clearTextSelection();for(const e of s)A.commit("addSelection",e.id)}},handleMouseDown:(e,t)=>{if(0!==e.button)return!1;e.target.classList.contains("topic-inner-text")&&(A.commit("toggleMouseDown",!0),t&&""===A.state.startTopicId&&A.commit("setStartTopic",t.id))},handleMouseOver:(e,t)=>n(this,void 0,void 0,(function*(){if(yield h.sleep(50),A.state.mouseIsDown&&!A.isDragging){const o=A.fullFlattenedSheet;g.clearTextSelection();let n=o.findIndex((e=>e.id===A.state.startTopicId)),i=o.findIndex((e=>e.id===t.id));e.movementY;const r=A.state.selectionIds;n>i&&([n,i]=[i,n]);const a=o.slice(n,i+1).map((({id:e})=>e)),s=r.filter((e=>a.indexOf(e)<0));a.forEach((e=>A.commit("addSelection",e))),s.forEach((e=>A.commit("removeSelection",e)))}})),handleMouseUp:e=>{A.commit("toggleMouseDown",!1);e.target.classList.contains("outliner-whitespace")&&A.commit("clearSelection")},handleTitleChange:(e,t,o,i=!0)=>n(this,void 0,void 0,(function*(){if(!W(t.id))return;if(!b.value)return;const n=A.fullFlattenedSheet.find((e=>e.id===t.id));n&&(n.title=e,yield a("outliner.changeTopicTitle",{topicId:t.id,title:e,focus:o,silent:i}))})),handleRootTopicTitleChange:(e,t,o,n=!0)=>{a("outliner.changeTopicTitle",{topicId:A.rootTopicId,title:e,focus:o,silent:n})},handlePinch:e=>{T.value&&e.ctrlKey&&(N.value-=.01*e.deltaY)},hasChildTopics:m.hasChildTopics,isZipped:m.isZipped,countChildTopics:m.countChildTopics,getSBEditor:P,getEditingStore:()=>A,refreshSheet:V,updateKey:S,el:b,editingStore:A}}})},78318:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571);t.Z={name:"PlaceholderLine",props:{top:{type:Number,default:0,required:!0},left:{type:Number,default:0,required:!0},scale:{type:Number,default:1}},setup(e,t){const o=n.inject("editingStore");return{using:n.computed((()=>o.state.mouseIsDown&&(o.state.draggingTopicIds.length>0||"IMAGE"===o.state.draggingType||"ATTACHMENT"===o.state.draggingType||"EQUATION"===o.state.draggingType))),style:n.computed((()=>({left:e.left+"px",top:e.top+"px"})))}}}},6733:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=o(90571),s=i(o(72185)),l=o(31381),c=i(o(37529)),d=i(o(46925)),u=i(o(30371)),p=i(o(59239)),h=i(o(33976)),f=i(o(65225)),m=i(o(83602)),g=o(47977),v=s.default.for("context-menu");t.default={name:"RootTopic",components:{TopicNote:d.default,TopicImage:u.default,TopicLabels:h.default,TopicMarkers:f.default,TopicHyperlink:m.default,TopicEquation:p.default},props:{topicId:{type:String,required:!0}},setup(e,t){const o=a.inject("editingStore"),i=t.root.$store,s=i.handleCommand,d=a.ref(""),u=a.ref(!1),p=a.computed({get:()=>u.value,set:e=>{u.value=e,i.commit("editor/toggleInputMethodInputting",e)}}),h=a.computed((()=>o.state.editable)),f=a.ref(!0),m=()=>o.ownerSheet.findComponentById(e.topicId),b=(e=-1)=>{if(!t.refs.title)return;const o=t.refs.title;e<0&&(e=l.getTextElementContent(o).length),l.scrollToElement(o),l.setCaretCharacterOffsetWithIn(o,e)},A=()=>n(this,void 0,void 0,(function*(){if(!t.refs.title)return;const e=t.refs.title;f.value=Math.max(d.value.length,l.getTextElementContent(e).length)<=0})),E=(e,o=!0)=>n(this,void 0,void 0,(function*(){const n=t.refs.el;if(!n)return;const i=t.refs.title;if(!document.contains(n))return;if(!t.refs.title||d.value===e&&l.getTextElementContent(i)===e)return;if(!document.contains(n))return;let a=0;const s=c.default(l.getTextElementContent(i),e);for(;s.length>0&&s[0][0]===c.default.EQUAL;)a+=s.shift()[1].length;s.length>0&&s[0][0]===c.default.DELETE&&(a+=s[0][1].length);const u=a;for(const[e,t]of s.filter((([e])=>e!==c.default.EQUAL)))e===c.default.INSERT?a+=t.length:e===c.default.DELETE&&(a-=t.length);a=a<0?0:a,d.value=e,i&&l.getTextElementContent(i)!==e&&l.updateTextElement(i,e),yield A(),o&&u!==a&&(yield r.default.nextTick(),l.setCaretCharacterOffsetWithIn(i,a))})),T=()=>{if(m().getLabel().split(",").filter(Boolean).length>0)return;const n=t.refs.el;if(!n||!document.body.contains(n))return;const i=n.getBoundingClientRect();o.commit("setCurrentEditingTopic",e.topicId),o.commit("setLabelsEditorState",{open:!0,top:i.top,left:i.left,right:i.left+22,bottom:i.top+i.height-5})};return a.onMounted((()=>n(this,void 0,void 0,(function*(){o.on("showTopicLabelsPopover-"+e.topicId,(()=>T())).on("showHyperlinkEditor-"+e.topicId,(()=>(()=>{const n=t.refs.el;if(!n||!document.body.contains(n))return;const i=m().get("href");if(i&&i.length>0)return;const r=n.getBoundingClientRect();o.commit("setCurrentEditingTopic",e.topicId),o.commit("setHyperlinkEditorState",{open:!0,top:r.top,left:r.left,right:r.left+22,bottom:r.top+r.height-5})})())).on("showEquationEditor-"+e.topicId,(()=>(()=>{const n=t.refs.el;if(!n||!document.body.contains(n))return;const i=n.getBoundingClientRect();o.commit("setCurrentEditingTopic",e.topicId),o.commit("setEquationEditorState",{open:!0,top:i.top,left:i.left,right:i.left+22,bottom:i.top+i.height-5})})())).on("changeTopicTitle-"+e.topicId,((e,t)=>E(e,t))).on("focus-"+e.topicId,b)})))),a.onUpdated((()=>{setTimeout((()=>{if(e.topicId){const e=m();if(!e)return;d.value=e.getTitle()}}),50)})),{title:d,compositionStarted:p,editable:h,isEmpty:f,updateTitle:E,refreshTitle:(e=!0)=>{const t=m();if(!t)return;const o=t.getTitle();E(o,e)},input:()=>n(this,void 0,void 0,(function*(){if(yield A(),p.value)return;const e=g.transformModelTopic(m()),o=t.refs.title;document.contains(o)&&t.emit("titlechange",l.getTextElementContent(o),e,!0,!1)})),focus:b,onFocus:()=>o.commit("setCurrentEditingTopic",e.topicId),onBlur:()=>{},openLabelsEditor:T,onKeydown:o=>{const n=t.refs.title;if(p.value)return;if((o.ctrlKey||o.metaKey)&&(66==o.keyCode||73==o.keyCode||85==o.keyCode))return o.preventDefault();const{isOnLastLine:i}=l.calculateCaretLinePos(n);"ArrowDown"===o.key&&i&&(o.preventDefault(),s("outliner.selectionNavigateDown",e.topicId))},openMenu:i=>n(this,void 0,void 0,(function*(){"contextmenu"!==i.type&&l.clearTextSelection();const n=e.topicId,a=t.refs.title;if(l.getTextElementContent(a).length<=0)return;return l.getSelectionLength(a)<=0?void 0:(v.commit("setTargetTopic",n),o.commit("setCurrentEditingTopic",n),v.commit("switchMenuItems","TEXT"),yield r.default.nextTick(),v.commit("toggleOpened",!0),!1)})),refreshEmptyStatus:A}}}},35645:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=o(90571),s=i(o(72185)),l=i(o(85622)),c=o(28441),d=s.default.for("context-menu");t.default={name:"TopicAudioNotes",props:{topicId:{type:String,required:!0}},setup(e,t){const o=a.inject("editingStore"),i=t.root.$store,s=a.ref({}),u=()=>{const t=(()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(e.topicId)})();t&&(s.value=t.getAudioNotes())},p=()=>n(this,void 0,void 0,(function*(){const e=s.value.resourceRefs[0],t=i.state.wd.tempStorage,o=l.default.join(t,e.replace("xap:","")),n=o.split("/").slice(-1).pop();c.saveAs(i,o,n)}));return a.onBeforeUnmount((()=>{o.removeAllListeners("changeAudioNotes-"+e.topicId)})),(()=>{u(),o.on("changeAudioNotes-"+e.topicId,(()=>n(this,void 0,void 0,(function*(){yield r.default.nextTick(),u()})))).on("saveAsAudioNote-"+e.topicId,(()=>p()))})(),{audioNotes:s,playAudioNotes:()=>n(this,void 0,void 0,(function*(){if(!s.value)return;const e="open_new_audio_play"===i.state.editor.oldAudioBarMode?"audio_play":"open_new_audio_play";i.commit("editor/AUDIO_BAR_MODE",{audioBarMode:e,audioAutoplay:!0,audioFilePath:(yield i.dispatch("wd/loadXap",s.value.resourceRefs[0])).replace(/^file:\/\//,"")})})),openMenus:()=>n(this,void 0,void 0,(function*(){d.commit("setTargetTopic",e.topicId),d.commit("switchMenuItems","AUDIO-NOTES"),yield r.default.nextTick(),d.commit("toggleOpened",!0)}))}}}},58647:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=i(o(61027)),s=o(83450),l=o(90571),c=i(o(53597)),d=o(96486),u=i(o(24678)),p=o(99492),h=o(90336),f=o(48932);t.default=l.createComponent({components:{Popover:c.default},setup(e,t){const o=l.inject("editingStore"),i=l.getCurrentInstance(),c=l.computed((()=>g.getters["preferences/language"])),m=l.computed((()=>g.getters["preferences/appearance"])),g=t.root.$store,v=l.ref(""),b=l.ref(null),A=g.handleCommand,E=l.ref(null),T=l.computed((()=>o.state.equationEditor.open)),y=l.computed((()=>o.state.equationEditor.left)),C=l.computed((()=>o.state.equationEditor.right)),S=l.computed((()=>o.state.equationEditor.top)),k=l.computed((()=>o.state.equationEditor.bottom)),w=l.computed((()=>o.state.currentEditingTopicId)),x=()=>I().getMathJaxText(),I=()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(w.value)},_=()=>{o.commit("setEquationEditorState",{open:!1})},B=d.debounce((e=>{if(b.value&&"string"==typeof e){for(;b.value.hasChildNodes();)b.value.removeChild(b.value.lastChild);if(e=e.trim()){const o=window.getComputedStyle(b.value),n=parseFloat(o.height)-12,i=parseFloat(o.width)-12,r=((e,t)=>{const o=a.default.utils.utils.mathJaxExporterUtil.export(e,{lang:t,fontFamily:"NeverMind, monospace"});return o&&o.result})(e,c.value);let s=0,l=0;if(r){b.value.append(r);const e=window.getComputedStyle(r);s=parseFloat(e.height),l=parseFloat(e.width),b.value.removeChild(r)}if(!s||!l){const e=(t=c.value,a.default.utils.utils.mathJaxExporterUtil.generateErrorMessageSVG({lang:t,fontFamily:"NeverMind, monospace"}));b.value.append(e)}else{const e=Math.min(n/s,i/l,1);r.style.height=s*e+"px",r.style.width=l*e+"px",b.value.append(r)}}else{const e=document.createElement("span");e.classList.add("uk-text-bold"),e.style.opacity="0.3",e.style.fontSize="13px",e.innerText=i.$T("Equation Preview"),b.value.append(e)}var t}}),0);return l.onBeforeUnmount((()=>{_();""===(x()||"")&&s.trackEvent({eventCategory:"Equation",eventAction:"saveEmptyEquation"})})),l.watch((()=>T.value),(e=>n(this,void 0,void 0,(function*(){e&&(yield r.default.nextTick(),v.value=x()||"",B(v.value),E.value&&E.value.show(),s.trackEvent({eventCategory:"Equation",eventAction:""===v.value?"newEquation":"editEquation"}))})))),l.watch((()=>c.value),(()=>{B(v.value)})),l.watch((()=>g.state[h.SHARED].editorMode===f.EDITOR_MODE_OUTLINER),(e=>{!e&&E.value&&E.value.close()})),{isEditorOpened:T,closePopover:_,popover:E,popoverLeft:y,popoverRight:C,popoverTop:S,popoverBottom:k,popoverWidth:394,popoverHeight:280,equation:v,previewContainer:b,handleEquationInput:e=>{v.value=e,B(e)},handleBlur:()=>{(e=>{if(!g.state.editor.sbEditorWrapper.value)return;if(x()===e)return;const t=w.value;setTimeout((()=>{e?A("outliner.changeTopicEquation",{topicId:t,mathJaxText:e}):A("outliner.removeTopicEquation",{topicId:t})}),100)})(v.value)},handleGoEquationHelp:()=>{s.trackEvent({eventCategory:"Equation",eventAction:"clickEquationHelp"}),u.default.fetch(p.XOS.GO_EQUATION_HELP,{})},appearance:m}}})},23255:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=i(o(61027)),s=o(90571),l=o(90336),c=o(48932),d=i(o(72185)),u=o(9613),p=o(68061),h=o(28441),f=d.default.for("context-menu");t.default={name:"TopicEquation",props:{topicId:{type:String,required:!0}},setup(e,t){const o=s.inject("editingStore"),i=t.root.$store,d=i.handleCommand,m=s.ref(0),g=s.ref({}),v=s.ref(!1),b=s.ref(!1);let A=null;const E=s.computed((()=>i.getters["editor/outlinerZoomScaleForActiveSheet"]/100)),T=s.computed((()=>i.getters["preferences/language"])),y=s.ref({width:0,height:0,ratio:1}),C=s.computed((()=>o.state.equationSownTopicIds.indexOf(e.topicId)>=0&&g.value)),S=s.computed((()=>o.state.currentEditingTopicId===e.topicId&&"EQUATION"===o.state.selectionType&&i.state[l.SHARED].editorMode===c.EDITOR_MODE_OUTLINER)),k=s.computed((()=>{let e=v.value?y.value.width:g.value.width||0,t=v.value?y.value.height:g.value.height||0;return e>u.IMAGE_SIZE_LIMIT.MAX?(e=u.IMAGE_SIZE_LIMIT.MAX,t=e*(v.value?y.value.ratio:g.value.ratio)):(g.value.originalWidth/2>e||g.value.originalHeight/2>t)&&(e=g.value.originalWidth/2,t=e*(v.value?y.value.ratio:g.value.ratio)),{width:e+"px",height:t+"px",update:m.value}})),w=()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(e.topicId)},x=(e,t)=>{if(!i.state.editor.sbEditorWrapper.value)return;const o=a.default.utils.utils.mathJaxExporterUtil.export(e,{lang:t,fontFamily:"NeverMind, monospace"});return o&&o.result},I=()=>n(this,void 0,void 0,(function*(){b.value=!1;const n=w(),i=n&&n.getMathJaxInfo&&n.getMathJaxInfo()||"",s=n&&n.getMathJaxText();let l=x(s,T.value);if(!s||!i)return void _();C.value||(g.value={},o.commit("showTopicEquation",e.topicId,!1),yield r.default.nextTick());let c=(e=>{const t=x(e,T.value),o=document.createElement("div");o.style.position="fixed",o.style.height="0px",o.style.width="0px",o.style.overflow="hidden",o.style.visibility="hidden",o.append(t),document.body.append(o);const n=t.getBoundingClientRect(),i={height:n.height,width:n.width};return o.removeChild(t),document.body.removeChild(o),i})(s);var d;(0===c.width||0===c.height)&&(d=T.value,l=a.default.utils.utils.mathJaxExporterUtil.generateErrorMessageSVG({lang:d,fontFamily:"NeverMind, monospace"}),c.height=parseFloat(l.getAttribute("height")),c.width=parseFloat(l.getAttribute("width"))),_();const u=t.refs.el;if(!u)return;l.style.verticalAlign="middle",u.prepend(l),A=l;const p=c.height/c.width;let h=i.content.width||1.5*c.width,f=h*p;g.value={width:h,height:f,ratio:p,originalWidth:c.width,originalHeight:c.height,text:s},m.value++})),_=()=>{const e=t.refs.el;e&&(A&&e.contains(A)&&e.removeChild(A),g.value=null)},B=e=>{if(!v.value)return;e.preventDefault(),e.stopPropagation();const o=t.refs.el;if(!o)return;const n=o.getBoundingClientRect(),{left:i,top:r}=n;let{clientX:a,clientY:s}=e,l=(a-i)/E.value,c=(s-r)/E.value;l>c?c=l*y.value.ratio:l=c*(1/y.value.ratio),l>=u.IMAGE_SIZE_LIMIT.MAX*E.value?(l=u.IMAGE_SIZE_LIMIT.MAX,c=l*y.value.ratio):(g.value.originalWidth/2>l||g.value.originalHeight/2>c)&&(l=g.value.originalWidth/2,c=l*(v.value?y.value.ratio:g.value.ratio)),y.value.width=l,y.value.height=c},O=t=>{v.value&&(t&&(t.preventDefault(),t.stopPropagation()),v.value=!1,d("outliner.resizeTopicEquation",Object.assign({topicId:e.topicId},y.value)))},M=(t=!S.value)=>{o.commit("setCurrentEditingTopic",""),o.commit("clearSelection",""),t?(o.commit("setCurrentEditingTopic",e.topicId),o.commit("setSelectionType","EQUATION")):o.commit("setSelectionType","TOPIC")};return s.onMounted((()=>{I(),window.addEventListener("mousemove",B,!1),window.addEventListener("mouseup",O,!1)})),s.onBeforeUnmount((()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",O),o.removeAllListeners("addTopicEquation-"+e.topicId).removeAllListeners("showTopicEquation-"+e.topicId).removeAllListeners("hideTopicEquation-"+e.topicId).removeAllListeners("resizeTopicEquation-"+e.topicId)})),o.on("addTopicEquation-"+e.topicId,(()=>I())).on("showTopicEquation-"+e.topicId,(()=>I())).on("hideTopicEquation-"+e.topicId,(()=>_())).on("resizeTopicEquation-"+e.topicId,(()=>I())).on("saveAsEquation-"+e.topicId,(()=>(()=>{const e=x(g.value.text,T.value);if(!e)return;e.setAttributeNS(null,"height",k.value.height),e.setAttributeNS(null,"width",k.value.width);const t=e.outerHTML;p.getPngDataUrlFromSvgText(t,h.getMaxDPIRatio()).then((function(e){const t=i.getters["l10n/T"];h.saveAsImageData(i,e,t("Equation")+".png")}))})())),{show:C,isSelected:S,isDragging:b,imgStyle:k,dragStart:t=>{if(!g.value)return;A&&t.dataTransfer.setDragImage(A,0,0);const n=w(),i=n&&n.getMathJaxInfo&&n.getMathJaxInfo()||"";o.commit("toggleMouseDown",!0),o.commit("setDraggingType","EQUATION"),t.dataTransfer.setData("text/plain",JSON.stringify({srcTopicId:e.topicId,mathJaxInfo:i})),b.value=!0},toggleFocused:M,openMenu:t=>n(this,void 0,void 0,(function*(){if("contextmenu"!==t.type)return!0;S.value||M(),f.commit("switchMenuItems","EQUATION"),f.commit("setTargetTopic",e.topicId),f.commit("toggleOpened",!0)})),resizeStart:()=>{A&&(v.value=!0,y.value.ratio=g.value.ratio,y.value.width=g.value.width,y.value.height=g.value.height)},refreshEquation:I,handleOpenEquationEditor:()=>{d("editor.showEquationEditor",{topicId:e.topicId})},updateKey:m}}}},82845:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=o(90571),s=i(o(53597)),l=o(11222),c=o(90336),d=o(48932);t.default={name:"TopicHyperlinkEditor",components:{popover:s.default},setup(e,t){const o=a.inject("editingStore"),i=t.root.$store,s=i.handleCommand,u=a.ref("http://"),p=i.getters["l10n/T"],h={[l.HYPERLINK_EDITOR_MODE.DEFAULT]:p("Webpage"),[l.HYPERLINK_EDITOR_MODE.NOTES]:p("Link(noun)")},f=a.computed((()=>o.state.currentEditingTopicId)),m=a.computed({get:()=>o.state.hyperlinkEditor.open,set:e=>o.commit("setHyperlinkEditorState",{open:e})}),g=a.computed((()=>h[o.state.currentHyperlinkEditorMode])),v=a.computed((()=>({top:o.state.hyperlinkEditor.top,right:o.state.hyperlinkEditor.right,bottom:o.state.hyperlinkEditor.bottom,left:o.state.hyperlinkEditor.left}))),b=()=>n(this,void 0,void 0,(function*(){const e=(()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(f.value)})();if(!e)return;const n=e.getHref();if(n)u.value=n;else{u.value="http://";const e=t.refs["hyperlink-content-element"];if(!e)return;e.selectionStart=0,e.selectionEnd=u.value.length}})),A=()=>{m.value&&(t.refs.popover.hide(),m.value=!1)};return a.watch((()=>i.state[c.SHARED].editorMode===d.EDITOR_MODE_OUTLINER),(e=>{!e&&t.refs.popover&&t.refs.popover.close()})),a.watch(m,(e=>n(this,void 0,void 0,(function*(){yield r.default.nextTick(),e&&(yield function(){const e=o.state.currentHyperlinkEditorMode;if(e===l.HYPERLINK_EDITOR_MODE.DEFAULT)return b();if(e===l.HYPERLINK_EDITOR_MODE.NOTES)return o.emit(`notes.getDefaultLink-${f.value}`),void(u.value=o.state.defaultNotesLink)}(),t.refs.popover.show())})))),{title:g,hyperlinkContent:u,isOpened:m,targetRect:v,updateBehavior:function(){try{const e=o.state.currentHyperlinkEditorMode;if(e===l.HYPERLINK_EDITOR_MODE.DEFAULT)return(()=>{A();let e=(u.value||"").trim();e&&!e.match(/([a-zA-Z0-9]+:\/\/|xmind:#|mailto:)/)&&e.match(/[\d\w]+\b@[a-zA-ZA-z0-9]+\.[a-z]+/g)?e="mailto:"+e:e&&!e.match(/([a-zA-Z0-9]+:\/\/|xmind:#|mailto:)/)&&(e="http://"+e),e.length&&"http://"!==e||(e=null);const t=f.value;o.emit("focus-"+t),setTimeout((()=>{s("outliner.changeHyperlink",{topicId:t,link:e})}),100)})();if(e===l.HYPERLINK_EDITOR_MODE.NOTES)return A(),o.emit(`notes.deactivateFrozen-${f.value}`),void(u.value?o.emit(`notes.setLink-${f.value}`,u.value):o.emit(`notes.removeLink-${f.value}`))}finally{o.commit("changeHyperlinkEditorMode",l.HYPERLINK_EDITOR_MODE.DEFAULT)}},onKeyDown:e=>{if(e&&13===e.keyCode)return e.preventDefault(),e.stopPropagation(),A();e.stopImmediatePropagation()}}}}},14608:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=i(o(78835)),s=i(o(85622)),l=o(58933),c=o(35747),d=i(o(2286)),u=i(o(24678)),p=o(99492),h=o(95287),f=o(24092),m=o(28441),g=i(o(53597)),v=o(1893),b=o(31381),A=i(o(72185)),E=o(90571),T=A.default.for("context-menu");t.default={name:"topic-hyperlink",components:{popover:g.default},props:{topicId:{type:String,required:!0}},setup(e,t){const o=E.inject("editingStore"),i=t.root.$store,g=i.getters["l10n/T"],A=i.handleCommand,y=E.ref(""),C=E.ref("http://");let S=E.reactive({title:""});E.computed((()=>i.getters["editor/outlinerZoomScaleForActiveSheet"]/100));const k=E.computed((()=>a.default.parse(y.value))),w=E.computed((()=>!(!y.value||!k.value.path)&&("xmind:"!==k.value.protocol&&"xap:"!==k.value.protocol))),x=E.computed((()=>!(!w.value||!k.value.path)&&("http:"!==k.value.protocol&&"https:"!==k.value.protocol))),I=E.computed((()=>!!y.value&&"xmind:"===k.value.protocol)),_=E.computed((()=>!!y.value&&"xap:"===k.value.protocol)),B=E.computed((()=>{if(!y.value)return!1;if("file:"!==k.value.protocol)return!1;let e=y.value;try{e=v.urlToFilePath(e)}catch(t){e=e.slice("file:".length)}let t=!1;try{t=d.default.isDirectorySync(e)}catch(e){}return t})),O=E.computed((()=>!!y.value&&"file:"===k.value.protocol)),M=E.computed((()=>I.value&&k.value&&k.value.hash?k.value.hash.substring(1):"")),L=E.computed((()=>{if(!w.value)return y.value;return function(e){let t=e;if(!t)return"";for(;t.indexOf("&#x")>=0;){const[e,o]=t.match(/&#x([\d\w]+);/m);t=t.replace(e,String.fromCharCode(parseInt(o,16)))}return t}(S["og:title"]||S.title||y.value)}));E.watch((()=>y.value),(()=>{S["og:title"]="",S.title=""}));const R=E.computed((()=>{if(!M)return y;const e=$(M.value);if(e<0)return g("Invalid Topic Link");const t=U(e),o=j(e,M.value);return`${t.toJSON().title}  ${o.getTitle()}`})),N=E.computed((()=>{if(!k.value.path)return"";return`${s.default.extname(k.value.path).substring(1).toUpperCase()} ${g("File")}`})),D=E.computed((()=>{if(!k.value.path)return"";return decodeURIComponent(s.default.basename(k.value.path))})),P=E.computed((()=>{switch(!0){case O.value:return D.value;case w.value:return L.value;case _.value:return N.value;case I.value:return R.value}})),F=()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(e.topicId)},W=()=>{const e=F();e&&(y.value=e.getHref(),w.value&&!x.value&&G())},$=e=>{if(e.length<=0)return-1;const t=i.state.editor.sbEditorWrapper.value;for(let o=0;o<t.model.sheets.length;o++){if(t.model.sheets[o].findComponentById(e))return o}return-1},U=e=>i.state.editor.sbEditorWrapper.value.model.sheets[e],j=(e,t)=>{const o=U(e);if(o)return o.findComponentById(t)},H=()=>n(this,void 0,void 0,(function*(){let e,t;try{e=v.urlToFilePath(y.value)}catch(t){e=y.value.slice("file:".length)}if(s.default.isAbsolute(e))t=e;else{if(!i.state.wd.source.startsWith("file:"))return;{const o=v.urlToFilePath(i.state.wd.source),n=s.default.dirname(o);t=s.default.join(n,e)}}try{d.default.accessSync(t,c.constants.F_OK),yield l.shell.openPath(t)}catch(e){yield h.showMessageBox({title:"XMind",message:g("Failed to open this file link."),detail:g("Probably the location or name of this file/folder is changed."),buttons:[g("OK")],defaultId:0})}})),Y=()=>n(this,void 0,void 0,(function*(){const t=e=>n(this,void 0,void 0,(function*(){yield r.default.nextTick();const t=b.getTopicTextElementById(e);if(!t)return;const o=t.closest(".topic");var n;o&&(o.classList.add("animate"),A("editor.selectTopicById",{componentId:e}),yield(n=501,new Promise((e=>setTimeout((()=>e()),n)))),o.classList.remove("animate"),t.focus())})),i=$(M.value),a=$(e.topicId);switch(!0){case i>=0&&i!==a:A("editor.selectTopicById",{componentId:M.value});break;case i===a&&(o.fullFlattenedSheet.findIndex((({id:e})=>e===M.value))>=0||o.rootTopicId===M.value):t(M.value);break;default:const{response:n}=yield l.remote.dialog.showMessageBox({title:g("Invalid Topic Link"),message:g("The target topic may have been deleted. Do you want to delete this topic link as well?"),buttons:[g("Delete It"),g("No")],defaultId:0,cancelId:1});0===n&&A("outliner.changeHyperlink",{topicId:e.topicId,link:""})}})),V=()=>n(this,void 0,void 0,(function*(){const e=y.value;let t=F().getTitle();const o=i.state.wd.tempStorage,n=s.default.join(o,e.replace("xap:","")),r=s.default.extname(n);t&&!t.endsWith(r)&&(t+=r),m.saveAs(i,n,t)})),z=(e=!1)=>n(this,void 0,void 0,(function*(){const t=y.value;let o=F().getTitle();const n=i.state.wd.tempStorage,r=s.default.join(n,t.replace("xap:","")),a=s.default.extname(r);let c="";try{c=i.state.attachment.lastSaveDirectory||l.remote.app.getPath("downloads")}catch(e){c="downloads"}if(o&&!o.endsWith(a)&&(o+=a),i.state.attachment.doNotShowAttachmentMessageAgain&&!e)Z(r,c,o);else{const{response:e,checkboxChecked:t}=yield l.remote.dialog.showMessageBox({title:"XMind",message:g("Trying to Open Attachment"),detail:g("XMind will save this attachment to $1 and open with default application in your system.",c),checkboxLabel:g("Don't show this message again."),buttons:[g("Save and Open"),g("Cancel")],defaultId:0,cancelId:1});0===e&&Z(r,c,o),t&&(yield u.default.fetch(p.STORE_COMMIT,{mutations:[{type:"attachment/doNotShowAttachmentMessageAgain"}]}))}})),Z=(e,t,o)=>n(this,void 0,void 0,(function*(){try{d.default.accessSync(t,c.constants.F_OK|c.constants.W_OK);const n=v.suggestFileNameSync(t,o);if(!n)return;const i=s.default.join(t,n);yield d.default.copyFile(e,i),yield l.shell.openPath(i)}catch(n){const[r]=yield h.showMessageBox({title:"XMind",message:g("Failed to Save File"),detail:g("XMind doesn't have permission to save file to $1, please choose another folder to save.",t),buttons:[g("Choose Folder"),g("Cancel")],defaultId:0,cancelId:1});if(0===r){const t=yield h.showSaveDialog({title:"Save",suggestPath:{store:i,suggestedName:o}});if(t){const n=s.default.dirname(t);yield u.default.fetch(p.STORE_COMMIT,{mutations:[{type:"attachment/setLastDirectory",payload:{lastSaveDirectory:n}}]}),yield Z(e,n,o)}}}})),G=()=>n(this,void 0,void 0,(function*(){if(w.value)try{const e=yield u.default.fetch(p.XOS.FETCH_URL_METADATA,y.value);Object.assign(S,e)}catch(e){console.error(e)}}));return E.onMounted((()=>{W()})),E.onBeforeUnmount((()=>{o.removeAllListeners("showHyperlinkEditor-"+e.topicId).removeAllListeners("showTopiclinkEditor-"+e.topicId).removeAllListeners("updateTopicHyperlink-"+e.topicId).removeAllListeners("saveAttachment-"+e.topicId)})),o.on("showHyperlinkEditor-"+e.topicId,(()=>(()=>{if(!y.value||y.value.length<=0)return;const n=t.refs.el;if(!n||!document.body.contains(n))return;const i=n.getBoundingClientRect();o.commit("setCurrentEditingTopic",e.topicId),o.commit("setHyperlinkEditorState",{open:!0,top:i.top,left:i.left,right:i.left+i.width,bottom:i.top+i.height-5})})())).on("showTopiclinkEditor-"+e.topicId,(()=>A("editor.showTopiclinkEditor",e.topicId))).on("updateTopicHyperlink-"+e.topicId,(()=>W())).on("clickAttachment-"+e.topicId,(e=>z(e))).on("saveAsAttachment-"+e.topicId,(()=>V())),{hyperlink:y,hyperlinkContent:C,isFileLink:O,isHyperlink:w,isTopicLink:I,isAttachment:_,title:P,handleClick:()=>{switch(!0){case O.value:H();break;case w.value:let e=y.value;k.value.protocol||(e="http://"+e),f.openExternal(e);break;case I.value:Y();break;case _.value:z()}},openMenus:t=>{switch(t.stopPropagation(),!0){case B.value:o.commit("setSelectionType","FOLDERLINK"),T.commit("switchMenuItems","FOLDERLINK");break;case O.value:o.commit("setSelectionType","FILELINK"),T.commit("switchMenuItems","FILELINK");break;case _.value:o.commit("setSelectionType","ATTACHMENT"),T.commit("switchMenuItems","ATTACHMENT");break;default:o.commit("setSelectionType","HYPERLINK"),T.commit("switchMenuItems","HYPERLINK")}T.commit("setTargetTopic",e.topicId),T.commit("toggleOpened",!0)},refreshHyperlink:W}}}},85878:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=o(90571),s=i(o(41698)),l=o(90336),c=o(48932),d=o(31381),u=o(9613),p=i(o(72185)),h=i(o(85622)),f=o(28441),m=s.default("outliner"),g=p.default.for("context-menu");t.default={name:"TopicImage",props:{topicId:{type:String,required:!0}},setup(e,t){const o=a.inject("editingStore"),i=t.root.$store,s=i.handleCommand,p=a.ref(0),v=a.ref({}),b=a.ref(!1),A=a.ref(!1),E=a.ref(!1);let T=null;const y=a.computed((()=>i.getters["editor/outlinerZoomScaleForActiveSheet"]/100)),C=a.ref({width:0,height:0,ratio:1}),S=a.computed((()=>o.state.imageShownTopicIds.indexOf(e.topicId)>=0&&v.value&&v.value.src)),k=a.computed((()=>o.state.currentEditingTopicId===e.topicId&&"IMAGE"===o.state.selectionType&&i.state[l.SHARED].editorMode===c.EDITOR_MODE_OUTLINER)),w=a.computed((()=>{let e=A.value?C.value.width:v.value.width||0,t=A.value?C.value.height:v.value.height||0;return e<u.IMAGE_SIZE_LIMIT.MIN?(e=u.IMAGE_SIZE_LIMIT.MIN,t=e*C.value.ratio):e>u.IMAGE_SIZE_LIMIT.MAX&&(e=u.IMAGE_SIZE_LIMIT.MAX,t=e*C.value.ratio),{width:e+"px",height:t+"px",update:p.value}})),x=()=>n(this,void 0,void 0,(function*(){E.value=!1;const t=(()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(e.topicId)})();if(!t||!t.getImageModel())return _();const n=t.getImageModel();if(v.value=n.toJSON(),!v.value||!v.value.src)return;const a=v.value.src.startsWith("xap:")?yield(s=v.value.src,i.dispatch("wd/loadXap",s)):v.value.src;var s;if(v.value.height&&v.value.width)C.value.ratio=v.value.height/v.value.width;else try{let{height:e,width:t}=yield d.readImageOriginalSize(a);C.value.ratio=e/t,t<u.IMAGE_DEFAULT_SIZE_LIMIT.MIN?(t=u.IMAGE_DEFAULT_SIZE_LIMIT.MIN,e=t*C.value.ratio):t>u.IMAGE_DEFAULT_SIZE_LIMIT.MAX&&(t=u.IMAGE_DEFAULT_SIZE_LIMIT.MAX,e=t*C.value.ratio),v.value.width=t,v.value.height=e}catch(e){m.error("load image failed %s",a)}try{S.value||(o.commit("showTopicImage",e.topicId,!1),yield r.default.nextTick()),I(a),p.value++}catch(e){_()}})),I=e=>{const o=t.refs.el;if(o)if(o.querySelector("img")){if(T.src===e)return;T.src=e,T&&(T.style.width="100%")}else T=new Image,T.addEventListener("load",(()=>n(this,void 0,void 0,(function*(){b.value=!0,yield r.default.nextTick(),o.prepend(T)})))),T.src=e,T&&(T.style.width="100%")},_=()=>{const e=t.refs.el;e&&(T&&e.contains(T)&&e.removeChild(T),v.value=null,b.value=!1)},B=e=>{if(!A.value)return;e.preventDefault(),e.stopPropagation();const o=t.refs.el;if(!o)return;const n=o.getBoundingClientRect(),{left:i,top:r}=n;let{clientX:a,clientY:s}=e,l=(a-i)/y.value,c=(s-r)/y.value;l>c?c=l*C.value.ratio:l=c*(1/C.value.ratio),l<=u.IMAGE_SIZE_LIMIT.MIN*y.value?(l=u.IMAGE_SIZE_LIMIT.MIN,c=l*C.value.ratio):l>=u.IMAGE_SIZE_LIMIT.MAX*y.value&&(l=u.IMAGE_SIZE_LIMIT.MAX,c=l*C.value.ratio),C.value.width=l,C.value.height=c},O=t=>{A.value&&(t&&(t.preventDefault(),t.stopPropagation()),A.value=!1,s("outliner.resizeTopicImage",Object.assign({topicId:e.topicId},C.value)))},M=(t=!k.value)=>{o.commit("setCurrentEditingTopic",""),o.commit("clearSelection",""),t?(o.commit("setCurrentEditingTopic",e.topicId),o.commit("setSelectionType","IMAGE")):o.commit("setSelectionType","TOPIC")},L=()=>n(this,void 0,void 0,(function*(){const e=v.value.src,t=i.state.wd.tempStorage,o=h.default.join(t,e.replace("xap:","")),n=o.split("/").slice(-1).pop();f.saveAs(i,o,n)}));return a.onMounted((()=>{x(),window.addEventListener("mousemove",B,!1),window.addEventListener("mouseup",O,!1)})),a.onBeforeUnmount((()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",O),o.removeAllListeners("addTopicImage-"+e.topicId).removeAllListeners("showTopicImage-"+e.topicId).removeAllListeners("hideTopicImage-"+e.topicId).removeAllListeners("resizeTopicImage-"+e.topicId)})),o.on("addTopicImage-"+e.topicId,(()=>x())).on("showTopicImage-"+e.topicId,(()=>x())).on("hideTopicImage-"+e.topicId,(()=>_())).on("resizeTopicImage-"+e.topicId,(()=>x())).on("saveAsImage-"+e.topicId,(()=>L())),{show:S,isSelected:k,isDragging:E,imgStyle:w,dragStart:t=>{T&&t.dataTransfer.setDragImage(T,0,0),o.commit("toggleMouseDown",!0),o.commit("setDraggingType","IMAGE"),t.dataTransfer.setData("text/plain",JSON.stringify({srcTopicId:e.topicId,image:v.value})),E.value=!0},toggleFocused:M,openMenu:t=>n(this,void 0,void 0,(function*(){if("contextmenu"!==t.type)return!0;k.value||M(),g.commit("switchMenuItems","IMAGE"),g.commit("setTargetTopic",e.topicId),g.commit("toggleOpened",!0)})),resizeStart:()=>{T&&(A.value=!0,C.value.width=T.width,C.value.height=T.height)},refreshImage:x,updateKey:p}}}},69775:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=o(90571),s=i(o(53597)),l=i(o(33311)),c=o(90336),d=o(48932);t.default={name:"TopicLabelsEditor",components:{popover:s.default,MostlyUsedLabels:l.default},setup(e,t){const o=a.inject("editingStore"),i=t.root.$store,s=i.handleCommand,l=a.ref(!1),u=a.ref(""),p=a.computed((()=>({top:o.state.labelsEditor.top,right:o.state.labelsEditor.right,bottom:o.state.labelsEditor.bottom,left:o.state.labelsEditor.left}))),h=a.computed((()=>o.state.selectionIds.length>1?o.state.selectionIds:[o.state.currentEditingTopicId])),f=a.computed({get:()=>o.state.labelsEditor.open,set:e=>o.commit("setLabelsEditorState",{open:e})}),m=()=>{const e=(()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(h.value[0])})();return e?e.getLabel().split(","):[]},g=()=>{if(!f.value)return;t.refs.popover.hide(),f.value=!1;const e=u.value.split(/[,]+/g).filter((e=>e.length>0)),n=h.value;for(const e of n)o.emit("focus-"+e);setTimeout((()=>{for(const t of n)s("outliner.updateTopicLabels",{topicId:t,labels:e})}),100)};a.watch((()=>i.state[c.SHARED].editorMode===d.EDITOR_MODE_OUTLINER),(e=>{!e&&t.refs.popover&&t.refs.popover.close()})),a.watch(f,(e=>n(this,void 0,void 0,(function*(){t.refs.popover&&e&&(u.value=m().join(","),setTimeout((()=>t.refs.popover.show())),yield r.default.nextTick(),t.refs["labels-content-element"].focus())}))));return{showMostlyUsedLabels:l,isOpened:f,labelsContent:u,targetRect:p,onKeyDown:e=>{if(e&&13===e.keyCode)return e.preventDefault(),e.stopPropagation(),g();e.stopImmediatePropagation()},updateLabels:g,updateLabel:e=>{u.value=e,setTimeout((()=>{const e=t.refs["labels-content-element"],o=e.value.length;e.focus(),e.setSelectionRange(o,o)}),10)}}}}},88995:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(90571),r=n(o(72185)).default.for("context-menu");t.default={name:"TopicLabels",props:{topicId:{type:String,required:!0}},setup(e,t){const o=i.inject("editingStore"),n=i.ref([]),a=()=>{const t=(()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(e.topicId)})();t&&(n.value=t.getLabel().split(",").filter(Boolean))},s=()=>{const n=t.refs.el;if(!n||!document.body.contains(n))return;const i=n.getBoundingClientRect();o.commit("setCurrentEditingTopic",e.topicId),o.commit("setLabelsEditorState",{open:!0,top:i.top,left:i.left,right:i.left+i.width,bottom:i.top+i.height-5})};i.onBeforeUnmount((()=>{o.removeAllListeners("updateTopicLabels-"+e.topicId).removeAllListeners("showTopicLabelsPopover-"+e.topicId)})),a(),o.on("updateTopicLabels-"+e.topicId,(()=>a())).on("showTopicLabelsPopover-"+e.topicId,(()=>{n.value.length>0&&s()}));return{labels:i.computed((()=>n.value.reduce(((e,t)=>{const o=t.trim();return e.includes(o)||e.push(o),e}),[]))),refreshLabels:a,openMenu:(t,n)=>{t.stopPropagation(),r.commit("switchMenuItems","LABEL"),o.commit("setSelectionType","LABEL"),o.commit("setSelectedItemInfo",n),r.commit("setTargetTopic",e.topicId),r.commit("toggleOpened",!0)},openEditor:s}}}},35839:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(85622)),a=i(o(20144)),s=o(90571),l=i(o(53597)),c=o(57818),d=o(90336),u=o(48932),p=o(6921);t.default=s.createComponent({name:"topic-markers-editor",components:{popover:l.default},setup(e,t){const o=s.inject("editingStore"),i=t.root.$store,l=i.handleCommand,h=s.ref([]),f=s.ref({width:"221px",height:"42px"}),m=s.computed((()=>o.state.currentEditingTopicId)),g=s.computed((()=>o.state.markersEditor.selectedMarkerId)),v=s.computed({get:()=>o.state.markersEditor.open,set:e=>o.commit("setMarkerEditorState",{open:e})}),b=s.computed((()=>({top:o.state.markersEditor.top,right:o.state.markersEditor.right,bottom:o.state.markersEditor.bottom,left:o.state.markersEditor.left}))),A=s.computed((()=>h.value.length>7?"uk-flex-column uk-flex-center uk-separator":"uk-flex-row uk-flex-middle uk-separator-vertical")),E=s.computed((()=>h.value.length>7?"uk-padding-small uk-padding-remove-horizontal uk-padding-remove-top":"uk-padding-small uk-padding-remove-vertical uk-padding-remove-left")),T=s.computed((()=>h.value.length>7?"uk-padding-xsmall uk-padding-remove-horizontal uk-padding-remove-bottom uk-flex uk-flex-column uk-flex-center":"uk-padding-xsmall uk-padding-remove-vertical uk-padding-remove-right")),y=e=>n(this,void 0,void 0,(function*(){let t=[];for(const o of e){const e=yield C(o);t.push({id:o,url:e})}return t=t.sort((({id:e},{id:t})=>c.markerModule.indexOf(e)-c.markerModule.indexOf(t))),t})),C=e=>n(this,void 0,void 0,(function*(){const{resource:t}=c.markerModule.getMarkerInfoById(e);let o=r.default.join(p.getResourceBasePath(),t);return"win32"===process.platform&&(o=o.split("\\").join("/")),o})),S=()=>n(this,void 0,void 0,(function*(){const e=(e=>{const t=[],{groupId:o}=c.markerModule.getMarkerInfoById(e),n=c.markerModule.getGroupInfoById(o);if(n)for(const e of n.markers)e.hidden||t.push(e.markerId);return t})(g.value);if(h.value=yield y(e),h.value.length<7)for(let e=0;e<7-h.value.length;e++)h.value.push({id:"empty-"+e,url:""});h.value.length<8?f.value={width:24*(h.value.length+1)+31+"px",height:"40px"}:f.value={width:"186px",height:24*Math.ceil(h.value.length/7)+54+"px"}}));return s.watch(v,(e=>n(this,void 0,void 0,(function*(){yield a.default.nextTick(),e&&(yield S(),t.refs.popover.show())})))),s.watch((()=>i.state[d.SHARED].editorMode===u.EDITOR_MODE_OUTLINER),(e=>{!e&&t.refs.popover&&t.refs.popover.close()})),{isOpened:v,markers:h,popoverSize:f,topicRect:b,containerStyle:A,markersPadding:E,deleteButtonPadding:T,selectedMarkerId:g,changeMarker:e=>{t.refs.popover.hide(),v.value=!1,o.emit("focus-"+m.value),setTimeout((()=>{l("editor.addMarker",e)}),100)},removeMarker:e=>{t.refs.popover.hide(),v.value=!1,o.emit("focus-"+m.value),setTimeout((()=>{l("editor.deleteMarker",e)}),100)}}}})},41638:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(85622)),a=i(o(20144)),s=o(90571),l=i(o(53597)),c=i(o(72185)),d=o(57818),u=o(6921),p=c.default.for("context-menu");t.default={name:"TopicMarkers",components:{popover:l.default},props:{topicId:{type:String,required:!0},width:{type:Number,default:()=>18}},setup(e,t){const o=s.inject("editingStore"),i=s.ref([]),l=()=>n(this,void 0,void 0,(function*(){const t=(()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(e.topicId)})();t&&(i.value=yield c((t.toJSON().markers||[]).map((({markerId:e})=>e))))})),c=e=>n(this,void 0,void 0,(function*(){let t=[];for(const o of e){const e=yield h(o);t.push({id:o,url:e})}return t=t.sort((({id:e},{id:t})=>d.markerModule.indexOf(e)-d.markerModule.indexOf(t))),t})),h=e=>n(this,void 0,void 0,(function*(){const{resource:t}=d.markerModule.getMarkerInfoById(e);let o=r.default.join(u.getResourceBasePath(),t);return"win32"===process.platform&&(o=o.split("\\").join("/")),o})),f=n=>{if(!t.refs[n]||!t.refs[n][0])return;o.commit("setSelectionType","MAKRER"),o.commit("setSelectedItemInfo",n),o.commit("setCurrentEditingTopic",e.topicId);const i=t.refs[n][0].getBoundingClientRect();o.commit("setMarkerEditorState",{open:!0,selectedMarkerId:n,top:i.top,left:i.left,right:i.left+i.width,bottom:i.top+i.height-5})};return s.onMounted((()=>l())),s.onBeforeUnmount((()=>{o.removeAllListeners("showMarkerPopover-"+e.topicId).removeAllListeners("changeMarker-"+e.topicId).removeAllListeners("removeMarker-"+e.topicId)})),(()=>{o.on("showMarkerPopover-"+e.topicId,(e=>n(this,void 0,void 0,(function*(){yield a.default.nextTick(),f(e)})))).on("changeMarker-"+e.topicId,(()=>n(this,void 0,void 0,(function*(){yield a.default.nextTick(),l()})))).on("removeMarker-"+e.topicId,(()=>n(this,void 0,void 0,(function*(){yield a.default.nextTick(),l()}))))})(),{markers:i,refreshMarkers:l,genMarkerStyle:t=>({backgroundImage:`url('${t}')`,width:e.width+"px",height:e.width+"px",backgroundSize:e.width+"px"}),openMenu:(t,n)=>{t.stopPropagation(),p.commit("switchMenuItems","MARKER"),o.commit("setSelectionType","MARKER"),o.commit("setSelectedItemInfo",n),p.commit("setTargetTopic",e.topicId),p.commit("toggleOpened",!0)},showMarkerPopover:f}}}},79677:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(90571),a=i(o(72185)),s=o(17462),l=o(91115),c=o(96486),d=o(96615),u=o(76341),p=a.default.for("context-menu");t.default=r.createComponent({name:"TopicNote",props:{topicId:{type:String,required:!0}},setup(e,t){const o=r.inject("editingStore"),i=t.root.$store,a=r.ref(`${i.getters["preferences/appearance"]}-theme`),h={topicId:e.topicId,store:i,notesEditor:null},{showLinkEditor:f}=u.useOutlineNotesLink(h),{container:m}=d.useNotesEditorEvents(),g=i.getters["l10n/T"],v=i.handleCommand,b=r.ref(!1),A=r.ref({}),E=r.ref(!1),T=r.ref(!1),y=r.ref(null);let C=null;const S=r.computed((()=>b.value||o.state.notesShownTopicIds.indexOf(e.topicId)>=0||!!A.value)),k=()=>{if(o.ownerSheet)return o.ownerSheet.findComponentById(e.topicId)},w=c.debounce((()=>{C&&o.state.ready&&I()}),500),x=(t=!1)=>{if(b.value)return;const n=k();if(!n)return;const i=!!A.value;if(A.value=n.getNotes(),!C)return;if(C.setNoteData(A.value||{}),!A.value||!C.htmlLength)return i&&o.commit("hideTopicNotes",e.topicId),C.reset();o.state.notesShownTopicIds.indexOf(e.topicId)<0&&!t&&o.commit("showTopicNotes",e.topicId)},I=t=>n(this,void 0,void 0,(function*(){if(!C)return;const n=C.getNoteData();A.value&&A.value.realHTML&&n&&n.realHTML.content===A.value.realHTML.content?t&&t.isEmitEditingStoreEvent&&(yield new Promise((e=>setTimeout(e))),o.emit("savedTopicNotes-"+e.topicId)):setTimeout((()=>{n?v("outliner.saveNotes",{topicId:e.topicId,notes:n}):v("outliner.removeNotes",{topicId:e.topicId,refresh:!0}),o.emit("savedTopicNotes-"+e.topicId)}),100)}));return(()=>{o.once("ready",(()=>{const e=k();e&&(A.value=e&&e.getNotes()?e.getNotes():null)})).on("showTopicNotes-"+e.topicId,(()=>{C&&setTimeout((()=>C?C.focus():void 0),50)})).on("saveTopicNotes-"+e.topicId,(()=>I({isEmitEditingStoreEvent:!0}))).on("hideTopicNotes-"+e.topicId,(()=>A.value=null)).on("undo-notes-"+e.topicId,(()=>{C&&C.undo()})).on("redo-notes-"+e.topicId,(()=>{C&&C.redo()}));const t=k();t&&t.on(t.modelEvents.informationChanged,(t=>{"note"===t&&o.state.notesShownTopicIds.indexOf(e.topicId)>=0&&x()}))})(),r.onMounted((()=>{t.refs.container&&(C=new s.Editor({container:t.refs.container}),h.notesEditor=C,C.placeholder=g("Enter your note in here.")),x(!0)})),r.onBeforeUnmount((()=>{o.removeAllListeners("showTopicNotes-"+e.topicId).removeAllListeners("saveTopicNotes-"+e.topicId).removeAllListeners("hideTopicNotes-"+e.topicId).removeAllListeners("undo-notes-"+e.topicId).removeAllListeners("redo-notes-"+e.topicId),C&&(C=null);const t=k();t&&t.off(t.modelEvents.informationChanged)})),{show:S,onEditing:b,hasSelection:E,topicNoteElement:y,handleFocusChanged:()=>n(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e)));const e=y.value&&y.value.contains(document.activeElement);T.value=e,e||I()})),isToolbarVisible:T,openMenus:t=>{p.commit("setTargetTopic",e.topicId),s.Editor.getHref(t.target)?(l.selectLinkRange(t.target),p.commit("setCurrentTarget",t.target.closest("a")),p.commit("switchMenuItems","NOTES-LINK")):(p.commit("setCurrentTarget",null),p.commit("switchMenuItems","NOTES")),p.commit("toggleOpened",!0)},refreshNotes:x,saveNotes:I,toggleSelectionStyles:e=>{C&&C.toggleSelectionStyle(e)},selectionChanged:()=>{if(!C||!o.state.ready)return;const t=C.getSelectedRange();E.value=t[0]!==t[1],o.commit("setCurrentEditingTopic",e.topicId),o.commit("setSelectionType","NOTES"),t||(C.htmlLength?S.value&&C.htmlLength>0&&I():(o.commit("hideTopicNotes",e.topicId),v("outliner.deleteNote",{topicId:e.topicId,refresh:!1})))},NotesEditor:s.Editor,debouncedNotesDataChanged:w,showLinkEditor:f,container:m,containerClass:a}}})},72500:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=o(90571),s=o(96486),l=i(o(37529)),c=i(o(72185)),d=o(31381),u=i(o(46925)),p=i(o(30371)),h=i(o(33976)),f=i(o(65225)),m=i(o(83602)),g=i(o(71641)),v=i(o(59239)),b=o(47977),A=o(9613),E=c.default.for("context-menu");t.default=a.createComponent({name:"topic",components:{TopicNote:u.default,TopicImage:p.default,TopicLabels:h.default,TopicMarkers:f.default,TopicHyperlink:m.default,TopicAudioNotes:g.default,TopicEquation:v.default},props:{topic:{type:Object,required:!0},isFloating:{type:Boolean,default:!1},active:Boolean,index:Number},setup(e,t){const o=a.inject("editingStore"),i=t.root.$store,c=i.handleCommand,u=a.ref(null),p=a.ref(null),h=a.ref(e.topic.title),f=a.ref(e.topic.show),m=a.ref(!1),g=a.computed({get:()=>m.value,set:e=>{m.value=e,i.commit("editor/toggleInputMethodInputting",e)}}),v=a.computed((()=>o.state.editable)),T=a.computed((()=>o.state.draggingTopicIds.indexOf(e.topic.id)>=0)),y=a.computed((()=>b.countChildTopics(o.fullFlattenedSheet,e.topic.id,!0))),C=a.computed((()=>y.value>0)),S=a.computed((()=>22*parseInt(e.topic.depth,10)+"px")),k=a.computed((()=>e.topic.depth===A.MAX_DISPLAY_LEVEL&&C.value)),w=a.computed((()=>k.value||o.zipStatus.indexOf(e.topic.id)>=0)),x=a.computed((()=>o.state.selectionIds.indexOf(e.topic.id)>=0)),I=a.computed((()=>_().parent().isRootTopic())),_=()=>o.ownerSheet.findComponentById(e.topic.id),B=(t=-1)=>{const n=p.value;if(n){if(!e.topic.show){let t=e.topic.parent;for(;t!==o.rootTopicId;)o.commit("setZippedStatus",{topicId:t,zipped:!1,canUndo:!1}),t=o.getTopicById(t).parent}t<0&&(t=d.getCaretCharacterOffsetWithin(n)),t<0&&(t=d.getTextElementContent(n).length),d.scrollToElement(n),d.setCaretCharacterOffsetWithIn(n,t)}},O=(e=!0)=>{const t=_();t&&M(t.getTitle(),e)},M=(e,t=!0)=>n(this,void 0,void 0,(function*(){const o=u.value;if(!o)return;const n=p.value,i=d.getTextElementContent(n);if(!document.contains(o)||!f.value)return;if(!n||h.value===e&&i===e)return;let a=0;if(!document.contains(o)||!f.value)return;const s=l.default(i,e);for(;s.length>0&&s[0][0]===l.default.EQUAL;)a+=s.shift()[1].length;s.length>0&&s[0][0]===l.default.DELETE&&(a+=s[0][1].length);const c=a;for(const[e,t]of s.filter((([e])=>e!==l.default.EQUAL)))e===l.default.INSERT?a+=t.length:e===l.default.DELETE&&(a-=t.length);a=a<0?0:a,h.value=e,n&&d.getTextElementContent(n)!==e&&d.updateTextElement(n,e),t&&c!==a&&(yield r.default.nextTick(),d.scrollToElement(n),d.setCaretCharacterOffsetWithIn(n,a))})),L=s.throttle((o=>{t.emit("dragstart",o,e.topic)}),30),R=s.throttle((o=>{t.emit("dragover",o,e.topic)}),30),N=s.throttle((o=>{t.emit("dragenter",o,e.topic)}),30),D=s.throttle((o=>{t.emit("dragleave",o,e.topic)}),30),P=s.throttle((o=>{t.emit("dragend",o,e.topic)}),100),F=()=>{if(_().getLabel().split(",").filter(Boolean).length>0)return;const t=u.value;if(!t||!document.body.contains(t))return;const n=t.querySelector(".topic-dot");if(!n)return;const i=n.getBoundingClientRect();o.commit("setCurrentEditingTopic",e.topic.id),o.commit("setLabelsEditorState",{open:!0,top:i.top,left:i.left,right:i.left+i.width,bottom:i.top+i.height-5})};return a.onBeforeMount((function(){t.emit("created",this);const n=e.topic.id;o.on("toggleTopicShow-"+n,(()=>{requestAnimationFrame((()=>{f.value=e.topic.show,f.value&&O(!1)}))})).on("changeTopicTitle-"+n,((e,t)=>M(e,t))).on("showTopicLabelsPopover-"+n,(()=>F())).on("showHyperlinkEditor-"+n,(()=>(()=>{const t=u.value;if(!t||!document.body.contains(t))return;const n=_().get("href");if(n&&n.length>0)return;const i=t.querySelector(".topic-dot");if(!i)return;const r=i.getBoundingClientRect();o.commit("setCurrentEditingTopic",e.topic.id),o.commit("setHyperlinkEditorState",{open:!0,top:r.top,left:r.left,right:r.left+r.width,bottom:r.top+r.height-5})})())).on("showEquationEditor-"+n,(()=>(()=>{const t=u.value;if(!t||!document.body.contains(t))return;const n=t.querySelector(".topic-dot");if(!n)return;const i=n.getBoundingClientRect();o.commit("setCurrentEditingTopic",e.topic.id),o.commit("setEquationEditorState",{open:!0,top:i.top,left:i.left,right:i.left+i.width,bottom:i.top+i.height-5})})())).on("focus-"+n,(e=>B(e)))})),a.onBeforeUnmount((function(){const n=e.topic.id;t.emit("beforeDestroy",this),o.removeAllListeners("toggleTopicShow-"+n).removeAllListeners("changeTopicTitle-"+n).removeAllListeners("showTopicLabelsPopover-"+n).removeAllListeners("showHyperlinkEditor-"+n).removeAllListeners("showEquationEditor-"+n).removeAllListeners("focus-"+n)})),{el:u,titleEl:p,title:h,show:f,compositionStarted:g,editable:v,dragging:T,childrenCount:y,hasChild:C,paddingLeft:S,reachedLimit:k,zipped:w,selected:x,isMainTopic:I,getTopicModel:_,refreshTitle:O,updateTitle:M,input:()=>{if(g.value)return;const o=p.value;document.contains(o)&&t.emit("titlechange",d.getTextElementContent(o),e.topic,!0,!0)},focus:B,dragStart:L,dragOver:R,dragEnter:N,dragLeave:D,dragEnd:P,drop:o=>t.emit("drop",o,e.topic),mouseDown:o=>t.emit("mousedown",o,e.topic),mouseOver:o=>t.emit("mouseover",o,e.topic),mouseUp:o=>t.emit("mouseup",o,e.topic),mouseEnter:o=>t.emit("mouseenter",o,e.topic),mouseLeave:o=>t.emit("mouseleave",o,e.topic),toggleZip:()=>{k.value?c("outliner.setRootTopic",{topicId:e.topic.id}):o.state.draggingTopicIds.indexOf(e.topic.id)>=0||(o.zipStatus.indexOf(e.topic.id)>=0?c("outliner.unfoldBranch",e.topic.id):c("outliner.foldBranch",e.topic.id))},clearAndSelectTopic:()=>{const t=e.topic.id;d.clearTextSelection(),o.commit("clearSelection"),o.commit("addSelection",t)},openMenu:i=>n(this,void 0,void 0,(function*(){"contextmenu"!==i.type&&d.clearTextSelection(),i.target.classList.contains("topic-darg-icon")&&d.clearTextSelection();const n=e.topic.id,a=p.value;t.emit("titlechange",d.getTextElementContent(a),e.topic,!1);const s=d.getSelectionLength(a);switch(o.commit("setCurrentEditingTopic",n),s<=0&&(o.state.selectionIds.indexOf(n)<0&&o.commit("clearSelection"),o.commit("addSelection",n)),E.commit("setTargetTopic",n),!0){case s>0:E.commit("switchMenuItems","TEXT");break;case o.state.selectionIds.length>1:E.commit("switchMenuItems","MULTI-TOPIC");break;default:E.commit("switchMenuItems","TOPIC")}return yield r.default.nextTick(),E.commit("toggleOpened",!0),!1})),onFocus:()=>{o.commit("setSelectionType","TOPIC"),o.commit("setCurrentEditingTopic",e.topic.id)},onBlur:()=>{},onKeydown:t=>{const o=p.value;if(d.getCaretCharacterOffsetWithin(o)<0)return;if(g.value)return;if((t.ctrlKey||t.metaKey)&&(66==t.keyCode||73==t.keyCode||85==t.keyCode))return t.preventDefault();const{isOnFirstLine:n,isOnLastLine:i}=d.calculateCaretLinePos(o);switch(t.key){case"ArrowUp":if(!n)return;t.preventDefault(),c("outliner.selectionNavigateUp",e.topic.id);break;case"ArrowDown":if(!i)return;t.preventDefault(),c("outliner.selectionNavigateDown",e.topic.id)}},openLabelsEditor:F,clickOnWhiteSpaceOfInserts:()=>{o.commit("setSelectionType","TOPIC")}}}})},50009:function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(20144)),a=i(o(61027)),s=o(90571),l=i(o(96486)),c=i(o(53597)),{MOVE_VIEWPORT:d}=a.default.constant.ACTION_NAMES;t.default=s.createComponent({name:"topic-popover-container",components:{Popover:c.default},props:{width:{type:Number,default:400},height:{type:Number,default:280},padding:{type:Number,default:16},autoShowOnMounted:{type:Boolean,default:!0}},setup(e,t){const o=t.root.$store,i=s.ref(null),a=s.ref(0),c=s.ref(0),u=s.ref(0),p=s.ref(0),h=e=>{const t=e.getBoundingClientRect();return Object.assign({},l.default.pick(t,"top","left","right","bottom","width","height"),{offsetTop:e.offsetTop,offsetLeft:e.offsetLeft})},f=()=>{const e=(()=>{const e=o.state.editor.sbEditorWrapper.value;if(!e)return null;const t=e&&e.getSelections();return t&&t.length?t[0]:null})();return e&&e.el?h(e.el):null},m=()=>n(this,void 0,void 0,(function*(){const t=e.padding,n=o.state.editor.sbEditorWrapper.value,i=f(),r=(()=>{const e=document.querySelector(".sb-editor-container");return e?h(e):null})();if(!n||!i||!r)return!1;const a=r.offsetTop>i.top,s=r.offsetTop+r.height<i.height+i.top+e.height,l=i.left-(r.left+r.offsetLeft)<e.width/2-i.width/2,c=r.left+r.offsetLeft+r.width<i.left+i.width/2+e.width/2,u=i.height+e.height>r.height,p=i.width>r.width;let m=r.offsetLeft,g=r.offsetTop;a&&(g=i.top-t),s&&(g=i.top+i.height+e.height-r.height+t),u&&(g=Math.max(i.height-r.height,0)+i.top+e.height);const v=Math.max((e.width-i.width)/2,0);return l&&(m=i.left-r.left-t-v),c&&(m=i.left-r.left+i.width-r.width+v+t),p&&(m=i.left+v),!(a||s||l||c||u||p)||(yield new Promise((e=>{const t={deltaX:r.offsetLeft-m,deltaY:r.offsetTop-g,option:{animate:!1,finishToRun:()=>e(!0)}};n.execAction(d,t)})),!0)})),g=()=>n(this,void 0,void 0,(function*(){const e=f();return!!e&&(a.value=e.left,c.value=e.right,p.value=e.bottom,u.value=e.top,yield r.default.nextTick(),!0)})),v=()=>{i.value&&i.value.close()},b=()=>n(this,void 0,void 0,(function*(){if(!((yield m())&&(yield g())))return v();i.value&&i.value.show()}));s.onMounted((()=>{e.autoShowOnMounted&&b()})),s.onBeforeUnmount((()=>{v()}));return{popoverEl:i,popoverLeft:a,popoverRight:c,popoverTop:u,popoverBottom:p,onPopoverClose:()=>{t.emit("popover:close"),o.commit("workbench/POPOVER_VISIBLE",{name:""})},show:b,hide:()=>{i&&i.value.hide()},close:v}}})},24984:(e,t,o)=>{"use strict";Object.defineProperty(t,"X",{value:!0});const n=o(90571),i=o(32118);t.Z=n.createComponent({name:"slide-preview",components:{},props:{slide:{type:Object},slideSize:{type:Object,required:!0},containerSize:{type:Object},muted:{type:Boolean,default:!1}},setup(e){const t=n.getCurrentInstance(),o=n.inject("contentProvider"),r=new i.PresentationView({initialSlide:null});r.el.style.width=`${e.containerSize.width}px`,r.el.style.height=`${e.containerSize.height}px`,r.el.style.backgroundColor="unset",r.contentEl.style.backgroundColor="unset";const a=n.ref(!0),s=n.ref(t.$toResourceURL("static/images/format-panel/slide/hide.svg")),l=()=>{e.slide&&(o&&o.aspectRatio&&(a.value=!["Auto","16:9"].includes(o.aspectRatio)),r.slideView.slide=null,r.slideView.update(),r.slideView.slide=e.slide,r.slideView.update(),r.update())};return n.watch((()=>e.slide),(()=>l())),n.onMounted((()=>{t.$el.appendChild(r.el),l()})),{mutedLogo:s,blackBackground:a,updatePreview:l}}})},10882:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/attachment.svg"},75892:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTYgKDgxNTg4KSAtIGh0dHBzOi8vc2tldGNoLmNvbS0tPjx0aXRsZT5hdWRpb25vdGU8L3RpdGxlPjxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPjxnIGlkPSJhdWRpb25vdGUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy4wMDAwMDAsIDEuMDAwMDAwKSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEuMiI+PHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMi4zODIiIHk9IjAuNiIgd2lkdGg9IjUuMDM3IiBoZWlnaHQ9IjguNjAxIiByeD0iMi41MTg1Ii8+PHBhdGggZD0iTTkuODAxLDUuMzQ2IEw5LjgwMSw2LjM4NTUgQzkuODAxLDkuMjU1OTk5OTkgNy42MDY5NzE0MiwxMS41ODMgNC45MDA1LDExLjU4MyBDMi4xOTQwMjg1OCwxMS41ODMgMCw5LjI1NTk5OTk5IDAsNi4zODU1IEwwLDUuMzQ2IiBpZD0iUGF0aCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTQuOTAwNSwxMi4wMjg1IEw0Ljk1LDEzLjIiIGlkPSJQYXRoLTQ5IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L2c+PC9nPjwvc3ZnPg=="},34807:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTUgKDc4MDc2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbS0tPjx0aXRsZT5kYXNoPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0iZGFzaCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iMC4xIj48ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguNTAwMDAwLCAxLjUwMDAwMCkiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PHBvbHlnb24gaWQ9IlBhdGgiIHBvaW50cz0iMC4xIDAgMC4xIDMgMC45IDMgMC45IDAiLz48cG9seWdvbiBpZD0iUGF0aCIgcG9pbnRzPSIwLjEgNiAwLjEgOSAwLjkgOSAwLjkgNiIvPjxwb2x5Z29uIGlkPSJQYXRoIiBwb2ludHM9IjAuMSAxMiAwLjEgMTUgMC45IDE1IDAuOSAxMiIvPjwvZz48L2c+PC9zdmc+"},31471:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGU+ZGFzaDwvdGl0bGU+PGcgaWQ9ImRhc2giIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuMiI+PGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjUwMDAwMCwgMS41MDAwMDApIiBmaWxsPSIjMDAwMDAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjxwb2x5Z29uIGlkPSJQYXRoIiBwb2ludHM9IjAuMSAwIDAuMSAzIDAuOSAzIDAuOSAwIi8+PHBvbHlnb24gaWQ9IlBhdGgiIHBvaW50cz0iMC4xIDYgMC4xIDkgMC45IDkgMC45IDYiLz48cG9seWdvbiBpZD0iUGF0aCIgcG9pbnRzPSIwLjEgMTIgMC4xIDE1IDAuOSAxNSAwLjkgMTIiLz48L2c+PC9nPjwvc3ZnPg=="},13275:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/drag_ctrl.svg"},33779:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTYgKDgxNTg4KSAtIGh0dHBzOi8vc2tldGNoLmNvbS0tPjx0aXRsZT5maWxlbGluazwvdGl0bGU+PGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+PGcgaWQ9ImZpbGVsaW5rIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjUwMDAwMCwgMi4wMDAwMDApIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMS4yIj48cG9seWxpbmUgaWQ9IlBhdGgtMTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAyLjI1MDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0yLjI1MDAwMCkgIiBwb2ludHM9IjAuNSAwIDAuNSA0LjUgNC41IDQuNSIvPjxwYXRoIGQ9Ik05LjUsMCBMNCwwIEwwLDQgTDAsMTEgQzYuNzYzNTM3NTFlLTE3LDExLjU1MjI4NDcgMC40NDc3MTUyNSwxMiAxLDEyIEw4LjUsMTIgTDkuNSwxMiBDMTAuMDUyMjg0NywxMiAxMC41LDExLjU1MjI4NDcgMTAuNSwxMSBMMTAuNSwzIEwxMC41LDEgQzEwLjUsMC40NDc3MTUyNSAxMC4wNTIyODQ3LC0xLjAxNDUzMDYzZS0xNiA5LjUsMCBaIiBpZD0iUGF0aC0xMyIvPjwvZz48L2c+PC9zdmc+"},9073:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGU+Zm9sZF90cmlhbmdsZV9pY29uX3doaXRlPC90aXRsZT48ZyBpZD0iZm9sZF90cmlhbmdsZV9pY29uX3doaXRlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNC41NzYsMy40MzIgTDExLjYxNiw4LjcxMiBDMTEuNzc1MDU4LDguODMxMjkzNTEgMTEuODA3MjkzNSw5LjA1Njk0MTk5IDExLjY4OCw5LjIxNiBDMTEuNjY3NTMyNSw5LjI0MzI5MDA0IDExLjY0MzI5LDkuMjY3NTMyNDcgMTEuNjE2LDkuMjg4IEw0LjU3NiwxNC41NjggQzQuNDE2OTQxOTksMTQuNjg3MjkzNSA0LjE5MTI5MzUxLDE0LjY1NTA1OCA0LjA3MiwxNC40OTYgQzQuMDI1MjY0MDMsMTQuNDMzNjg1NCA0LDE0LjM1Nzg5MzMgNCwxNC4yOCBMNCwzLjcyIEM0LDMuNTIxMTc3NDkgNC4xNjExNzc0OSwzLjM2IDQuMzYsMy4zNiBDNC40Mzc4OTMyOCwzLjM2IDQuNTEzNjg1MzgsMy4zODUyNjQwMyA0LjU3NiwzLjQzMiBaIiBpZD0iUGF0aC03IiBmaWxsPSIjRjZGNkY2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjAwMDAwMCwgOS4wMDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC04LjAwMDAwMCwgLTkuMDAwMDAwKSAiLz48L2c+PC9zdmc+"},52836:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/hyperlink.svg"},66391:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/bold.svg"},60044:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/italic.svg"},46773:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/link.svg"},88937:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNnB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48IS0tR2VuZXJhdG9yOiBTa2V0Y2ggNTYgKDgxNTg4KSAtIGh0dHBzOi8vc2tldGNoLmNvbS0tPjx0aXRsZT5saXN0PC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBpZD0ibGlzdCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgaWQ9ImJ1bGxldCI+PHJlY3QgaWQ9IlJlY3RhbmdsZS04MyIgZmlsbD0iIzAwMDAwMCIgb3BhY2l0eT0iMC45IiB4PSI1LjAzMTI1IiB5PSIzLjUiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxLjI1IiByeD0iMC4yNSIvPjxyZWN0IGlkPSJSZWN0YW5nbGUtODMtQ29weS0yIiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwLjkiIHg9IjUuMDMxMjUiIHk9IjcuNzUiIHdpZHRoPSI5IiBoZWlnaHQ9IjEuMjUiIHJ4PSIwLjI1Ii8+PHJlY3QgaWQ9IlJlY3RhbmdsZS04My1Db3B5LTMiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAuOSIgeD0iNS4wMzEyNSIgeT0iMTIiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxLjI1IiByeD0iMC4yNSIvPjxjaXJjbGUgaWQ9Ik92YWwiIGZpbGw9IiMxOTE5MTkiIGN4PSIyLjUiIGN5PSI0IiByPSIxIi8+PGNpcmNsZSBpZD0iT3ZhbC1Db3B5IiBmaWxsPSIjMTkxOTE5IiBjeD0iMi41IiBjeT0iOC41IiByPSIxIi8+PGNpcmNsZSBpZD0iT3ZhbC1Db3B5LTIiIGZpbGw9IiMxOTE5MTkiIGN4PSIyLjUiIGN5PSIxMi41IiByPSIxIi8+PC9nPjwvZz48L3N2Zz4="},23026:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/number.svg"},91407:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/underline.svg"},65795:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o.p+"images/topic-link.svg"},24186:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(85886);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("ul",{staticClass:"uk-color-picker-grid",attrs:{"uk-list-select":"","uk-traverse":"","data-item":"li > button:not(:disabled)","data-columns":"9","data-cls-active":"false"},on:{click:e.handleClickInsideColorPicker}},e._l(e.computedGridOptions,(function(t,n){return o("li",{key:"grid@"+n},[o("button",{ref:"gridButton",refInFor:!0,staticClass:"uk-button uk-color-picker-button",class:{"uk-color-picker-button-selected":e.internalValue===t.value},style:{"background-color":t.value},attrs:{title:t.label||"",value:t.value,"data-ref":"gridButton"}})])})),0)])}),[],!1,null,null,null).exports},64650:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(23664);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-color-well"},[o("button",{ref:"button",staticClass:"uk-color-well-button uk-button uk-button-default uk-button-compact",style:{"background-color":e.computedInputColor},attrs:{type:"button",title:e.title}},[e.iconUrl?o("img",{staticClass:"uk-height-1-1",attrs:{"uk-svg":"",src:e.iconUrl,alt:""}}):e.internalValue===e.noneValue?o("svg",{attrs:{width:"100%",height:"100%"}},[o("line",{attrs:{x1:"0%",y1:"100%",x2:"100%",y2:"0%","stroke-dasharray":"2,1",stroke:"currentcolor","stroke-opacity":".1"}})]):e.internalValue===e.intermediateValue?o("svg",{attrs:{width:"100%",height:"100%"}},[o("circle",{attrs:{cx:"50%",cy:"50%",r:"2",fill:"currentcolor","fill-opacity":".1"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% - 9px)",cy:"50%",r:"2",fill:"currentcolor","fill-opacity":".1"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% + 9px)",cy:"50%",r:"2",fill:"currentcolor","fill-opacity":".1"}})]):e._e()]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-color-well-popover",attrs:{"uk-popover":"","data-pos":e.popoverPos,"data-autofocus-on-close":e.autofocusOnClose?"true":"false","data-sel-close":"> * .uk-color-picker-button"}},[o("div",{staticClass:"uk-padding-small"},[e._t("header"),e._v(" "),o("ul",{staticClass:"uk-color-picker"},[e.gridOptions.length>0?o("li",[o("color-wall",{attrs:{"grid-options":e.gridOptions,value:e.value},on:{input:e.handleColorInput}})],1):e._e(),e._v(" "),o("li",{staticClass:"uk-color-picker-customize uk-flex uk-flex-between"},[o("div",{staticClass:"uk-color-picker-input uk-flex uk-flex-middle"},[o("div",{staticClass:"uk-color-picker-hex-input uk-inline uk-input",staticStyle:{padding:"0","box-sizing":"content-box",width:"127px"}},[o("span",{staticClass:"uk-form-icon",attrs:{"uk-icon":"icon: hashtag"}}),e._v(" "),o("input",{ref:"hexColorInput",staticClass:"\n                  uk-input uk-text-muted uk-text-justify uk-overflow-hidden\n                ",staticStyle:{width:"72px",height:"18px",margin:"2px 0 2px 1px","padding-right":"0 !important",border:"none","box-shadow":"none"},attrs:{title:e.colorValueTooltips},domProps:{value:e.computedColorTypeValue.replace("#","")},on:{blur:e.handleHexInput,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleHexInput(t)}}}),e._v(" "),o("input",{staticClass:"\n                  uk-input uk-text-center uk-overflow-hidden\n                  divider-vertical-border-color\n                ",staticStyle:{border:"none","border-left":"1px solid","border-radius":"0","box-shadow":"none",width:"31px",height:"11px",padding:"0 0 0 6px !important","vertical-align":"middle"},attrs:{disabled:!e.computedInputValue,title:e.colorOpacityTooltips},domProps:{value:e.computedOpacityNumber},on:{blur:e.handleOpacityInput,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleOpacityInput(t)}}}),e._v(" "),o("span",{staticStyle:{"margin-left":"-2px",display:"inline-block","vertical-align":"middle"}},[e._v("%")])]),e._v(" "),o("div",{staticClass:"uk-color-picker-input-preview uk-margin-small-left",style:{"background-color":e.computedInputValue}})]),e._v(" "),o("label",{staticClass:"uk-color-well-label",attrs:{for:e.computedInputId,title:e.colorSelectorTooltips}},[o("input",{ref:"input",staticClass:"uk-color-well-input",attrs:{id:e.computedInputId,type:"color",name:e.name},domProps:{value:e.computedColorTypeValue},on:{input:e.handleHexInput,click:e.handleInputClick}})])]),e._v(" "),e._t("default")],2),e._v(" "),e._t("footer")],2),e._v(" "),e._t("bottom")],2)])}),[],!1,null,null,null).exports},86106:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(53646);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-window uk-overflow-hidden",style:{border:e.isWin?"none":void 0},attrs:{id:"app",spellcheck:e.currentSpellCheckValue}},[o("div",{staticClass:"uk-window-body uk-panel uk-overflow-hidden"},[o("workbench",{ref:"workbench"}),e._v(" "),e.mapShot?o("mapshot"):e._e()],1)])}),[],!1,null,null,null).exports},53597:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(69735);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"},{name:"focus",rawName:"v-focus"}],staticClass:"uk-position-cover"},[o("div",{staticClass:"popover-target uk-position-fixed",style:[e.targetBounds]}),e._v(" "),o("div",{ref:"popoverBox",style:[{width:e.width,height:e.height}],attrs:{"uk-popover":""}},[e._t("default")],2)])}),[],!1,null,null,null).exports},56957:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(69121);var i=function(e){o(39413)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-panel uk-background-default uk-flex uk-flex-column uk-flex-center uk-flex-middle"},[o("div",{staticClass:"uk-text-center uk-text-muted"},[o("div",{staticClass:"uk-margin uk-display-block custom-spinner",class:{dark:"dark"===e.appearance}}),e._v(" "),e.text?o("div",{staticClass:"uk-margin"},[e._v("\n      "+e._s(e.text)+"\n    ")]):e._e()])])}),[],!1,i,"data-v-e41379a2",null).exports},30486:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(53848);var i=function(e){o(41878)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:["tooltiptext"+e.description.index,{hideTopbarText:!e.showText}]},[o("h5",{staticClass:"tooltiptext-headline"},[e._v("\n    "+e._s(e.description.title)+"\n  ")]),e._v(" "),o("p",{class:{center:e.description.center,"tooltiptext-content":!e.description.center}},[e._v("\n    "+e._s(e.description.text)+"\n  ")])])}),[],!1,i,"data-v-3e0aeb9a",null).exports},53436:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(50400);var i=function(e){o(96279)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.audioBarVisible?o("div",{staticClass:"uk-position-absolute uk-position-top-center uk-box-shadow-floating uk-background-default",staticStyle:{width:"248px",height:"52px","z-index":"1","margin-top":"24px","border-radius":"8px"},style:{visibility:e.visible?"visible":"hidden"}},[o("div",{staticClass:"uk-flex uk-flex-middle uk-height-1-1 uk-width-1-1"},["audio_record"===e.audioBarMode?o("div",{staticClass:"uk-flex uk-flex-middle uk-flex-row uk-height-1-1 uk-width-expand uk-margin-left"},[o("button",{staticClass:"uk-button uk-button-icon uk-margin-small-right uk-padding-remove audio-btn",on:{click:function(t){return e.clickRecord()}}},[o("img",{staticClass:"uk-preserve",staticStyle:{width:"32px",height:"32px"},attrs:{draggable:"false","uk-svg":"",src:e.$toResourceURL("static/assets/images/audio/"+e.getClassByAduioStatus(e.audioStatus)+".svg")}})]),e._v(" "),o("div",{staticStyle:{"font-size":"18px"}},[e._v("\n        "+e._s(e.recordTimeString)+"\n      ")])]):e._e(),e._v(" "),"audio_play"===e.audioBarMode||"open_new_audio_play"===e.audioBarMode?o("div",{staticClass:"uk-flex uk-flex-middle uk-flex-row uk-height-1-1 uk-width-expand uk-margin-left"},[o("button",{staticClass:"uk-button uk-button-icon uk-margin-right uk-padding-remove audio-btn",on:{click:function(t){return e.clickPlay()}}},[o("img",{staticClass:"uk-preserve",staticStyle:{width:"32px",height:"32px"},attrs:{draggable:"false","uk-svg":"",src:e.$toResourceURL("static/assets/images/audio/"+e.getClassByAduioStatus(e.audioStatus)+".svg")}})]),e._v(" "),o("div",{staticStyle:{"font-size":"18px"}},[e._v("\n        "+e._s(e.playerTimeString)+"\n      ")])]):e._e(),e._v(" "),o("button",{staticClass:"uk-button uk-button-icon uk-button-tile uk-icon uk-margin-right",staticStyle:{width:"24px",height:"24px"},attrs:{"uk-icon":"close"},on:{click:function(t){return e.close()}}})])]):e._e()}),[],!1,i,"data-v-84e50384",null).exports},17570:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(49278);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-visible-toggle uk-flex uk-flex-row uk-flex-middle uk-height-1-1 uk-position-relative",style:{visibility:e.isInMapShotMode?"hidden":"visible"},on:{dragover:function(t){return e.onDragOver(t)},dragleave:function(t){return e.onDragLeave(t)},drop:function(t){return e.onDrop(t)},dragenter:function(t){return t.stopPropagation(),e.onDragEnter(t)}}},[e.isInMapShotMode?o("div",{staticClass:"uk-height-1-1 uk-width-1-1 uk-position-absolute",staticStyle:{"z-index":"2"}}):e._e(),e._v(" "),o("div",{staticClass:"uk-workbench-sheet-bar uk-height-1-1",class:[{"uk-invisible-hover":e.currentSheets&&e.currentSheets.length<=1&&null===e.editingSheetTitleId&&!e.isZenMode}],staticStyle:{overflow:"hidden"}},[o("ul",{ref:"sheetBarTab",staticClass:"uk-tab uk-tab-capsule uk-flex uk-flex-row uk-flex-nowrap uk-overflow-auto uk-scrollbar-hidden uk-height-1-1 uk-margin-remove-bottom",attrs:{"uk-tab":""},on:{scroll:e._sheetContainerScrolled}},[e._l(e.currentSheets,(function(t,n){var i=t.id,r=t.title;return[o("li",{key:i,ref:"sheetBarTabItem",refInFor:!0,staticClass:"uk-height-1-1 divider-vertical",class:{"uk-active":e.activeSheetId===i,"divider-vertical-active":e.activeSheetId===i,"divider-vertical-clear":0===n},attrs:{"data-index":n,draggable:null===e.editingSheetTitleId},on:{dragstart:function(t){return e.onDragStart(t,i)},dragend:e.onDragEnd}},[o("a",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-visible-toggle uk-flex uk-flex-row uk-flex-top uk-padding-remove uk-margin-remove uk-overflow-hidden uk-height-1-1",staticStyle:{"min-width":"24px","max-width":"220px",cursor:"default",padding:"2px"},attrs:{draggable:"false"},on:{click:function(t){return e.onSheetTabClicked(i)},contextmenu:function(t){return e._openSheetItemContextMenu(i,r)}}},[o("div",{directives:[{name:"show",rawName:"v-show",value:null===e.editingSheetTitleId||e.editingSheetTitleId!==i,expression:"\n                editingSheetTitleId === null || editingSheetTitleId !== id\n              "}],staticClass:"uk-flex uk-flex-row uk-flex-middle uk-padding-xsmall uk-padding-remove-vertical",on:{dblclick:function(t){return e._showTitleEditor(i,r)}}},[o("div",{staticClass:"uk-padding-remove uk-margin-left uk-text-truncate"},[e._v("\n                "+e._s(r)+"\n              ")]),e._v(" "),o("div",{staticClass:"uk-icon uk-padding-remove uk-margin-remove uk-invisible-hover",staticStyle:{"line-height":"17px"},attrs:{"uk-icon":"icon: chevron-down"},on:{click:function(t){return e._openSheetItemContextMenu(i,r)}}})]),e._v(" "),null!==e.editingSheetTitleId&&e.editingSheetTitleId===i?o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-padding-remove"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],ref:"sheetTitleEditor",refInFor:!0,staticClass:"uk-input uk-padding-remove-vertical",staticStyle:{border:"none",width:"100%"},attrs:{type:"text"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e._saveAndHideTitleEditor(i)},blur:function(t){return e._saveAndHideTitleEditor(i)}}})]):e._e()])])]}))],2)]),e._v(" "),o("div",{staticClass:"divider-vertical",class:{"divider-vertical-clear":e.activeSheetId===e.currentSheets[e.currentSheets.length-1].id},style:{width:"1px",height:"22px",marginRight:"1px"}}),e._v(" "),o("div",{staticClass:"uk-child-separator uk-separator-vertical uk-flex uk-flex-row uk-flex-middle uk-height-1-1"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isSheetGroupOverflow,expression:"isSheetGroupOverflow"}],staticClass:"uk-flex uk-flex-row uk-flex-middle uk-height-1-1"},[o("div",{staticClass:"uk-padding-remove uk-margin-remove uk-height-1-1",class:[{"uk-disabled":e.swapLeftDisable}],attrs:{disabled:e.swapLeftDisable}},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-xsmall uk-padding-remove-vertical uk-border-none uk-height-1-1",staticStyle:{"border-radius":"0"},attrs:{"uk-icon":"previous"},on:{click:e._swapLeft}})]),e._v(" "),o("div",{staticClass:"uk-padding-remove uk-margin-remove uk-height-1-1",class:[{"uk-disabled":e.swapRightDisable}],attrs:{disabled:e.swapLeftDisable}},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-xsmall uk-padding-remove-vertical uk-border-none uk-height-1-1",staticStyle:{"border-radius":"0"},attrs:{"uk-icon":"next"},on:{click:e._swapRight}})])]),e._v(" "),o("div",{staticClass:"uk-padding-remove uk-margin-remove",class:[{"uk-invisible-hover":e.currentSheets&&e.currentSheets.length<=1}]},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-border-rounded uk-height-1-1",style:{width:"22px",height:"22px",minHeight:"22px"},attrs:{"uk-icon":"add",title:e.wrappedTooltipWithKeybinding(e.$T("Add a new sheet."),"editor.addSheet")},on:{click:e._addSheet}})])])])}),[],!1,null,null,null).exports},20823:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(48971);var i=function(e){o(4140)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"workbench-status-bar",style:{height:"33px"}},[o("hr",{staticClass:"uk-separator"}),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-padding-xsmall"},[o("sheetbar",{staticClass:"uk-width-expand",attrs:{"is-zen-mode":e.isZenMode,"is-in-map-shot-mode":e.isInMapShotMode},on:{"work-in-process":function(t){return e.$emit("work-in-process",t)}}}),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-height-1-1"},[e.isInMapShotMode?e._e():o("topiccountcard",{staticStyle:{"align-self":"stretch"}}),e._v(" "),e.isInMapShotMode?e._e():o("div",{staticClass:"statusbar-divider-vertical divider-vertical-color"}),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle",staticStyle:{"align-self":"stretch"}},[e.isOvervieShow?o("div",[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-icon",class:{"uk-active":e.minimapEnable},staticStyle:{width:"34px"},attrs:{disabled:e.isOverviewDisabled,"uk-icon":"masp",title:e.wrappedTooltipWithKeybinding(e.$T("Show or hide map overview."),"editor.toggleMiniMap")},on:{click:e.onOverviewButtonClicked}})]):e._e(),e._v(" "),e.isOvervieShow?o("div",{staticClass:"statusbar-divider-vertical divider-vertical-color"}):e._e(),e._v(" "),o("zoom-control-group")],1)],1)],1)])}),[],!1,i,"data-v-2aab1017",null).exports},77284:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(13980);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-height-1-1"},[o("div",{staticClass:"uk-height-1-1"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],ref:"zoomScaleButton",staticClass:"uk-button uk-button-tile uk-padding-remove-vertical uk-flex uk-flex-middle uk-height-1-1",style:{minWidth:"64px"},attrs:{disabled:e.isZoomGroupDisabled},on:{click:e.onZoomScaleButtonClicked}},[o("span",{staticClass:"uk-padding-small uk-padding-remove-vertical",attrs:{title:e.$T("Zoom in/out.")}},[e._v("\n        "+e._s(e.zoomValueDisplay)+"\n      ")]),e._v(" "),o("span",{attrs:{"uk-icon":"icon: form-arrow-up-down"}})])])])}),[],!1,null,null,null).exports},92730:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(50268);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{border:"none"}},[o("button",{staticClass:"uk-button uk-button-primary uk-flex uk-flex-middle",staticStyle:{"padding-left":"12px","padding-right":"12px"},on:{mouseup:function(t){return t.preventDefault(),e.exitBranchOnlyMode(t)}}},[o("span",{attrs:{"uk-icon":"icon: arrow-left"}}),e._v(" "),o("span",{staticClass:"uk-margin-xsmall-left"},[e._v(" "+e._s(e.$T("Show Full Content"))+" ")])])])}),[],!1,null,null,null).exports},33411:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(71308);var i=function(e){o(70672)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"drag-bar",on:{mousedown:e.onDragBarMouseDown}})}),[],!1,i,"data-v-12dffc0b",null).exports},22602:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(61487);var i=function(e){o(27560)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-panel uk-position-cover"},[o("div",{staticClass:"uk-panel uk-position-cover uk-flex uk-flex-column uk-child-separator"},[e.isBranchOnlyMode&&!e.isInMapShotMode?o("branchonlybar",{staticClass:"uk-position-absolute",staticStyle:{left:"20px",top:"20px","z-index":"1"}}):e._e(),e._v(" "),o("div",{staticClass:"uk-panel uk-height-expand uk-background-default"},[o("div",{staticClass:"uk-height-1-1 uk-width-1-1 uk-position-relative uk-background-default",attrs:{id:"zenModeContainer"}},[o("spinner",{directives:[{name:"show",rawName:"v-show",value:e.sheetRendering&&e.isZenMode,expression:"sheetRendering && isZenMode"}],staticClass:"sheet-rendering-mask uk-position-cover"}),e._v(" "),o("div",{class:{"sheet-rendering-wrapper":e.sheetRendering&&e.isZenMode}},[o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.mindMap"],expression:"['focus.mindMap']",arg:"group"}],ref:"sbEditorContainer",staticClass:"uk-panel uk-position-cover sb-editor-container"}),e._v(" "),o("audiobar",{attrs:{visible:!e.isInMapShotMode}}),e._v(" "),e.isZenMode?o("zenmodebar"):e._e(),e._v(" "),"notes"===e.currentVisiblePopover||e.notesEverVisible?o("notes",{attrs:{visible:"notes"===e.currentVisiblePopover}}):e._e(),e._v(" "),"hyperlinkeditor"===e.currentVisiblePopover?o("hyperlinkeditor"):e._e(),e._v(" "),"labeleditor"===e.currentVisiblePopover?o("labeleditor"):e._e(),e._v(" "),"informationcard"===e.currentVisiblePopover?o("informationcard"):e._e(),e._v(" "),"markerpopup"===e.currentVisiblePopover?o("markerpopup"):e._e(),e._v(" "),"equation-editor"===e.currentVisiblePopover?o("equation-editor"):e._e()],1)],1)])],1),e._v(" "),o("div",{ref:"labelTipEl",staticClass:"editor-label-tip",style:{top:e.labelTip.top,left:e.labelTip.left,visibility:e.labelTip.show?"visible":"hidden"},attrs:{"v-if":e.labelTip.content}},[o("div",{staticClass:"editor-label-tip-arrow editor-label-tip-arrow-border-color"}),e._v(" "),o("div",{staticClass:"editor-label-tip-content editor-label-tip-content-background-color"},[e._v("\n      "+e._s(e.labelTip.content)+"\n    ")])]),e._v(" "),o("transition",{attrs:{name:"beginner"}},[e.$store.state.editor.isBeginnerModeVisible&&!e.isZenMode?o("beginner-mode"):e._e()],1),e._v(" "),o("transition",{attrs:{name:"dialog"}},[e.$store.state.editor.isBeginnerDialogVisible?o("tutorial-dialog"):e._e()],1)],1)}),[],!1,i,"data-v-e15bd346",null).exports},15431:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(903),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(30707);var s=function(e){o(26770)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-a0b24b74",null).exports},43643:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(34550);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticStyle:{width:"76px"}},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-icon uk-button-popover-toggle uk-padding-remove-left uk-overflow-hidden",class:e.toggleClasses,attrs:{disabled:e.isDisabled,title:e.title,"data-focus":"redirect: > [uk-popover] > .uk-button"}},[e.isMultiple?[o("svg",{attrs:{width:"100%"}},[o("circle",{attrs:{cx:"50%",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% - 9px)",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% + 9px)",cy:"50%",r:"2",fill:"currentcolor"}})])]:e.selectedItem?[o("img",{staticClass:"uk-preserve",staticStyle:{"pointer-events":"none"},attrs:{draggable:"false","uk-svg":"",src:e.selectedItem.img}})]:e._e()],2),e._v(" "),o("div",{ref:"popover",staticStyle:{width:"240px"},style:e.popoverStyles,attrs:{"uk-popover":"","data-pos":e.pos,tabindex:"-1","data-sel-close":".popover-list > button"}},[o("div",{staticClass:"uk-flex uk-flex-column uk-width-1-1 uk-height-1-1"},[e._t("header"),e._v(" "),o("div",{staticClass:"popover-list uk-width-1-1 uk-height-1-1 uk-padding-medium uk-padding-remove-horizontal",staticStyle:{overflow:"overlay"}},e._l(e.items,(function(t,n){return o("button",{key:n,staticClass:"uk-button uk-button-icon uk-button-filled-tile uk-flex uk-flex-middle uk-width-1-1 uk-flex-left uk-border-none",staticStyle:{height:"36px"},attrs:{autofocus:0===n},on:{click:function(o){return e.handleItemSelect(t.value)}}},[o("span",{staticClass:"uk-flex-no-shrink",style:{visibility:(e.selectedItem&&e.selectedItem.value)===t.value?"visible":"hidden","margin-left":"16px"},attrs:{"uk-icon":"checked"}}),e._v(" "),o("img",{staticClass:"uk-preserve uk-flex-no-shrink",staticStyle:{"margin-left":"4px","margin-right":"6px",width:"48px",height:"36px","pointer-events":"none"},style:e.itemStyles,attrs:{draggable:"false","uk-svg":"","data-src":t.img}}),e._v(" "),o("span",{staticClass:"fw-text-caption uk-flex-no-shrink"},[e._v("\n            "+e._s(t.title)+"\n          ")])])})),0),e._v(" "),e._t("footer")],2)])])}),[],!1,null,null,null).exports},90212:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(94086),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(88506);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},2:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(53426);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticStyle:{width:"52px"}},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-icon uk-button-popover-toggle uk-padding-remove-left uk-small-toggle",staticStyle:{padding:"0 12px 0 0"},attrs:{disabled:e.isDisabled,title:e.title}},[e.isMultiple?[o("svg",{attrs:{width:"100%"}},[o("circle",{attrs:{cx:"50%",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% - 9px)",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% + 9px)",cy:"50%",r:"2",fill:"currentcolor"}})])]:e.selectedItem?[o("img",{staticClass:"uk-preserve",staticStyle:{"pointer-events":"none",width:"40px"},attrs:{draggable:"false","uk-svg":"",src:e.selectedItem.img}})]:e._e()],2),e._v(" "),o("div",{ref:"popover",staticStyle:{width:"66px"},attrs:{"uk-popover":"","data-pos":e.pos,"data-sel-close":"button"}},[o("div",{staticClass:"uk-padding-small uk-padding-remove-horizontal"},e._l(e.items,(function(t,n){return o("button",{key:n,staticClass:"uk-button uk-button-icon uk-button-filled-tile uk-flex uk-flex-middle uk-flex-left uk-border-none uk-width-1-1",attrs:{autofocus:0===n,title:t.title},on:{click:function(o){return e.handleItemSelect(t.value)}}},[o("span",{style:{visibility:(e.selectedItem&&e.selectedItem.value)===t.value?"visible":"hidden",marginLeft:"4px"},attrs:{"uk-icon":"checked"}}),e._v(" "),o("img",{staticClass:"uk-preserve",staticStyle:{"margin-left":"-5px",width:"40px","pointer-events":"none"},attrs:{draggable:"false","uk-svg":"",src:t.img}})])})),0)])])}),[],!1,null,null,null).exports},89466:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(41773);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}]},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-width-1-1 uk-button uk-button-popover-toggle uk-select-icon uk-text-left",attrs:{title:e.$T("Choose the font family.")}},[e._v("\n    "+e._s(e.currentFont.text)+"\n  ")]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-height-medium uk-height-medium uk-popover-contextual",staticStyle:{width:"250px"},attrs:{"uk-contextual-popover":"offsetLeft:-8;","align-checked":e.alignChecked.toString(),"data-sel-close":"[uk-menu] > li > button"}},[o("div",{staticClass:"uk-position-cover uk-background-default uk-flex uk-flex-column uk-flex-center uk-flex-middle",style:{display:e.isFontsLoaded?"none":"flex"}},[o("div",{staticClass:"uk-margin uk-display-block uk-text-muted",attrs:{"uk-spinner":"ratio: 0.6;"}})]),e._v(" "),o("ul",{ref:"fontPreviewContainer",staticClass:"uk-overflow-auto uk-height-1-1",staticStyle:{"max-height":"300px"},style:{display:e.isFontsLoaded?"block":"none"},attrs:{"uk-menu":""},on:{scroll:e.renderVisibleFontPreview}},[e.computedRecommendFonts&&e.computedRecommendFonts.length?[e._l(e.computedRecommendFonts,(function(t,n){return o("li",{key:"recentFontFamily-"+n},[o("button",{class:{"uk-checked":e.currentFont.value===t.value},attrs:{autofocus:!e.alignChecked&&0===n},on:{click:function(o){return e.handleFontSelect(t.value)}}},[o("span",{style:{"font-family":t.value}},[e._v("\n              "+e._s(t.text)+"\n            ")])])])})),e._v(" "),o("li",{staticClass:"uk-menu-divider"})]:e._e(),e._v(" "),e._l(e.fonts,(function(t,n){return o("li",{key:"fontFamily-"+n},[o("button",{class:{"uk-checked":e.currentFont.value===t.value},attrs:{autofocus:!!e.alignChecked&&e.autoFocusIndex===n},on:{click:function(o){return e.handleFontSelect(t.value)}}},[o("span",{staticClass:"font-preview",staticStyle:{display:"none"},style:{"font-family":t.value}},[e._v("\n            "+e._s(t.text)+"\n          ")])])])}))],2)])])}),[],!1,null,null,null).exports},65107:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(23275);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("combo-box",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],ref:"comboBox",attrs:{value:e.internalValue,title:e.$T("Set the font size.")},on:{input:function(t){e.internalValue=t},focus:function(t){return e.$emit("focus")},blur:function(t){return e.handleFontsizeChange(e.internalValue,"blur")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFontsizeChange(e.internalValue)}}},e._l(e.fontSizes,(function(t,n){return o("li",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],key:n},[o("button",{attrs:{value:t},on:{click:function(o){return e.handleFontsizeChange(t)}}},[e._v("\n      "+e._s(t)+"\n    ")])])})),0)}),[],!1,null,null,null).exports},66567:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(85298);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}]},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-width-1-1 uk-button uk-button-popover-toggle uk-select-icon uk-text-left",attrs:{title:e.$T("Choose the font style."),disabled:!e.computedFontStyles||!e.computedFontStyles.length}},[e._v("\n    "+e._s(e.computedFontStyle.style)+"\n  ")]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-popover-contextual",attrs:{"uk-contextual-popover":"offsetLeft: 20","data-sel-close":"[uk-menu] > li"}},[o("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",staticStyle:{"min-height":"42px"},attrs:{"uk-menu":""}},e._l(e.computedFontStyles,(function(t,n){var i=t.style,r=t.weight,a=t.italic;return o("li",{key:n,on:{click:function(t){return e.handleSelectFontStyle({style:i,weight:r,italic:a})}}},[o("button",{class:{"uk-checked":e.computedFontStyle.style===i},attrs:{autofocus:e.computedFontStyle.style===i}},[o("span",{style:{"font-family":e.fontFamily,"font-weight":r,"font-style":a?"italic":"normal"}},[e._v(e._s(i))])])])})),0)])])}),[],!1,null,null,null).exports},38657:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(94573);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",[o("button",{staticClass:"uk-width-1-1 uk-button uk-button-popover-toggle uk-select-icon uk-text-left",staticStyle:{"line-height":"unset",overflow:"hidden"},attrs:{disabled:e.disabled,title:e.title}},[e.isMultiple?o("span",[e._v(e._s(e.$T("Multiple")))]):e.selectedItem&&e.styleValuesToStrokeDashArray[e.selectedItem.value]?o("svg",{staticClass:"uk-width-1-1"},[o("line",{attrs:{x1:"0%",y1:"50%",x2:"95%",y2:"50%","stroke-dasharray":e.styleValuesToStrokeDashArray[e.selectedItem.value],"stroke-width":2,stroke:"currentcolor"}})]):o("span",[e._v(" - ")])])]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-popover-contextual",staticStyle:{"max-width":"200px"},attrs:{"uk-contextual-popover":"offsetLeft: 20","data-sel-close":"[uk-menu] > li > button"}},[o("ul",{staticClass:"uk-overflow-auto uk-height-1-1",attrs:{"uk-menu":""}},e._l(e.items,(function(t,n){return o("li",{key:n},[o("button",{class:{"uk-checked":e.selectedItem&&e.selectedItem.value===t.value},staticStyle:{height:"24px"},attrs:{autofocus:e.selectedItem&&e.selectedItem.value===t.value},on:{click:function(o){return e.handleSelectLineStyle(t.value)}}},[o("svg",{staticStyle:{overflow:"visible"},attrs:{width:"100%",height:"4px"}},[o("line",{attrs:{x1:"0%",y1:"0%",x2:"100%",y2:"0%","stroke-dasharray":e.styleValuesToStrokeDashArray[t.value],"stroke-width":2,stroke:"currentcolor"}})])])])})),0)])])}),[],!1,null,null,null).exports},27925:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(13002);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticClass:"uk-width-1-1"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-width-1-1 uk-button uk-button-popover-toggle uk-select-icon uk-text-left",staticStyle:{"line-height":"unset",overflow:"hidden"},attrs:{title:e.title,disabled:e.disabled}},[e.isMultiple?o("span",{staticClass:"uk-width-1-1"},[e._v(" "+e._s(e.$T("Multiple")))]):e.isNone?o("span",{staticClass:"uk-width-1-1"},[e._v("\n      "+e._s(e.$T("None"))+"\n    ")]):o("svg",{staticClass:"uk-width-1-1",staticStyle:{"shape-rendering":"crispEdges"}},[o("line",{attrs:{x1:"0%",y1:"50%",x2:"95%",y2:"50%","stroke-width":e.selectedItem.value,stroke:"currentcolor"}})])]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-popover-contextual",staticStyle:{width:"181px"},attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] > li > button"}},[o("ul",{staticClass:"uk-overflow-auto uk-height-1-1",attrs:{"uk-menu":""}},e._l(e.computedItems,(function(t,n){return o("li",{key:n},[o("button",{class:{"uk-checked":e.selectedItem.value===t.value},staticStyle:{height:"24px","shape-rendering":"crispEdges"},attrs:{autofocus:e.selectedItem.value===t.value},on:{click:function(o){return e.handleInput(t.value)}}},[o("svg",{staticStyle:{overflow:"visible"},style:"height:"+t.value+"px;",attrs:{width:"100%"}},[o("line",{attrs:{x1:"0%",y1:"0%",x2:"100%",y2:"0%","stroke-width":t.value,stroke:"currentcolor"}})])])])})),0)])])}),[],!1,null,null,null).exports},4027:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(58818);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticStyle:{width:"76px"}},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-icon uk-button-popover-toggle uk-padding-remove-left",class:e.toggleClasses,attrs:{disabled:e.isDisabled,title:e.title}},[e.isMultiple?[o("svg",{attrs:{width:"100%"}},[o("circle",{attrs:{cx:"50%",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% - 9px)",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% + 9px)",cy:"50%",r:"2",fill:"currentcolor"}})])]:e.selectedItem?[o("img",{staticClass:"uk-preserve",staticStyle:{"pointer-events":"none"},style:e.itemStyles,attrs:{draggable:"false","uk-svg":"",src:e.selectedItem.img}})]:e._e()],2),e._v(" "),o("div",{ref:"popover",staticStyle:{width:"202px"},attrs:{"uk-popover":"","data-pos":e.pos,"data-sel-close":"button"}},[e._t("header"),e._v(" "),o("div",{staticStyle:{padding:"15px"}},e._l(e.items,(function(t,n){return o("button",{key:n,staticClass:"uk-button uk-button-icon uk-button-filled-tile",staticStyle:{margin:"5px",width:"75px",height:"40px"},attrs:{autofocus:0===n,title:t.title},on:{click:function(o){return e.handleItemSelect(t.value)}}},[o("img",{staticClass:"uk-preserve",staticStyle:{width:"75px",height:"40px","pointer-events":"none"},style:e.itemStyles,attrs:{draggable:"false","uk-svg":"",src:t.img}})])})),0),e._v(" "),e._t("footer")],2)])}),[],!1,null,null,null).exports},27246:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(55720);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticStyle:{width:"76px"}},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-icon uk-button-popover-toggle uk-padding-remove-left",class:e.toggleClasses,attrs:{disabled:e.isDisabled,title:e.title}},[e.isMultiple?[o("svg",{attrs:{width:"100%"}},[o("circle",{attrs:{cx:"50%",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% - 9px)",cy:"50%",r:"2",fill:"currentcolor"}}),e._v(" "),o("circle",{attrs:{cx:"calc(50% + 9px)",cy:"50%",r:"2",fill:"currentcolor"}})])]:e.selectedItem?[o("img",{staticClass:"uk-preserve",staticStyle:{"pointer-events":"none"},style:e.itemStyles,attrs:{draggable:"false","uk-svg":"",src:e.selectedItem.img}})]:e._e()],2),e._v(" "),o("div",{ref:"popover",staticStyle:{width:"285px",height:"417px"},style:{height:e.expandedGroup.length>0?"380px":"314px"},attrs:{"uk-popover":"","data-pos":e.pos,"data-sel-close":"button"}},[o("div",{staticClass:"uk-height-1-1 uk-overflow-auto",staticStyle:{padding:"16px 32px 16px 20px","overflow-x":"hidden"}},[o("div",{staticClass:"uk-height-1-1",staticStyle:{width:"223px"}},e._l(e.currentShowItems,(function(t,n){var i=t.name,r=t.items;return o("div",{key:"expandable-popover-item-"+n},[e._l(r,(function(t,n){return o("button",{key:t.value,staticClass:"uk-button uk-button-icon uk-button-filled-tile",staticStyle:{margin:"4px",width:"66px",height:"40px"},attrs:{autofocus:0===n,title:t.title},on:{click:function(o){return e.handleItemSelect(t.value)}}},[o("img",{staticClass:"uk-preserve uk-width-1-1 uk-height-1-1",staticStyle:{"pointer-events":"none"},style:e.itemStyles,attrs:{draggable:"false","uk-svg":"",src:t.img}})])})),e._v(" "),o("div",{staticStyle:{"margin-bottom":"20px"}},[!e.expandedGroup.includes(i)&&e.isGroupCanExpand[i]?o("button",{staticClass:"uk-button uk-button-default uk-width-1-1",staticStyle:{"margin-top":"8px"},on:{click:function(t){t.stopPropagation(),e.expandedGroup.push(i)}}},[e._v("\n              "+e._s(e.$T("More Shapes"))+"\n            ")]):e._e()])],2)})),0)])])])}),[],!1,null,null,null).exports},49242:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(79258),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(63915);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},4084:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(36545),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(73862);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},22035:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(96555),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(48643);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},42276:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(924),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(64711);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},60354:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(31701),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(39476);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},85460:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(5259),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(84058);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},71127:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(67508),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(6695);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},5848:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(29819),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(55605);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},73481:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(39532),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(88813);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},85447:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(82459),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(10386);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},40002:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(72783);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("div",{staticClass:"uk-flex uk-flex-middle"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox uk-flex-no-shrink",attrs:{id:"isMultiBranchColorEnableCheckBox",type:"checkbox"},domProps:{checked:e.isMultiBranchColorEnabled},on:{input:e.handleCheckMultiBranchColor}}),e._v(" "),o("label",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml",attrs:{for:"isMultiBranchColorEnableCheckBox",title:e.$T("Set different color for each branch.")}},[e._v("\n      "+e._s(e.$T("Multi-branch Color"))+"\n    ")])]),e._v(" "),o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.input"],expression:"['focus.input']",arg:"group"}],staticClass:"uk-format-panel-checkbox-ml"},[o("button",{directives:[{name:"show",rawName:"v-show",value:e.isMultiBranchColorEnabled,expression:"isMultiBranchColorEnabled"},{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-format-panel-inline-mt uk-width-1-1 uk-button uk-button-popover-toggle uk-select-icon uk-text-left",staticStyle:{overflow:"hidden"}},[o("div",{staticClass:"uk-format-panel-multicolor-branch uk-flex uk-flex-middle uk-flex-center"},e._l(e.computedMultiBranchColor,(function(e){return o("div",{key:e,style:{backgroundColor:e}})})),0)]),e._v(" "),o("div",{ref:"multiColorsPopover",staticClass:"uk-popover-contextual",attrs:{"uk-contextual-popover":"offsetLeft: 12","data-sel-close":"[uk-menu] > li > button"}},[o("ul",{staticClass:"uk-overflow-auto uk-height-1-1 uk-menu-no-active-background",staticStyle:{"max-height":"300px"},attrs:{"uk-menu":""}},e._l(e.computedMultiBranchColors,(function(t,n){return o("li",{key:n,attrs:{index:n,value:n},on:{click:function(o){e.handleInputMultiBranchColor(t.join(" "))}}},[o("button",{class:{"uk-checked":n===e.currentIndexOfMultiBranchColor},attrs:{autofocus:n===e.currentIndexOfMultiBranchColor}},[o("div",{staticClass:"uk-format-panel-multicolor-branch uk-flex uk-flex-middle uk-flex-center"},e._l(t,(function(e){return o("div",{key:e,style:{backgroundColor:e}})})),0)])])})),0)])])])}),[],!1,null,null,null).exports},18071:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(92888);var i=function(e){o(77473)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,viewBox:"0 0 "+e.width+" "+e.height}},[o("g",{style:Object.assign({},e.boundaryShapeTransformPatch)},[o("path",{attrs:{d:e.boundaryPath,stroke:e.boundaryLineColor,"stroke-dasharray":e.boundaryLineDashArray,"stroke-width":e.boundaryLineWidth,fill:"none"}}),e._v(" "),e.boundaryFillPath||e.boundaryFillColor?o("path",{attrs:{d:e.boundaryFillPath,fill:e.boundaryFillColor,"fill-opacity":"0.2",stroke:"none"}}):e._e()])])}),[],!1,i,"data-v-1e21c65e",null).exports},5071:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(79245),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(44396);var s=function(e){o(43383)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-4fce1979",null).exports},57052:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(77852);var i=function(e){o(43534)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,viewBox:"0 0 "+e.width+" "+e.height}},[o("path",{attrs:{stroke:e.relationshipLineColor,"stroke-dasharray":e.relationshipLineDashArray,"stroke-width":e.computedRelationshipLineWidth,d:e.relationshipLineShapePath,"marker-start":"url(#"+e.markerStartId+")","marker-end":"url(#"+e.markerEndId+")",fill:"none"}}),e._v(" "),e.relationshipArrowBegin?o("marker",{attrs:{id:e.markerStartId,viewBox:"0 0 8 8",markerHeight:e.relationshipArrowBegin.height,markerWidth:e.relationshipArrowBegin.width,refX:e.relationshipArrowBegin.startRefX,refY:e.relationshipArrowBegin.startRefY||e.relationshipArrowBegin.height/2,orient:"auto"}},[o("path",{attrs:{d:e.relationshipArrowBegin.startD,stroke:e.relationshipLineColor,fill:e.relationshipLineColor,"stroke-width":e.relationshipArrowBegin.needFill?e.relationshipArrowBegin.strokeWidth:0}})]):e._e(),e._v(" "),e.relationshipArrowEnd?o("marker",{attrs:{id:e.markerEndId,markerHeight:e.relationshipArrowEnd.height,markerWidth:e.relationshipArrowEnd.width,refX:e.relationshipArrowEnd.endRefX,refY:e.relationshipArrowEnd.endRefY||e.relationshipArrowEnd.height/2,orient:"auto"}},[o("path",{attrs:{d:e.relationshipArrowEnd.endD,stroke:e.relationshipLineColor,fill:e.relationshipLineColor,"stroke-width":e.relationshipArrowEnd.needFill?e.relationshipArrowEnd.strokeWidth:0}})]):e._e()])}),[],!1,i,"data-v-1a91c417",null).exports},40350:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(29784),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(48780);var s=function(e){o(40590)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-9d0b17fc",null).exports},82782:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(62190);var i=function(e){o(87572)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-large uk-border-rounded",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},style:{color:e.topicColor,backgroundColor:"none"!==e.topicFillColor&&e.topicFillColor?e.topicFillColor:"transparent",borderWidth:e.topicBorderLineWidth+"px",borderColor:e.topicBorderLineColor,textDecoration:e.topicTextDecoration,fontWeight:e.topicFontWeights,fontFamily:e.topicFontFamily,fontSize:e.topicFontSize+"px"},attrs:{title:e.$T("Choose a style to add to the selected topic.")}},[e._v("\n  "+e._s(e.topicText)+"\n")])}),[],!1,i,"data-v-1c276cab",null).exports},65470:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(11683),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(1457);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},78713:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(39888),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(97755);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},59291:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(53477),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(61786);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},24819:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(99113),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(77899);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},89896:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(99596);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("button",{directives:[{name:"show",rawName:"v-show",value:e.isStylesChanged,expression:"isStylesChanged"}],staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.handleResetStyles}},[e._v("\n    "+e._s(e.$T("Reset Style"))+"\n  ")])])}),[],!1,null,null,null).exports},64185:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(18576),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(897);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},93722:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(6267),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(48994);var s=function(e){o(90225)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-4183241f",null).exports},64297:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X$,default:()=>r,defaultDisplayOption:()=>n.vA,displayOptions:()=>n.rb});var n=o(30476);var i=function(e){o(21087)};const r=(0,o(62236).Z)(n.ZP,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticClass:"uk-width-1-1"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-width-1-1 uk-button uk-button-popover-toggle uk-select-icon uk-text-left",staticStyle:{"min-width":"85px!important"}},[o("span",{staticClass:"uk-width-1-1"},[e._v(" "+e._s(e.getLabel(e.currentOption)))])]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-popover-contextual",attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] > li > button"}},[o("ul",{staticClass:"uk-overflow-auto uk-height-1-1",attrs:{"uk-menu":""}},[e._l(e.displayOptions,(function(t){return[o("li",{key:t},[o("button",{class:{"uk-checked":t===e.currentOption},staticStyle:{height:"24px","shape-rendering":"crispEdges"},attrs:{autofocus:t===e.currentOption},on:{click:function(o){return e.onChangeOption(t)}}},[o("span",[e._v(e._s(e.getLabel(t)))])])]),e._v(" "),"Auto"===t?o("li",{key:t+"divider",staticClass:"uk-menu-divider"}):e._e()]}))],2)])])}),[],!1,i,"data-v-1bcbe716",null).exports},98074:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(60053),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(96552);var s=function(e){o(3350)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-4cccd2d6",null).exports},69169:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(13291),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(5173);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},89643:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(28340),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(7777);var s=function(e){o(75383)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-0e24c072",null).exports},79901:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(6431),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(83095);var s=function(e){o(77240)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-432f1eac",null).exports},37211:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(13443),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(27352);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},20608:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(89169),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(62961);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},89934:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(93080),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(72118);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},4514:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(84278),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(34172);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},85940:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(24311);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Make the main branch from coarse to fine.")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox",disabled:!e.isTaperedLineEnabled},domProps:{checked:e.isTaperedLineChecked},on:{input:e.handleCheckOnTaperedLine}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Tapered Line")))])])])}),[],!1,null,null,null).exports},73699:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(42600),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(69906);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},78122:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(43087),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(28244);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},10058:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(89772),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(50087);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},26594:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(49179),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(96025);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},42693:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(68106),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(60871);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},79599:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(62305),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(70401);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},74998:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(35438),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(93149);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},42430:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(17365),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(76486);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},18701:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(43701),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(51753);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},32829:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(12310),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(6370);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},22625:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(76301),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(55433);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},84293:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(89907),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(34313);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},1298:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(5888),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(38035);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},21715:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(34238),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(86838);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},18829:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(91727),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(45228);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},74254:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(75765),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(57004);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},96240:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(17163),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(69683);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},84414:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(12512),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(52362);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},14419:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(90734),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(5124);var s=function(e){o(10629)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-b9764ef4",null).exports},70582:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(36553);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("popover",{ref:"popover",staticClass:"hyperlink-editor",attrs:{width:"288px",height:"104px","host-left":e.topicLeft,"host-right":e.topicRight,"host-top":e.topicTop,"host-bottom":e.topicBottom},on:{"popover:close":e.onPopoverClose}},[o("div",{staticClass:"uk-padding uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[o("h4",{staticClass:"uk-margin-small-bottom uk-width-1-1 uk-text-disabled uk-text-bold"},[e._v("\n      "+e._s(e.$T("Webpage"))+"\n    ")]),e._v(" "),o("div",{staticClass:"uk-height-expand uk-width-1-1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.hyperlink,expression:"hyperlink"},{name:"focus",rawName:"v-focus"}],staticClass:"uk-input uk-width-1-1 uk-padding-remove uk-margin-remove",staticStyle:{border:"none","box-shadow":"none","background-color":"transparent"},attrs:{type:"text",spellcheck:"false",autofocus:"",placeholder:e.$T("Enter the URL")},domProps:{value:e.hyperlink},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e._onEnter(t)},focus:e._autoFill,input:function(t){t.target.composing||(e.hyperlink=t.target.value)}}})])])])}),[],!1,null,null,null).exports},25139:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(21861);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("popover",{ref:"popover",attrs:{width:e.computedWidth,height:e.computedHeight,"host-left":e.topicLeft,"host-right":e.topicRight,"host-top":e.topicTop,"host-bottom":e.topicBottom},on:{"popover:close":e.onPopoverClose}},[o("div",{staticClass:"uk-flex uk-flex-column uk-padding-small uk-padding-remove-horizontal"},[e.notes?o("button",{ref:"notesEl",staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-small uk-flex uk-flex-row uk-flex-left",on:{click:function(t){return e.handleCommand("editor.showNotesEditor",!0)},mouseenter:function(t){return e.doShowTips("notes",!0)},contextmenu:e.popNotesMenu,mouseleave:e.stopShowTips,mousemove:e.updatePointerPosition}},[o("img",{staticClass:"uk-margin-xsmall-right uk-margin-small-left uk-preserve uk-background-norepeat",staticStyle:{width:"14px",height:"14px"},attrs:{draggable:"false","uk-svg":"",src:e.icons.notes}}),e._v(" "),o("span",{staticClass:"uk-width-expand uk-text-left uk-overflow-hidden uk-text-break",staticStyle:{"max-height":"44px",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},[e._v("\n        "+e._s(e.notes)+"\n      ")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"notes"==e.tipType,expression:"showTips && tipType == 'notes'"}],staticClass:"uk-margin-small-right uk-button-tile",staticStyle:{width:"19px","line-height":"19px"},attrs:{"uk-icon":"icon: trash"},on:{click:function(t){return t.stopPropagation(),e.deleteInfoItem("notes")}}})]):e._e(),e._v(" "),e.taskInfo?o("button",{ref:"taskEl",staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-small uk-flex uk-flex-row uk-flex-left",on:{contextmenu:e.popTaskMenu}},[o("img",{staticClass:"uk-margin-xsmall-right uk-margin-small-left uk-preserve uk-background-norepeat",staticStyle:{width:"14px",height:"14px"},attrs:{draggable:"false","uk-svg":"",src:e.icons.task}}),e._v(" "),o("span",{staticClass:"information-card-task-content"},[e._v("\n        "+e._s(e.taskInfo.date)+"\n      ")]),e._v(" "),o("span",{staticClass:"information-card-task-progress"},[e._v("\n        "+e._s(e.taskInfo.progress)+"\n      ")]),e._v(" "),o("span",{staticClass:"information-card-task-assignto information-card-task-assignto-color",style:{background:e.taskInfo.assigntobg}},[e._v("\n        "+e._s(e.taskInfo.assignto&&e.taskInfo.assignto.toUpperCase().substr(0,1))+"\n      ")])]):e._e(),e._v(" "),e._l(e.comments,(function(t,n){return o("button",{key:n,staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-small uk-flex uk-flex-row uk-flex-left information-card-comments",on:{contextmenu:function(t){return e.popCommentMenu(n)}}},[o("img",{staticClass:"uk-margin-xsmall-right uk-margin-small-left uk-preserve uk-background-norepeat",staticStyle:{width:"14px",height:"14px"},attrs:{draggable:"false","uk-svg":"",src:e.icons.comments}}),e._v(" "),o("span",{staticClass:"information-card-comments-content  uk-width-expand uk-text-left uk-overflow-hidden uk-text-break",staticStyle:{"max-height":"44px",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},[e._v("\n        "+e._s(t.author+":"+t.content)+"\n      ")])])})),e._v(" "),e.hyperlink?o("button",{ref:"linkEl",staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-small uk-flex uk-flex-row uk-flex-left",on:{click:function(t){return t.stopPropagation(),e.handleCommand("editor.showHyperlinkEditor",!0)},contextmenu:function(t){return e.popHyperlinkMenu(e.hyperlink)},mouseenter:function(t){return e.doShowTips("hyperlink",!0)},mouseleave:e.stopShowTips}},[o("img",{staticStyle:{width:"14px",height:"14px"},attrs:{draggable:"false","uk-svg":""}}),e._v(" "),o("span",{staticClass:"uk-width-expand uk-text-left uk-overflow-hidden uk-text-break",staticStyle:{"max-height":"44px",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"},on:{click:function(t){return t.stopPropagation(),e._openHyperlink(e.hyperlink)}}},[e._v("\n        "+e._s(e.formatHyperlink(e.hyperlink))+"\n      ")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"hyperlink"==e.tipType,expression:"showTips && tipType == 'hyperlink'"}],staticClass:"uk-margin-small-right uk-button-tile",staticStyle:{width:"19px","line-height":"19px"},attrs:{"uk-icon":"icon: trash"},on:{click:function(t){return t.stopPropagation(),e.deleteInfoItem("hyperlink")}}})]):e._e(),e._v(" "),e.attachment?o("button",{ref:"attachEl",staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-small uk-flex uk-flex-row uk-flex-left",on:{click:e._clickAttachment,contextmenu:function(t){return e.popHyperlinkMenu(e.hyperlink)},mouseenter:function(t){return e.doShowTips("attachment",!0)},mouseleave:e.stopShowTips}},[o("img",{staticClass:"uk-margin-xsmall-right uk-margin-small-left uk-preserve uk-background-norepeat",staticStyle:{width:"14px",height:"14px"},attrs:{draggable:"false","uk-svg":"",src:e.icons.attachment}}),e._v(" "),o("span",{staticClass:"uk-width-expand uk-text-left uk-overflow-hidden uk-text-break",staticStyle:{"max-height":"44px",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},[e._v("\n        "+e._s(e.attachment)+"\n      ")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"attachment"==e.tipType,expression:"showTips && tipType == 'attachment'"}],staticClass:"uk-margin-small-right uk-button-tile",staticStyle:{width:"19px","line-height":"19px"},attrs:{"uk-icon":"icon: trash"},on:{click:function(t){return t.stopPropagation(),e.deleteInfoItem("hyperlink")}}})]):e._e(),e._v(" "),e.audio?o("button",{ref:"audioEl",staticClass:"uk-button uk-button-tile uk-button-icon uk-padding-small uk-flex uk-flex-row uk-flex-left",on:{click:e._openAudio,contextmenu:function(t){return e.popAudilMenu()},mouseenter:function(t){return e.doShowTips("audio",!0)},mouseleave:e.stopShowTips}},[o("img",{staticClass:"uk-margin-xsmall-right uk-margin-small-left uk-preserve uk-background-norepeat",staticStyle:{width:"14px",height:"14px"},attrs:{draggable:"false","uk-svg":"",src:e.icons.audionotes}}),e._v(" "),o("span",{staticClass:"uk-width-expand uk-text-left uk-overflow-hidden uk-text-break",staticStyle:{"max-height":"44px",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},[e._v("\n        "+e._s(e.audio)+"\n      ")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.showTips&&"audio"==e.tipType,expression:"showTips && tipType == 'audio'"}],staticClass:"uk-margin-small-right uk-button-tile",staticStyle:{width:"19px","line-height":"19px"},attrs:{"uk-icon":"icon: trash"},on:{click:function(t){return t.stopPropagation(),e.deleteAudio()}}})]):e._e()],2)])}),[],!1,null,null,null).exports},78097:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(14107);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("topic-popover-container",{ref:"popover",attrs:{width:e.popoverWidth,height:e.showMostlyUsedLabels?223:148},on:{"popover:close":e.saveAndClose}},[o("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[o("div",{staticClass:"uk-padding uk-flex uk-flex-column uk-flex-middle uk-width-1-1",staticStyle:{height:"148px"}},[o("h4",{staticClass:"uk-margin-small-bottom uk-width-1-1 uk-text-disabled uk-text-bold"},[e._v("\n        "+e._s(e.$T("Label"))+"\n      ")]),e._v(" "),o("div",{ref:"labelinput",staticClass:"uk-height-expand uk-width-1-1"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"},{name:"focus",rawName:"v-focus"}],ref:"labelTextarea",staticClass:"uk-textarea uk-width-1-1 uk-height-1-1 uk-padding-remove uk-margin-remove",staticStyle:{border:"none","box-shadow":"none","background-color":"transparent"},attrs:{placeholder:e.labels.length?"":e.$T("Enter labels, separated by commas")},domProps:{value:e.content},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.onEnter(t))},input:function(t){t.target.composing||(e.content=t.target.value)}}})])]),e._v(" "),e.showMostlyUsedLabels?o("div",{staticClass:"uk-width-1-1 uk-padding uk-padding-remove-vertical"},[o("hr",{staticClass:"uk-separator uk-width-1-1 "})]):e._e(),e._v(" "),o("mostly-used-labels",{attrs:{"label-text":e.content},on:{"update-visible":function(t){return e.showMostlyUsedLabels=t},"update-label":e.updateLabel}})],1)])}),[],!1,null,null,null).exports},7188:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(2164),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(53591);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},83099:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(33799),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(55423);var s=function(e){o(64392)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,null,null).exports},78660:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(31676),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(32096);var s=function(e){o(18158)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-0f1eaa66",null).exports},43621:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(23714);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-flex uk-flex-middle uk-padding",style:{paddingRight:"6px"}},[o("div",{staticClass:"uk-width-1-1"},[o("div",{staticClass:"uk-position-relative"},[o("img",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-position-absolute",staticStyle:{top:"3px",left:"4px"},attrs:{src:e.searchIconImage,"uk-svg":""}}),e._v(" "),o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],ref:"searchInput",staticClass:"uk-input uk-search-input",staticStyle:{"padding-left":"20px"},attrs:{disabled:e.disabledSearch,placeholder:e.searchText||e.$T("Find")},domProps:{value:e.searchKeywords},on:{input:e.onUpdateSearchKeywords}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.menuOptions.isReplaceMode,expression:"menuOptions.isReplaceMode"}],staticClass:"uk-position-relative"},[o("img",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-position-absolute",staticStyle:{top:"13px",left:"4px"},attrs:{src:e.replaceIconImage,"uk-svg":"",draggable:"false"}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.replaceWord,expression:"replaceWord"},{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],staticClass:"uk-input uk-margin-small-top uk-search-input",staticStyle:{"padding-left":"20px"},attrs:{placeholder:e.replaceText||e.$T("Replace")},domProps:{value:e.replaceWord},on:{input:function(t){t.target.composing||(e.replaceWord=t.target.value)}}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.menuOptions.isReplaceMode,expression:"menuOptions.isReplaceMode"}],staticClass:"uk-margin-small-top uk-flex uk-flex-row uk-flex-right"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-floating uk-margin-small-right",attrs:{disabled:e.disabledReplace},on:{click:e.onReplace}},[e._v("\n        "+e._s(e.$T("Replace"))+"\n      ")]),e._v(" "),o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-floating",attrs:{disabled:e.disabledReplaceAll},on:{click:e.onReplaceAll}},[e._v("\n        "+e._s(e.$T("Replace All"))+"\n      ")])])]),e._v(" "),o("div",{style:{marginLeft:"6px"}},[o("div",{staticClass:"uk-button uk-button-tile uk-button-icon customize-icon",staticStyle:{width:"22px"},on:{click:e.onToggleConfig}},[o("img",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{src:e.gearImage,"uk-svg":"",draggable:"false"}})])])])}),[],!1,null,null,null).exports},43139:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(96968),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(93280);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},77499:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(55937);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.searchPanel"],expression:"['focus.searchPanel']",arg:"group"}],staticClass:"uk-flex uk-flex-column uk-height-1-1 uk-panel uk-position-left",class:{"uk-disabled":e.sheetRendering},staticStyle:{"padding-right":"1px"},style:{width:e.panelWidth+"px",zIndex:0,opacity:e.sheetRendering?.3:1}},[o("div",{staticClass:"uk-padding"},[o("div",{staticClass:"uk-flex uk-flex-row uk-flex-between"},[o("h4",{staticClass:"uk-margin-remove-vertical"},[e._v("\n        "+e._s(e.$T("Search"))+"\n      ")]),e._v(" "),o("div",{staticClass:"uk-button-group"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-icon",staticStyle:{width:"24px",height:"24px"},attrs:{"uk-icon":"more"},on:{click:e.toggleConfig}}),e._v(" "),o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-icon",staticStyle:{width:"24px",height:"24px"},attrs:{"uk-icon":"close"},on:{click:e.close}})])]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.findWord,expression:"findWord"},{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],ref:"searchInput",staticClass:"uk-input uk-margin-small-top",attrs:{placeholder:e.$T("Search your topic."),autofocus:"true"},domProps:{value:e.findWord},on:{input:function(t){t.target.composing||(e.findWord=t.target.value)}}}),e._v(" "),o("input",{directives:[{name:"show",rawName:"v-show",value:"replace"==e.mode,expression:"mode == 'replace'"},{name:"model",rawName:"v-model",value:e.replaceWord,expression:"replaceWord"},{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],staticClass:"uk-input uk-margin-small-top",attrs:{placeholder:e.$T("Replace")},domProps:{value:e.replaceWord},on:{input:function(t){t.target.composing||(e.replaceWord=t.target.value)}}}),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"replace"===e.mode,expression:"mode === 'replace'"}],staticClass:"uk-margin-small-top  uk-flex  uk-flex-row uk-flex-right"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-text uk-margin-right",attrs:{disabled:e.count<=0},on:{click:e.replaceAll}},[e._v("\n        "+e._s(e.$T("Replace All"))+"\n      ")]),e._v(" "),o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-text",attrs:{disabled:!e.selected.length},on:{click:e.replace}},[e._v("\n        "+e._s(e.$T("Replace"))+"\n      ")])])]),e._v(" "),o("hr",{directives:[{name:"show",rawName:"v-show",value:e.findWord&&""!==e.findWord,expression:"findWord && findWord !== ''"}]}),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.findWord&&""!==e.findWord&&e.count<=0,expression:"findWord && findWord !== '' && count <= 0"}],staticClass:"uk-padding uk-text-muted"},[e._v("\n    "+e._s(e.$T("No Results"))+"\n  ")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.findWord&&""!==e.findWord,expression:"findWord && findWord !== ''"}],staticClass:"uk-height-expand uk-overflow-auto uk-text-nowrap"},[o("tree-list",{attrs:{type:"radio",items:e.result},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.findWord,expression:"!findWord"}],staticClass:"uk-height-expand uk-overflow-auto uk-text-nowrap"},[o("tree-list-v2",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"radio",items:e.workbookData},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)])}),[],!1,null,null,null).exports},12753:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(41637),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(23142);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},94190:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(19267),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(24004);var s=function(e){o(60750)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-2c76ef59",null).exports},10634:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(26554),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(5686);var s=function(e){o(80570)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-47a1db8c",null).exports},22918:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(80023),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(54444);var s=function(e){o(22455)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-0900ed4b",null).exports},44927:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(61818),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(50432);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},33311:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(45187);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.mostlyUsedLabels.length?o("div",{staticClass:"uk-height-expand uk-width-1-1 uk-mostly-used-labels uk-padding",staticStyle:{"padding-top":"12px"}},[o("div",{staticClass:"uk-mostly-used-labels-container"},e._l(e.mostlyUsedLabels,(function(t){return o("div",{key:t,staticClass:"uk-mostly-used-labels-item",on:{click:function(o){return e.addLabel(t)}}},[e._v("\n      "+e._s(t)+"\n    ")])})),0)]):e._e()}),[],!1,null,null,null).exports},66735:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(7437);var i=function(e){o(29248)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("topic-popover-container",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"popover",attrs:{height:e.popoverHeight,width:e.popoverWidth}},[o("div",{staticClass:"uk-padding uk-padding-remove-top uk-padding-remove-horizontal",on:{mousedown:e.onmousedown}},[o("div",{staticClass:"uk-flex uk-flex-column"},[o("div",{staticClass:"uk-flex uk-flex-row uk-flex-center uk-padding-xsmall"},[o("button",{staticClass:"uk-button uk-button-tile uk-button-small uk-button-icon uk-icon uk-padding-xsmall",attrs:{title:e.$T("bold"),autofocus:"","uk-icon":"icon: bold",disabled:e.isShowLinkBox},on:{mousedown:function(t){return t.preventDefault(),e.toggleSelectionStyle(e.NotesTextStyles.bold)}}}),e._v(" "),o("button",{staticClass:"uk-button uk-button-tile uk-button-small uk-button-icon uk-icon uk-padding-xsmall",attrs:{title:e.$T("italic"),"uk-icon":"icon: italic",disabled:e.isShowLinkBox},on:{mousedown:function(t){return t.preventDefault(),e.toggleSelectionStyle(e.NotesTextStyles.italic)}}}),e._v(" "),o("button",{staticClass:"uk-button uk-button-tile uk-button-small uk-button-icon uk-icon uk-padding-xsmall",attrs:{title:e.$T("underline"),"uk-icon":"icon: underline",disabled:e.isShowLinkBox},on:{mousedown:function(t){return t.preventDefault(),e.toggleSelectionStyle(e.NotesTextStyles.underline)}}}),e._v(" "),o("button",{staticClass:"uk-button uk-button-tile uk-button-small uk-button-icon uk-icon uk-padding-xsmall",attrs:{title:e.$T("unordered list"),"uk-icon":"icon: unordered-list",value:"bullet",disabled:e.isShowLinkBox},on:{mousedown:function(t){return t.preventDefault(),e.toggleSelectionStyle(e.NotesTextStyles.bullet)}}}),e._v(" "),o("button",{staticClass:"uk-button uk-button-tile uk-button-small uk-button-icon uk-icon uk-padding-xsmall",attrs:{title:e.$T("ordered list"),"uk-icon":"icon: ordered-list",value:"ordered",disabled:e.isShowLinkBox},on:{mousedown:function(t){return t.preventDefault(),e.toggleSelectionStyle(e.NotesTextStyles.number)}}}),e._v(" "),o("button",{staticClass:"uk-button uk-button-tile uk-button-small uk-button-icon uk-icon uk-padding-xsmall",attrs:{title:e.$T("link"),"uk-icon":"icon: link"},on:{mousedown:function(t){return t.preventDefault(),e.onNotesLinkButtonClick(t)}}})])]),e._v(" "),o("div",{staticStyle:{overflow:"hidden"}},[o("div",{staticStyle:{transition:"0.1s"},style:e.notesStyle},[o("div",{staticClass:"uk-flex uk-padding uk-padding-remove-top uk-padding-remove-bottom uk-flex-middle link-box"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.link,expression:"link"}],ref:"linkInputBox",staticClass:"uk-input link-input-box",attrs:{placeholder:e.$T("Enter Link URL")},domProps:{value:e.link},on:{blur:e.onInputBlur,compositionstart:function(t){e.isComposition=!0},compositionend:function(t){e.isComposition=!1},keydown:e.onInputKeyDown,input:function(t){t.target.composing||(e.link=t.target.value)}}}),e._v(" "),o("button",{staticClass:"uk-button uk-button-tile uk-button-small uk-button-icon uk-icon uk-padding-xsmall",staticStyle:{"margin-left":"4px"},attrs:{"uk-icon":"icon: check"},on:{click:e.setLink}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isContainerFocused,expression:"!isContainerFocused"}],staticClass:"container-mask",on:{click:e.onContainerMaskClick}}),e._v(" "),o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no-effect",arg:"no-effect"}],ref:"container",staticClass:"uk-width-1-1 uk-padding uk-padding-remove-vertical",class:e.containerClass,staticStyle:{overflow:"auto",cursor:"text"},style:e.containerStyle})])])])])}),[],!1,i,"data-v-f2a53132",null).exports},73071:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(68822),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(75100);var s=function(e){o(39079)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,null,null).exports},36556:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(4709),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(90992);var s=function(e){o(89172)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-52aab939",null).exports},13545:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(78318);var i=function(e){o(58326)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("i",{class:{"topic-placeholder":!0,using:e.using&&e.top>0&&e.left>=0},style:e.style})}),[],!1,i,"data-v-07c0ebf1",null).exports},64349:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(6733),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(8355);var s=function(e){o(10056)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-d9b75146",null).exports},95559:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(29619);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"outlineContainer",staticClass:"outline-container",class:["outliner-"+e.namespace]},[o("Outliner",{ref:"outline"})],1)}),[],!1,null,null,null).exports},71641:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(35645),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(68772);var s=function(e){o(83193)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-1eb270cc",null).exports},45993:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(58647),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(77196);var s=function(e){o(76489)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-3100b58a",null).exports},59239:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(23255),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(95152);var s=function(e){o(26844)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-693dc2b8",null).exports},29514:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(82845),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(2573);var s=function(e){o(61512)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-b9802a30",null).exports},83602:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(14608),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(48262);var s=function(e){o(49776)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-60420914",null).exports},30371:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(85878),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(67813);var s=function(e){o(61193)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-0f2a22c3",null).exports},88779:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(69775),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(95591);var s=function(e){o(91653)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-10de23d4",null).exports},33976:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(88995),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(59081);var s=function(e){o(22130)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-600a64b6",null).exports},60030:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(35839),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(72707);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},65225:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(41638),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(84841);var s=function(e){o(63629)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-1a2f9edc",null).exports},46925:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(79677),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(69857);var s=function(e){o(97113)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,null,null).exports},47775:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(72500),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(41083);var s=function(e){o(97453)};const l=(0,o(62236).Z)(i(),a.s,a.x,!1,s,"data-v-06710286",null).exports},77958:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(58875);var i=function(e){o(23941)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"promotion",class:e.classObject,style:e.styleObject},[o("span",{staticClass:"promotion-close",style:e.closeStyleObject,on:{click:function(t){return e.closeOne("closeButton")}}}),e._v(" "),o("webview",{attrs:{id:"webview",src:e.url,allowpopups:""}})],1)}),[],!1,i,null,null).exports},65122:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(50009),i=o.n(n),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);o.d(t,r);var a=o(50580);const s=(0,o(62236).Z)(i(),a.s,a.x,!1,null,null,null).exports},91642:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(22368);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-padding-small uk-padding-remove-vertical uk-height-1-1",attrs:{title:e.wrappedTooltipWithKeybinding(e.$T("Show or hide Topic Count."),"editor.toggleTopicCountLabel"),disabled:e.isTopicCountButtonDisabled},on:{click:e.clickTopicCount}},[e._v("\n    "+e._s(e.display)+"\n  ")]),e._v(" "),o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],ref:"popover",staticStyle:{"min-width":"170px"},attrs:{"uk-popover":"","data-pos":"top-center"}},[o("div",{attrs:{autofocus:"",tabindex:"-1"}}),e._v(" "),o("div",{staticClass:"uk-padding-small",style:{height:e._detailsCSSHeight()}},[o("ul",{staticClass:"uk-padding-small uk-padding-remove-vertical"},e._l(e.topicCountDetails,(function(t){var n=t.count,i=t.title;return o("li",{key:i,staticClass:"uk-flex uk-flex-row uk-flex-middle",staticStyle:{height:"24px","line-height":"24px"}},[o("span",{staticClass:"uk-width-expand uk-text-muted",staticStyle:{"font-size":"13px","font-weight":"500"}},[e._v(e._s(i))]),e._v(" "),o("span",[e._v(e._s(n))])])})),0)])])])}),[],!1,null,null,null).exports},53708:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(53590);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"beginner",staticClass:"uk-background-default uk-height-1-1 uk-overflow-hidden uk-position-bottom-right uk-border-rounded",staticStyle:{right:"30px",bottom:"30px","z-index":"1000","box-shadow":"0 0 10px 0 rgba(152, 156, 162, 0.28)",width:"380px",height:"383px",outline:"none"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.stopPropagation(),e.exit(t))}}},[e.showDialogContent?o("div",{staticClass:"uk-padding-small uk-text-right"},[o("button",{staticClass:"uk-button uk-button-icon uk-button-tile uk-icon uk-padding-remove-vertical uk-padding-small",attrs:{"uk-icon":"close"},on:{click:e.exit}})]):e._e(),e._v(" "),o("hr",{staticClass:"uk-margin-remove"}),e._v(" "),o("div",{ref:"beginnerContent",staticClass:"uk-height-1-1 uk-overflow-auto uk-padding",staticStyle:{height:"343px"}},[e.showDialogContent?o("div",{staticClass:"uk-flex uk-flex-column"},[o("img",{staticClass:"uk-preserve uk-background-cover uk-margin-small-bottom",staticStyle:{width:"100%",height:"150px"},attrs:{draggable:"false","data-src":e.$toResourceURL("static/assets/images/tutorial/get-started.svg"),"uk-svg":""}}),e._v(" "),o("h1",{staticClass:"uk-heading-primary uk-text-left uk-margin-small-bottom"},[e._v("\n        "+e._s(e.$T("Get Started"))+"\n      ")]),e._v(" "),o("div",{staticClass:"uk-margin-large-bottom"},[e._v("\n        "+e._s(e.$T('Welcome to XMind. Now, let\'s create your first mind map with your keyboard and the 3-step tutorial below. If you want to start later, you can always find the tutorial in "Help" menu.'))+"\n      ")])]):e._e(),e._v(" "),e.step>=0&&e.startShow?o("div",{staticClass:"uk-flex uk-flex-between uk-padding-small uk-border-rounded uk-panel uk-background-muted"},[o("div",{staticClass:"uk-margin-right"},[e._v("\n        "+e._s(e.$T("First, let's select the Central Topic with a click, and then press"))+"\n        "),o("strong",[e._v(e._s(e.tutoriallist[0].key))]),e._v(".\n      ")]),e._v(" "),o("img",{staticClass:"uk-preserve uk-background-cover",staticStyle:{width:"137px",height:"78px"},attrs:{draggable:"false","data-src":e.$toResourceURL("static/assets/images/tutorial/step-01.svg"),"uk-img":""}})]):e._e(),e._v(" "),e.step>0||!e.actionMode&&e.step>=0?o("div",{staticClass:"uk-flex uk-flex-right uk-margin-top"},[o("div",{staticClass:"uk-flex-inline uk-flex-middle uk-padding-small uk-border-rounded uk-background-muted"},[o("img",{staticClass:"uk-preserve uk-background-cover uk-margin-small-right",staticStyle:{width:"22px",height:"22px"},attrs:{draggable:"false","data-src":e.$toResourceURL("static/assets/images/tutorial/thumb-marker.svg"),"uk-svg":""}}),e._v(" "),o("div",[e._v("\n          "+e._s(e.$T("Cool. You've just added a child topic."))+"\n        ")])])]):e._e(),e._v(" "),e.step>=1?o("div",{staticClass:"uk-flex uk-flex-between uk-padding-small uk-margin-top uk-border-rounded uk-background-muted"},[o("div",{staticClass:"uk-margin-right"},[e._v("\n        "+e._s(e.$T("Now, press"))+"\n        "),o("strong",[e._v(e._s(e.tutoriallist[1].key))]),e._v(".\n      ")]),e._v(" "),o("img",{staticClass:"uk-preserve uk-background-cover",staticStyle:{width:"137px",height:"78px"},attrs:{draggable:"false","data-src":e.$toResourceURL("static/assets/images/tutorial/step-02.svg"),"uk-img":""}})]):e._e(),e._v(" "),e.step>1||!e.actionMode&&e.step>=1?o("div",{staticClass:"uk-flex uk-flex-right uk-margin-top"},[o("div",{staticClass:"uk-flex-inline uk-flex-middle uk-padding-small uk-border-rounded uk-background-muted"},[o("img",{staticClass:"uk-preserve uk-background-cover uk-margin-small-right",staticStyle:{width:"22px",height:"22px"},attrs:{draggable:"false","data-src":e.$toResourceURL("static/assets/images/tutorial/smile-marker.svg"),"uk-svg":""}}),e._v(" "),o("div",[e._v("\n          "+e._s(e.$T("Bravo. You've added a sibling topic."))+"\n        ")])])]):e._e(),e._v(" "),e.step>=2?o("div",{staticClass:"uk-flex uk-flex-between uk-padding-small uk-margin-top uk-border-rounded uk-background-muted"},[o("div",{staticClass:"uk-margin-right"},[e._v("\n        "+e._s(e.$T("You're almost there, press"))+"\n        "),o("strong",[e._v("\n          "+e._s(e.tutoriallist[2].key)+"\n        ")]),e._v("\n        "+e._s(e.$T("and jot down what's in your mind."))+"\n      ")]),e._v(" "),o("img",{staticClass:"uk-preserve uk-background-cover",staticStyle:{width:"137px",height:"78px"},attrs:{draggable:"false","data-src":e.$toResourceURL("static/assets/images/tutorial/step-03.svg"),"uk-img":""}})]):e._e(),e._v(" "),e.step>2&&!e.waitEdit?o("div",{staticClass:"uk-margin-top"},[o("img",{staticClass:"uk-preserve uk-background-cover uk-margin-auto uk-display-block",staticStyle:{width:"150px",height:"97px"},attrs:{draggable:"false","data-src":e.$toResourceURL("static/assets/images/tutorial/get-started-finish.svg"),"uk-svg":""}}),e._v(" "),o("div",{staticClass:"uk-margin-top uk-margin-large-bottom uk-text-center"},[e._v("\n        "+e._s(e.$T("Hooray, you did it! Now, you can create mind maps freely."))+"\n      ")])]):e._e()])])}),[],!1,null,null,null).exports},43227:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>i});var n=o(73833);const i=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-position-cover uk-position-fixed",staticStyle:{zIndex:"999"}},[e.visible?o("div",{staticClass:"uk-background-default uk-padding-large uk-panel uk-panel-scrollable uk-position-center uk-text-center",staticStyle:{width:"540px",height:"352px",zIndex:"999","box-shadow":"rgba(152, 156, 162, 0.28) 0px 0px 10px 0px"}},[o("h1",{staticClass:"uk-margin-small-bottom"},[e._v("\n      "+e._s(e.$T("Get Started"))+"\n    ")]),e._v(" "),o("img",{staticClass:"uk-preserve uk-background-cover uk-margin-small-bottom",staticStyle:{width:"474px",height:"166px"},attrs:{draggable:"false","data-src":e.$toResourceURL("static/assets/images/tutorial/get-started.svg"),"uk-svg":""}}),e._v(" "),o("div",{staticClass:"uk-padding uk-padding-remove-vertical"},[e._v("\n      "+e._s(e.$T('Welcome to XMind. Now, let\'s create your first mind map with your keyboard and the 3-step tutorial below. If you want to start later, you can always find the tutorial in "Help" menu.'))+"\n    ")]),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-middle uk-flex-center uk-margin-large-top"},[o("button",{staticClass:"uk-button uk-button-primary uk-margin-right",on:{click:e.confirm}},[e._v("\n        "+e._s(e.$T("Continue"))+"\n      ")]),e._v(" "),o("button",{staticClass:"uk-button uk-button-text",on:{click:e.close}},[e._v("\n        "+e._s(e.$T("Skip"))+"\n      ")])])]):e._e()])}),[],!1,null,null,null).exports},41971:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(56831);var i=function(e){o(57801)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-panel uk-position-cover",class:{"dark-theme":e.isZenMode&&e.isZenDarkTheme},on:{click:e.togglePopup,contextmenu:e.togglePopup,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.togglePopup(t)}}},[o("div",{staticClass:"uk-panel uk-flex uk-flex-row uk-position-cover"},[o("keep-alive",[o("transition",{attrs:{"enter-active-class":"uk-animation-flex-fixed slide-animation","leave-active-class":"uk-animation-flex-fixed uk-animation-reverse slide-animation"}},[e.showsLeftbar?o("div",{staticClass:"uk-flex-fixed uk-panel uk-workbench-left",staticStyle:{"will-change":"transform"},style:{"--uk-flex-size":e.currentLeftBarPanelWidth+"px"}}):e._e()])],1),e._v(" "),o("div",{staticClass:"uk-width-expand uk-panel uk-flex uk-flex-column-reverse"},[e.computedIsShowStatusBar?o("statusbar",{class:{"status-bar":e.sheetRendering,dark:"dark"===e.appearance}}):e._e()],1),e._v(" "),o("keep-alive",[o("transition",{attrs:{"enter-active-class":"uk-animation-flex-fixed slide-animation","leave-active-class":"uk-animation-flex-fixed uk-animation-reverse slide-animation"}},[e.showsRightbar?o("div",{staticClass:"uk-flex-fixed uk-panel uk-workbench-right",staticStyle:{"will-change":"transform"},style:{"--uk-flex-size":e.rightBarPanelWidth+"px"}}):e._e()])],1)],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditorContentVisible,expression:"!isEditorContentVisible"}],staticClass:"uk-panel uk-flex uk-flex-row uk-position-cover"},[o("spinner",{staticClass:"uk-position-cover sheet-rendering-mask",attrs:{text:e.progressIndicatorText}})],1),e._v(" "),o("div",{staticClass:"uk-panel uk-flex uk-flex-row uk-position-cover",style:{"margin-bottom":e.isSheetBarVisible&&!e.isZenMode?"33px":"0px"}},[e.isShowLeftBarPlacehoder?o("div",{staticClass:"uk-flex-fixed uk-panel uk-workbench-left",style:{"--uk-flex-size":e.currentLeftBarPanelWidth+"px"}}):e._e(),e._v(" "),o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.editor"],expression:"['focus.editor']",arg:"group"}],ref:"editorContainer",staticClass:"uk-width-expand uk-panel"},[o("spinner",{directives:[{name:"show",rawName:"v-show",value:e.sheetRendering,expression:"sheetRendering"}],staticClass:"uk-position-cover sheet-rendering-mask",attrs:{text:e.progressIndicatorText}}),e._v(" "),e.isOutlineMode||e.loadedOutliner||e.isOutlinerBackgroundLoading?o("outlinemode",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.outliner"],expression:"['focus.outliner']",arg:"group"}],staticStyle:{outline:"none"}}):e._e(),e._v(" "),e.workbenchContentToShow?o("editor",{ref:"editor",style:{visibility:e.isOutlineMode||!e.isEditorContentVisible?"hidden":"visible","z-index":e.isOutlineMode||!e.isEditorContentVisible?"-1":"auto"},on:{update:e._editorUpdated}}):e._e()],1),e._v(" "),e.isShowRightBarPlacehoder?o("div",{staticClass:"uk-flex-fixed uk-panel uk-workbench-right",style:{"--uk-flex-size":e.rightBarPanelWidth+"px"}}):e._e()]),e._v(" "),o("keep-alive",[o("transition",{attrs:{"enter-active-class":"uk-animation-slide-left opacity-1 slide-animation","leave-active-class":"uk-animation-slide-left uk-animation-reverse opacity-1 slide-animation"},on:{"before-enter":function(){return e.updateIgnoreResizeEditor(!0)},"after-enter":function(){e.updateIgnoreResizeEditor(!1),e.isShowLeftBarPlacehoder=!0},"before-leave":function(){e.updateIgnoreResizeEditor(!0),e.$nextTick((function(){e.isShowLeftBarPlacehoder=!1}))},"after-leave":function(){return e.updateIgnoreResizeEditor(!1)}}},[e.showsLeftbar?o("div",{staticClass:"uk-panel uk-workbench-left uk-position-left fixed-bar",staticStyle:{"will-change":"transform"},style:{width:e.currentLeftBarPanelWidth+"px"}},[o("drag-bar",{attrs:{"min-panel-width":e.leftBarPanelWidth,"max-panel-width":e.maxLeftBarPanelWidth},on:{change:function(t){return e.dragedWidth=t},dragstart:function(t){return e.updateIgnoreResizeEditor(!0)},dragend:function(t){return e.updateIgnoreResizeEditor(!1)}}}),e._v(" "),o(e.leftBarComponentName,{tag:"component",attrs:{"panel-width":e.currentLeftBarPanelWidth},on:{close:e.closeLeftBar}})],1):e._e()])],1),e._v(" "),o("keep-alive",[o("transition",{attrs:{"enter-active-class":"uk-animation-slide-right opacity-1 slide-animation","leave-active-class":"uk-animation-slide-right uk-animation-reverse opacity-1 slide-animation"},on:{"after-enter":function(){e.forceUpdateUiKitComponent(),e.isShowRightBarPlacehoder=!0},"before-leave":function(){e.isShowRightBarPlacehoder=!1}}},[e.showsRightbar?o("div",{staticClass:"uk-panel uk-workbench-right uk-position-right fixed-bar",class:{"uk-disabled":e.sheetRendering},style:{opacity:e.sheetRendering?.3:1,width:e.rightBarPanelWidth+"px"}},[o(e.rightBarComponentName,{ref:"rightpanel",tag:"component",attrs:{"panel-width":e.rightBarPanelWidth}})],1):e._e()])],1),e._v(" "),e.$store.state.notification.currentPromotion?o("promotion"):e._e()],1)}),[],!1,i,"data-v-272482a8",null).exports},33345:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(35197);var i=function(e){o(70578)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAppearanceChanging,expression:"!isAppearanceChanging"}],staticClass:"uk-position-relative zen-mode-bar"},[o("div",{staticClass:"zen-mode-top-bar uk-position-absolute uk-position-right uk-flex uk-flex-row uk-flex-right"},[o("div",{staticClass:"uk-background-default uk-margin-small-right uk-height-1-1 uk-border-rounded"},[o("ul",{staticClass:"uk-button-segment-group uk-button-segment-divider uk-height-1-1 uk-overflow-hidden"},[o("li",{attrs:{title:e.$T("Exit ZEN Mode.")}},[o("span",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-segment uk-flex uk-flex-center uk-flex-middle uk-height-1-1",on:{click:e._exitZenMode}},[e._v("\n            "+e._s(e.$T("Exit"))+"\n          ")])]),e._v(" "),o("li",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticClass:"uk-flex uk-flex-center uk-flex-middle",attrs:{title:e.$T("View common shortcuts.")}},[o("span",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-segment uk-button-icon uk-height-1-1",attrs:{id:e.shortcutPopoverId,"uk-icon":"icon: keyboard"}})]),e._v(" "),o("li",{staticClass:"uk-flex uk-flex-center uk-flex-middle",attrs:{title:e.$T("Show or hide timer.")}},[o("span",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-segment uk-flex uk-flex-center uk-flex-middle uk-height-1-1",attrs:{id:e.zenModeTimerPopoverId,"uk-icon":"icon: clock"}})]),e._v(" "),o("li",{staticClass:"uk-flex uk-flex-center uk-flex-middle",attrs:{title:e.isDarkTheme?e.$T("Turn off night mode."):e.$T("Turn on night mode.")}},[o("span",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-segment uk-flex uk-flex-center uk-flex-middle uk-height-1-1",attrs:{"uk-icon":"","data-icon":e.isDarkTheme?"sun":"moon"},on:{click:function(t){return e.setNightMode(!e.isDarkTheme)}}})])])]),e._v(" "),o("div",{staticClass:"uk-background-default uk-height-1-1 uk-border-rounded"},[o("ul",{staticClass:"uk-button-segment-group uk-button-segment-divider uk-height-1-1 uk-overflow-hidden"},[o("li",{attrs:{title:e.wrappedTooltipWithKeybinding(e.$T("Show or hide style and format options."),"workbench.toggleRightPanel")}},[o("label",{staticClass:"uk-display-inline-block uk-height-1-1"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"checkbox"},domProps:{checked:"formatpanel"===e.activatedPanel},on:{click:function(t){return e.switchRightPanel("formatpanel")}}}),e._v(" "),o("span",{staticClass:"uk-button uk-button-segment uk-flex uk-flex-center uk-flex-middle uk-height-1-1"},[o("img",{attrs:{draggable:"false","uk-svg":"",src:e.$toResourceURL("static/assets/images/toolbar/sidebar.svg")}})])])])])])]),e._v(" "),o("div",{staticStyle:{width:"264px","max-height":"600px",outline:"none"},attrs:{"uk-popover":"","data-toggle":"#"+e.shortcutPopoverId,tabindex:"-1"}},[o("div",{staticClass:"uk-flex uk-flex-column uk-flex-left",staticStyle:{padding:"20px",outline:"none"},attrs:{autofocus:"",tabindex:"-1"}},[o("h4",{staticClass:"uk-margin-remove-bottom uk-h1"},[e._v("\n        "+e._s(e.$T("Shortcut List"))+"\n      ")]),e._v(" "),e._l(e.shortcutGroups,(function(t,n){return[e._l(t,(function(t){return t.accelerator?o("div",{key:t.commandId,staticClass:"uk-flex uk-flex-between uk-width-1-1",staticStyle:{"line-height":"1","margin-top":"10px"}},[o("span",[e._v(e._s(t.label))]),e._v(" "),o("span",{staticClass:"uk-text-muted"},[e._v("\n            "+e._s(e.toAcceleratorSymbol(t.accelerator)))])]):e._e()})),e._v(" "),e.shortcutGroups.length-1!==n?o("hr",{staticClass:"uk-margin-remove-bottom",staticStyle:{"margin-top":"10px"}}):e._e()]})),e._v(" "),o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-floating uk-width-1-1",staticStyle:{"margin-top":"20px"},on:{click:function(t){return e.$store.handleCommand("preferences",{query:{tab:"shortcuts"}})}}},[e._v("\n        "+e._s(e.$T("Customize Shortcut"))+"\n      ")])],2)]),e._v(" "),o("div",{staticStyle:{width:"194px",outline:"none"},attrs:{"uk-popover":"","data-toggle":"#"+e.zenModeTimerPopoverId,tabindex:"-1"}},[o("div",{staticClass:"uk-padding uk-flex uk-flex-column uk-flex-left"},[o("span",{staticClass:"uk-text-muted uk-text-bold",staticStyle:{"font-size":"16px"}},[e._v("\n        "+e._s(e.$T("Today in ZEN"))+"\n      ")]),e._v(" "),o("span",{staticClass:"uk-margin-xsmall-top",staticStyle:{"line-height":"1","font-size":"20px"}},[e._v("\n        "+e._s(e.timerString)+"\n      ")])])]),e._v(" "),o("transition",{attrs:{name:"slide-fade-right"}},[e.isRightBarVisible?o("div",{staticClass:"zen-mode-right-bar uk-position-fixed"},[o("keep-alive",[e.isZenDarkTheme&&"formatpanel"===e.activatedPanel?o("div",{staticClass:"uk-format-panel uk-box-shadow-floating uk-border-rounded uk-background-default uk-height-1-1 uk-flex uk-flex-middle uk-flex-column uk-flex-center"},[o("common-none-panel",{attrs:{type:"zen-mode-bulb"}})],1):o(e.activatedPanel,{tag:"component",staticClass:"uk-box-shadow-floating uk-border-rounded uk-background-default uk-overflow-hidden",attrs:{"panel-width":264}})],1)],1):e._e()]),e._v(" "),o("transition",{attrs:{name:"slide-fade-left"}},[e.isLeftBarVisible?o("div",{staticClass:"zen-mode-left-bar uk-position-fixed uk-height-1-1 uk-box-shadow-floating uk-border-rounded uk-background-default"},[o("searchpanel",{attrs:{"panel-width":264},on:{close:function(t){e.isLeftBarVisible=!1}}})],1):e._e()]),e._v(" "),o("div",{ref:"bottomBar",staticClass:"zen-mode-bottom-bar uk-position-fixed uk-flex uk-flex-middle",class:{"is-active":e.isBottomBarWorkInProcess||e.isHoveringOnBottomBar||e.scheduleToShowBottomBar},style:e.bottomBarStyles},[o("bottombar",{staticClass:"uk-width-1-1 uk-box-shadow-floating uk-border-rounded uk-background-default uk-height-1-1",on:{"work-in-process":e._handleBottomBarWorkStatusChange}})],1),e._v(" "),e.isBranchOnlyMode?o("div",{staticClass:"zen-mode-show-full-content uk-position-fixed"},[o("branchonlybar")],1):e._e()],1)}),[],!1,i,"data-v-882a0a52",null).exports},9858:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__esModule:()=>n.X,default:()=>r});var n=o(24984);var i=function(e){o(42422)};const r=(0,o(62236).Z)(n.Z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{style:{"background-color":e.blackBackground?"#000000":"transparent"}},[e.muted?o("div",{staticClass:"mask"},[o("img",{attrs:{draggable:"false",src:e.mutedLogo}})]):e._e()])}),[],!1,i,"data-v-4462a29d",null).exports},55423:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-height-expand uk-panel uk-flex uk-flex-column"},[o("toolbar",{attrs:{"menu-options":e.menuOptions,"show-filters-options":!1,"search-text":e.$T("Search notes"),"disabled-search":e.updateTrigger.sheetRendering,"disabled-replace":e.disabledReplace,"disabled-replace-all":e.disabledReplaceAll},on:{replace:e.onReplace,replaceAll:e.onReplaceAll},model:{value:e.searchKeywords,callback:function(t){e.searchKeywords=t},expression:"searchKeywords"}}),e._v(" "),e.menuOptions.isCurrentMapMode||(e.isSearchMode?0===e.searchResult.length:0===e.workbook.length)?o("hr",{staticClass:"uk-separator"}):e._e(),e._v(" "),(e.isSearchMode?0===e.searchResult.length:0===e.workbook.length)?o("common-none-panel",{attrs:{type:e.isSearchMode?"no-result":"no-note","section-style":"margin-top: -30px;"}}):o("div",{staticClass:"uk-height-expand uk-panel uk-overflow-auto uk-flex uk-flex-column",class:{"uk-disabled":e.updateTrigger.sheetRendering},staticStyle:{width:"100%"},style:{zIndex:0,opacity:e.updateTrigger.sheetRendering?.3:1}},[o("tree-list-v2",{attrs:{value:e.defaultSelected,items:e.isSearchMode?e.searchResult:e.workbook},on:{click:e.onClick},scopedSlots:e._u([{key:"sheetTitle",fn:function(t){var n=t.data,i=t.offset;return[o("hr",{staticClass:"uk-separator"}),e._v(" "),o("button",{staticClass:"uk-tree-list-item uk-tree-list-solid-background",style:{"padding-left":i+"px"}},[e._v("\n          "+e._s(n.text)+"\n        ")]),e._v(" "),o("hr",{staticClass:"uk-separator"})]}},{key:"noteItem",fn:function(t){var n=t.data,i=t.checked,r=t.onClick;return[o("button",{staticClass:"uk-tree-list-item",class:{"uk-checked":i},staticStyle:{padding:"16px","overflow-wrap":"break-word"},attrs:{name:n.value},on:{click:r}},[o("div",{staticClass:"uk-text-overflow-ellipsis",staticStyle:{"white-space":"nowrap","font-weight":"500"}},[e._v("\n            "+e._s(n.title||e.emptyText)+"\n          ")]),e._v(" "),o("div",{staticClass:"uk-text-line-clamp",staticStyle:{"margin-top":"4px","line-height":"1.4em"}},[e.isSearchMode&&n.highlight?o("p",{staticClass:"uk-margin-remove"},e._l(n.highlight,(function(t,n){var i=t.text,r=t.isHighlight;return o("span",{key:n,class:{"uk-tree-list-highlight":r}},[e._v(e._s(i))])})),0):o("p",{staticClass:"uk-margin-remove"},[e._v("\n              "+e._s(n.text||e.emptyText)+"\n            ")])])]),e._v(" "),o("hr",{staticClass:"uk-separator",staticStyle:{padding:"0 16px"}})]}}])})],1)],1)},i=[]},28244:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-between"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Set the fill color.")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{indeterminate:e.isFillColorIndeterminate,checked:e.isFillColorChecked},on:{input:e.handleCheckFillColor}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v("\n      "+e._s(e.$T("Fill"))+"\n    ")])]),e._v(" "),o("div",{staticStyle:{height:"22px"}},[e.isFillColorChecked||e.isFillColorIndeterminate?o("div",{staticClass:"uk-flex uk-flex-middle"},[o("color-picker",{staticClass:"uk-format-panel-inline-ml",attrs:{value:e.computedFilledColors[0],"is-multiple":e.isFillColorMultiple},on:{input:e.handleInputFillColor}})],1):e._e()])])},i=[]},23142:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ul",{staticClass:"uk-tree-list",class:{"uk-list-striped":e.striped,"uk-tree-list-solid-background":e.striped},staticStyle:{position:"relative"},style:{height:e.highPerformanceMode?e.displayData.totalHeight+"px":"auto","flex-shrink":0},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.onKeydown("up")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.onKeydown("down")}]}},e._l(e.displayData.items,(function(t){return o("li",{key:t.value,class:{"uk-checked":e.isItemChecked(t.current)},staticStyle:{"min-width":"100%"},style:e.highPerformanceMode?{position:"absolute",top:t.currentTop,width:e.textWrap?"100%":e.displayData.commonWidth+"px"}:{width:"100%"}},[e._t(t.current.slotType,[o("button",{staticClass:"uk-tree-list-item",class:{"uk-checked":e.isItemChecked(t.current)},style:{"padding-left":16*t.indent+16+"px"},attrs:{type:"button","data-value":t.value},on:{click:function(o){return e.onClickButton(t.current)}}},[e.highPerformanceMode?e._l(t.textLines,(function(t,n){return o("p",{key:n,staticClass:"uk-text-nowrap uk-margin-remove"},[e._v("\n            "+e._s(t)+"\n          ")])})):[e._v("\n          "+e._s(t.current.text||e.emptyText)+"\n        ")]],2)],{data:t.current,checked:e.isItemChecked(t.current),index:e.index,offset:16*t.indent+16,onClick:function(){return e.onClickButton(t.current)}}),e._v(" "),e.isItemExpandable(t.current)?o("a",{staticClass:"uk-tree-list-toggle uk-icon uk-button uk-tree-list-toggle-icon uk-button-icon",style:{left:16*t.indent+"px",opacity:"number"==typeof t.current.triangleOpacity?t.current.triangleOpacity:.5},attrs:{href:"javascript: void 0;",tabindex:"-1","uk-icon":e.isItemExpanded(t.current)?"triangle-down":"triangle-right"},on:{click:function(o){return e.onToggleClick(t.current,o)}}}):e._e()],2)})),0)},i=[]},75100:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-position-cover uk-flex uk-flex-column uk-overflow-hidden",attrs:{tabindex:"-1"}},[o("audiobar"),e._v(" "),e.isInShowBranchOnlyMode&&e.isOutlineMode?o("branchonlybar",{staticClass:"uk-position-absolute",staticStyle:{left:"20px",top:"20px","z-index":"1"}}):e._e(),e._v(" "),o("div",{ref:"scrollContainer",class:{"uk-overflow-auto":!0,"uk-flex-1":!0,"uk-background-default":!0,dark:"dark"===e.appearance},staticStyle:{"background-color":"white"},attrs:{id:"outlinemode"}},[o("div",{ref:"outlineContainer",staticClass:"outline-paper"},[o("Outliner",{ref:"outline"})],1)])],1)},i=[]},41083:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"el",class:{"topic-outter-wrap":!0,hide:!e.show,selected:e.selected,dragging:e.dragging},on:{dragstart:function(t){return t.stopPropagation(),e.dragStart(t)},dragenter:function(t){return t.preventDefault(),t.stopPropagation(),e.dragEnter(t)},dragleave:function(t){return t.preventDefault(),t.stopPropagation(),e.dragLeave(t)},dragover:function(t){return t.preventDefault(),t.stopPropagation(),e.dragOver(t)},dragend:function(t){return t.preventDefault(),t.stopPropagation(),e.dragEnd(t)},drop:function(t){return t.preventDefault(),t.stopPropagation(),e.drop(t)},mousedown:e.mouseDown,mouseover:e.mouseOver,mouseup:e.mouseUp,mouseenter:e.mouseEnter,mouseleave:e.mouseLeave,contextmenu:e.openMenu}},[o("div",{class:{topic:!0,dragging:e.dragging,"depth-0":0===e.topic.depth,"main-topic":0===e.topic.depth&&e.isMainTopic,"is-floating":e.isFloating},style:{paddingLeft:e.paddingLeft},attrs:{id:"topic-"+e.topic.id,"data-topic-id":e.topic.id}},[o("div",{staticClass:"topic-wrap"},[o("div",{staticClass:"topic-wrap-slot"},[o("div",{staticClass:"topic-inner",attrs:{"main-topic":e.isFloating?e.$T("Floating Topic"):e.$T("Main Topic")}},[o("div",{class:{"topic-dot":!0,"has-child":e.hasChild,zipped:e.zipped},attrs:{draggable:"true"},on:{click:e.toggleZip}}),e._v(" "),o("topic-markers",{ref:"markers",attrs:{"topic-id":e.topic.id}}),e._v(" "),o("span",{ref:"titleEl",class:{"topic-inner-text":!0,zipped:e.zipped},attrs:{contenteditable:e.editable,child_count:e.childrenCount},on:{compositionstart:function(t){e.compositionStarted=!0},compositionend:function(t){e.compositionStarted=!1,e.$nextTick(e.input)},input:e.input,focus:e.onFocus,blur:e.onBlur,keydown:e.onKeydown}})],1),e._v(" "),e.reachedLimit?o("span",{staticClass:"show-limited-topics",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleZip(t)}}},[e._v("+ "+e._s(e.$T("Show $1 topics",e.childrenCount)))]):e._e(),e._v(" "),o("div",{staticClass:"topic-inserts popover-target",on:{mousedown:function(t){return t.stopPropagation(),e.clickOnWhiteSpaceOfInserts(t)}}},[o("topic-labels",{ref:"labels",attrs:{"topic-id":e.topic.id}}),e._v(" "),o("topic-hyperlink",{ref:"hyperlink",attrs:{"topic-id":e.topic.id}}),e._v(" "),o("topic-audio-notes",{ref:"audio-notes",attrs:{"topic-id":e.topic.id}}),e._v(" "),o("div",{staticClass:"flex-line-break"}),e._v(" "),o("topic-image",{ref:"image",attrs:{"topic-id":e.topic.id,index:e.index}}),e._v(" "),o("topic-equation",{ref:"equation",attrs:{"topic-id":e.topic.id,index:e.index}})],1),e._v(" "),e.show?o("topic-note",{ref:"notes",attrs:{"topic-id":e.topic.id}}):e._e(),e._v(" "),o("div",{staticStyle:{clear:"both"}})],1)])])])},i=[]},6370:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[o("skeleton-preview",{on:{navigation:e.onNavigation}}),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("sheet-background"),e._v(" "),o("multi-branch-color"),e._v(" "),o("tapered-line")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("advanced-layout")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("cjk-font-family")],1)],1)},i=[]},54444:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{tabindex:"0"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onCloseMapShot(t)}}},[o("map-shot-frame",{directives:[{name:"show",rawName:"v-show",value:!e.isShowModal,expression:"!isShowModal"}],ref:"mapShotFrameComponent",attrs:{visible:!e.isTakingShot,"default-size":e.defaultSize,"default-rate":e.defaultRate,appearance:e.appearance,"container-style":e.containerStyle,"background-grayscale":e.mindMapBackgroundGrayscale,"get-scroll-container-dom-element":e.getScrollContainerDomElement,"get-full-page-dom-element":e.getFullPageDomElement},on:{mousewheel:e.onWheelAndPinch,close:e.onCloseMapShot,takeshot:e.onTakeShot}}),e._v(" "),o("map-shot-modal",{attrs:{"png-buffer":e.tmpPngBuffer,appearance:e.appearance,"default-checked-frame":e.defaultModalOptions.frame,"default-checked-shadow":e.defaultModalOptions.shadow,"default-checked-watermark":e.defaultModalOptions.watermark,"default-frame-color":e.defaultModalOptions.frameColor,"default-frame-width":e.defaultModalOptions.frameWidth},on:{save:e.onMapShotModalSave,cancel:e.onMapShotModalCancel}}),e._v(" "),o("keep-alive",[o("transition",{attrs:{"leave-active-class":"uk-animation-fade uk-animation-reverse uk-animation-duration-500ms"}},[e.isShowMapShotMask?o("div",{staticClass:"uk-position-fixed uk-height-1-1 uk-width-1-1 uk-panel uk-position-cover",staticStyle:{"z-index":"1021","background-color":"white"}}):e._e()])],1)],1)},i=[]},6695:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex uk-flex-column"},[o("h4",{staticClass:"uk-format-panel-section-heading"},[e._v("\n    "+e._s(e.$T("CJK Font"))+"\n  ")]),e._v(" "),o("div",{staticClass:"uk-margin-small-top"},[o("font-family",{attrs:{"is-multiple":!1,fonts:e.availableCJKFontFamily,font:e.currentCJKFontFamily},on:{select:e.handleSelectCJKFont}}),e._v(" "),o("div",{staticClass:"uk-format-panel-inline-mt"},[o("p",{staticClass:"uk-text-muted"},[e._v("\n        "+e._s(e.$T("After setting Chinese, Japanese and Korean fonts, mixed layout with western typeface displays better."))+"\n      ")])])],1)])},i=[]},96025:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-between uk-flex-middle"},[o("div",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Set the topic's width to a fixed value.")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{id:"customWidthCheckBox",type:"checkbox",disabled:e.isCustomTopicWidthDisabled},domProps:{checked:e.isCustomTopicWidthChecked,indeterminate:e.isCustomTopicWidthIndeterminate},on:{change:e.handleCheckCustomWidth}}),e._v(" "),o("label",{staticClass:"uk-format-panel-inline-ml uk-format-panel-sub-section-heading",attrs:{for:"customWidthCheckBox"}},[e._v(e._s(e.$T("Manual Width")))])]),e._v(" "),o("measure-input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],style:{maxWidth:"54px"},attrs:{placeholder:e.placeholderTopicWidth,disabled:e.isCustomTopicWidthDisabled||!(e.isCustomTopicWidthChecked||e.isCustomTopicWidthIndeterminate),value:e.topicWidthInput,measurement:"px"},on:{focus:e.handleTopicWidthFocus,entered:e.handleCustomWidthInput,blur:e.handleCustomWidthInput}})],1)},i=[]},7777:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.slides.length?o("div",[o("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",staticStyle:{"margin-bottom":"12px"}},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Summary Slide")))]),e._v(" "),o("div",[o("DisplayOptions",{attrs:{"current-option":e.slideDisplayStatus,title:e.$T("Choose whether to display the summary as a slide in Pitch Mode.")},on:{optionChanged:e.onToggle}})],1)]),e._v(" "),o("div",{staticClass:"pitch-mode-preview-container"},[1===e.selectionIds.length?o("slide-preview",{staticClass:"pitch-mode-preview-slide",attrs:{"slide-size":e.slideSize,slide:e.slides[0],muted:!e.isSlideEnabled,"container-size":{width:232,height:130.5}}}):o("div",{staticClass:"uk-flex uk-text-muted uk-flex-center uk-flex-middle",style:{width:"232px",height:"130.5px"}},[o("span",[e._v(e._s(e.$T("Multiple topics selected")))])])],1)]):e._e()},i=[]},32096:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-height-expand uk-panel uk-overflow-auto uk-flex uk-flex-column"},[0===e.workbook.length?o("common-none-panel",{attrs:{type:"no-tag","section-style":"margin-top: -30px;"}}):o("div",[o("tree-list-v2",{attrs:{items:e.workbook},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.data,i=t.offset;return[o("button",{staticClass:"uk-tree-list-item lm-view-item",style:{"padding-left":i+"px"},attrs:{"lm-checked":!0,name:n.value},on:{focus:function(e){return e.target.blur()},click:function(){return e.onSelect(n)}}},["marker"!==n.type||n.isTitle?e._e():o("img",{staticStyle:{width:"16px",height:"16px","vertical-align":"middle"},attrs:{draggable:"false","uk-img":"",src:n.marker.markerUrl}}),e._v(" "),o("span",{staticClass:"uk-text-middle"},[e._v(" "+e._s(n.text)+" ")]),e._v(" "),o("div",{staticClass:"lm-select-icon uk-float-right",style:(n.isTitle?e.isTitleChecked(n.type):e.isItemChecked(n))?"visibility: visible!important;":""},[o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-filter uk-display-inline-block",class:{"uk-checked":n.isTitle?e.isTitleChecked(n.type):e.isItemChecked(n)},attrs:{src:(n.isTitle?e.isTitleChecked(n.type):e.isItemChecked(n))?e.selectedIconFillImage:e.selectedIconImage,"uk-svg":""}})])])]}}])})],1)],1)},i=[]},67813:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.show?o("div",{ref:"el",class:{"topic-image":!0,focused:e.isSelected,dragging:e.isDragging},style:e.imgStyle,attrs:{updaetKey:e.updateKey,draggable:"true"},on:{mousedown:function(e){return e.stopPropagation(),!1},dragstart:function(t){return t.stopPropagation(),e.dragStart(t)},click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleFocused(t)},blur:function(t){return e.toggleFocused(!1)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.openMenu(t)}}},[e.isSelected?o("div",{staticClass:"topic-image-handle",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.resizeStart(t)}}}):e._e()]):e._e()},i=[]},95591:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isOpened?o("popover",{ref:"popover",staticClass:"topic-labels-editor",attrs:{width:"280px",height:(e.showMostlyUsedLabels?223:148)+"px","host-left":e.targetRect.left,"host-right":e.targetRect.right,"host-top":e.targetRect.top,"host-bottom":e.targetRect.bottom},on:{"popover:close":e.updateLabels}},[o("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[o("div",{staticClass:"popover-content",staticStyle:{height:"148px",position:"relative"},on:{mousedown:function(e){return e.stopPropagation(),!1}}},[o("h4",{staticClass:"uk-text-disabled uk-text-bold"},[e._v("\n        "+e._s(e.$T("Label"))+"\n      ")]),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.labelsContent,expression:"labelsContent"}],ref:"labels-content-element",staticClass:"labels-content",attrs:{placeholder:e.$T("Enter labels, separated by commas")},domProps:{value:e.labelsContent},on:{keydown:e.onKeyDown,input:function(t){t.target.composing||(e.labelsContent=t.target.value)}}})]),e._v(" "),e.showMostlyUsedLabels?o("div",{staticClass:"uk-width-1-1 uk-padding uk-padding-remove-vertical"},[o("hr",{staticClass:"uk-separator uk-width-1-1 "})]):e._e(),e._v(" "),o("mostly-used-labels",{attrs:{"label-text":e.labelsContent},on:{"update-visible":function(t){return e.showMostlyUsedLabels=t},"update-label":e.updateLabel}})],1)]):e._e()},i=[]},10386:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[e._m(0),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("div",{staticClass:"uk-flex uk-flex-middle"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{id:"customWidthCheckBox",type:"checkbox",title:e.$T("Set the border width and color.")},domProps:{checked:e.borderStyleChecked},on:{change:e.borderStyleToggle}}),e._v(" "),o("label",{staticClass:"uk-format-panel-inline-ml uk-format-panel-sub-section-heading",attrs:{for:"customWidthCheckBox",title:e.$T("Set the border width and color.")}},[e._v("\n        "+e._s(e.$T("Border"))+"\n      ")])]),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-middle uk-format-panel-inline-mt uk-width-1-1 uk-format-panel-sub-section",style:{paddingLeft:"18px"}},[o("line-width",{directives:[{name:"show",rawName:"v-show",value:e.borderStyleChecked,expression:"borderStyleChecked"}],attrs:{title:e.$T("Set the line width."),items:e.BORDERWIDTHS,value:e.selectedBorderWidth,disabled:!e.borderStyleChecked},on:{input:e.handleInputBorderWidth}}),e._v(" "),o("color-picker",{directives:[{name:"show",rawName:"v-show",value:e.borderStyleChecked,expression:"borderStyleChecked"}],staticClass:"uk-format-panel-inline-ml uk-flex-no-shrink",attrs:{value:e.selectedBorderColor},on:{input:e.handleInputBorderColor}})],1),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-middle uk-format-panel-sub-section"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{id:"customShadowCheckBox",type:"checkbox",title:e.$T("Add shadow effect.")},domProps:{checked:e.borderShadowChecked},on:{change:e.borderShadowToggle}}),e._v(" "),o("label",{staticClass:"uk-format-panel-inline-ml uk-format-panel-sub-section-heading",attrs:{for:"customShadowCheckBox",title:e.$T("Add shadow effect.")}},[e._v("\n        "+e._s(e.$T("Shadow"))+"\n      ")])])]),e._v(" "),e._m(1),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("div",[e._v("\n      "+e._s(e.$T("Opacity"))+"\n    ")]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section uk-flex"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.opacity,expression:"opacity"}],staticClass:"uk-range",attrs:{"uk-progress-range-input":"",type:"range",min:"0",max:"1",step:"0.01"},domProps:{value:e.opacity},on:{change:e.opacityInputRange,__r:function(t){e.opacity=t.target.value}}}),e._v(" "),o("div",{style:{maxWidth:"73px",marginLeft:"8px"}},[o("number-input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],attrs:{suffix:"%",min:"0",max:"100"},on:{input:e.opacityInputNumber},model:{value:e.opacityText,callback:function(t){e.opacityText=t},expression:"opacityText"}})],1)])]),e._v(" "),e._m(2)])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-format-panel-section uk-padding-remove-top uk-padding-remove-bottom"},[t("hr",{staticClass:"uk-format-panel-divider"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-format-panel-section uk-padding-remove-top uk-padding-remove-bottom"},[t("hr",{staticClass:"uk-format-panel-divider"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-format-panel-section uk-padding-remove-top uk-padding-remove-bottom"},[t("hr",{staticClass:"uk-format-panel-divider"})])}]},72118:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("h4",{staticClass:"uk-format-panel-sub-section-heading"},[e._v("\n    "+e._s(e.$T("Line"))+"\n  ")]),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-middle uk-format-panel-inline-mt"},[o("line-width",{directives:[{name:"show",rawName:"v-show",value:e.isSummaryLineStyleVisible,expression:"isSummaryLineStyleVisible"}],staticClass:"uk-width-1-1",attrs:{title:e.$T("Set the line width."),items:e.SUMMARYLINEWIDTHS,"is-multiple":e.isSummaryLineWidthMultiple,value:e.uniqueSelectionSummaryLineWidths[0]},on:{input:e.handleChangeSummaryLineWidth}}),e._v(" "),o("color-picker",{staticClass:"uk-flex-no-shrink uk-format-panel-inline-ml",attrs:{value:e.uniqueSelectionSummaryLineColors[0]},on:{input:e.handleChangeLineColor}})],1)])},i=[]},38035:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-panel uk-height-expand uk-flex uk-flex-column uk-flex-center"},[o("div",{staticClass:"uk-panel"},[o("common-none-panel",{attrs:{type:e.isNoSelections?"empty-selection":"no-format-available"}})],1)])},i=[]},84841:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"topic-markers",style:{height:e.width}},e._l(e.markers,(function(t){var n=t.id,i=t.url;return o("div",{key:n,staticClass:"topic-marker",style:{width:e.width+"px",height:e.width+"px"}},[o("span",{ref:n,refInFor:!0,staticClass:"topic-marker-item",style:e.genMarkerStyle(i),on:{mousedown:function(e){e.stopPropagation()},contextmenu:function(t){return e.openMenu(t,n)},click:function(t){return t.stopPropagation(),t.preventDefault(),e.showMarkerPopover(n)}}})])})),0)},i=[]},73862:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Set the boundary border width, color and style.")}},[o("input",{staticClass:"uk-checkbox uk-flex-no-shrink",attrs:{type:"checkbox"},domProps:{indeterminate:e.isBorderIndeterminate,checked:e.isBorderChecked},on:{change:e.handleBorderWidthCheck}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v("\n      "+e._s(e.$T("Border"))+"\n    ")])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isBorderChecked&&!e.isBorderIndeterminate,expression:"isBorderChecked && !isBorderIndeterminate"}],staticClass:"uk-flex uk-format-panel-checkbox-ml uk-format-panel-inline-mt"},[o("div",{staticClass:"uk-width-1-1"},[o("line-width",{staticClass:"uk-width-1-1",attrs:{title:e.$T("Set the border width."),items:e.lineWidths,"is-multiple":e.isBorderMultiple,value:e.computedBorderLineWidth},on:{input:e.handleBorderWidthSelect}}),e._v(" "),o("line-styles",{staticClass:"uk-format-panel-inline-mt",attrs:{title:e.$T("Choose the border style."),items:e.boundaryLinePatterns,value:e.uniqueBoundaryLineStyles&&e.uniqueBoundaryLineStyles[0],"is-multiple":e.isBoundaryLineStylesMultiple},on:{input:e.handleSelectBoundaryLineStyle}})],1),e._v(" "),o("color-picker",{staticClass:"uk-format-panel-inline-ml uk-flex-no-shrink",attrs:{value:e.uniqueBoundaryLineColors&&e.uniqueBoundaryLineColors[0],"is-multiple":e.isBoundaryLineColorMultiple},on:{input:e.handleInputBoundaryLineColor}})],1)])},i=[]},5173:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[e.isSlidePanelTab?o("div",{staticClass:"uk-child-separator",staticStyle:{"padding-top":"4px"}},[o("slide-summary",{staticClass:"uk-format-panel-section",on:{onSlidesChange:function(t){e.summarySlides=t}}}),e._v(" "),o("slide-topic",{staticClass:"uk-format-panel-section",on:{onSlidesChange:function(t){e.topicSlides=t}}}),e._v(" "),o("slide-list",{staticClass:"uk-format-panel-section",on:{onSlidesChange:function(t){e.listSlides=t}}})],1):e._e()])},i=[]},45228:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ul",{staticClass:"skeleton-panel uk-height-expand uk-flex uk-flex-column uk-height-1-1 uk-padding-remove uk-margin-remove"},[o("skeleton-preview",{ref:"skeletonPreview",attrs:{"card-width":214,"card-height":132.15,"horizontal-margin":12,"color-theme-id":e.staticColorThemeId,"is-toggleable":!0,"select-first":!1,"current-skeleton-theme-id":e.currentSkeletonId},on:{onSelected:e.changeSkeleton}})],1)},i=[]},68772:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.audioNotes?o("div",{staticClass:"topic-audio-notes",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.playAudioNotes(t)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.openMenus(t)}}},[e._v("\n  "+e._s(e.$T("Audio Note"))+"\n")]):e._e()},i=[]},57004:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-flex uk-flex-column uk-margin-bottom"},e._l(e.stickerGroups,(function(t){return o("div",{key:t.name,staticClass:"uk-padding uk-padding-remove-vertical uk-padding-remove-right"},[o("h5",{staticClass:"uk-text-middle uk-margin-small-top uk-margin-remove-bottom uk-text-bold",staticStyle:{height:"28px","line-height":"28px"}},[e._v("\n      "+e._s(t.name)+"\n    ")]),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-flex-wrap"},e._l(t.items,(function(t){return o("div",{key:t.name,staticClass:"uk-margin-small-right uk-margin-small-top editor-item-hover-color",staticStyle:{"user-select":"all",width:"48px",height:"48px"}},[o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-card uk-card-default uk-card-fix-sized uk-card-xsmall uk-card-selectable uk-background-norepeat uk-background-center-center",staticStyle:{width:"48px",height:"48px","min-width":"48px","max-width":"48px","min-height":"48px","max-height":"48px","background-size":"36px"},attrs:{"uk-img":"","data-src":t.imageURL,draggable:"true"},on:{dragstart:function(o){return e.ondragstart(o,t.name)},click:function(o){return e.addimage(t.name)}}})])})),0)])})),0)},i=[]},34313:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[o("font-style"),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("reset-button",{attrs:{"style-keys":e.FONTKEYS}})],1)],1)},i=[]},69857:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"topicNoteElement",staticClass:"topic-notes",on:{mousedown:function(e){return e.stopPropagation(),!1},blur:e.handleFocusChanged,focus:e.handleFocusChanged}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.hasSelection&&e.isToolbarVisible,expression:"hasSelection && isToolbarVisible"}],ref:"editorToolbar",staticClass:"topic-notes-toolbar"},[o("button",{staticClass:"ol-b ql-bold",on:{click:function(t){return e.toggleSelectionStyles(e.NotesEditor.TextStyles.bold)}}}),e._v(" "),o("button",{staticClass:"ol-i ql-italic",on:{click:function(t){return e.toggleSelectionStyles(e.NotesEditor.TextStyles.italic)}}}),e._v(" "),o("button",{staticClass:"ol-u ql-underline",on:{click:function(t){return e.toggleSelectionStyles(e.NotesEditor.TextStyles.underline)}}}),e._v(" "),o("button",{staticClass:"ol-ul ql-list",attrs:{value:"bullet"},on:{click:function(t){return e.toggleSelectionStyles(e.NotesEditor.TextStyles.bullet)}}}),e._v(" "),o("button",{staticClass:"ol-ol ql-list",attrs:{value:"ordered"},on:{click:function(t){return e.toggleSelectionStyles(e.NotesEditor.TextStyles.number)}}}),e._v(" "),o("button",{staticClass:"ol-link",on:{click:e.showLinkEditor}})]),e._v(" "),o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.outlinerNotes"],expression:"['focus.outlinerNotes']",arg:"group"}],ref:"container",staticClass:"topic-notes-container",class:e.containerClass,staticStyle:{cursor:"text"},attrs:{tabindex:"-1"},on:{focus:function(t){e.onEditing=!0},blur:function(t){e.onEditing=!1},change:e.debouncedNotesDataChanged,selectionchange:e.selectionChanged,contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.openMenus(t)}}})])},i=[]},24004:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"mapShotFrameContainerEl",staticClass:"uk-position-fixed uk-panel uk-position-cover",style:e.computedContainerStyle,on:{mousedown:e.onMapShotMouseDown,mousemove:e.onMapShotMouseMove,mouseup:e.onMapShotMouseUpOrLeave,mouseleave:e.onMapShotMouseUpOrLeave,mousewheel:e.onWheelAndPinch}},[o("div",{ref:"mapShotFrameEl",staticClass:"map-shot-frame uk-position-absolute",style:{"box-shadow":"0 0 0 "+e.commputedBoxShadow+"px rgba(0, 0, 0, 0.6)",visibility:e.visible?"visible":"hidden",cursor:"default"===e.computedContainerStyle.cursor?"all-scroll":e.computedContainerStyle.cursor}},[o("div",{staticClass:"click-safe-zone",style:{position:"absolute",width:"calc(100% + 30px)",height:"calc(100% + 30px)",left:"-15px",top:"-15px",cursor:"default","z-index":"-1"}}),e._v(" "),o("div",{ref:"mapShotFrameDisplaySizeEl",staticClass:"map-shot-frame-display-size"},[e._v("\n      "+e._s(e.currentFrameSize[0])+"  "+e._s(e.currentFrameSize[1])+"\n    ")]),e._v(" "),e._l(e.mapShotHandlers,(function(t,n){return o("div",{key:n,class:"map-shot-handler-"+t[0]+(t[1]?"-"+t[1]:""),on:{mousedown:function(o){return o.target!==o.currentTarget?null:(o.stopPropagation(),e.onMapShotHandlerDown(t,o))}}})}))],2),e._v(" "),o("div",{ref:"mapShotToolbarEl",staticStyle:{height:"28px"},style:{visibility:e.visible?"visible":"hidden"},attrs:{id:"tool-bar"}},[o("ul",{staticClass:"uk-button-segment-group uk-button-segment-divider",class:{"uk-background-muted":"dark"===e.appearance}},[o("li",{attrs:{title:e.$T("Exit Map Shot.")}},[o("div",{staticClass:"uk-preserve uk-button uk-button-segment uk-button-compact btn-icon btn",on:{click:e.onClose}},[o("img",{attrs:{draggable:"false","data-src":e.closeMapShotIcon,"uk-svg":""}})])]),e._v(" "),o("li",{attrs:{title:e.$T("Choose the aspect ratio.")}},[o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-segment uk-button-select uk-button-compact btn btn-segment",staticStyle:{"line-height":"27px"}},[e._v("\n          "+e._s(e.computedSelectedRate.text)+"\n        ")]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-width-small",attrs:{"uk-popover":"","data-sel-close":"[uk-menu] > li"}},[o("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},e._l(e.frameSizeList,(function(t){return o("li",{key:t.key,on:{click:function(o){e.computedSelectedRate=t}}},[o("button",{class:{"uk-checked":t.key===e.computedSelectedRate.key},attrs:{autofocus:t.key===e.computedSelectedRate.key}},[e._v("\n                "+e._s(t.text)+"\n              ")])])})),0)])]),e._v(" "),o("li",{attrs:{title:e.$T("Capture the screenshot.")}},[o("div",{staticClass:"uk-preserve uk-button uk-button-segment uk-button-compact btn-icon btn",on:{click:e.onTakeShot}},[o("img",{attrs:{draggable:"false","data-src":e.cameraIcon,"uk-svg":""}})])])])]),e._v(" "),e.isShowGoMapShotBar?o("div",{staticClass:"uk-button uk-button-primary uk-flex uk-flex-middle uk-position-fixed",staticStyle:{top:"20px",left:"20px","z-index":"1030"},style:{visibility:e.visible?"visible":"hidden"},on:{mouseup:function(t){return t.preventDefault(),e.goMapShotBar(t)}}},[e._v("\n    "+e._s(e.$T("Go Map Shot Bar"))+"\n  ")]):e._e()])},i=[]},77196:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isEditorOpened?o("popover",{ref:"popover",staticClass:"equation-editor",attrs:{width:e.popoverWidth+"px",height:e.popoverHeight+"px","host-left":e.popoverLeft,"host-right":e.popoverRight,"host-top":e.popoverTop,"host-bottom":e.popoverBottom},on:{"popover:close":e.closePopover}},[o("div",{staticClass:"uk-padding uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[o("div",{staticClass:"uk-flex uk-flex-between uk-width-1-1 uk-flex-middle",staticStyle:{"margin-bottom":"12px"}},[o("span",{staticClass:"uk-text-bold uk-margin-remove-bottom",staticStyle:{opacity:".2","font-size":"14px","line-height":"14px"}},[e._v("\n        "+e._s(e.$T("Equation"))+"\n      ")]),e._v(" "),o("span",{staticClass:"equation-help",staticStyle:{outline:"none"},attrs:{tabindex:"-1","uk-icon":"icon: question; ratio: 1.1"},on:{click:e.handleGoEquationHelp}})]),e._v(" "),o("div",{staticClass:"uk-height-expand uk-width-1-1",on:{mousedown:function(e){e.stopPropagation()},click:function(e){e.preventDefault(),e.stopPropagation()}}},[o("textarea",{staticClass:"uk-textarea uk-width-1-1 uk-height-1-1 uk-box-shadow-none uk-padding-remove",attrs:{autofocus:"",spellcheck:"false",placeholder:e.$T("Type or paste LaTeX")},domProps:{value:e.equation},on:{blur:e.handleBlur,input:function(t){return e.handleEquationInput(t.target.value)}}}),e._v(" "),o("div",{ref:"previewContainer",staticClass:"preview-container uk-flex uk-flex-center uk-flex-middle",style:{"background-color":"dark"===e.appearance?"rgba(255,255,255, .1)":"rgba(0,0,0, .02)",fill:"dark"===e.appearance?"white":"black"}})])])]):e._e()},i=[]},48643:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-between uk-flex-middle"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Shape")))]),e._v(" "),o("div",[o("popover",{attrs:{title:e.$T("Choose the topic shape."),value:e.currentShapeClass,items:e.boundaryShapes,"is-multiple":e.isMultiple},on:{input:e.handleBoundaryShapeSelect}})],1)])},i=[]},60871:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[e.options.isRoot||e.options.isMultiTypes?e._e():[o("quick-styles"),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"})],e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("boundary-shape")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("topic-fill",{attrs:{"default-check-color":"#FFF"}})],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("boundary-border")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("font-styles"),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("reset-button",{attrs:{"style-keys":e.FONTKEYS.concat(e.BOUNDARYSTYLEKEYS)}})],1)],2)},i=[]},76486:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ul",{staticClass:"uk-height-expand uk-flex uk-flex-column uk-height-1-1 uk-padding-remove uk-margin-remove"},[o("preview-section",{attrs:{previews:e.computedColorThemeList,"card-width":99,"card-height":65,"is-show-label":!0,"horizontal-margin":12,"is-toggleable":!0,"inital-selected-item-id":e.currentColorThemeId,"prop-selected-item-id":e.currentColorThemeId,"select-first":!1,"is-svg":!0},on:{select:e.onSelect}})],1)},i=[]},51753:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[o("div",{staticClass:"uk-format-panel-section"},[o("image-size",{ref:"imageSize",attrs:{"image-views":e.imageViews,"user-image-style":e.userImageStyle,"initial-image-style":e.currentInitialImageStyle,"initial-styles":e.initialImageStyles}})],1),e._v(" "),o("image-style",{ref:"imageStyle",attrs:{"user-image-style":e.userImageStyle,"initial-image-style":e.currentInitialImageStyle,"image-views":e.imageViews,"initial-styles":e.initialImageStyles}}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("button",{staticClass:"uk-button uk-button-default uk-width-1-1",attrs:{disabled:!e.styleChanged,title:e.$T("Reset style.")},on:{click:e.handleResetStyles}},[e._v("\n      "+e._s(e.$T("Reset Style"))+"\n    ")])])],1)},i=[]},27352:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"uk-format-panel-sub-section uk-flex-between uk-flex-middle"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v("\n      "+e._s(e.$T("Structure"))+"\n    ")]),e._v(" "),o("div",[o("popover",{attrs:{"is-multiple":e.isMultiple,value:e.currentSelectionValue,disabled:e.isStructureDisable,items:e.items,pos:e.popoverPos,title:e.popoverTitle},on:{input:e.handleChangeStructure}},[o("template",{slot:"footer"},[e.isResetButtonVisible?o("div",{staticClass:"uk-width-1-1 uk-text-center uk-margin-medium-bottom uk-padding-remove-vertical",staticStyle:{"padding-left":"36px","padding-right":"32px"}},[o("button",{staticClass:"uk-button uk-width-1-1 uk-button-default uk-padding-remove",on:{click:function(t){return e.handleChangeStructure(null)}}},[e._v("\n              "+e._s(e.$T("Follow Parent's Structure"))+"\n            ")])]):e._e()])],2)],1)]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-width-1-1 uk-button uk-button-popover-toggle uk-select-icon uk-text-left",attrs:{title:e.$T("Choose the structure layout."),disabled:e.layoutMenu.length<=1,"data-focus":"redirect: > [uk-contextual-popover] > .uk-button"}},[e._v("\n      "+e._s(e.layoutTitle)+"\n    ")]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-popover-contextual",attrs:{"uk-contextual-popover":"offsetLeft: 20","data-sel-close":"[uk-menu] > li > button"}},[o("ul",{staticClass:"uk-overflow-auto uk-height-1-1",attrs:{"uk-menu":""}},e._l(e.layoutMenu,(function(t){return o("li",{key:t.value},[o("button",{class:{"uk-checked":t.value===e.uniqueSelectionStructureClasses[0]},on:{click:function(o){return e.handleChangeStructure(t.value)}}},[e._v("\n            "+e._s(t.title)+"\n          ")])])})),0)])])])},i=[]},48994:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-section uk-width-1-1 uk-text-center uk-flex uk-flex-column uk-flex-middle",staticStyle:{"margin-top":"3px"},attrs:{id:"skeleton-preview"}},[o("div",{staticClass:"uk-flex uk-flex-middle uk-width-1-1 uk-flex-between"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Skeleton")))]),e._v(" "),o("div",{staticClass:"uk-card uk-card-default uk-card-selectable uk-background-cover uk-border-rounded uk-overflow-hidden uk-card-small-shadow uk-width-1-1",staticStyle:{width:"140px",height:"86.45px","background-color":"white"},attrs:{title:e.$T("Click to choose the skeleton.")},on:{click:e.onSkeletonPreview}},[e.skeletonPreviewURL?o("img",{staticClass:"uk-width-1-1 uk-preserve",staticStyle:{filter:"grayscale(1)"},attrs:{draggable:"false","uk-svg":e.isSvg,src:e.skeletonPreviewURL,width:140,height:86.45,alt:""}}):e._e()])]),e._v(" "),e._m(0),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-middle uk-width-1-1 uk-flex-between"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Color Theme")))]),e._v(" "),o("div",{staticClass:"uk-card uk-card-default uk-card-selectable uk-background-cover uk-border-rounded uk-overflow-hidden uk-card-small-shadow uk-width-1-1",staticStyle:{width:"100px",height:"66px"},attrs:{title:e.$T("Click to choose the color theme.")},on:{click:e.openColorTheme}},[e.colorThemePreviewURL?o("img",{staticClass:"uk-width-1-1 uk-preserve",attrs:{draggable:"false","uk-svg":"",src:e.colorThemePreviewURL,width:100,height:66,alt:""}}):e._e()])]),e._v(" "),e._m(1),e._v(" "),o("button",{staticClass:"uk-button uk-button-floating uk-border-rounded uk-width-1-1",attrs:{disabled:e.isAllThemesDisabled,title:e.wrappedTooltipWithKeybinding(e.$T("View both built-in and custom themes."),"allThemes")},on:{click:e.onAllThemesClick}},[e._v("\n    "+e._s(e.$T("Custom Themes"))+"\n  ")])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-width-1-1",staticStyle:{padding:"12px 0"}},[t("hr",{staticClass:"uk-format-panel-divider"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-width-1-1",staticStyle:{padding:"12px 0"}},[t("hr",{staticClass:"uk-format-panel-divider"})])}]},70401:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-panel uk-height-expand uk-flex uk-flex-column uk-flex-center"},[o("div",{staticClass:"uk-panel"},[o("div",{staticClass:"uk-margin uk-background-norepeat uk-background-contain uk-text-center",staticStyle:{height:"120px"},attrs:{"data-src":e.hintImageURL,"uk-svg":""}}),e._v(" "),o("div",{staticClass:"uk-margin uk-text-muted uk-text-center"},[e._v("\n      "+e._s(e.$T("It's not available in current mode."))+"\n    ")])])])},i=[]},83095:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.slides.length?o("div",[o("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",staticStyle:{"margin-bottom":"12px"}},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Topic Slide")))]),e._v(" "),o("div",[o("DisplayOptions",{attrs:{"current-option":e.slideDisplayStatus,title:e.$T("Choose whether to display the topic as a slide in Pitch Mode.")},on:{optionChanged:e.onToggle}})],1)]),e._v(" "),o("div",{staticClass:"pitch-mode-preview-container"},[1===e.selectionIds.length?o("slide-preview",{staticClass:"pitch-mode-preview-slide",attrs:{"slide-size":e.slideSize,slide:e.slides[0],muted:!e.isSlideEnabled,"container-size":{width:232,height:130.5}}}):o("div",{staticClass:"uk-flex uk-text-muted uk-flex-center uk-flex-middle",style:{width:"232px",height:"130.5px"}},[o("span",[e._v(e._s(e.$T("Multiple topics selected")))])])],1),e._v(" "),e.isSlideEnabled||e.isSlideEnabledMultiple?o("div",[e.imageAlignmentOptions.length?[o("label",{staticClass:"uk-flex uk-flex-middle uk-margin-top"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox",title:e.$T("Select to use fixed image position.")},domProps:{indeterminate:e.isImagePositionInterminate,checked:e.isFixedImagePosition},on:{input:e.onToggleFixedImagePosition}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml",attrs:{title:e.$T("Select to use fixed image position.")}},[e._v(e._s(e.$T("Fixed Image Position")))])]),e._v(" "),e.isFixedImagePosition?o("ul",{staticClass:"uk-button-segment-group uk-flex uk-button-segment-divider uk-width-1-1"},e._l(e.imageAlignmentOptions,(function(t){return o("li",{key:t,class:{"uk-active":t===e.imageAlignment},staticStyle:{width:"100px"},attrs:{title:e.getImageAlignmentLabel(t)}},[o("label",[o("input",{attrs:{type:"radio",name:"segmentButton"},domProps:{value:t,checked:t===e.imageAlignment},on:{input:function(o){return e.onChangeImageAlignment(t)}}}),e._v(" "),e.getImageAlignmentLogo(t)?o("span",{staticClass:"uk-button uk-button-segment uk-padding-remove"},[o("img",{staticClass:"uk-svg",staticStyle:{transform:"translateY(-1px)"},attrs:{"uk-svg":"",draggable:"false",src:e.getImageAlignmentLogo(t),alt:""}})]):e._e()])])})),0):e._e()]:e._e()],2):e._e()]):e._e()},i=[]},5686:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-flex-top uk-overflow-hidden",staticStyle:{"z-index":"1030"},attrs:{id:"map-shot-modal","uk-modal":""}},[o("div",{staticClass:"uk-modal-dialog uk-modal-body uk-margin-auto-vertical uk-format-panel uk-flex springish",style:{height:"400px",width:"740px",padding:0,borderRadius:"8px",boxShadow:"0px 12px 36px 0px rgba(0,0,0,0.3)"}},[o("div",{staticClass:"uk-text-center uk-flex uk-flex-middle uk-flex-center",style:{backgroundColor:"dark"===e.appearance?"#949699":"#fafafb",boxSizing:"border-box",height:"100%",width:"440px",borderTopLeftRadius:"8px",borderBottomLeftRadius:"8px"},attrs:{id:"map-shot-preview"}},[o("div",{staticClass:"uk-display-inline-block",style:{position:"relative",overflow:"hidden",backgroundColor:e.checkedFrame?e.pickedColor:"transparent",padding:e.previewPadding+"px"}},[o("div",{staticClass:"uk-position-relative",style:{boxShadow:e.checkedShadow?"0px 0px "+parseInt(.4*e.previewPadding)+"px 0px rgba(0, 0, 0, 0.2)":""}},[e.pngDataURL?o("img",{staticClass:"uk-display-inline-block",style:{maxWidth:e.maxPreviewImageSize.width+"px",maxHeight:e.maxPreviewImageSize.height+"px"},attrs:{draggable:"false",src:e.pngDataURL}}):e._e(),e._v(" "),e.checkedFrame||e.checkedShadow?e._e():o("div",{staticClass:"uk-position-absolute uk-height-1-1 uk-width-1-1",staticStyle:{top:"0",left:"0"},style:{border:"1px solid "+("dark"===e.appearance?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)")}})]),e._v(" "),e.checkedWatermark?o("div",{staticClass:"uk-text-center uk-flex uk-flex-column",staticStyle:{justifyContent:"center"},style:{width:"100%",position:"absolute",left:0,bottom:0,height:e.previewPadding+"px",color:e.watermarkColors[e.watermarkColor],backgroundColor:"transparent"}},[o("img",{staticClass:"uk-display-inline-block",style:{height:.15*e.previewPadding+"px",width:"auto",minHeight:"6px",maxHeight:.8*e.previewPadding+"px"},attrs:{src:e.watermarkImage,"uk-svg":"",draggable:"false"}})]):e._e()])]),e._v(" "),o("div",{staticClass:"uk-flex-column uk-flex uk-flex-between",style:{width:"300px"}},[o("div",{staticClass:"uk-flex uk-flex-column",style:{padding:"48px 20px 0 24px"}},[o("div",{staticClass:"uk-format-panel-section-heading",style:{fontSize:"20px",paddingBottom:"25px"}},[e._v("\n          "+e._s(e.$T("Options"))+"\n        ")]),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",style:{marginBottom:"8px"}},[o("label",{staticClass:"uk-flex uk-flex-middle"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.checkedFrame},on:{change:function(t){e.checkedFrame=!e.checkedFrame}}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Frame")))])])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section uk-flex-middle uk-padding-remove uk-width-1-1"},[o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],style:{width:"210px"}},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-width-1-1 uk-button uk-button-popover-toggle uk-select-icon uk-text-left",attrs:{disabled:!e.checkedFrame,title:e.$T("Choose a frame style")}},[e._v("\n              "+e._s(e.selectedFrameData.name)+"\n            ")]),e._v(" "),o("div",{ref:"popover",staticClass:"uk-height-medium uk-height-medium uk-popover-contextual",style:{width:"210px",height:"91px"},attrs:{"uk-contextual-popover":"","align-checked":"false","data-sel-close":"[uk-menu] > li > button"}},[o("ul",{staticClass:"uk-overflow-hidden uk-height-1-1",style:{height:"91px"},attrs:{"uk-menu":""}},e._l(e.frameListConfig,(function(t,n){return o("li",{key:n,attrs:{index:n,value:n},on:{click:function(o){e.selectedFrame=t.id}}},[o("button",{staticClass:"uk-button uk-button-icon uk-button-tile",class:{"uk-checked":t.id===e.selectedFrame},attrs:{autofocus:t.id===e.selectedFrame}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])])})),0)])]),e._v(" "),o("color-picker",{staticClass:"uk-format-panel-inline-ml uk-flex-no-shrink",model:{value:e.pickedColor,callback:function(t){e.pickedColor=t},expression:"pickedColor"}})],1),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",style:{marginTop:"13px"}},[o("label",{staticClass:"uk-flex uk-flex-middle"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.checkedShadow},on:{change:function(t){e.checkedShadow=!e.checkedShadow}}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Shadow")))])])]),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",style:{marginTop:"15px"}},[o("label",{staticClass:"uk-flex uk-flex-middle"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.checkedWatermark},on:{change:function(t){e.checkedWatermark=!e.checkedWatermark}}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T('Show "Presented with XMind"')))])])])]),e._v(" "),o("div",{staticClass:"uk-flex uk-button-group uk-flex-right",style:{marginRight:"21px",marginBottom:"22px"}},[o("button",{staticClass:"uk-button uk-button-default",on:{click:e.onCancel}},[e._v("\n          "+e._s(e.$T("Cancel"))+"\n        ")]),e._v(" "),o("button",{staticClass:"uk-button uk-button-primary",on:{click:e.onSave}},[e._v("\n          "+e._s(e.$T("Copy & Save"))+"\n        ")])])])])])},i=[]},96552:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.slides.length?o("div",[o("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",staticStyle:{"margin-bottom":"12px"}},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("List Slide")))]),e._v(" "),o("div",[o("DisplayOptions",{attrs:{"current-option":e.slideDisplayStatus,title:e.$T("Choose whether to display subtopics as a slide in Pitch Mode.")},on:{optionChanged:e.onToggle}})],1)]),e._v(" "),o("div",{staticClass:"pitch-mode-preview-container"},[1===e.selectionIds.length?o("slide-preview",{staticClass:"pitch-mode-preview-slide",attrs:{"slide-size":e.slideSize,slide:e.slides[0],muted:!e.isSlideEnabled,"container-size":{width:232,height:130.5}}}):o("div",{staticClass:"uk-flex uk-text-muted uk-flex-center uk-flex-middle",style:{width:"232px",height:"130.5px"}},[o("span",[e._v(e._s(e.$T("Multiple topics selected")))])])],1)]):e._e()},i=[]},88813:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"uk-flex uk-flex-between uk-format-panel-sub-section",style:{paddingBottom:"8px"}},[o("div",{staticStyle:{lineHeight:"24px"}},[e._v("\n      "+e._s(e.$T("Size"))+"\n    ")]),e._v(" "),o("div",{staticClass:"uk-flex"},[o("div",{style:{maxWidth:"60px",textAlign:"center"}},[o("measure-input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],attrs:{value:e.inputImageWidth,min:"0",max:"2000",suffix:"",measurement:"PT"},on:{blur:e.handleInputWidth,entered:e.handleInputWidth}}),e._v(" "),o("span",{style:{opacity:"0.8",fontSize:"11px"}},[e._v(e._s(e.$T("Width (for resolution)")))])],1),e._v(" "),o("div",{style:{margin:"0 5px"},on:{click:e.handleRatioChanged}},[o("button",{staticClass:"uk-button uk-button-tile uk-button-icon",staticStyle:{height:"20px","min-height":"20px",padding:"0 2px"},attrs:{title:e.$T("Keep aspect ratio.")}},[o("img",{directives:[{name:"show",rawName:"v-show",value:e.isRatioLocked,expression:"isRatioLocked"}],attrs:{draggable:"false","uk-svg":"",src:e.lockIcon.lock}}),e._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:!e.isRatioLocked,expression:"!isRatioLocked"}],attrs:{draggable:"false","uk-svg":"",src:e.lockIcon.unlock}})])]),e._v(" "),o("div",{style:{maxWidth:"60px",textAlign:"center"}},[o("measure-input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts",value:["focus.input"],expression:"['focus.input']"}],attrs:{value:e.inputImageHeight,min:"0",max:"3000",suffix:"",measurement:"PT"},on:{blur:e.handleInputHeight,entered:e.handleInputHeight}}),e._v(" "),o("span",{style:{opacity:"0.8",fontSize:"11px"}},[e._v(e._s(e.$T("Height")))])],1)])]),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-right"},[o("div",{staticClass:"uk-format-panel-sub-section",style:{width:"150px"}},[o("button",{staticClass:"uk-button uk-button-default uk-width-1-1",attrs:{disabled:!e.resetSizeEnable,title:e.$T("Reset size.")},on:{click:e.resetImageSize}},[e._v("\n        "+e._s(e.$T("Reset Size"))+"\n      ")])])])])},i=[]},44396:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-flex uk-flex-center uk-flex-column",staticStyle:{"border-width":"0","min-height":"35px","min-width":"128px"},style:{"background-color":e.isTopicSelected?null:e.sheetBackgroundColor,marginLeft:e.isTopicSelected?"8px":null,"border-radius":"5px",overflow:"hidden"}},[e.isBoundarySelected&&!e.isSelectionMultiple?o("quick-styles-boundary-preview",{attrs:{direction:"right","boundary-shape":e.boundaryShape,"boundary-line-color":e.boundaryLineColor,"boundary-line-pattern":e.boundaryLinePattern,"boundary-fill-color":e.boundaryFillColor,"boundary-line-width":e.boundaryLineWidth}}):e._e(),e._v(" "),e.isTopicSelected&&!e.isSelectionMultiple?o("quick-styles-topic-preview",{staticStyle:{"max-height":"36px"},attrs:{"topic-text":e.topicText,"topic-border-width":e.topicBorderLineWidth,"topic-border-color":e.topicBorderLineColor,"topic-fill-color":e.topicFillColor,"topic-color":e.topicColor,"topic-shape-class":e.topicShapeClass,"topic-font-weights":""+e.topicFontWeights,"topic-font-family":e.topicFontFamily,"topic-font-size":e.topicFontSize,"topic-text-decoration":e.topicTextDecoration}}):e._e(),e._v(" "),e.isSummarySelected&&!e.isSelectionMultiple?o("quick-styles-summary-preview",{attrs:{"topic-text":"Summary","topic-border-width":e.topicBorderLineWidth,"topic-border-color":e.topicBorderLineColor,"topic-fill-color":e.topicFillColor,"topic-color":e.topicColor,"topic-shape-class":e.topicShapeClass,"topic-font-weights":""+e.topicFontWeights,"topic-font-family":e.topicFontFamily,"topic-font-size":e.topicFontSize,"topic-text-decoration":e.topicTextDecoration,"summary-shape-class":e.summaryShapeClass,"summary-line-width":e.summaryLineWidth,"summary-line-color":e.summaryLineColor}}):e._e(),e._v(" "),e.isRelationshipSelected&&!e.isSelectionMultiple?o("quick-styles-relationship-preview",{attrs:{"relationship-shape-class":e.relationshipShapeClass,"relationship-begin-arrow-shape-class":e.relationshipArrowBeginClass,"relationship-end-arrow-shape-class":e.relationshipArrowEndClass,"relationship-line-pattern":e.relationshipLinePattern,"relationship-line-width":e.relationshipLineWidth,"relationship-line-color":e.relationshipLineColor}}):e._e()],1)},i=[]},55605:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-section"},[o("div",{staticClass:"uk-format-panel-sub-section"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Text")))])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section uk-flex-middle"},[o("font-family",{staticClass:"uk-width-expand",attrs:{fonts:e.availableFontFamily,font:e.selectionFontFamily&&e.selectionFontFamily[0],"is-multiple":e.isFontFamilyMultiple,"recent-fonts":e.recentFontFamily,"default-font":e.selectionDefaultFont,"align-checked":!1},on:{select:e.handleFontFamilyChanged}}),e._v(" "),o("color-picker",{staticClass:"uk-format-panel-inline-ml",attrs:{"font-family":e.selectionFontFamily&&e.selectionFontFamily[0],value:e.uniqueTextColors&&e.uniqueTextColors[0],"is-multiple":e.isTextColorMultiple},on:{input:e.handleTextColorInput}})],1),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section uk-flex-middle"},[o("font-style",{staticClass:"uk-flex-no-shrink",staticStyle:{width:"152px"},attrs:{styles:e.availableStyles,value:e.selectionFontStyle,"is-multiple":e.isFontStylesMultiple},on:{input:e.handleFontStyleInput}}),e._v(" "),o("div",{staticClass:"uk-width-1-1 uk-format-panel-inline-ml"},[o("font-size",{staticClass:"uk-width-1-1",attrs:{size:e.uniqueFontSizes[0]&&e.uniqueFontSizes[0].toString(),"is-multiple":e.isFontSizesMultiple},on:{focus:e.handleFontsizeFocus,blur:e.handleFontSizeBlur,input:e.handleFontSizeInput}})],1)],1),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section",staticStyle:{width:"163px"}},[o("ul",{staticClass:"uk-button-segment-group uk-button-segment-divider uk-width-1-1 uk-child-width-expand"},[o("li",{class:{"uk-active":e.isFontBold}},[o("label",[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"checkbox"},domProps:{checked:e.isFontBold},on:{input:e.handleCheckFontBold}}),e._v(" "),o("span",{staticClass:"uk-button uk-button-icon uk-button-segment uk-icon uk-button-compact",attrs:{"uk-icon":"bold",title:e.wrappedTooltipWithKeybinding(e.$T("Make text bold."),"editor.boldText")}})])]),e._v(" "),o("li",{class:{"uk-active":e.isFontItalic}},[o("label",[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"checkbox"},domProps:{checked:e.isFontItalic},on:{input:e.handleCheckFontItalic}}),e._v(" "),o("span",{staticClass:"uk-button uk-button-icon uk-button-segment uk-icon uk-button-compact",attrs:{"uk-icon":"italic",title:e.wrappedTooltipWithKeybinding(e.$T("Make text italic."),"editor.italicText")}})])]),e._v(" "),o("li",{class:{"uk-active":e.isFontLineThrough}},[o("label",[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"checkbox"},domProps:{checked:e.isFontLineThrough},on:{input:e.handleCheckFontLineThrough}}),e._v(" "),o("span",{staticClass:"uk-button uk-button-icon uk-button-segment uk-icon uk-button-compact",attrs:{"uk-icon":"strikethrough",title:e.wrappedTooltipWithKeybinding(e.$T("Make text strikethrough."),"editor.strikethroughText")}})])]),e._v(" "),o("li",{staticClass:"uk-flex-no-shrink",staticStyle:{"min-width":"48px"}},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-icon uk-button-segment uk-button-select uk-icon uk-button-compact",attrs:{title:e.$T("Set the text capitalization."),"uk-icon":e.textTransformIcon}}),e._v(" "),o("div",{ref:"popover",attrs:{"uk-popover":"","data-sel-close":"[uk-menu] > li"}},[o("ul",{staticClass:"uk-overflow-auto uk-height-1-1",attrs:{"uk-menu":""}},[e._l(e.TEXTTRANSFORMS,(function(t,n){var i=t.value,r=t.title;return[o("li",{key:n,on:{click:function(t){return e.handleSelectTextTransform(i)}}},[o("button",{class:{"uk-checked":i===e.textTransform},attrs:{autofocus:e.textTransformFocusIndex===n}},[e._v("\n                  "+e._s(e.$T("$$",r))+"\n                ")])]),e._v(" "),0===n?o("li",{key:"divider"+n,staticStyle:{"padding-bottom":"3px","padding-top":"3px"}},[o("hr",{staticClass:"uk-margin-remove"})]):e._e()]}))],2)])])])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("div",{staticStyle:{width:"115px"}},[o("ul",{staticClass:"uk-button-segment-group uk-button-segment-divider uk-child-width-expand uk-width-1-1"},[o("li",{class:{"uk-active":"left"===e.textAlignment}},[o("label",[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"radio",name:"text-align",disabled:e.isAlignmentDisable},domProps:{checked:!e.isAlignmentDisable&&"left"===e.textAlignment}}),e._v(" "),o("span",{staticClass:"uk-button uk-button-icon uk-button-segment uk-icon uk-button-compact",attrs:{"uk-icon":"alignment-left",title:e.wrappedTooltipWithKeybinding(e.$T("Align text to the left."),"editor.alignTextLeft")},on:{click:function(t){return e.handleCheckTextAlignment("left")}}})])]),e._v(" "),o("li",{class:{"uk-active":"center"===e.textAlignment}},[o("label",[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"radio",name:"text-align",disabled:e.isAlignmentDisable},domProps:{checked:!e.isAlignmentDisable&&"center"===e.textAlignment}}),e._v(" "),o("span",{staticClass:"uk-button uk-button-icon uk-button-segment uk-icon uk-button-compact",attrs:{"uk-icon":"alignment-center",title:e.wrappedTooltipWithKeybinding(e.$T("Center text."),"editor.alignTextCenter")},on:{click:function(t){return e.handleCheckTextAlignment("center")}}})])]),e._v(" "),o("li",{class:{"uk-active":"right"===e.textAlignment}},[o("label",[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],attrs:{type:"radio",name:"text-align",disabled:e.isAlignmentDisable},domProps:{checked:!e.isAlignmentDisable&&"right"===e.textAlignment}}),e._v(" "),o("span",{staticClass:"uk-button uk-button-icon uk-button-segment uk-icon uk-button-compact",attrs:{"uk-icon":"alignment-right",title:e.wrappedTooltipWithKeybinding(e.$T("Align text to the right."),"editor.alignTextRight")},on:{click:function(t){return e.handleCheckTextAlignment("right")}}})])])])])])])},i=[]},90992:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"outliner-whitespace",attrs:{"update-key":e.updateKey},on:{dragleave:e.handleDragLeave,drop:e.handleDrop,mousedown:e.handleMouseDown,mouseup:e.handleMouseUp,mousewheel:e.handlePinch}},[o("div",{ref:"el",class:{"vana-outliner":!0,dark:"dark"===e.appearance},style:{transform:"scale("+e.scale+")"},attrs:{tabindex:"-1"},on:{dragover:function(e){e.preventDefault()}}},[o("root-topic",{key:e.rootTopicId,ref:"root-topic",attrs:{"topic-id":e.rootTopicId},on:{titlechange:e.handleRootTopicTitleChange},nativeOn:{mousedown:function(t){return t.stopPropagation(),e.handleClick(t)}}}),e._v(" "),e.getAttachedSheet().length>0||e.getDetachedSheet().length>0?o("div",{staticClass:"topics",staticStyle:{clear:"both","flex-grow":"1"},on:{mousedown:e.handleClick}},[o("div",{staticClass:"attached-topics"},e._l(e.getAttachedSheet(),(function(t,n){return o("topic",{key:t.id,attrs:{index:n,topic:t},on:{created:function(t){return e.topics.push(t)},beforeDestroy:function(o){var n=e.topics.findIndex((function(e){return e.topic.id===t.id}));e.topics.splice(n,1)},dragover:e.handleDragOver,dragstart:e.handleDragStart,dragend:e.handleDragEnd,dragenter:e.handleDragEnter,drop:e.handleDrop,mousedown:e.handleMouseDown,mouseover:e.handleMouseOver,mouseup:e.handleMouseUp,titlechange:e.handleTitleChange}})})),1),e._v(" "),o("div",{staticClass:"detached-topics"},[e.getDetachedSheet().length>0?o("hr",{staticClass:"uk-separator uk-margin-medium floating-topics-separator",staticStyle:{opacity:"0.3","margin-top":"10px"}}):e._e(),e._v(" "),e._l(e.getDetachedSheet(),(function(t,n){return o("topic",{key:t.id,attrs:{index:n+e.getAttachedSheet().length,topic:t,"is-floating":!0},on:{created:function(t){return e.topics.push(t)},beforeDestroy:function(o){var n=e.topics.findIndex((function(e){return e.topic.id===t.id}));e.topics.splice(n,1)},dragover:e.handleDragOver,dragstart:e.handleDragStart,dragend:e.handleDragEnd,dragenter:e.handleDragEnter,drop:e.handleDrop,mousedown:e.handleMouseDown,mouseover:e.handleMouseOver,mouseup:e.handleMouseUp,titlechange:e.handleTitleChange}})}))],2)]):o("div",{staticClass:"uk-height-large uk-text-meta",staticStyle:{"max-width":"650px",width:"100%",margin:"0 auto"},on:{click:e.addOnlyEmptyTopic}},[e._v("\n      "+e._s(e.$T("Type your mind here..."))+"\n    ")]),e._v(" "),o("placeholder-line",{ref:"placeholder-line",attrs:{scale:e.scale,top:e.placeholder.top,left:e.placeholder.left}})],1),e._v(" "),o("topic-markers-editor"),e._v(" "),o("topic-labels-editor"),e._v(" "),o("topic-hyperlink-editor"),e._v(" "),o("topic-equation-editor")],1)},i=[]},86838:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[e.options.isRoot||e.options.isMultiTypes?e._e():[o("quick-styles"),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"})],e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("relationship-shape")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("relationship-line-width")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("relationship-line-styles")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("font-styles"),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("reset-button",{attrs:{"style-keys":e.FONTKEYS.concat(e.RELATIONSHIPSTYLEKEYS)}})],1)],2)},i=[]},69906:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Set the border width and color.")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox uk-flex-no-shrink",attrs:{id:"topicBorderOptionCheckbox",type:"checkbox",disabled:!e.isBorderLineEnabled,title:e.$T("Set the border width and color.")},domProps:{indeterminate:e.isBorderIndeterminate,checked:e.isBorderChecked},on:{input:e.handleCheckBorder}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v("\n      "+e._s(e.$T("Border"))+"\n    ")])]),e._v(" "),o("div",{staticClass:"uk-format-panel-checkbox-ml"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isBorderLineEnabled&&e.isBorderChecked&&!e.isBorderIndeterminate,expression:"\n        isBorderLineEnabled && isBorderChecked && !isBorderIndeterminate\n      "}],staticClass:"uk-flex uk-flex-middle uk-format-panel-inline-mt uk-width-1-1"},[o("line-width",{staticClass:"uk-width-1-1",attrs:{title:e.$T("Set the border width."),items:e.BORDERWIDTHS,"is-multiple":e.isBorderMultiple,value:e.computedBorderLineWidth},on:{input:e.handleBorderSelect}}),e._v(" "),o("color-picker",{directives:[{name:"show",rawName:"v-show",value:!e.isMatrix,expression:"!isMatrix"}],staticClass:"uk-format-panel-inline-ml uk-flex-no-shrink",attrs:{value:e.computedBorderLineColor,"is-multiple":e.isBorderLineColorMultiple},on:{input:e.handleBorderLineInput}})],1)])])},i=[]},59081:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.labels&&e.labels.length>0?o("div",{ref:"el",class:{"topic-labels":!0},attrs:{contenteditable:"false"}},e._l(e.labels,(function(t,n){return o("span",{key:n,staticClass:"topic-label popover-target uk-text-truncate",attrs:{contenteditable:"false"},on:{mousedown:function(e){return e.preventDefault(),e.stopPropagation(),!1},contextmenu:function(o){return o.preventDefault(),o.stopPropagation(),n=o,e.openMenu(n,t);var n},click:function(t){return t.preventDefault(),t.stopPropagation(),e.openEditor(t)}}},[e._v(e._s(t.replace(/\s/g,"")))])})),0):e._e()},i=[]},48262:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.hyperlink&&e.hyperlink.length>0?o("div",{ref:"el",staticClass:"topic-hyperlink-wrap"},[o("div",{class:{"topic-hyperlink":!0,"is-filelink":e.isFileLink,"is-hyperlink":e.isHyperlink,"is-topiclink":e.isTopicLink,"is-attachment":e.isAttachment},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleClick(t)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.openMenus(t)}}},[o("span",[e._v(e._s(e.title))])])]):e._e()},i=[]},34172:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-formation-sub-section uk-flex-between uk-flex-middle"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Topic")))]),e._v(" "),o("div",[o("popover",{attrs:{title:e.$T("Choose the topic shape."),value:e.currentTopicShape,items:e.topicShapes,"is-multiple":e.isCurrentTopicShapesMultiple},on:{input:e.handleTopicShapeSelect}})],1)])},i=[]},61786:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("h4",{staticClass:"uk-format-panel-section-heading"},[e._v("\n    "+e._s(e.$T("Line"))+"\n  ")]),e._v(" "),o("div",{staticClass:"uk-margin-small-top uk-flex uk-flex-middle"},[o("line-width",{attrs:{title:e.$T("Set the line width."),value:e.uniqueSelectionLineWidths[0],items:e.lineWidths,"is-multiple":e.isSelectionLineWidthMultiple},on:{input:e.handleSelectLineWidth}}),e._v(" "),o("color-picker",{staticClass:"uk-format-panel-inline-ml uk-flex-no-shrink",attrs:{value:e.uniqueSelectionLineColors[0],"is-multiple":e.isSelectionLineColorMultiple},on:{input:e.handleInputLineColor}})],1)])},i=[]},55433:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.isOutlineMode?e._e():o("div",{staticClass:"uk-padding uk-padding-remove-vertical uk-margin-medium-top"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-floating uk-width-1-1",on:{click:e.toggleLegend}},[o("span",{directives:[{name:"show",rawName:"v-show",value:e.isLegendEnabled,expression:"isLegendEnabled"}]},[e._v(e._s(e.$T("Hide Legend")))]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!e.isLegendEnabled,expression:"!isLegendEnabled"}],attrs:{title:e.$T("Display the used markers and what they are about. ")}},[e._v(e._s(e.$T("Show Legend")))])])]),e._v(" "),o("ul",{staticClass:"uk-list"},e._l(e.markerGroups,(function(t){return o("li",{key:t.id,staticClass:"uk-margin-remove"},[o("h5",{staticClass:"uk-padding uk-text-middle uk-text-bold uk-padding-remove-vertical",staticStyle:{"line-height":"1","margin-bottom":"6px","margin-top":"12px"}},[e._v("\n        "+e._s(t.title)+"\n      ")]),e._v(" "),o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-flex-wrap uk-padding uk-padding-remove-right uk-padding-remove-vertical"},e._l(t.markers,(function(t){return o("div",{key:t.id,staticClass:"uk-margin-small-right",on:{mousedown:function(e){e.preventDefault()},click:function(o){return e.addMarker(t)}}},[o("img",{staticStyle:{height:"24px",width:"24px","margin-bottom":"8px"},attrs:{draggable:"false","uk-img":"",src:t.markerUrl}})])})),0)])})),0)])},i=[]},95152:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.show?o("div",{ref:"el",class:{"topic-equation":!0,focused:e.isSelected,dragging:e.isDragging},style:e.imgStyle,attrs:{updaetKey:e.updateKey,draggable:"true"},on:{mousedown:function(e){return e.stopPropagation(),!1},dragstart:function(t){return t.stopPropagation(),e.dragStart(t)},click:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleFocused(t)},dblclick:function(t){return t.stopPropagation(),e.handleOpenEquationEditor(t)},blur:function(t){return t.preventDefault(),t.stopPropagation(),e.toggleFocused(!1)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.openMenu(t)}}},[e.isSelected?o("div",{staticClass:"topic-equation-handle",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.resizeStart(t)}}}):e._e()]):e._e()},i=[]},63915:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"uk-format-panel-sub-section"},[o("h4",{staticClass:"uk-format-panel-section-heading"},[e._v("\n      "+e._s(e.$T("Advanced Layout"))+"\n    ")])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Set the mind map to the left and right balanced structure.")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox",disabled:!e.isAutoBalanceMapEnabled},domProps:{checked:e.isAutoBalanceMap},on:{change:e.handleCheckAutoBalanceMap}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Auto Balance Map")))])])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Reduce the size and spacing of elements.")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.isCompactMode},on:{change:e.handleCheckCompactMode}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Compact Map")))])])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Main Topic can be placed anywhere on map. \n(Only available in Unbalanced and Balanced Map)")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox",disabled:!e.isEnableFreePosition},domProps:{checked:e.isFreePositionEnabled},on:{change:e.handleCheckFreePosition}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Branch Free-positioning")))])])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.isMac?e.$T("Floating Topic is not connected with any topics when dragging it. \n(Hold down  to forbid/enable temporarily)"):e.$T("Floating Topic is not connected with any topics when dragging it. \n(Hold down Shift to forbid/enable temporarily)")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.isFloatingTopicFlexible},on:{change:e.handleCheckFlexibleFloating}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Flexible Floating Topic")))])])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section"},[o("label",{staticClass:"uk-flex uk-flex-middle"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.isTopicOverlapEnabled},on:{change:e.handleCheckTopicOverlap}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml",attrs:{title:e.$T("Place the topic on other topics freely.")}},[e._v(e._s(e.$T("Topic Overlap")))])])]),e._v(" "),o("div",{staticClass:"uk-format-panel-sub-section"},[o("label",{staticClass:"uk-flex uk-flex-middle",attrs:{title:e.$T("Unify the width of topics of the same level.")}},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.isAlignmentByLevel},on:{change:e.handleCheckAlignmentByLevel}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Justify Topic Alignment")))])])])])},i=[]},84058:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-between uk-flex-middle"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Callout")))]),e._v(" "),o("div",[o("popover",{attrs:{title:e.$T("Choose the topic shape."),value:e.currentShapeClass,items:e.calloutShapes,"is-multiple":e.isMultiple},on:{input:e.handleCalloutShapeSelect}})],1)])},i=[]},50087:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-formation-sub-section uk-flex-between uk-flex-middle"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Shape")))]),e._v(" "),o("div",[o("popover",{attrs:{title:e.$T("Choose the topic shape."),value:e.currentTopicShape,data:e.topicShapes,"is-multiple":e.isCurrentTopicShapesMultiple,disabled:e.isTopicShapeSelectorDisabled},on:{input:e.handleTopicShapeSelect}})],1)])},i=[]},77899:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-between uk-flex-middle"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Shape")))]),e._v(" "),o("popover",{attrs:{title:e.$T("Choose the line shape."),value:e.currentShapeClass,items:e.relationshipShapes,"is-multiple":e.isMultiple},on:{input:e.handleRelationshipShapeSelect}})],1)},i=[]},93149:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[o("div",{staticClass:"uk-format-panel-section"},[o("callout-shape")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("topic-fill")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("font-styles"),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("reset-button",{attrs:{"style-keys":e.FONTKEYS.concat(e.CALLOUTSTYLEKEYS)}})],1)],1)},i=[]},53591:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-flex uk-flex-column uk-height-1-1 uk-panel uk-position-left uk-format-panel",staticStyle:{"padding-right":"1px"},style:{width:e.panelWidth+"px",zIndex:0}},[o("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle",style:{height:"32px"}},[o("div",[e.updateTrigger.isOutlinerMode?e._e():o("ul",{staticClass:"uk-tab uk-tab-capsule uk-margin-remove-bottom uk-margin-small-left"},e._l(e.tabData,(function(t,n){return o("li",{key:t.key,staticClass:"divider-vertical",class:{"uk-active":t.key===e.panelTab,"divider-vertical-active":t.key===e.panelTab,"divider-vertical-clear":0===n},on:{click:function(o){e.panelTab=t.key}}},[o("a",{directives:[{name:"show",rawName:"v-show",value:t.key!==e.panelTab,expression:"item.key !== panelTab"}],style:{width:"28px",color:"unset"},attrs:{title:t.tooltip}},[o("img",{staticStyle:{"margin-top":"-3px"},attrs:{src:t.image,"uk-svg":"",draggable:"false"}})]),e._v(" "),o("a",{directives:[{name:"show",rawName:"v-show",value:t.key===e.panelTab,expression:"item.key === panelTab"}],style:{width:"28px",color:"#fff",backgroundColor:"#0F66DE"},attrs:{title:t.tooltip}},[o("img",{staticStyle:{"margin-top":"-3px"},attrs:{src:t.image,"uk-svg":"",draggable:"false"}})])])})),0)]),e._v(" "),o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-icon uk-margin-small-right",style:{width:"20px",height:"20px",minHeight:"20px"},attrs:{"uk-icon":"close"},on:{click:e.onClose}})]),e._v(" "),o("hr",{style:{margin:0}}),e._v(" "),o("keep-alive",[o(e.currentComponentName,{tag:"component",attrs:{"panel-width":e.panelWidth,sheets:e.sheets,"current-sheet":e.currentSheet,"markers-map":e.markersMap,"update-trigger":e.updateTrigger,"get-sheet-title":e.getSheetTitle,"is-left-bar-visible":e.isLeftBarVisible}})],1)],1)},i=[]},39476:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("div",{staticClass:"uk-flex uk-flex-middle"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox uk-flex-no-shrink",attrs:{id:"showBranchLineOptionCheckbox",type:"checkbox",disabled:e.isBranchLineStyleDisabled,title:e.$T("Set the branch line width and color.")},domProps:{indeterminate:e.isBranchLineIndeterminate,checked:e.isBranchLineWidthChecked},on:{input:e.handleCheckBranchLineWidth}}),e._v(" "),o("label",{staticClass:"uk-format-panel-inline-ml uk-format-panel-sub-section-heading",attrs:{for:"showBranchLineOptionCheckbox",title:e.$T("Set the branch line width and color.")}},[e._v("\n      "+e._s(e.$T("Line"))+"\n    ")])]),e._v(" "),o("div",{staticClass:"uk-format-panel-checkbox-ml"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isBranchLineWidthChecked&&!e.isBranchLineStyleDisabled,expression:"isBranchLineWidthChecked && !isBranchLineStyleDisabled"}],staticClass:"uk-flex uk-flex-middle uk-format-panel-inline-mt uk-width-1-1"},[o("line-width",{attrs:{title:e.$T("Set the line width."),items:e.BORDERWIDTHS,value:e.branchLineWidth},on:{input:e.handleInputBranchLineWidth}}),e._v(" "),o("color-picker",{directives:[{name:"show",rawName:"v-show",value:!e.isRootTopic||e.isRootTopic&&!e.isMultiBranchColorEnabled,expression:"!isRootTopic || (isRootTopic && !isMultiBranchColorEnabled)"}],staticClass:"uk-format-panel-inline-ml uk-flex-no-shrink",attrs:{"is-multiple":e.isBorderLineColorMultiple,value:e.uniqueBorderLineColors&&e.uniqueBorderLineColors[0]},on:{input:e.handleInputBorderLineColor}})],1)])])},i=[]},48780:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-flex uk-flex-middle"},[o("svg",{staticClass:"uk-flex-no-shrink",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,viewBox:"0 0 "+e.width+" "+e.height}},[o("path",{attrs:{d:e.summaryPreview&&e.summaryPreview.d,fill:e.summaryPreview&&e.summaryPreview.fill,"stroke-width":e.summaryPreview&&e.summaryPreview.strokeWidth,stroke:e.summaryPreview&&e.summaryPreview.strokeColor}})]),e._v(" "),o("quick-styles-topic-preview",{staticStyle:{"min-width":"84px","max-width":"84px","margin-left":"-94px","min-height":"30px","max-height":"30px"},attrs:{"topic-text":"","topic-border-width":e.topicBorderLineWidth,"topic-border-color":e.topicBorderLineColor,"topic-fill-color":e.topicFillColor,"topic-color":e.topicColor,"topic-shape-class":e.topicShapeClass,"topic-font-weights":""+e.topicFontWeights,"topic-font-family":e.topicFontFamily,"topic-font-size":e.topicFontSize,"topic-text-decoration":e.topicTextDecoration}})],1)},i=[]},30707:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("topic-popover-container",{attrs:{width:e.popoverWidth,height:e.popoverHeight}},[o("div",{staticClass:"uk-padding uk-flex uk-flex-column uk-flex-middle uk-height-1-1"},[o("div",{staticClass:"uk-flex uk-flex-between uk-width-1-1 uk-flex-middle",staticStyle:{"margin-bottom":"12px"}},[o("span",{staticClass:"uk-text-bold uk-margin-remove-bottom",staticStyle:{opacity:".2","font-size":"14px","line-height":"14px"}},[e._v("\n        "+e._s(e.$T("Equation"))+"\n      ")]),e._v(" "),o("span",{staticClass:"equation-help uk-flex-no-shrink uk-flex-no-grow",staticStyle:{outline:"none"},attrs:{tabindex:"-1","uk-icon":"icon: question; ratio: 1.1"},on:{click:e.handleGoEquationHelp}})]),e._v(" "),o("div",{staticClass:"uk-height-expand uk-width-1-1"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.equation,expression:"equation"}],staticClass:"uk-box-shadow-none uk-textarea uk-width-1-1 uk-height-1-1  uk-padding-remove",attrs:{autofocus:"",spellcheck:"false",placeholder:e.$T("Type or paste LaTeX")},domProps:{value:e.equation},on:{blur:e.handleBlur,input:function(t){t.target.composing||(e.equation=t.target.value)}}}),e._v(" "),o("div",{ref:"previewContainer",staticClass:"preview-container uk-flex uk-flex-center uk-flex-middle",style:{"background-color":"dark"===e.appearance?"rgba(255,255,255, .1)":"rgba(0,0,0, .02)",fill:"dark"===e.appearance?"white":"black"}})])])])},i=[]},69683:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[e.options.isRoot||e.options.isMultiTypes?e._e():[o("quick-styles"),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"})],e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("summary-line-shape")],1),e._v(" "),e._m(0),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("summary-line-style")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("summary-topic-shape",{staticClass:"uk-format-panel-sub-section"})],1),e._v(" "),e._m(1),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("topic-fill"),e._v(" "),o("topic-border"),e._v(" "),o("topic-width")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("font-styles"),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("branch-line-shape")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("branch-line-styles")],1),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("reset-button",{attrs:{"style-keys":e.FONTKEYS.concat(e.TOPICKEYS),"summary-style-keys":e.SUMMARYKEYS}})],1)],2)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-format-panel-section uk-padding-remove-vertical"},[t("hr",{staticClass:"uk-format-panel-divider"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-format-panel-section uk-padding-remove-vertical"},[t("hr",{staticClass:"uk-format-panel-divider"})])}]},50432:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("popover",{ref:"popover",attrs:{width:e.computedWidth,height:e.computedHeight,"host-left":e.topicLeft,"host-right":e.topicRight,"host-top":e.topicTop,"host-bottom":e.topicBottom},on:{"popover:close":e.onPopoverClose}},[o("div",{staticClass:"uk-flex uk-flex-wrap uk-padding-small uk-child-separator",class:e.containerStyle},[o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-flex-wrap",class:e.markersPadding},e._l(e.markerResources,(function(t){var n=t.id,i=t.path;return o("button",{key:n,staticClass:"uk-padding-xsmall uk-button uk-button-tile uk-button-icon uk-button-small",on:{mousedown:function(e){e.preventDefault()},click:function(t){return e.changeMarker(n)}}},[o("img",{staticClass:"uk-background-center-center uk-background-norepeat",staticStyle:{height:"16px",width:"16px"},attrs:{draggable:"false","uk-img":"",src:i}})])})),0),e._v(" "),o("div",{class:e.deleteButtonPadding},[o("button",{staticClass:"uk-background-center-center uk-background-norepeat uk-button uk-button-tile uk-button-icon uk-icon uk-button-small uk-padding-xsmall",attrs:{"uk-icon":"icon: trash"},on:{click:e.deleteMarker}})])])])},i=[]},5124:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.formatPanel"],expression:"['focus.formatPanel']",arg:"group"}],staticClass:"uk-panel uk-position-left uk-flex uk-flex-column",class:{"background-animated":e.currentComponent.options.animate},style:{width:e.panelWidth+"px"}},[""===e.navigationInfo.componentName?o("div",{staticClass:"uk-flex uk-flex-middle",style:{height:"28px",padding:"2px 4px"}},[o("ul",{staticClass:"uk-tab uk-tab-capsule uk-margin-remove-bottom uk-width-1-1",staticStyle:{display:"grid","grid-template-columns":"repeat(4, 1fr)"}},e._l(e.tabData,(function(t,n){return o("li",{key:t.key,staticClass:"divider-vertical",class:{"uk-active":t.key===e.rightPanelTab,"divider-vertical-active":t.key===e.rightPanelTab,"divider-vertical-clear":0===n},on:{click:function(o){return e.switchTab(t.category,t.key)}}},[o("a",{directives:[{name:"show",rawName:"v-show",value:t.key!==e.rightPanelTab,expression:"item.key !== rightPanelTab"},{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],style:{color:"unset"},attrs:{draggable:"false",href:"#",title:t.tooltip}},[o("img",{staticStyle:{"margin-top":"-3px"},attrs:{draggable:"false",src:t.image,"uk-svg":""}})]),e._v(" "),o("a",{directives:[{name:"show",rawName:"v-show",value:t.key===e.rightPanelTab,expression:"item.key === rightPanelTab"},{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],style:{color:"#fff",backgroundColor:"#0F66DE"},attrs:{draggable:"false",href:"#",title:t.tooltip}},[o("img",{staticStyle:{"margin-top":"-3px"},attrs:{draggable:"false",src:t.image,"uk-svg":""}})])])})),0)]):""!==e.navigationInfo.componentName?o("div",{staticClass:"uk-format-panel-section uk-padding-remove-vertical uk-flex-no-shrink"},[o("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between",style:{padding:"5px 14px"}},[o("span",{staticClass:"uk-text-bold"},[e._v("\n        "+e._s(e.navigationInfo.componentTitle)+"\n      ")]),e._v(" "),o("div",[e.navigationInfo.options.colorThemeShuffle?o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-icon",style:{marginRight:"5px",padding:"0 3px",width:"24px",height:"24px"},attrs:{title:e.wrappedTooltipWithKeybinding(e.$T("Randomly apply a color theme."),"randomColorTheme")},on:{click:e.randomColorTheme}},[o("img",{staticClass:"uk-display-inline-block",attrs:{draggable:"false",src:e.shuffleBtnIcon,"uk-svg":"",width:"16",height:"16"}})]):e._e(),e._v(" "),e.navigationInfo.options.closeBtn?o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-tile uk-button-icon uk-icon",style:{padding:"0 3px",width:"24px",height:"24px"},attrs:{"uk-icon":"icon: close; ratio: 2"},on:{click:e.backToOrigin}}):e._e()])])]):e._e(),e._v(" "),o("hr",{style:{margin:0}}),e._v(" "),o("div",{ref:"contentContainer",staticClass:"uk-height-expand uk-panel uk-overflow-auto uk-flex uk-flex-column",class:{"content-animated":e.currentComponent.options.animate}},[o("keep-alive",[o(e.currentComponent.name,{tag:"component",attrs:{options:e.currentComponent.options}})],1)],1)])},i=[]},2573:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isOpened?o("popover",{ref:"popover",staticClass:"topic-hyperlink-editor",attrs:{width:"280px",height:"140px","host-left":e.targetRect.left,"host-right":e.targetRect.right,"host-top":e.targetRect.top,"host-bottom":e.targetRect.bottom},on:{"popover:close":e.updateBehavior}},[o("div",{staticClass:"popover-content",on:{mousedown:function(e){e.stopPropagation()},click:function(e){e.preventDefault(),e.stopPropagation()}}},[o("h4",{staticClass:"uk-text-disabled uk-text-bold"},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.hyperlinkContent,expression:"hyperlinkContent"}],ref:"hyperlink-content-element",staticClass:"hyperlink-content",attrs:{spellcheck:"false"},domProps:{value:e.hyperlinkContent},on:{keydown:e.onKeyDown,input:function(t){t.target.composing||(e.hyperlinkContent=t.target.value)}}})])]):e._e()},i=[]},97755:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-column"},[o("h4",{staticClass:"uk-format-panel-section-heading"},[e._v("\n    "+e._s(e.$T("Style"))+"\n  ")]),e._v(" "),o("div",{staticClass:"uk-margin-small-top uk-flex uk-flex-start"},[o("div",[o("popover",{staticClass:"uk-flex-no-shrink",staticStyle:{width:"48px"},attrs:{"item-styles":"width: 47px;","toggle-classes":"uk-small-toggle uk-width-1-1 uk-padding-remove-left",pos:"left-center",title:e.$T("Choose the style of endpoint."),items:e.beginArrowShapes,value:e.uniqueSelectionBeginArrowShapes[0],"is-multiple":e.isSelectionBeginArrowMultiple},on:{input:e.handleSelectBeginArrowShape}}),e._v(" "),o("div",{staticClass:"uk-text-center uk-text-small uk-margin-xsmall-top"},[e._v("\n        "+e._s(e.$T("Start"))+"\n      ")])],1),e._v(" "),o("line-styles",{staticClass:"uk-margin-small-left uk-width-expand",attrs:{title:e.$T("Choose the line style."),value:e.uniqueSelectionLinePatterns[0],items:e.linePatterns},on:{input:e.handleSelectLinePatterns}}),e._v(" "),o("div",{staticClass:"uk-margin-small-left"},[o("popover",{staticClass:"uk-flex-no-shrink",staticStyle:{width:"48px"},attrs:{"item-styles":"width: 47px;","toggle-classes":"uk-small-toggle uk-width-1-1 uk-padding-remove-left",pos:"left-center",title:e.$T("Choose the style of endpoint."),items:e.endArrowShapes,value:e.uniqueSelectionEndArrowShapes[0],"is-multiple":e.isSelectionEndArrowMultiple},on:{input:e.handleSelectEndArrowShape}}),e._v(" "),o("div",{staticClass:"uk-text-center uk-text-small uk-margin-xsmall-top"},[e._v("\n        "+e._s(e.$T("End"))+"\n      ")])],1)],1)])},i=[]},8355:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"el",staticClass:"root-topic topic",attrs:{id:"topic-"+e.topicId},on:{contextmenu:e.openMenu}},[o("div",{staticStyle:{display:"flex"}},[o("topic-markers",{ref:"markers",attrs:{"topic-id":e.topicId,width:30}}),e._v(" "),o("span",{ref:"title",staticClass:"topic-inner-text",class:{"is-empty":e.isEmpty},attrs:{contenteditable:e.editable,placeholder:e.$T("Everything begins from your mind.")},on:{compositionstart:function(t){e.compositionStarted=!0},compositionend:function(t){e.compositionStarted=!1,e.$nextTick(e.input)},input:e.input,focus:e.onFocus,blur:e.onBlur,keydown:function(t){return e.onKeydown(t),e.refreshEmptyStatus()}}})],1),e._v(" "),o("div",{staticClass:"topic-inserts popover-target",staticStyle:{width:"100%"}},[o("topic-labels",{ref:"labels",attrs:{"topic-id":e.topicId}}),e._v(" "),o("topic-hyperlink",{ref:"hyperlink",attrs:{"topic-id":e.topicId}}),e._v(" "),o("topic-image",{ref:"image",attrs:{"topic-id":e.topicId}}),e._v(" "),o("topic-equation",{ref:"equation",attrs:{"topic-id":e.topicId}}),e._v(" "),o("topic-note",{ref:"notes",attrs:{"topic-id":e.topicId}})],1)])},i=[]},50580:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("popover",{ref:"popoverEl",attrs:{width:e.width+"px",height:e.height+"px","host-left":e.popoverLeft,"host-right":e.popoverRight,"host-top":e.popoverTop,"host-bottom":e.popoverBottom},on:{"popover:close":e.onPopoverClose}},[e._t("default")],2)},i=[]},52362:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel"},[e.options.isRoot||e.options.isMultiTypes?e._e():[o("div",{staticClass:"uk-format-panel-section"},[o("quick-styles",{attrs:{tooltip:e.$T("Update the selected topic style to the same level of topics or to all the topics.")}})],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"})],e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("topic-shape",{staticClass:"uk-format-panel-sub-section"})],1),e._v(" "),e._m(0),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("topic-fill"),e._v(" "),o("topic-border",{attrs:{"is-root-topic":e.options.isRoot}}),e._v(" "),o("topic-width")],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),o("font-styles"),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"}),e._v(" "),e.options.isMultiTypes?e._e():[o("div",{staticClass:"uk-format-panel-section"},[o("topic-structure",{attrs:{"is-root-topic":e.options.isRoot,"popover-pos":"left-center","popover-title":e.$T("Choose the topic structure.")}})],1),e._v(" "),o("hr",{staticClass:"uk-format-panel-divider"})],e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("branch-line-shape")],1),e._v(" "),e._m(1),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("branch-line-styles",{attrs:{"is-root-topic":e.options.isRoot}}),e._v(" "),e.options.isRoot&&!e.options.isMultiTypes?[o("multi-branch-colors",{staticClass:"uk-format-panel-sub-section"}),e._v(" "),o("tapered-line")]:e._e()],2),e._v(" "),o("div",{staticClass:"uk-format-panel-section"},[o("reset-button",{attrs:{"style-keys":e.STYLEKEYS}})],1)],2)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-format-panel-section uk-padding-remove-vertical"},[t("hr",{staticClass:"uk-format-panel-divider"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-format-panel-section uk-padding-remove-vertical"},[t("hr",{staticClass:"uk-format-panel-divider"})])}]},897:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex uk-flex-between uk-flex-middle",staticStyle:{height:"16px"}},[o("label",{staticClass:"uk-flex uk-flex-middle"},[o("input",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.isFillColorChecked},on:{input:e.handleCheckFillColor}}),e._v(" "),o("span",{staticClass:"uk-format-panel-sub-section-heading uk-format-panel-inline-ml"},[e._v(e._s(e.$T("Background Color")))])]),e._v(" "),e.isFillColorChecked?o("color-picker",{attrs:{value:e.computedFillColor},on:{input:e.handlePickUpFillColor}}):e._e()],1)},i=[]},88506:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("color-well",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.input"],expression:"['focus.input']",arg:"group"}],ref:"colorWellElement",staticStyle:{"min-width":"40px",width:"40px"},attrs:{"intermediate-value":"multi-color","grid-options":e.presetColors,"none-value":e.noneValue,title:e.$T("Click to choose a color."),value:e.computedInternalValue,"color-value-tooltips":e.$T("Set the color value (hex)."),"color-opacity-tooltips":e.$T("Set the opacity."),"color-selector-tooltips":e.$T("Click to show more colors or create your own."),"popover-pos":e.pos},on:{input:e.handleColorInput,"popover-hide":e.popoverHide,"recent-color-change":e.recentColorChange}},[e.recentlyUsedColors.length>0?o("div",{attrs:{slot:"bottom"},slot:"bottom"},[o("hr",{staticClass:"uk-format-panel-divider",staticStyle:{margin:"4px 0"}}),e._v(" "),o("div",{staticClass:"uk-padding-small"},[o("div",{staticStyle:{"margin-bottom":"4px"}},[e._v(e._s(e.$T("Recently Used")))]),e._v(" "),o("color-wall",{attrs:{"grid-options":e.recentlyUsedColors,value:e.value},on:{input:e.handleColorInput}})],1)]):e._e()])},i=[]},72707:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isOpened?o("popover",{ref:"popover",attrs:{width:e.popoverSize.width,height:e.popoverSize.height,"host-top":e.topicRect.top,"host-bottom":e.topicRect.bottom,"host-left":e.topicRect.left,"host-right":e.topicRect.right},on:{"popover:close":function(t){e.isOpened=!1}}},[o("div",{staticClass:"uk-flex uk-flex-wrap uk-padding-small uk-child-separator",class:e.containerStyle},[o("div",{staticClass:"uk-flex uk-flex-row uk-flex-middle uk-flex-wrap",class:e.markersPadding},e._l(e.markers,(function(t){var n=t.id,i=t.url;return o("button",{key:n,staticClass:"uk-padding-xsmall uk-button uk-button-tile uk-button-icon uk-button-small",on:{mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(t){return t.stopPropagation(),e.changeMarker(n)}}},[o("img",{staticClass:"uk-background-center-center uk-background-norepeat",staticStyle:{height:"16px",width:"16px"},attrs:{draggable:"false","uk-img":"",src:i}})])})),0),e._v(" "),o("div",{class:e.deleteButtonPadding},[o("button",{staticClass:"uk-background-center-center uk-background-norepeat uk-button uk-button-tile uk-button-icon uk-icon uk-button-small uk-padding-xsmall",attrs:{"uk-icon":"icon: trash"},on:{mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(t){return t.stopPropagation(),e.removeMarker(e.selectedMarkerId)}}})])])]):e._e()},i=[]},62961:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-between uk-flex-middle"},[o("h4",{staticClass:"uk-format-panel-section-heading"},[e._v("\n    "+e._s(e.$T("Shape"))+"\n  ")]),e._v(" "),o("div",[o("popover",{attrs:{title:e.$T("Choose the summary shape."),items:e.summaryLineShapes,value:e.currentShapeClass,"is-multiple":e.isMultiple,"item-styles":e.itemStyles},on:{input:e.handleSummaryLineShapeSelect}})],1)])},i=[]},64711:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-format-panel-sub-section uk-flex-between uk-flex-middle"},[o("span",{staticClass:"uk-format-panel-section-heading"},[e._v(e._s(e.$T("Branch")))]),e._v(" "),o("div",[o("popover",{attrs:{value:e.currentSelectionLineClass,items:e.currentBranchLineItems,disabled:e.isBranchLineDisabled,"is-multiple":e.isBranchLineClassMultiple,"item-styles":e.itemStyles,title:e.$T("Choose the branch line.")},on:{input:e.handleLineClassInput}})],1)])},i=[]},93280:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-height-expand uk-panel uk-flex uk-flex-column"},[o("toolbar",{attrs:{"menu-options":e.menuOptions,"disabled-search":e.updateTrigger.sheetRendering,"disabled-replace":e.disabledReplace,"disabled-replace-all":e.disabledReplaceAll,"disabled-items":e.updateTrigger.isOutlinerMode?["relationship","boundary"]:[]},on:{replace:e.onReplace,replaceAll:e.onReplaceAll},model:{value:e.searchKeywords,callback:function(t){e.searchKeywords=t},expression:"searchKeywords"}}),e._v(" "),e.menuOptions.isCurrentMapMode||e.isSearchMode&&0===e.searchResult.length?o("hr",{staticClass:"uk-separator"}):e._e(),e._v(" "),e.isSearchMode&&0===e.searchResult.length?o("common-none-panel",{attrs:{type:"no-result","section-style":"margin-top: -30px;"}}):o("div",{ref:"containerEl",staticClass:"uk-height-expand uk-panel uk-overflow-auto uk-flex uk-flex-column",class:{"uk-disabled":e.updateTrigger.sheetRendering},staticStyle:{width:"100%"},style:{zIndex:0,opacity:e.updateTrigger.sheetRendering?.3:1}},[o("keep-alive",[o("tree-list-v2",{attrs:{items:e.isSearchMode?e.searchResult:e.workbook,"high-performance-mode":!e.isSearchMode,container:e.containerEl,width:e.panelWidth,striped:e.isSearchMode,"allow-direction-key":""},on:{click:e.onClick},scopedSlots:e._u([{key:"sheetTitle",fn:function(t){var n=t.data,i=t.offset;return[o("hr",{staticClass:"uk-separator"}),e._v(" "),o("button",{staticClass:"uk-tree-list-item uk-tree-list-solid-background",style:{"padding-left":i+"px"}},[e._v("\n            "+e._s(n.text)+"\n          ")]),e._v(" "),o("hr",{staticClass:"uk-separator"})]}},{key:"searchResult",fn:function(t){var n=t.data,i=t.onClick,r=t.checked;return[o("button",{staticClass:"uk-tree-list-item uk-width-1-1 uk-position-relative",class:{"uk-checked":r},staticStyle:{"padding-left":"16px"},style:{"padding-left":18+("topic"!==n.type?18:0)+"px"},on:{click:function(){return i(n)}}},["topic"!==n.type?o("img",{staticClass:"uk-icon uk-position-absolute",class:{"uk-checked":r},staticStyle:{top:"7px",left:"16px",opacity:"0.7"},attrs:{"uk-svg":"","data-src":e.$toResourceURL("static/images/search-panel-icon/"+n.type+".svg "),draggable:"false"}}):e._e(),e._v(" "),n.highlight?o("p",{staticClass:"uk-margin-remove",staticStyle:{"line-height":"1.4em"}},e._l(n.highlight,(function(t,n){var i=t.text,r=t.isHighlight;return o("span",{key:n,class:{"uk-tree-list-highlight":r}},[e._v(e._s(i))])})),0):o("p",{staticClass:"uk-margin-remove"},[e._v(e._s(n.text))])])]}}])})],1)],1)],1)},i=[]},1457:(e,t,o)=>{"use strict";o.d(t,{s:()=>n,x:()=>i});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"uk-flex uk-flex-between uk-flex-middle uk-flex-row",class:{"uk-format-panel-section":e.isPanelSection}},[o("div",{staticClass:"uk-flex uk-padding-remove-horizontal uk-width-1-1 uk-flex-middle uk-button uk-button-floating",staticStyle:{"border-radius":"8px"},style:{borderRadius:e.isWin?"0px":"8px","pointer-events":e.isPresetTopicQuickStyleAvailable?"auto":"none"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isTopicNameVisible&&!e.isUpdateButtonVisible,expression:"isTopicNameVisible && !isUpdateButtonVisible"}],staticClass:"uk-text-muted uk-flex-no-shrink uk-overflow-hidden",staticStyle:{"margin-left":"16px",width:"76px","text-overflow":"ellipsis","text-align":"left"}},[e.selectionTypes.includes("relationship")?o("span",[e._v(e._s(e.$T("Relationship")))]):e._e(),e._v(" "),e.selectionTypes.includes("boundary")?o("span",[e._v(e._s(e.$T("Boundary")))]):e._e(),e._v(" "),e.selectionTypes.includes("summaryTopic")?o("span",[e._v(e._s(e.$T("Summary")))]):e._e()]),e._v(" "),o("div",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:group",value:["focus.popover"],expression:"['focus.popover']",arg:"group"}],staticClass:"uk-width-1-1 uk-position-relative"},[o("div",{staticClass:"uk-flex uk-flex-middle uk-width-1-1 uk-position-relative uk-padding-small uk-padding-remove-horizontal",class:{"uk-flex-between":e.isPresetTopicQuickStyleAvailable,"uk-flex-center":!e.isPresetTopicQuickStyleAvailable},on:{click:function(t){return t.stopPropagation(),e.handlePreviewClicked(t)}}},[o("quick-styles-preview",{style:{"max-width":e.previewContainerMaxWidth+"px","min-width":e.isUpdateButtonVisible&&e.isTopicSelected?null:"120px"}}),e._v(" "),e.isPresetTopicQuickStyleAvailable?o("span",{staticClass:"uk-icon uk-margin-small-right",attrs:{"uk-icon":"icon: triangle-down",title:e.$T("Choose a style to add to the selected topic.")}}):e._e()],1),e._v(" "),o("span",{staticClass:"uk-position-absolute uk-position-bottom-center"}),e._v(" "),e.isPresetTopicQuickStyleAvailable?o("div",{ref:"presetStylesListElement",attrs:{"uk-popover":"pos: bottom-center;","data-sel-close":"ul > li > button"}},[o("ul",{staticClass:"uk-height-1-1 uk-list uk-margin-remove uk-overflow-auto uk-padding uk-padding-remove-horizontal"},e._l(e.presetTopicQuickStylesData,(function(t,n){return o("li",{key:n,staticClass:"uk-width-1-1 uk-button-tile uk-margin-remove uk-border-none",class:{"uk-active":!1},staticStyle:{padding:"8px 28px"},on:{click:function(o){return e.handleQuickStyleChanged(t.className)}}},[o("button",{staticClass:"uk-button uk-button-large uk-button-tile uk-width-1-1",class:{"uk-checked":t.checked},attrs:{autofocus:t.checked}},[o("div",{staticClass:"uk-padding-xsmall uk-text-center",staticStyle:{border:"1px solid","border-radius":"5px"},style:t.styles},[e._v("\n                "+e._s(e.$T("$$",e.THEMECLASSNAMEKEYMAP[t.className]))+"\n              ")])])])})),0)]):e._e()])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isUpdateButtonVisible,expression:"isUpdateButtonVisible"}],staticClass:"uk-margin-small-left"},[o("button",{directives:[{name:"focus-contexts",rawName:"v-focus-contexts:no",arg:"no"}],staticClass:"uk-button uk-button-small uk-button-primary",attrs:{title:e.tooltip},on:{click:e.handleShowPopoverOrUpdate}},[e._v("\n      "+e._s(e.$T("Update"))+"\n    ")]),e._v(" "),o("div",{ref:"popover",attrs:{"uk-popover":"pos: bottom-left;","data-sel-close":"[uk-menu] > li"}},[o("ul",{staticClass:"uk-overflow-auto  uk-text-nowrap uk-height-1-1",attrs:{"uk-menu":""}},[e.isSameSelectionLevels?o("li",[o("button",{attrs:{autofocus:""},on:{click:function(t){return e.handleUpdateToSameLevels()}}},[e._v("\n            "+e._s(e.$T("Update to All Level {} Topics").replace("{}",e.uniqueSelectionLayerLevels[0]))+"\n          ")])]):e._e(),e._v(" "),o("li",[o("button",{on:{click:function(t){return e.handleUpdateToAllLevels()}}},[e._v("\n            "+e._s(e.$T("Update to All Subtopics"))+"\n          ")])])])])])])},i=[]},97453:(e,t,o)=>{var n=o(28702);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("bb9da6aa",n,!0,{})},58326:(e,t,o)=>{var n=o(20425);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("006c5a11",n,!0,{})},22455:(e,t,o)=>{var n=o(76559);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("57262d12",n,!0,{})},75383:(e,t,o)=>{var n=o(82021);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("5fa872f4",n,!0,{})},18158:(e,t,o)=>{var n=o(62186);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("37edd644",n,!0,{})},61193:(e,t,o)=>{var n=o(54823);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("7222a156",n,!0,{})},91653:(e,t,o)=>{var n=o(98549);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("2210b8ba",n,!0,{})},70672:(e,t,o)=>{var n=o(34124);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("7e7727f3",n,!0,{})},63629:(e,t,o)=>{var n=o(70291);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("42650e48",n,!0,{})},43534:(e,t,o)=>{var n=o(46375);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("3928e397",n,!0,{})},21087:(e,t,o)=>{var n=o(22782);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("3dbeedb0",n,!0,{})},87572:(e,t,o)=>{var n=o(93400);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("4c9383ae",n,!0,{})},77473:(e,t,o)=>{var n=o(79564);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("18bc61d2",n,!0,{})},83193:(e,t,o)=>{var n=o(59904);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("7bc93b2e",n,!0,{})},57801:(e,t,o)=>{var n=o(13788);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("a3bd23e6",n,!0,{})},4140:(e,t,o)=>{var n=o(76156);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("81643f6a",n,!0,{})},60750:(e,t,o)=>{var n=o(26748);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("5d798920",n,!0,{})},76489:(e,t,o)=>{var n=o(6972);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("ff00895e",n,!0,{})},41878:(e,t,o)=>{var n=o(1881);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("e471080a",n,!0,{})},90225:(e,t,o)=>{var n=o(59614);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("5f117478",n,!0,{})},77240:(e,t,o)=>{var n=o(59398);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("54199808",n,!0,{})},42422:(e,t,o)=>{var n=o(63054);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("7e8d4346",n,!0,{})},80570:(e,t,o)=>{var n=o(75025);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("1c256312",n,!0,{})},3350:(e,t,o)=>{var n=o(51131);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("13256efc",n,!0,{})},43383:(e,t,o)=>{var n=o(59587);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("e040b2bc",n,!0,{})},89172:(e,t,o)=>{var n=o(74383);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("3d85c337",n,!0,{})},22130:(e,t,o)=>{var n=o(22265);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("1cdb526e",n,!0,{})},49776:(e,t,o)=>{var n=o(66731);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("5f26b507",n,!0,{})},26844:(e,t,o)=>{var n=o(34848);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("09b7042c",n,!0,{})},96279:(e,t,o)=>{var n=o(76591);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("e44b5df4",n,!0,{})},70578:(e,t,o)=>{var n=o(60037);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("e2c903d8",n,!0,{})},40590:(e,t,o)=>{var n=o(11252);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("56f1edf8",n,!0,{})},26770:(e,t,o)=>{var n=o(36227);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("9ae6d1ca",n,!0,{})},10629:(e,t,o)=>{var n=o(51888);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("d3ab7ba0",n,!0,{})},61512:(e,t,o)=>{var n=o(51882);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("d38b740c",n,!0,{})},10056:(e,t,o)=>{var n=o(43781);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("5c2d135e",n,!0,{})},27560:(e,t,o)=>{var n=o(93063);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("e551bf96",n,!0,{})},39413:(e,t,o)=>{var n=o(25727);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("d3446f16",n,!0,{})},29248:(e,t,o)=>{var n=o(60873);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("cee39088",n,!0,{})},64392:(e,t,o)=>{var n=o(40586);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("63792008",n,!0,{})},39079:(e,t,o)=>{var n=o(90140);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("15dbd3b2",n,!0,{})},97113:(e,t,o)=>{var n=o(55151);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("359fcc5a",n,!0,{})},23941:(e,t,o)=>{var n=o(35479);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("5d79df86",n,!0,{})},58426:(e,t,o)=>{var n=o(74330);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("3d812359",n,!0,{})},42357:e=>{"use strict";e.exports=require("assert")},23407:e=>{"use strict";e.exports=require("buffer")},27619:e=>{"use strict";e.exports=require("constants")},76417:e=>{"use strict";e.exports=require("crypto")},58933:e=>{"use strict";e.exports=require("electron")},28614:e=>{"use strict";e.exports=require("events")},52624:e=>{"use strict";e.exports=require("evernote")},35747:e=>{"use strict";e.exports=require("fs")},57211:e=>{"use strict";e.exports=require("https")},15720:e=>{"use strict";e.exports=require("ncp")},12087:e=>{"use strict";e.exports=require("os")},85622:e=>{"use strict";e.exports=require("path")},87525:e=>{"use strict";e.exports=require("posthtml")},61765:e=>{"use strict";e.exports=require("process")},94213:e=>{"use strict";e.exports=require("punycode")},71191:e=>{"use strict";e.exports=require("querystring")},92413:e=>{"use strict";e.exports=require("stream")},24304:e=>{"use strict";e.exports=require("string_decoder")},78835:e=>{"use strict";e.exports=require("url")},31669:e=>{"use strict";e.exports=require("util")},92184:e=>{"use strict";e.exports=require("vm")},45669:e=>{"use strict";e.exports=require("xmind-vana-osx-tokenizer")},24327:()=>{}},e=>{"use strict";e.O(0,[8388,8592,5586,4736,2862,2872,5055,2470,5933,8606,7489],(()=>{return t=33869,e(e.s=t);var t}));var t=e.O();module.exports=t}]);