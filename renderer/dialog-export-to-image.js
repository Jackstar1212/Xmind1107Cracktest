(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[495],{58883:(t,e,a)=>{"use strict";var s=a(95318);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var r=s(a(71191)),o=a(48932),n=s(a(7322)),i=a(99492),u=s(a(24678));const l=r.default.parse(window.location.search.slice(1));var c={mixins:[n.default],data(){return{exportType:l.type||"png",exportContentScope:0,exportScale:1,exportTransparent:!1,iconWarning:this.$toResourceURL("static/images/dialog-export-to-image/warning.svg"),iconLock:this.$toResourceURL("static/images/dialog-export-to-image/lock.svg"),exportAvailableScales:["100%","200%","300%"]}},computed:{exportContentScopeTypes(){return[this.$T("Current Map"),this.$T("Whole Workbook")]},heading(){return{png:this.$T("Export to PNG"),svg:this.$T("Export to SVG")}},validSubState:{get(){return this.$store.getters["activation/status"]===o.ACTIVATION_STATUS.VALID},set(){throw new Error("Not allow set subState.")}},bigMindMap(){return Math.max(l.bound[0],l.bound[1])*this.exportScale>3e4},touchBarItems(){return[{type:"space",size:"flexible"},{type:"button",label:this.$T("Cancel"),click:"close"},{type:"button",label:this.$T("Export"),backgroundColor:"primary",click:"doExport"},{type:"space",size:"flexible"}].filter(Boolean)}},watch:{async exportScale(t){t>1&&!await this.handlerForLimitedFeature()&&(this.exportScale=1)}},methods:{doExport(){const t={contentScope:this.exportContentScope,transparent:this.exportTransparent,type:this.exportType};"png"===this.exportType&&Object.assign(t,{scale:this.exportScale}),this.$safeRun((()=>{u.default.fetch((0,i.WINDOW_SUBMIT_RESULT)(window.id),t).then((()=>window.close()))}))},cancel(){window.close()},handlerForLimitedFeature:async()=>u.default.fetch(i.FEATURE_TRIAL_REQUEST,"action.export2ScaleImage")},components:{WatermarkTemplate:{render(t){const e=this.$T("activating XMind"),a=this.$T("Watermark will be displayed before $1.",e),s=t("span",{class:"uk-button-link",on:{click:()=>u.default.fetch(i.WINDOW_OPEN,{name:"dialog-activate"})}},e),r=a.split(e).map((e=>t("span",e)));return t("div",{class:"uk-text-muted"},[r[0],s,r[1]])}}}};e.Z=c},7322:(t,e,a)=>{"use strict";var s=a(95318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(a(59713)),o=a(48932),n=a(99492),i=a(36414),u=s(a(24678));function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){(0,r.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={computed:{},watch:{touchBarItems(t){this.updateTouchBarItems(t)}},methods:{updateTouchBarItems(t){const e=t=>{const e=t.click;let a=this._touchBarRoutes[e];return a||(a={method:e,endpoint:(0,n.WINDOW_CALLBACK)(window.id,(0,i.hyphenate)(e))},this._touchBarRoutes[e]=a),a.unroute||(a.unroute=u.default.route(a.endpoint,this[e])),Object.assign({},t,{click:a.endpoint})};t=(t||this.touchBarItems||[]).map((t=>("button"!==t.type||"string"!=typeof t.click||o.WINDOW_ACTIONS.includes(t.click)||t.click.startsWith("command:")?"buttons"===t.type&&(t=c(c({},t),{},{buttons:t.buttons.map((t=>"string"!=typeof t.click||o.WINDOW_ACTIONS.includes(t.click)||t.click.startsWith("command:")?t:e(t)))})):t=e(t),t))),this.$store.commit("window/updateTouchBarItems",{items:t})}},beforeCreate(){this._touchBarRoutes={}},mounted(){this.updateTouchBarItems()},beforeDestroy(){Object.values(this._touchBarRoutes).forEach((({unroute:t})=>t&&t())),this._touchBarRoutes={}}};e.default=p},16513:(t,e,a)=>{"use strict";var s=a(95318),r=s(a(2872)),o=s(a(14787));(0,r.default)(o.default,{name:"dialog-export-to-image"})},27941:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var s=a(94015),r=a.n(s),o=a(23645),n=a.n(o)()(r());n.push([t.id,"\n.uk-form-aligned > div > .uk-form-label[data-v-67d2c1fa] {\n  width: 146px;\n}\n","",{version:3,sources:["webpack://./app/renderer/pages/dialog-export-to-image/app.vue"],names:[],mappings:";AACA;EACE,YAAY;AACd",sourcesContent:["\n.uk-form-aligned > div > .uk-form-label[data-v-67d2c1fa] {\n  width: 146px;\n}\n"],sourceRoot:""}]);const i=n},14787:(t,e,a)=>{"use strict";a.r(e),a.d(e,{__esModule:()=>s.X,default:()=>o});var s=a(58883);var r=function(t){a(39624)};const o=(0,a(62236).Z)(s.Z,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uk-window uk-window-dialog uk-window-dialog-default",attrs:{id:"app"}},[a("div",{staticClass:"uk-window-title-bar uk-window-title-bar-floating"},[a("window-control-button-group")],1),t._v(" "),a("div",{staticClass:"uk-window-body uk-flex uk-flex-column"},[a("div",{staticClass:"uk-panel uk-padding-large uk-flex uk-flex-column uk-height-expand"},[a("h1",[t._v("\n        "+t._s(t.heading[t.exportType])+"\n      ")]),t._v(" "),a("div",{staticClass:"uk-panel uk-form-aligned"},[a("div",{staticClass:"uk-margin-top uk-margin-small"},[a("label",{staticClass:"uk-form-label"},[t._v(t._s(t.$T("Content:")))]),t._v(" "),a("div",{staticClass:"uk-form-controls"},[a("button",{staticClass:"uk-button uk-button-popover-toggle uk-select-icon uk-text-left uk-width-small",staticStyle:{width:"176px"},attrs:{name:"content"}},[t._v("\n              "+t._s(t.exportContentScopeTypes[t.exportContentScope])+"\n            ")]),t._v(" "),a("div",{attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] button"}},[a("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},t._l(t.exportContentScopeTypes,(function(e,s){return a("li",{key:s},[a("button",{class:{"uk-checked":t.exportContentScope===s},on:{click:function(e){t.exportContentScope=s}}},[t._v("\n                    "+t._s(e)+"\n                  ")])])})),0)])])]),t._v(" "),a("div",[a("label",{staticClass:"uk-form-label"},[t._v(t._s(t.$T("Scale:")))]),t._v(" "),a("div",{staticClass:"uk-form-controls"},[a("button",{staticClass:"uk-button uk-button-popover-toggle uk-select-icon uk-text-left uk-width-small",staticStyle:{width:"176px"},attrs:{name:"scale",disabled:"svg"===t.exportType}},[t._v("\n              "+t._s(t.exportAvailableScales[t.exportScale-1])+"\n            ")]),t._v(" "),a("div",{attrs:{"uk-contextual-popover":"offsetLeft:20","data-sel-close":"[uk-menu] button"}},[a("ul",{staticClass:"uk-height-1-1 uk-overflow-auto",attrs:{"uk-menu":""}},t._l(t.exportAvailableScales,(function(e,s){return a("li",{key:s},[a("button",{class:{"uk-checked":t.exportScale===s+1},on:{click:function(e){t.exportScale=s+1}}},[t._v("\n                    "+t._s(e)+"\n                  ")])])})),0)]),t._v(" "),t.bigMindMap&&"png"===t.exportType?a("div",{staticClass:"uk-flex uk-margin-small"},[a("div",{staticClass:"uk-preserve uk-margin-xsmall-right",attrs:{"data-src":t.iconWarning,"uk-svg":""}}),t._v(" "),a("div",{staticClass:"uk-text-muted",staticStyle:{width:"280px"}},[t._v("\n                "+t._s(t.$T("The image size will be reduced because the currently set size is over the maximum."))+"\n              ")])]):t._e()])]),t._v(" "),a("div",{staticClass:"uk-margin-small"},[a("label",{staticClass:"uk-form-label"},[t._v(t._s(t.$T("Options:")))]),t._v(" "),a("div",{staticClass:"uk-form-controls uk-margin-xsmall-top"},[a("div",{staticClass:"uk-margin-small"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.exportTransparent,expression:"exportTransparent"}],staticClass:"uk-checkbox uk-margin-xsmall-right",attrs:{type:"checkbox",name:"transparent"},domProps:{checked:Array.isArray(t.exportTransparent)?t._i(t.exportTransparent,null)>-1:t.exportTransparent},on:{change:function(e){var a=t.exportTransparent,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&(t.exportTransparent=a.concat([null])):o>-1&&(t.exportTransparent=a.slice(0,o).concat(a.slice(o+1)))}else t.exportTransparent=r}}}),t._v("\n                "+t._s(t.$T("Transparent Background"))+"\n              ")])]),t._v(" "),t.validSubState||"png"!==t.exportType?t._e():a("div",[a("WatermarkTemplate")],1)])]),t._v(" "),"svg"===t.exportType?a("hr",{staticClass:"uk-margin-xsmall-bottom uk-separator"}):t._e(),t._v(" "),"svg"===t.exportType?a("div",{staticClass:"uk-flex-column uk-text-muted"},[t._v("\n          "+t._s(t.$T("For complete image display, please make sure the font has been installed."))+"\n        ")]):t._e()])])]),t._v(" "),a("div",{staticClass:"uk-window-button-bar"},[a("div",{staticClass:"uk-button-group"},[a("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"submit",autofocus:""},on:{click:t.doExport}},[t._v("\n        "+t._s(t.$T("Export"))+"\n      ")]),t._v(" "),a("button",{staticClass:"uk-button uk-button-default",attrs:{type:"button"},on:{click:t.cancel}},[t._v("\n        "+t._s(t.$T("Cancel"))+"\n      ")])])])])}),[],!1,r,"data-v-67d2c1fa",null).exports},39624:(t,e,a)=>{var s=a(27941);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(45346).Z)("54ef852f",s,!0,{})},76417:t=>{"use strict";t.exports=require("crypto")},58933:t=>{"use strict";t.exports=require("electron")},28614:t=>{"use strict";t.exports=require("events")},35747:t=>{"use strict";t.exports=require("fs")},12087:t=>{"use strict";t.exports=require("os")},85622:t=>{"use strict";t.exports=require("path")},87525:t=>{"use strict";t.exports=require("posthtml")},71191:t=>{"use strict";t.exports=require("querystring")},31669:t=>{"use strict";t.exports=require("util")}},t=>{"use strict";t.O(0,[8592,5586,4736,2872],(()=>{return e=16513,t(t.s=e);var e}));var e=t.O();module.exports=e}]);